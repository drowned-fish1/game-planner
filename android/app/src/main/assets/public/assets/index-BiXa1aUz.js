(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();var gl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function rh(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Kk={exports:{}},ih={},qk={exports:{}},Oe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hu=Symbol.for("react.element"),hD=Symbol.for("react.portal"),pD=Symbol.for("react.fragment"),mD=Symbol.for("react.strict_mode"),gD=Symbol.for("react.profiler"),yD=Symbol.for("react.provider"),vD=Symbol.for("react.context"),xD=Symbol.for("react.forward_ref"),wD=Symbol.for("react.suspense"),SD=Symbol.for("react.memo"),kD=Symbol.for("react.lazy"),Kx=Symbol.iterator;function bD(t){return t===null||typeof t!="object"?null:(t=Kx&&t[Kx]||t["@@iterator"],typeof t=="function"?t:null)}var Gk={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Xk=Object.assign,Jk={};function ia(t,e,n){this.props=t,this.context=e,this.refs=Jk,this.updater=n||Gk}ia.prototype.isReactComponent={};ia.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};ia.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Yk(){}Yk.prototype=ia.prototype;function B0(t,e,n){this.props=t,this.context=e,this.refs=Jk,this.updater=n||Gk}var j0=B0.prototype=new Yk;j0.constructor=B0;Xk(j0,ia.prototype);j0.isPureReactComponent=!0;var qx=Array.isArray,Qk=Object.prototype.hasOwnProperty,F0={current:null},Zk={key:!0,ref:!0,__self:!0,__source:!0};function eb(t,e,n){var r,i={},o=null,s=null;if(e!=null)for(r in e.ref!==void 0&&(s=e.ref),e.key!==void 0&&(o=""+e.key),e)Qk.call(e,r)&&!Zk.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var c=Array(a),f=0;f<a;f++)c[f]=arguments[f+2];i.children=c}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:Hu,type:t,key:o,ref:s,props:i,_owner:F0.current}}function CD(t,e){return{$$typeof:Hu,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function $0(t){return typeof t=="object"&&t!==null&&t.$$typeof===Hu}function ED(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Gx=/\/+/g;function tm(t,e){return typeof t=="object"&&t!==null&&t.key!=null?ED(""+t.key):e.toString(36)}function Cf(t,e,n,r,i){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var s=!1;if(t===null)s=!0;else switch(o){case"string":case"number":s=!0;break;case"object":switch(t.$$typeof){case Hu:case hD:s=!0}}if(s)return s=t,i=i(s),t=r===""?"."+tm(s,0):r,qx(i)?(n="",t!=null&&(n=t.replace(Gx,"$&/")+"/"),Cf(i,e,n,"",function(f){return f})):i!=null&&($0(i)&&(i=CD(i,n+(!i.key||s&&s.key===i.key?"":(""+i.key).replace(Gx,"$&/")+"/")+t)),e.push(i)),1;if(s=0,r=r===""?".":r+":",qx(t))for(var a=0;a<t.length;a++){o=t[a];var c=r+tm(o,a);s+=Cf(o,e,n,c,i)}else if(c=bD(t),typeof c=="function")for(t=c.call(t),a=0;!(o=t.next()).done;)o=o.value,c=r+tm(o,a++),s+=Cf(o,e,n,c,i);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return s}function Wc(t,e,n){if(t==null)return t;var r=[],i=0;return Cf(t,r,"","",function(o){return e.call(n,o,i++)}),r}function TD(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Nn={current:null},Ef={transition:null},MD={ReactCurrentDispatcher:Nn,ReactCurrentBatchConfig:Ef,ReactCurrentOwner:F0};function tb(){throw Error("act(...) is not supported in production builds of React.")}Oe.Children={map:Wc,forEach:function(t,e,n){Wc(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Wc(t,function(){e++}),e},toArray:function(t){return Wc(t,function(e){return e})||[]},only:function(t){if(!$0(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Oe.Component=ia;Oe.Fragment=pD;Oe.Profiler=gD;Oe.PureComponent=B0;Oe.StrictMode=mD;Oe.Suspense=wD;Oe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=MD;Oe.act=tb;Oe.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Xk({},t.props),i=t.key,o=t.ref,s=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,s=F0.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(c in e)Qk.call(e,c)&&!Zk.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&a!==void 0?a[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){a=Array(c);for(var f=0;f<c;f++)a[f]=arguments[f+2];r.children=a}return{$$typeof:Hu,type:t.type,key:i,ref:o,props:r,_owner:s}};Oe.createContext=function(t){return t={$$typeof:vD,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:yD,_context:t},t.Consumer=t};Oe.createElement=eb;Oe.createFactory=function(t){var e=eb.bind(null,t);return e.type=t,e};Oe.createRef=function(){return{current:null}};Oe.forwardRef=function(t){return{$$typeof:xD,render:t}};Oe.isValidElement=$0;Oe.lazy=function(t){return{$$typeof:kD,_payload:{_status:-1,_result:t},_init:TD}};Oe.memo=function(t,e){return{$$typeof:SD,type:t,compare:e===void 0?null:e}};Oe.startTransition=function(t){var e=Ef.transition;Ef.transition={};try{t()}finally{Ef.transition=e}};Oe.unstable_act=tb;Oe.useCallback=function(t,e){return Nn.current.useCallback(t,e)};Oe.useContext=function(t){return Nn.current.useContext(t)};Oe.useDebugValue=function(){};Oe.useDeferredValue=function(t){return Nn.current.useDeferredValue(t)};Oe.useEffect=function(t,e){return Nn.current.useEffect(t,e)};Oe.useId=function(){return Nn.current.useId()};Oe.useImperativeHandle=function(t,e,n){return Nn.current.useImperativeHandle(t,e,n)};Oe.useInsertionEffect=function(t,e){return Nn.current.useInsertionEffect(t,e)};Oe.useLayoutEffect=function(t,e){return Nn.current.useLayoutEffect(t,e)};Oe.useMemo=function(t,e){return Nn.current.useMemo(t,e)};Oe.useReducer=function(t,e,n){return Nn.current.useReducer(t,e,n)};Oe.useRef=function(t){return Nn.current.useRef(t)};Oe.useState=function(t){return Nn.current.useState(t)};Oe.useSyncExternalStore=function(t,e,n){return Nn.current.useSyncExternalStore(t,e,n)};Oe.useTransition=function(){return Nn.current.useTransition()};Oe.version="18.3.1";qk.exports=Oe;var se=qk.exports;const Ko=rh(se);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _D=se,ND=Symbol.for("react.element"),OD=Symbol.for("react.fragment"),AD=Object.prototype.hasOwnProperty,PD=_D.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,RD={key:!0,ref:!0,__self:!0,__source:!0};function nb(t,e,n){var r,i={},o=null,s=null;n!==void 0&&(o=""+n),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(s=e.ref);for(r in e)AD.call(e,r)&&!RD.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:ND,type:t,key:o,ref:s,props:i,_owner:PD.current}}ih.Fragment=OD;ih.jsx=nb;ih.jsxs=nb;Kk.exports=ih;var A=Kk.exports,dg={},rb={exports:{}},gr={},ib={exports:{}},ob={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(B,W){var G=B.length;B.push(W);e:for(;0<G;){var Q=G-1>>>1,ge=B[Q];if(0<i(ge,W))B[Q]=W,B[G]=ge,G=Q;else break e}}function n(B){return B.length===0?null:B[0]}function r(B){if(B.length===0)return null;var W=B[0],G=B.pop();if(G!==W){B[0]=G;e:for(var Q=0,ge=B.length,Ie=ge>>>1;Q<Ie;){var ft=2*(Q+1)-1,nt=B[ft],Ge=ft+1,Le=B[Ge];if(0>i(nt,G))Ge<ge&&0>i(Le,nt)?(B[Q]=Le,B[Ge]=G,Q=Ge):(B[Q]=nt,B[ft]=G,Q=ft);else if(Ge<ge&&0>i(Le,G))B[Q]=Le,B[Ge]=G,Q=Ge;else break e}}return W}function i(B,W){var G=B.sortIndex-W.sortIndex;return G!==0?G:B.id-W.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,a=s.now();t.unstable_now=function(){return s.now()-a}}var c=[],f=[],d=1,p=null,m=3,g=!1,v=!1,k=!1,b=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function E(B){for(var W=n(f);W!==null;){if(W.callback===null)r(f);else if(W.startTime<=B)r(f),W.sortIndex=W.expirationTime,e(c,W);else break;W=n(f)}}function _(B){if(k=!1,E(B),!v)if(n(c)!==null)v=!0,$e(M);else{var W=n(f);W!==null&&Re(_,W.startTime-B)}}function M(B,W){v=!1,k&&(k=!1,x(D),D=-1),g=!0;var G=m;try{for(E(W),p=n(c);p!==null&&(!(p.expirationTime>W)||B&&!ee());){var Q=p.callback;if(typeof Q=="function"){p.callback=null,m=p.priorityLevel;var ge=Q(p.expirationTime<=W);W=t.unstable_now(),typeof ge=="function"?p.callback=ge:p===n(c)&&r(c),E(W)}else r(c);p=n(c)}if(p!==null)var Ie=!0;else{var ft=n(f);ft!==null&&Re(_,ft.startTime-W),Ie=!1}return Ie}finally{p=null,m=G,g=!1}}var P=!1,O=null,D=-1,z=5,j=-1;function ee(){return!(t.unstable_now()-j<z)}function oe(){if(O!==null){var B=t.unstable_now();j=B;var W=!0;try{W=O(!0,B)}finally{W?he():(P=!1,O=null)}}else P=!1}var he;if(typeof w=="function")he=function(){w(oe)};else if(typeof MessageChannel<"u"){var _e=new MessageChannel,xe=_e.port2;_e.port1.onmessage=oe,he=function(){xe.postMessage(null)}}else he=function(){b(oe,0)};function $e(B){O=B,P||(P=!0,he())}function Re(B,W){D=b(function(){B(t.unstable_now())},W)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(B){B.callback=null},t.unstable_continueExecution=function(){v||g||(v=!0,$e(M))},t.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):z=0<B?Math.floor(1e3/B):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(B){switch(m){case 1:case 2:case 3:var W=3;break;default:W=m}var G=m;m=W;try{return B()}finally{m=G}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(B,W){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var G=m;m=B;try{return W()}finally{m=G}},t.unstable_scheduleCallback=function(B,W,G){var Q=t.unstable_now();switch(typeof G=="object"&&G!==null?(G=G.delay,G=typeof G=="number"&&0<G?Q+G:Q):G=Q,B){case 1:var ge=-1;break;case 2:ge=250;break;case 5:ge=1073741823;break;case 4:ge=1e4;break;default:ge=5e3}return ge=G+ge,B={id:d++,callback:W,priorityLevel:B,startTime:G,expirationTime:ge,sortIndex:-1},G>Q?(B.sortIndex=G,e(f,B),n(c)===null&&B===n(f)&&(k?(x(D),D=-1):k=!0,Re(_,G-Q))):(B.sortIndex=ge,e(c,B),v||g||(v=!0,$e(M))),B},t.unstable_shouldYield=ee,t.unstable_wrapCallback=function(B){var W=m;return function(){var G=m;m=W;try{return B.apply(this,arguments)}finally{m=G}}}})(ob);ib.exports=ob;var DD=ib.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ID=se,mr=DD;function J(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var sb=new Set,pu={};function Us(t,e){Ul(t,e),Ul(t+"Capture",e)}function Ul(t,e){for(pu[t]=e,t=0;t<e.length;t++)sb.add(e[t])}var Xi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),hg=Object.prototype.hasOwnProperty,LD=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Xx={},Jx={};function zD(t){return hg.call(Jx,t)?!0:hg.call(Xx,t)?!1:LD.test(t)?Jx[t]=!0:(Xx[t]=!0,!1)}function BD(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function jD(t,e,n,r){if(e===null||typeof e>"u"||BD(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function On(t,e,n,r,i,o,s){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=s}var Zt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Zt[t]=new On(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Zt[e]=new On(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Zt[t]=new On(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Zt[t]=new On(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Zt[t]=new On(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Zt[t]=new On(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Zt[t]=new On(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Zt[t]=new On(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Zt[t]=new On(t,5,!1,t.toLowerCase(),null,!1,!1)});var H0=/[\-:]([a-z])/g;function U0(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(H0,U0);Zt[e]=new On(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(H0,U0);Zt[e]=new On(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(H0,U0);Zt[e]=new On(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Zt[t]=new On(t,1,!1,t.toLowerCase(),null,!1,!1)});Zt.xlinkHref=new On("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Zt[t]=new On(t,1,!1,t.toLowerCase(),null,!0,!0)});function V0(t,e,n,r){var i=Zt.hasOwnProperty(e)?Zt[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(jD(e,n,i,r)&&(n=null),r||i===null?zD(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Zi=ID.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Kc=Symbol.for("react.element"),Sl=Symbol.for("react.portal"),kl=Symbol.for("react.fragment"),W0=Symbol.for("react.strict_mode"),pg=Symbol.for("react.profiler"),lb=Symbol.for("react.provider"),ab=Symbol.for("react.context"),K0=Symbol.for("react.forward_ref"),mg=Symbol.for("react.suspense"),gg=Symbol.for("react.suspense_list"),q0=Symbol.for("react.memo"),vo=Symbol.for("react.lazy"),ub=Symbol.for("react.offscreen"),Yx=Symbol.iterator;function Ma(t){return t===null||typeof t!="object"?null:(t=Yx&&t[Yx]||t["@@iterator"],typeof t=="function"?t:null)}var ut=Object.assign,nm;function ja(t){if(nm===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);nm=e&&e[1]||""}return`
`+nm+t}var rm=!1;function im(t,e){if(!t||rm)return"";rm=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(f){var r=f}Reflect.construct(t,[],e)}else{try{e.call()}catch(f){r=f}t.call(e.prototype)}else{try{throw Error()}catch(f){r=f}t()}}catch(f){if(f&&r&&typeof f.stack=="string"){for(var i=f.stack.split(`
`),o=r.stack.split(`
`),s=i.length-1,a=o.length-1;1<=s&&0<=a&&i[s]!==o[a];)a--;for(;1<=s&&0<=a;s--,a--)if(i[s]!==o[a]){if(s!==1||a!==1)do if(s--,a--,0>a||i[s]!==o[a]){var c=`
`+i[s].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=s&&0<=a);break}}}finally{rm=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?ja(t):""}function FD(t){switch(t.tag){case 5:return ja(t.type);case 16:return ja("Lazy");case 13:return ja("Suspense");case 19:return ja("SuspenseList");case 0:case 2:case 15:return t=im(t.type,!1),t;case 11:return t=im(t.type.render,!1),t;case 1:return t=im(t.type,!0),t;default:return""}}function yg(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case kl:return"Fragment";case Sl:return"Portal";case pg:return"Profiler";case W0:return"StrictMode";case mg:return"Suspense";case gg:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case ab:return(t.displayName||"Context")+".Consumer";case lb:return(t._context.displayName||"Context")+".Provider";case K0:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case q0:return e=t.displayName||null,e!==null?e:yg(t.type)||"Memo";case vo:e=t._payload,t=t._init;try{return yg(t(e))}catch{}}return null}function $D(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return yg(e);case 8:return e===W0?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function qo(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function cb(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function HD(t){var e=cb(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(s){r=""+s,o.call(this,s)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(s){r=""+s},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function qc(t){t._valueTracker||(t._valueTracker=HD(t))}function fb(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=cb(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function $f(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function vg(t,e){var n=e.checked;return ut({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Qx(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=qo(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function db(t,e){e=e.checked,e!=null&&V0(t,"checked",e,!1)}function xg(t,e){db(t,e);var n=qo(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?wg(t,e.type,n):e.hasOwnProperty("defaultValue")&&wg(t,e.type,qo(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Zx(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function wg(t,e,n){(e!=="number"||$f(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Fa=Array.isArray;function Il(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+qo(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Sg(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(J(91));return ut({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function ew(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(J(92));if(Fa(n)){if(1<n.length)throw Error(J(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:qo(n)}}function hb(t,e){var n=qo(e.value),r=qo(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function tw(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function pb(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function kg(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?pb(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Gc,mb=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Gc=Gc||document.createElement("div"),Gc.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Gc.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function mu(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Xa={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},UD=["Webkit","ms","Moz","O"];Object.keys(Xa).forEach(function(t){UD.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Xa[e]=Xa[t]})});function gb(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Xa.hasOwnProperty(t)&&Xa[t]?(""+e).trim():e+"px"}function yb(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=gb(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var VD=ut({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function bg(t,e){if(e){if(VD[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(J(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(J(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(J(61))}if(e.style!=null&&typeof e.style!="object")throw Error(J(62))}}function Cg(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Eg=null;function G0(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Tg=null,Ll=null,zl=null;function nw(t){if(t=Wu(t)){if(typeof Tg!="function")throw Error(J(280));var e=t.stateNode;e&&(e=uh(e),Tg(t.stateNode,t.type,e))}}function vb(t){Ll?zl?zl.push(t):zl=[t]:Ll=t}function xb(){if(Ll){var t=Ll,e=zl;if(zl=Ll=null,nw(t),e)for(t=0;t<e.length;t++)nw(e[t])}}function wb(t,e){return t(e)}function Sb(){}var om=!1;function kb(t,e,n){if(om)return t(e,n);om=!0;try{return wb(t,e,n)}finally{om=!1,(Ll!==null||zl!==null)&&(Sb(),xb())}}function gu(t,e){var n=t.stateNode;if(n===null)return null;var r=uh(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(J(231,e,typeof n));return n}var Mg=!1;if(Xi)try{var _a={};Object.defineProperty(_a,"passive",{get:function(){Mg=!0}}),window.addEventListener("test",_a,_a),window.removeEventListener("test",_a,_a)}catch{Mg=!1}function WD(t,e,n,r,i,o,s,a,c){var f=Array.prototype.slice.call(arguments,3);try{e.apply(n,f)}catch(d){this.onError(d)}}var Ja=!1,Hf=null,Uf=!1,_g=null,KD={onError:function(t){Ja=!0,Hf=t}};function qD(t,e,n,r,i,o,s,a,c){Ja=!1,Hf=null,WD.apply(KD,arguments)}function GD(t,e,n,r,i,o,s,a,c){if(qD.apply(this,arguments),Ja){if(Ja){var f=Hf;Ja=!1,Hf=null}else throw Error(J(198));Uf||(Uf=!0,_g=f)}}function Vs(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function bb(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function rw(t){if(Vs(t)!==t)throw Error(J(188))}function XD(t){var e=t.alternate;if(!e){if(e=Vs(t),e===null)throw Error(J(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var o=i.alternate;if(o===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return rw(i),t;if(o===r)return rw(i),e;o=o.sibling}throw Error(J(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,a=i.child;a;){if(a===n){s=!0,n=i,r=o;break}if(a===r){s=!0,r=i,n=o;break}a=a.sibling}if(!s){for(a=o.child;a;){if(a===n){s=!0,n=o,r=i;break}if(a===r){s=!0,r=o,n=i;break}a=a.sibling}if(!s)throw Error(J(189))}}if(n.alternate!==r)throw Error(J(190))}if(n.tag!==3)throw Error(J(188));return n.stateNode.current===n?t:e}function Cb(t){return t=XD(t),t!==null?Eb(t):null}function Eb(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Eb(t);if(e!==null)return e;t=t.sibling}return null}var Tb=mr.unstable_scheduleCallback,iw=mr.unstable_cancelCallback,JD=mr.unstable_shouldYield,YD=mr.unstable_requestPaint,bt=mr.unstable_now,QD=mr.unstable_getCurrentPriorityLevel,X0=mr.unstable_ImmediatePriority,Mb=mr.unstable_UserBlockingPriority,Vf=mr.unstable_NormalPriority,ZD=mr.unstable_LowPriority,_b=mr.unstable_IdlePriority,oh=null,wi=null;function eI(t){if(wi&&typeof wi.onCommitFiberRoot=="function")try{wi.onCommitFiberRoot(oh,t,void 0,(t.current.flags&128)===128)}catch{}}var ii=Math.clz32?Math.clz32:rI,tI=Math.log,nI=Math.LN2;function rI(t){return t>>>=0,t===0?32:31-(tI(t)/nI|0)|0}var Xc=64,Jc=4194304;function $a(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Wf(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,o=t.pingedLanes,s=n&268435455;if(s!==0){var a=s&~i;a!==0?r=$a(a):(o&=s,o!==0&&(r=$a(o)))}else s=n&~i,s!==0?r=$a(s):o!==0&&(r=$a(o));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,o=e&-e,i>=o||i===16&&(o&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-ii(e),i=1<<n,r|=t[n],e&=~i;return r}function iI(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function oI(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,o=t.pendingLanes;0<o;){var s=31-ii(o),a=1<<s,c=i[s];c===-1?(!(a&n)||a&r)&&(i[s]=iI(a,e)):c<=e&&(t.expiredLanes|=a),o&=~a}}function Ng(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Nb(){var t=Xc;return Xc<<=1,!(Xc&4194240)&&(Xc=64),t}function sm(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Uu(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-ii(e),t[e]=n}function sI(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-ii(n),o=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~o}}function J0(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-ii(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var We=0;function Ob(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Ab,Y0,Pb,Rb,Db,Og=!1,Yc=[],Ro=null,Do=null,Io=null,yu=new Map,vu=new Map,bo=[],lI="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ow(t,e){switch(t){case"focusin":case"focusout":Ro=null;break;case"dragenter":case"dragleave":Do=null;break;case"mouseover":case"mouseout":Io=null;break;case"pointerover":case"pointerout":yu.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":vu.delete(e.pointerId)}}function Na(t,e,n,r,i,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},e!==null&&(e=Wu(e),e!==null&&Y0(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function aI(t,e,n,r,i){switch(e){case"focusin":return Ro=Na(Ro,t,e,n,r,i),!0;case"dragenter":return Do=Na(Do,t,e,n,r,i),!0;case"mouseover":return Io=Na(Io,t,e,n,r,i),!0;case"pointerover":var o=i.pointerId;return yu.set(o,Na(yu.get(o)||null,t,e,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,vu.set(o,Na(vu.get(o)||null,t,e,n,r,i)),!0}return!1}function Ib(t){var e=xs(t.target);if(e!==null){var n=Vs(e);if(n!==null){if(e=n.tag,e===13){if(e=bb(n),e!==null){t.blockedOn=e,Db(t.priority,function(){Pb(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Tf(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Ag(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Eg=r,n.target.dispatchEvent(r),Eg=null}else return e=Wu(n),e!==null&&Y0(e),t.blockedOn=n,!1;e.shift()}return!0}function sw(t,e,n){Tf(t)&&n.delete(e)}function uI(){Og=!1,Ro!==null&&Tf(Ro)&&(Ro=null),Do!==null&&Tf(Do)&&(Do=null),Io!==null&&Tf(Io)&&(Io=null),yu.forEach(sw),vu.forEach(sw)}function Oa(t,e){t.blockedOn===e&&(t.blockedOn=null,Og||(Og=!0,mr.unstable_scheduleCallback(mr.unstable_NormalPriority,uI)))}function xu(t){function e(i){return Oa(i,t)}if(0<Yc.length){Oa(Yc[0],t);for(var n=1;n<Yc.length;n++){var r=Yc[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Ro!==null&&Oa(Ro,t),Do!==null&&Oa(Do,t),Io!==null&&Oa(Io,t),yu.forEach(e),vu.forEach(e),n=0;n<bo.length;n++)r=bo[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<bo.length&&(n=bo[0],n.blockedOn===null);)Ib(n),n.blockedOn===null&&bo.shift()}var Bl=Zi.ReactCurrentBatchConfig,Kf=!0;function cI(t,e,n,r){var i=We,o=Bl.transition;Bl.transition=null;try{We=1,Q0(t,e,n,r)}finally{We=i,Bl.transition=o}}function fI(t,e,n,r){var i=We,o=Bl.transition;Bl.transition=null;try{We=4,Q0(t,e,n,r)}finally{We=i,Bl.transition=o}}function Q0(t,e,n,r){if(Kf){var i=Ag(t,e,n,r);if(i===null)gm(t,e,r,qf,n),ow(t,r);else if(aI(i,t,e,n,r))r.stopPropagation();else if(ow(t,r),e&4&&-1<lI.indexOf(t)){for(;i!==null;){var o=Wu(i);if(o!==null&&Ab(o),o=Ag(t,e,n,r),o===null&&gm(t,e,r,qf,n),o===i)break;i=o}i!==null&&r.stopPropagation()}else gm(t,e,r,null,n)}}var qf=null;function Ag(t,e,n,r){if(qf=null,t=G0(r),t=xs(t),t!==null)if(e=Vs(t),e===null)t=null;else if(n=e.tag,n===13){if(t=bb(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return qf=t,null}function Lb(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(QD()){case X0:return 1;case Mb:return 4;case Vf:case ZD:return 16;case _b:return 536870912;default:return 16}default:return 16}}var Mo=null,Z0=null,Mf=null;function zb(){if(Mf)return Mf;var t,e=Z0,n=e.length,r,i="value"in Mo?Mo.value:Mo.textContent,o=i.length;for(t=0;t<n&&e[t]===i[t];t++);var s=n-t;for(r=1;r<=s&&e[n-r]===i[o-r];r++);return Mf=i.slice(t,1<r?1-r:void 0)}function _f(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Qc(){return!0}function lw(){return!1}function yr(t){function e(n,r,i,o,s){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=o,this.target=s,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(o):o[a]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?Qc:lw,this.isPropagationStopped=lw,this}return ut(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Qc)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Qc)},persist:function(){},isPersistent:Qc}),e}var oa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ey=yr(oa),Vu=ut({},oa,{view:0,detail:0}),dI=yr(Vu),lm,am,Aa,sh=ut({},Vu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ty,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Aa&&(Aa&&t.type==="mousemove"?(lm=t.screenX-Aa.screenX,am=t.screenY-Aa.screenY):am=lm=0,Aa=t),lm)},movementY:function(t){return"movementY"in t?t.movementY:am}}),aw=yr(sh),hI=ut({},sh,{dataTransfer:0}),pI=yr(hI),mI=ut({},Vu,{relatedTarget:0}),um=yr(mI),gI=ut({},oa,{animationName:0,elapsedTime:0,pseudoElement:0}),yI=yr(gI),vI=ut({},oa,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),xI=yr(vI),wI=ut({},oa,{data:0}),uw=yr(wI),SI={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},kI={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},bI={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function CI(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=bI[t])?!!e[t]:!1}function ty(){return CI}var EI=ut({},Vu,{key:function(t){if(t.key){var e=SI[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=_f(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?kI[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ty,charCode:function(t){return t.type==="keypress"?_f(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?_f(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),TI=yr(EI),MI=ut({},sh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),cw=yr(MI),_I=ut({},Vu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ty}),NI=yr(_I),OI=ut({},oa,{propertyName:0,elapsedTime:0,pseudoElement:0}),AI=yr(OI),PI=ut({},sh,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),RI=yr(PI),DI=[9,13,27,32],ny=Xi&&"CompositionEvent"in window,Ya=null;Xi&&"documentMode"in document&&(Ya=document.documentMode);var II=Xi&&"TextEvent"in window&&!Ya,Bb=Xi&&(!ny||Ya&&8<Ya&&11>=Ya),fw=" ",dw=!1;function jb(t,e){switch(t){case"keyup":return DI.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Fb(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var bl=!1;function LI(t,e){switch(t){case"compositionend":return Fb(e);case"keypress":return e.which!==32?null:(dw=!0,fw);case"textInput":return t=e.data,t===fw&&dw?null:t;default:return null}}function zI(t,e){if(bl)return t==="compositionend"||!ny&&jb(t,e)?(t=zb(),Mf=Z0=Mo=null,bl=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Bb&&e.locale!=="ko"?null:e.data;default:return null}}var BI={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function hw(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!BI[t.type]:e==="textarea"}function $b(t,e,n,r){vb(r),e=Gf(e,"onChange"),0<e.length&&(n=new ey("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Qa=null,wu=null;function jI(t){Qb(t,0)}function lh(t){var e=Tl(t);if(fb(e))return t}function FI(t,e){if(t==="change")return e}var Hb=!1;if(Xi){var cm;if(Xi){var fm="oninput"in document;if(!fm){var pw=document.createElement("div");pw.setAttribute("oninput","return;"),fm=typeof pw.oninput=="function"}cm=fm}else cm=!1;Hb=cm&&(!document.documentMode||9<document.documentMode)}function mw(){Qa&&(Qa.detachEvent("onpropertychange",Ub),wu=Qa=null)}function Ub(t){if(t.propertyName==="value"&&lh(wu)){var e=[];$b(e,wu,t,G0(t)),kb(jI,e)}}function $I(t,e,n){t==="focusin"?(mw(),Qa=e,wu=n,Qa.attachEvent("onpropertychange",Ub)):t==="focusout"&&mw()}function HI(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return lh(wu)}function UI(t,e){if(t==="click")return lh(e)}function VI(t,e){if(t==="input"||t==="change")return lh(e)}function WI(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var li=typeof Object.is=="function"?Object.is:WI;function Su(t,e){if(li(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!hg.call(e,i)||!li(t[i],e[i]))return!1}return!0}function gw(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function yw(t,e){var n=gw(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=gw(n)}}function Vb(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Vb(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Wb(){for(var t=window,e=$f();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=$f(t.document)}return e}function ry(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function KI(t){var e=Wb(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Vb(n.ownerDocument.documentElement,n)){if(r!==null&&ry(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=r.end===void 0?o:Math.min(r.end,i),!t.extend&&o>r&&(i=r,r=o,o=i),i=yw(n,o);var s=yw(n,r);i&&s&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==s.node||t.focusOffset!==s.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),o>r?(t.addRange(e),t.extend(s.node,s.offset)):(e.setEnd(s.node,s.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var qI=Xi&&"documentMode"in document&&11>=document.documentMode,Cl=null,Pg=null,Za=null,Rg=!1;function vw(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Rg||Cl==null||Cl!==$f(r)||(r=Cl,"selectionStart"in r&&ry(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Za&&Su(Za,r)||(Za=r,r=Gf(Pg,"onSelect"),0<r.length&&(e=new ey("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Cl)))}function Zc(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var El={animationend:Zc("Animation","AnimationEnd"),animationiteration:Zc("Animation","AnimationIteration"),animationstart:Zc("Animation","AnimationStart"),transitionend:Zc("Transition","TransitionEnd")},dm={},Kb={};Xi&&(Kb=document.createElement("div").style,"AnimationEvent"in window||(delete El.animationend.animation,delete El.animationiteration.animation,delete El.animationstart.animation),"TransitionEvent"in window||delete El.transitionend.transition);function ah(t){if(dm[t])return dm[t];if(!El[t])return t;var e=El[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Kb)return dm[t]=e[n];return t}var qb=ah("animationend"),Gb=ah("animationiteration"),Xb=ah("animationstart"),Jb=ah("transitionend"),Yb=new Map,xw="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Yo(t,e){Yb.set(t,e),Us(e,[t])}for(var hm=0;hm<xw.length;hm++){var pm=xw[hm],GI=pm.toLowerCase(),XI=pm[0].toUpperCase()+pm.slice(1);Yo(GI,"on"+XI)}Yo(qb,"onAnimationEnd");Yo(Gb,"onAnimationIteration");Yo(Xb,"onAnimationStart");Yo("dblclick","onDoubleClick");Yo("focusin","onFocus");Yo("focusout","onBlur");Yo(Jb,"onTransitionEnd");Ul("onMouseEnter",["mouseout","mouseover"]);Ul("onMouseLeave",["mouseout","mouseover"]);Ul("onPointerEnter",["pointerout","pointerover"]);Ul("onPointerLeave",["pointerout","pointerover"]);Us("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Us("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Us("onBeforeInput",["compositionend","keypress","textInput","paste"]);Us("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Us("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Us("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ha="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),JI=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ha));function ww(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,GD(r,e,void 0,t),t.currentTarget=null}function Qb(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var o=void 0;if(e)for(var s=r.length-1;0<=s;s--){var a=r[s],c=a.instance,f=a.currentTarget;if(a=a.listener,c!==o&&i.isPropagationStopped())break e;ww(i,a,f),o=c}else for(s=0;s<r.length;s++){if(a=r[s],c=a.instance,f=a.currentTarget,a=a.listener,c!==o&&i.isPropagationStopped())break e;ww(i,a,f),o=c}}}if(Uf)throw t=_g,Uf=!1,_g=null,t}function Ze(t,e){var n=e[Bg];n===void 0&&(n=e[Bg]=new Set);var r=t+"__bubble";n.has(r)||(Zb(e,t,2,!1),n.add(r))}function mm(t,e,n){var r=0;e&&(r|=4),Zb(n,t,r,e)}var ef="_reactListening"+Math.random().toString(36).slice(2);function ku(t){if(!t[ef]){t[ef]=!0,sb.forEach(function(n){n!=="selectionchange"&&(JI.has(n)||mm(n,!1,t),mm(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[ef]||(e[ef]=!0,mm("selectionchange",!1,e))}}function Zb(t,e,n,r){switch(Lb(e)){case 1:var i=cI;break;case 4:i=fI;break;default:i=Q0}n=i.bind(null,e,n,t),i=void 0,!Mg||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function gm(t,e,n,r,i){var o=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var s=r.tag;if(s===3||s===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(s===4)for(s=r.return;s!==null;){var c=s.tag;if((c===3||c===4)&&(c=s.stateNode.containerInfo,c===i||c.nodeType===8&&c.parentNode===i))return;s=s.return}for(;a!==null;){if(s=xs(a),s===null)return;if(c=s.tag,c===5||c===6){r=o=s;continue e}a=a.parentNode}}r=r.return}kb(function(){var f=o,d=G0(n),p=[];e:{var m=Yb.get(t);if(m!==void 0){var g=ey,v=t;switch(t){case"keypress":if(_f(n)===0)break e;case"keydown":case"keyup":g=TI;break;case"focusin":v="focus",g=um;break;case"focusout":v="blur",g=um;break;case"beforeblur":case"afterblur":g=um;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=aw;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=pI;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=NI;break;case qb:case Gb:case Xb:g=yI;break;case Jb:g=AI;break;case"scroll":g=dI;break;case"wheel":g=RI;break;case"copy":case"cut":case"paste":g=xI;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=cw}var k=(e&4)!==0,b=!k&&t==="scroll",x=k?m!==null?m+"Capture":null:m;k=[];for(var w=f,E;w!==null;){E=w;var _=E.stateNode;if(E.tag===5&&_!==null&&(E=_,x!==null&&(_=gu(w,x),_!=null&&k.push(bu(w,_,E)))),b)break;w=w.return}0<k.length&&(m=new g(m,v,null,n,d),p.push({event:m,listeners:k}))}}if(!(e&7)){e:{if(m=t==="mouseover"||t==="pointerover",g=t==="mouseout"||t==="pointerout",m&&n!==Eg&&(v=n.relatedTarget||n.fromElement)&&(xs(v)||v[Ji]))break e;if((g||m)&&(m=d.window===d?d:(m=d.ownerDocument)?m.defaultView||m.parentWindow:window,g?(v=n.relatedTarget||n.toElement,g=f,v=v?xs(v):null,v!==null&&(b=Vs(v),v!==b||v.tag!==5&&v.tag!==6)&&(v=null)):(g=null,v=f),g!==v)){if(k=aw,_="onMouseLeave",x="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(k=cw,_="onPointerLeave",x="onPointerEnter",w="pointer"),b=g==null?m:Tl(g),E=v==null?m:Tl(v),m=new k(_,w+"leave",g,n,d),m.target=b,m.relatedTarget=E,_=null,xs(d)===f&&(k=new k(x,w+"enter",v,n,d),k.target=E,k.relatedTarget=b,_=k),b=_,g&&v)t:{for(k=g,x=v,w=0,E=k;E;E=fl(E))w++;for(E=0,_=x;_;_=fl(_))E++;for(;0<w-E;)k=fl(k),w--;for(;0<E-w;)x=fl(x),E--;for(;w--;){if(k===x||x!==null&&k===x.alternate)break t;k=fl(k),x=fl(x)}k=null}else k=null;g!==null&&Sw(p,m,g,k,!1),v!==null&&b!==null&&Sw(p,b,v,k,!0)}}e:{if(m=f?Tl(f):window,g=m.nodeName&&m.nodeName.toLowerCase(),g==="select"||g==="input"&&m.type==="file")var M=FI;else if(hw(m))if(Hb)M=VI;else{M=HI;var P=$I}else(g=m.nodeName)&&g.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(M=UI);if(M&&(M=M(t,f))){$b(p,M,n,d);break e}P&&P(t,m,f),t==="focusout"&&(P=m._wrapperState)&&P.controlled&&m.type==="number"&&wg(m,"number",m.value)}switch(P=f?Tl(f):window,t){case"focusin":(hw(P)||P.contentEditable==="true")&&(Cl=P,Pg=f,Za=null);break;case"focusout":Za=Pg=Cl=null;break;case"mousedown":Rg=!0;break;case"contextmenu":case"mouseup":case"dragend":Rg=!1,vw(p,n,d);break;case"selectionchange":if(qI)break;case"keydown":case"keyup":vw(p,n,d)}var O;if(ny)e:{switch(t){case"compositionstart":var D="onCompositionStart";break e;case"compositionend":D="onCompositionEnd";break e;case"compositionupdate":D="onCompositionUpdate";break e}D=void 0}else bl?jb(t,n)&&(D="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(D="onCompositionStart");D&&(Bb&&n.locale!=="ko"&&(bl||D!=="onCompositionStart"?D==="onCompositionEnd"&&bl&&(O=zb()):(Mo=d,Z0="value"in Mo?Mo.value:Mo.textContent,bl=!0)),P=Gf(f,D),0<P.length&&(D=new uw(D,t,null,n,d),p.push({event:D,listeners:P}),O?D.data=O:(O=Fb(n),O!==null&&(D.data=O)))),(O=II?LI(t,n):zI(t,n))&&(f=Gf(f,"onBeforeInput"),0<f.length&&(d=new uw("onBeforeInput","beforeinput",null,n,d),p.push({event:d,listeners:f}),d.data=O))}Qb(p,e)})}function bu(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Gf(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=gu(t,n),o!=null&&r.unshift(bu(t,o,i)),o=gu(t,e),o!=null&&r.push(bu(t,o,i))),t=t.return}return r}function fl(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Sw(t,e,n,r,i){for(var o=e._reactName,s=[];n!==null&&n!==r;){var a=n,c=a.alternate,f=a.stateNode;if(c!==null&&c===r)break;a.tag===5&&f!==null&&(a=f,i?(c=gu(n,o),c!=null&&s.unshift(bu(n,c,a))):i||(c=gu(n,o),c!=null&&s.push(bu(n,c,a)))),n=n.return}s.length!==0&&t.push({event:e,listeners:s})}var YI=/\r\n?/g,QI=/\u0000|\uFFFD/g;function kw(t){return(typeof t=="string"?t:""+t).replace(YI,`
`).replace(QI,"")}function tf(t,e,n){if(e=kw(e),kw(t)!==e&&n)throw Error(J(425))}function Xf(){}var Dg=null,Ig=null;function Lg(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var zg=typeof setTimeout=="function"?setTimeout:void 0,ZI=typeof clearTimeout=="function"?clearTimeout:void 0,bw=typeof Promise=="function"?Promise:void 0,eL=typeof queueMicrotask=="function"?queueMicrotask:typeof bw<"u"?function(t){return bw.resolve(null).then(t).catch(tL)}:zg;function tL(t){setTimeout(function(){throw t})}function ym(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),xu(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);xu(e)}function Lo(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Cw(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var sa=Math.random().toString(36).slice(2),xi="__reactFiber$"+sa,Cu="__reactProps$"+sa,Ji="__reactContainer$"+sa,Bg="__reactEvents$"+sa,nL="__reactListeners$"+sa,rL="__reactHandles$"+sa;function xs(t){var e=t[xi];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Ji]||n[xi]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Cw(t);t!==null;){if(n=t[xi])return n;t=Cw(t)}return e}t=n,n=t.parentNode}return null}function Wu(t){return t=t[xi]||t[Ji],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Tl(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(J(33))}function uh(t){return t[Cu]||null}var jg=[],Ml=-1;function Qo(t){return{current:t}}function tt(t){0>Ml||(t.current=jg[Ml],jg[Ml]=null,Ml--)}function Je(t,e){Ml++,jg[Ml]=t.current,t.current=e}var Go={},fn=Qo(Go),Wn=Qo(!1),Rs=Go;function Vl(t,e){var n=t.type.contextTypes;if(!n)return Go;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in n)i[o]=e[o];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Kn(t){return t=t.childContextTypes,t!=null}function Jf(){tt(Wn),tt(fn)}function Ew(t,e,n){if(fn.current!==Go)throw Error(J(168));Je(fn,e),Je(Wn,n)}function eC(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(J(108,$D(t)||"Unknown",i));return ut({},n,r)}function Yf(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Go,Rs=fn.current,Je(fn,t),Je(Wn,Wn.current),!0}function Tw(t,e,n){var r=t.stateNode;if(!r)throw Error(J(169));n?(t=eC(t,e,Rs),r.__reactInternalMemoizedMergedChildContext=t,tt(Wn),tt(fn),Je(fn,t)):tt(Wn),Je(Wn,n)}var Hi=null,ch=!1,vm=!1;function tC(t){Hi===null?Hi=[t]:Hi.push(t)}function iL(t){ch=!0,tC(t)}function Zo(){if(!vm&&Hi!==null){vm=!0;var t=0,e=We;try{var n=Hi;for(We=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Hi=null,ch=!1}catch(i){throw Hi!==null&&(Hi=Hi.slice(t+1)),Tb(X0,Zo),i}finally{We=e,vm=!1}}return null}var _l=[],Nl=0,Qf=null,Zf=0,Ir=[],Lr=0,Ds=null,Ui=1,Vi="";function gs(t,e){_l[Nl++]=Zf,_l[Nl++]=Qf,Qf=t,Zf=e}function nC(t,e,n){Ir[Lr++]=Ui,Ir[Lr++]=Vi,Ir[Lr++]=Ds,Ds=t;var r=Ui;t=Vi;var i=32-ii(r)-1;r&=~(1<<i),n+=1;var o=32-ii(e)+i;if(30<o){var s=i-i%5;o=(r&(1<<s)-1).toString(32),r>>=s,i-=s,Ui=1<<32-ii(e)+i|n<<i|r,Vi=o+t}else Ui=1<<o|n<<i|r,Vi=t}function iy(t){t.return!==null&&(gs(t,1),nC(t,1,0))}function oy(t){for(;t===Qf;)Qf=_l[--Nl],_l[Nl]=null,Zf=_l[--Nl],_l[Nl]=null;for(;t===Ds;)Ds=Ir[--Lr],Ir[Lr]=null,Vi=Ir[--Lr],Ir[Lr]=null,Ui=Ir[--Lr],Ir[Lr]=null}var dr=null,fr=null,it=!1,ti=null;function rC(t,e){var n=Br(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Mw(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,dr=t,fr=Lo(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,dr=t,fr=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Ds!==null?{id:Ui,overflow:Vi}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Br(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,dr=t,fr=null,!0):!1;default:return!1}}function Fg(t){return(t.mode&1)!==0&&(t.flags&128)===0}function $g(t){if(it){var e=fr;if(e){var n=e;if(!Mw(t,e)){if(Fg(t))throw Error(J(418));e=Lo(n.nextSibling);var r=dr;e&&Mw(t,e)?rC(r,n):(t.flags=t.flags&-4097|2,it=!1,dr=t)}}else{if(Fg(t))throw Error(J(418));t.flags=t.flags&-4097|2,it=!1,dr=t}}}function _w(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;dr=t}function nf(t){if(t!==dr)return!1;if(!it)return _w(t),it=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Lg(t.type,t.memoizedProps)),e&&(e=fr)){if(Fg(t))throw iC(),Error(J(418));for(;e;)rC(t,e),e=Lo(e.nextSibling)}if(_w(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(J(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){fr=Lo(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}fr=null}}else fr=dr?Lo(t.stateNode.nextSibling):null;return!0}function iC(){for(var t=fr;t;)t=Lo(t.nextSibling)}function Wl(){fr=dr=null,it=!1}function sy(t){ti===null?ti=[t]:ti.push(t)}var oL=Zi.ReactCurrentBatchConfig;function Pa(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(J(309));var r=n.stateNode}if(!r)throw Error(J(147,t));var i=r,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(s){var a=i.refs;s===null?delete a[o]:a[o]=s},e._stringRef=o,e)}if(typeof t!="string")throw Error(J(284));if(!n._owner)throw Error(J(290,t))}return t}function rf(t,e){throw t=Object.prototype.toString.call(e),Error(J(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Nw(t){var e=t._init;return e(t._payload)}function oC(t){function e(x,w){if(t){var E=x.deletions;E===null?(x.deletions=[w],x.flags|=16):E.push(w)}}function n(x,w){if(!t)return null;for(;w!==null;)e(x,w),w=w.sibling;return null}function r(x,w){for(x=new Map;w!==null;)w.key!==null?x.set(w.key,w):x.set(w.index,w),w=w.sibling;return x}function i(x,w){return x=Fo(x,w),x.index=0,x.sibling=null,x}function o(x,w,E){return x.index=E,t?(E=x.alternate,E!==null?(E=E.index,E<w?(x.flags|=2,w):E):(x.flags|=2,w)):(x.flags|=1048576,w)}function s(x){return t&&x.alternate===null&&(x.flags|=2),x}function a(x,w,E,_){return w===null||w.tag!==6?(w=Em(E,x.mode,_),w.return=x,w):(w=i(w,E),w.return=x,w)}function c(x,w,E,_){var M=E.type;return M===kl?d(x,w,E.props.children,_,E.key):w!==null&&(w.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===vo&&Nw(M)===w.type)?(_=i(w,E.props),_.ref=Pa(x,w,E),_.return=x,_):(_=If(E.type,E.key,E.props,null,x.mode,_),_.ref=Pa(x,w,E),_.return=x,_)}function f(x,w,E,_){return w===null||w.tag!==4||w.stateNode.containerInfo!==E.containerInfo||w.stateNode.implementation!==E.implementation?(w=Tm(E,x.mode,_),w.return=x,w):(w=i(w,E.children||[]),w.return=x,w)}function d(x,w,E,_,M){return w===null||w.tag!==7?(w=Ms(E,x.mode,_,M),w.return=x,w):(w=i(w,E),w.return=x,w)}function p(x,w,E){if(typeof w=="string"&&w!==""||typeof w=="number")return w=Em(""+w,x.mode,E),w.return=x,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Kc:return E=If(w.type,w.key,w.props,null,x.mode,E),E.ref=Pa(x,null,w),E.return=x,E;case Sl:return w=Tm(w,x.mode,E),w.return=x,w;case vo:var _=w._init;return p(x,_(w._payload),E)}if(Fa(w)||Ma(w))return w=Ms(w,x.mode,E,null),w.return=x,w;rf(x,w)}return null}function m(x,w,E,_){var M=w!==null?w.key:null;if(typeof E=="string"&&E!==""||typeof E=="number")return M!==null?null:a(x,w,""+E,_);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Kc:return E.key===M?c(x,w,E,_):null;case Sl:return E.key===M?f(x,w,E,_):null;case vo:return M=E._init,m(x,w,M(E._payload),_)}if(Fa(E)||Ma(E))return M!==null?null:d(x,w,E,_,null);rf(x,E)}return null}function g(x,w,E,_,M){if(typeof _=="string"&&_!==""||typeof _=="number")return x=x.get(E)||null,a(w,x,""+_,M);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Kc:return x=x.get(_.key===null?E:_.key)||null,c(w,x,_,M);case Sl:return x=x.get(_.key===null?E:_.key)||null,f(w,x,_,M);case vo:var P=_._init;return g(x,w,E,P(_._payload),M)}if(Fa(_)||Ma(_))return x=x.get(E)||null,d(w,x,_,M,null);rf(w,_)}return null}function v(x,w,E,_){for(var M=null,P=null,O=w,D=w=0,z=null;O!==null&&D<E.length;D++){O.index>D?(z=O,O=null):z=O.sibling;var j=m(x,O,E[D],_);if(j===null){O===null&&(O=z);break}t&&O&&j.alternate===null&&e(x,O),w=o(j,w,D),P===null?M=j:P.sibling=j,P=j,O=z}if(D===E.length)return n(x,O),it&&gs(x,D),M;if(O===null){for(;D<E.length;D++)O=p(x,E[D],_),O!==null&&(w=o(O,w,D),P===null?M=O:P.sibling=O,P=O);return it&&gs(x,D),M}for(O=r(x,O);D<E.length;D++)z=g(O,x,D,E[D],_),z!==null&&(t&&z.alternate!==null&&O.delete(z.key===null?D:z.key),w=o(z,w,D),P===null?M=z:P.sibling=z,P=z);return t&&O.forEach(function(ee){return e(x,ee)}),it&&gs(x,D),M}function k(x,w,E,_){var M=Ma(E);if(typeof M!="function")throw Error(J(150));if(E=M.call(E),E==null)throw Error(J(151));for(var P=M=null,O=w,D=w=0,z=null,j=E.next();O!==null&&!j.done;D++,j=E.next()){O.index>D?(z=O,O=null):z=O.sibling;var ee=m(x,O,j.value,_);if(ee===null){O===null&&(O=z);break}t&&O&&ee.alternate===null&&e(x,O),w=o(ee,w,D),P===null?M=ee:P.sibling=ee,P=ee,O=z}if(j.done)return n(x,O),it&&gs(x,D),M;if(O===null){for(;!j.done;D++,j=E.next())j=p(x,j.value,_),j!==null&&(w=o(j,w,D),P===null?M=j:P.sibling=j,P=j);return it&&gs(x,D),M}for(O=r(x,O);!j.done;D++,j=E.next())j=g(O,x,D,j.value,_),j!==null&&(t&&j.alternate!==null&&O.delete(j.key===null?D:j.key),w=o(j,w,D),P===null?M=j:P.sibling=j,P=j);return t&&O.forEach(function(oe){return e(x,oe)}),it&&gs(x,D),M}function b(x,w,E,_){if(typeof E=="object"&&E!==null&&E.type===kl&&E.key===null&&(E=E.props.children),typeof E=="object"&&E!==null){switch(E.$$typeof){case Kc:e:{for(var M=E.key,P=w;P!==null;){if(P.key===M){if(M=E.type,M===kl){if(P.tag===7){n(x,P.sibling),w=i(P,E.props.children),w.return=x,x=w;break e}}else if(P.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===vo&&Nw(M)===P.type){n(x,P.sibling),w=i(P,E.props),w.ref=Pa(x,P,E),w.return=x,x=w;break e}n(x,P);break}else e(x,P);P=P.sibling}E.type===kl?(w=Ms(E.props.children,x.mode,_,E.key),w.return=x,x=w):(_=If(E.type,E.key,E.props,null,x.mode,_),_.ref=Pa(x,w,E),_.return=x,x=_)}return s(x);case Sl:e:{for(P=E.key;w!==null;){if(w.key===P)if(w.tag===4&&w.stateNode.containerInfo===E.containerInfo&&w.stateNode.implementation===E.implementation){n(x,w.sibling),w=i(w,E.children||[]),w.return=x,x=w;break e}else{n(x,w);break}else e(x,w);w=w.sibling}w=Tm(E,x.mode,_),w.return=x,x=w}return s(x);case vo:return P=E._init,b(x,w,P(E._payload),_)}if(Fa(E))return v(x,w,E,_);if(Ma(E))return k(x,w,E,_);rf(x,E)}return typeof E=="string"&&E!==""||typeof E=="number"?(E=""+E,w!==null&&w.tag===6?(n(x,w.sibling),w=i(w,E),w.return=x,x=w):(n(x,w),w=Em(E,x.mode,_),w.return=x,x=w),s(x)):n(x,w)}return b}var Kl=oC(!0),sC=oC(!1),ed=Qo(null),td=null,Ol=null,ly=null;function ay(){ly=Ol=td=null}function uy(t){var e=ed.current;tt(ed),t._currentValue=e}function Hg(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function jl(t,e){td=t,ly=Ol=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Vn=!0),t.firstContext=null)}function Hr(t){var e=t._currentValue;if(ly!==t)if(t={context:t,memoizedValue:e,next:null},Ol===null){if(td===null)throw Error(J(308));Ol=t,td.dependencies={lanes:0,firstContext:t}}else Ol=Ol.next=t;return e}var ws=null;function cy(t){ws===null?ws=[t]:ws.push(t)}function lC(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,cy(e)):(n.next=i.next,i.next=n),e.interleaved=n,Yi(t,r)}function Yi(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var xo=!1;function fy(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function aC(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Ki(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function zo(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,ze&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Yi(t,n)}return i=r.interleaved,i===null?(e.next=e,cy(r)):(e.next=i.next,i.next=e),r.interleaved=e,Yi(t,n)}function Nf(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,J0(t,n)}}function Ow(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?i=o=s:o=o.next=s,n=n.next}while(n!==null);o===null?i=o=e:o=o.next=e}else i=o=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function nd(t,e,n,r){var i=t.updateQueue;xo=!1;var o=i.firstBaseUpdate,s=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var c=a,f=c.next;c.next=null,s===null?o=f:s.next=f,s=c;var d=t.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==s&&(a===null?d.firstBaseUpdate=f:a.next=f,d.lastBaseUpdate=c))}if(o!==null){var p=i.baseState;s=0,d=f=c=null,a=o;do{var m=a.lane,g=a.eventTime;if((r&m)===m){d!==null&&(d=d.next={eventTime:g,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var v=t,k=a;switch(m=e,g=n,k.tag){case 1:if(v=k.payload,typeof v=="function"){p=v.call(g,p,m);break e}p=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=k.payload,m=typeof v=="function"?v.call(g,p,m):v,m==null)break e;p=ut({},p,m);break e;case 2:xo=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,m=i.effects,m===null?i.effects=[a]:m.push(a))}else g={eventTime:g,lane:m,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(f=d=g,c=p):d=d.next=g,s|=m;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;m=a,a=m.next,m.next=null,i.lastBaseUpdate=m,i.shared.pending=null}}while(!0);if(d===null&&(c=p),i.baseState=c,i.firstBaseUpdate=f,i.lastBaseUpdate=d,e=i.shared.interleaved,e!==null){i=e;do s|=i.lane,i=i.next;while(i!==e)}else o===null&&(i.shared.lanes=0);Ls|=s,t.lanes=s,t.memoizedState=p}}function Aw(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(J(191,i));i.call(r)}}}var Ku={},Si=Qo(Ku),Eu=Qo(Ku),Tu=Qo(Ku);function Ss(t){if(t===Ku)throw Error(J(174));return t}function dy(t,e){switch(Je(Tu,e),Je(Eu,t),Je(Si,Ku),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:kg(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=kg(e,t)}tt(Si),Je(Si,e)}function ql(){tt(Si),tt(Eu),tt(Tu)}function uC(t){Ss(Tu.current);var e=Ss(Si.current),n=kg(e,t.type);e!==n&&(Je(Eu,t),Je(Si,n))}function hy(t){Eu.current===t&&(tt(Si),tt(Eu))}var st=Qo(0);function rd(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var xm=[];function py(){for(var t=0;t<xm.length;t++)xm[t]._workInProgressVersionPrimary=null;xm.length=0}var Of=Zi.ReactCurrentDispatcher,wm=Zi.ReactCurrentBatchConfig,Is=0,at=null,Rt=null,Bt=null,id=!1,eu=!1,Mu=0,sL=0;function sn(){throw Error(J(321))}function my(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!li(t[n],e[n]))return!1;return!0}function gy(t,e,n,r,i,o){if(Is=o,at=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Of.current=t===null||t.memoizedState===null?cL:fL,t=n(r,i),eu){o=0;do{if(eu=!1,Mu=0,25<=o)throw Error(J(301));o+=1,Bt=Rt=null,e.updateQueue=null,Of.current=dL,t=n(r,i)}while(eu)}if(Of.current=od,e=Rt!==null&&Rt.next!==null,Is=0,Bt=Rt=at=null,id=!1,e)throw Error(J(300));return t}function yy(){var t=Mu!==0;return Mu=0,t}function mi(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Bt===null?at.memoizedState=Bt=t:Bt=Bt.next=t,Bt}function Ur(){if(Rt===null){var t=at.alternate;t=t!==null?t.memoizedState:null}else t=Rt.next;var e=Bt===null?at.memoizedState:Bt.next;if(e!==null)Bt=e,Rt=t;else{if(t===null)throw Error(J(310));Rt=t,t={memoizedState:Rt.memoizedState,baseState:Rt.baseState,baseQueue:Rt.baseQueue,queue:Rt.queue,next:null},Bt===null?at.memoizedState=Bt=t:Bt=Bt.next=t}return Bt}function _u(t,e){return typeof e=="function"?e(t):e}function Sm(t){var e=Ur(),n=e.queue;if(n===null)throw Error(J(311));n.lastRenderedReducer=t;var r=Rt,i=r.baseQueue,o=n.pending;if(o!==null){if(i!==null){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,n.pending=null}if(i!==null){o=i.next,r=r.baseState;var a=s=null,c=null,f=o;do{var d=f.lane;if((Is&d)===d)c!==null&&(c=c.next={lane:0,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null}),r=f.hasEagerState?f.eagerState:t(r,f.action);else{var p={lane:d,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null};c===null?(a=c=p,s=r):c=c.next=p,at.lanes|=d,Ls|=d}f=f.next}while(f!==null&&f!==o);c===null?s=r:c.next=a,li(r,e.memoizedState)||(Vn=!0),e.memoizedState=r,e.baseState=s,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do o=i.lane,at.lanes|=o,Ls|=o,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function km(t){var e=Ur(),n=e.queue;if(n===null)throw Error(J(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,o=e.memoizedState;if(i!==null){n.pending=null;var s=i=i.next;do o=t(o,s.action),s=s.next;while(s!==i);li(o,e.memoizedState)||(Vn=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),n.lastRenderedState=o}return[o,r]}function cC(){}function fC(t,e){var n=at,r=Ur(),i=e(),o=!li(r.memoizedState,i);if(o&&(r.memoizedState=i,Vn=!0),r=r.queue,vy(pC.bind(null,n,r,t),[t]),r.getSnapshot!==e||o||Bt!==null&&Bt.memoizedState.tag&1){if(n.flags|=2048,Nu(9,hC.bind(null,n,r,i,e),void 0,null),$t===null)throw Error(J(349));Is&30||dC(n,e,i)}return i}function dC(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=at.updateQueue,e===null?(e={lastEffect:null,stores:null},at.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function hC(t,e,n,r){e.value=n,e.getSnapshot=r,mC(e)&&gC(t)}function pC(t,e,n){return n(function(){mC(e)&&gC(t)})}function mC(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!li(t,n)}catch{return!0}}function gC(t){var e=Yi(t,1);e!==null&&oi(e,t,1,-1)}function Pw(t){var e=mi();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:_u,lastRenderedState:t},e.queue=t,t=t.dispatch=uL.bind(null,at,t),[e.memoizedState,t]}function Nu(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=at.updateQueue,e===null?(e={lastEffect:null,stores:null},at.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function yC(){return Ur().memoizedState}function Af(t,e,n,r){var i=mi();at.flags|=t,i.memoizedState=Nu(1|e,n,void 0,r===void 0?null:r)}function fh(t,e,n,r){var i=Ur();r=r===void 0?null:r;var o=void 0;if(Rt!==null){var s=Rt.memoizedState;if(o=s.destroy,r!==null&&my(r,s.deps)){i.memoizedState=Nu(e,n,o,r);return}}at.flags|=t,i.memoizedState=Nu(1|e,n,o,r)}function Rw(t,e){return Af(8390656,8,t,e)}function vy(t,e){return fh(2048,8,t,e)}function vC(t,e){return fh(4,2,t,e)}function xC(t,e){return fh(4,4,t,e)}function wC(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function SC(t,e,n){return n=n!=null?n.concat([t]):null,fh(4,4,wC.bind(null,e,t),n)}function xy(){}function kC(t,e){var n=Ur();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&my(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function bC(t,e){var n=Ur();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&my(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function CC(t,e,n){return Is&21?(li(n,e)||(n=Nb(),at.lanes|=n,Ls|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Vn=!0),t.memoizedState=n)}function lL(t,e){var n=We;We=n!==0&&4>n?n:4,t(!0);var r=wm.transition;wm.transition={};try{t(!1),e()}finally{We=n,wm.transition=r}}function EC(){return Ur().memoizedState}function aL(t,e,n){var r=jo(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},TC(t))MC(e,n);else if(n=lC(t,e,n,r),n!==null){var i=Tn();oi(n,t,r,i),_C(n,e,r)}}function uL(t,e,n){var r=jo(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(TC(t))MC(e,i);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var s=e.lastRenderedState,a=o(s,n);if(i.hasEagerState=!0,i.eagerState=a,li(a,s)){var c=e.interleaved;c===null?(i.next=i,cy(e)):(i.next=c.next,c.next=i),e.interleaved=i;return}}catch{}finally{}n=lC(t,e,i,r),n!==null&&(i=Tn(),oi(n,t,r,i),_C(n,e,r))}}function TC(t){var e=t.alternate;return t===at||e!==null&&e===at}function MC(t,e){eu=id=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function _C(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,J0(t,n)}}var od={readContext:Hr,useCallback:sn,useContext:sn,useEffect:sn,useImperativeHandle:sn,useInsertionEffect:sn,useLayoutEffect:sn,useMemo:sn,useReducer:sn,useRef:sn,useState:sn,useDebugValue:sn,useDeferredValue:sn,useTransition:sn,useMutableSource:sn,useSyncExternalStore:sn,useId:sn,unstable_isNewReconciler:!1},cL={readContext:Hr,useCallback:function(t,e){return mi().memoizedState=[t,e===void 0?null:e],t},useContext:Hr,useEffect:Rw,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Af(4194308,4,wC.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Af(4194308,4,t,e)},useInsertionEffect:function(t,e){return Af(4,2,t,e)},useMemo:function(t,e){var n=mi();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=mi();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=aL.bind(null,at,t),[r.memoizedState,t]},useRef:function(t){var e=mi();return t={current:t},e.memoizedState=t},useState:Pw,useDebugValue:xy,useDeferredValue:function(t){return mi().memoizedState=t},useTransition:function(){var t=Pw(!1),e=t[0];return t=lL.bind(null,t[1]),mi().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=at,i=mi();if(it){if(n===void 0)throw Error(J(407));n=n()}else{if(n=e(),$t===null)throw Error(J(349));Is&30||dC(r,e,n)}i.memoizedState=n;var o={value:n,getSnapshot:e};return i.queue=o,Rw(pC.bind(null,r,o,t),[t]),r.flags|=2048,Nu(9,hC.bind(null,r,o,n,e),void 0,null),n},useId:function(){var t=mi(),e=$t.identifierPrefix;if(it){var n=Vi,r=Ui;n=(r&~(1<<32-ii(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Mu++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=sL++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},fL={readContext:Hr,useCallback:kC,useContext:Hr,useEffect:vy,useImperativeHandle:SC,useInsertionEffect:vC,useLayoutEffect:xC,useMemo:bC,useReducer:Sm,useRef:yC,useState:function(){return Sm(_u)},useDebugValue:xy,useDeferredValue:function(t){var e=Ur();return CC(e,Rt.memoizedState,t)},useTransition:function(){var t=Sm(_u)[0],e=Ur().memoizedState;return[t,e]},useMutableSource:cC,useSyncExternalStore:fC,useId:EC,unstable_isNewReconciler:!1},dL={readContext:Hr,useCallback:kC,useContext:Hr,useEffect:vy,useImperativeHandle:SC,useInsertionEffect:vC,useLayoutEffect:xC,useMemo:bC,useReducer:km,useRef:yC,useState:function(){return km(_u)},useDebugValue:xy,useDeferredValue:function(t){var e=Ur();return Rt===null?e.memoizedState=t:CC(e,Rt.memoizedState,t)},useTransition:function(){var t=km(_u)[0],e=Ur().memoizedState;return[t,e]},useMutableSource:cC,useSyncExternalStore:fC,useId:EC,unstable_isNewReconciler:!1};function Zr(t,e){if(t&&t.defaultProps){e=ut({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Ug(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:ut({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var dh={isMounted:function(t){return(t=t._reactInternals)?Vs(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Tn(),i=jo(t),o=Ki(r,i);o.payload=e,n!=null&&(o.callback=n),e=zo(t,o,i),e!==null&&(oi(e,t,i,r),Nf(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Tn(),i=jo(t),o=Ki(r,i);o.tag=1,o.payload=e,n!=null&&(o.callback=n),e=zo(t,o,i),e!==null&&(oi(e,t,i,r),Nf(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Tn(),r=jo(t),i=Ki(n,r);i.tag=2,e!=null&&(i.callback=e),e=zo(t,i,r),e!==null&&(oi(e,t,r,n),Nf(e,t,r))}};function Dw(t,e,n,r,i,o,s){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,o,s):e.prototype&&e.prototype.isPureReactComponent?!Su(n,r)||!Su(i,o):!0}function NC(t,e,n){var r=!1,i=Go,o=e.contextType;return typeof o=="object"&&o!==null?o=Hr(o):(i=Kn(e)?Rs:fn.current,r=e.contextTypes,o=(r=r!=null)?Vl(t,i):Go),e=new e(n,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=dh,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=o),e}function Iw(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&dh.enqueueReplaceState(e,e.state,null)}function Vg(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},fy(t);var o=e.contextType;typeof o=="object"&&o!==null?i.context=Hr(o):(o=Kn(e)?Rs:fn.current,i.context=Vl(t,o)),i.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(Ug(t,e,o,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&dh.enqueueReplaceState(i,i.state,null),nd(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Gl(t,e){try{var n="",r=e;do n+=FD(r),r=r.return;while(r);var i=n}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:i,digest:null}}function bm(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Wg(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var hL=typeof WeakMap=="function"?WeakMap:Map;function OC(t,e,n){n=Ki(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){ld||(ld=!0,t0=r),Wg(t,e)},n}function AC(t,e,n){n=Ki(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Wg(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){Wg(t,e),typeof r!="function"&&(Bo===null?Bo=new Set([this]):Bo.add(this));var s=e.stack;this.componentDidCatch(e.value,{componentStack:s!==null?s:""})}),n}function Lw(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new hL;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=ML.bind(null,t,e,n),e.then(t,t))}function zw(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Bw(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Ki(-1,1),e.tag=2,zo(n,e,1))),n.lanes|=1),t)}var pL=Zi.ReactCurrentOwner,Vn=!1;function Cn(t,e,n,r){e.child=t===null?sC(e,null,n,r):Kl(e,t.child,n,r)}function jw(t,e,n,r,i){n=n.render;var o=e.ref;return jl(e,i),r=gy(t,e,n,r,o,i),n=yy(),t!==null&&!Vn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Qi(t,e,i)):(it&&n&&iy(e),e.flags|=1,Cn(t,e,r,i),e.child)}function Fw(t,e,n,r,i){if(t===null){var o=n.type;return typeof o=="function"&&!My(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=o,PC(t,e,o,r,i)):(t=If(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&i)){var s=o.memoizedProps;if(n=n.compare,n=n!==null?n:Su,n(s,r)&&t.ref===e.ref)return Qi(t,e,i)}return e.flags|=1,t=Fo(o,r),t.ref=e.ref,t.return=e,e.child=t}function PC(t,e,n,r,i){if(t!==null){var o=t.memoizedProps;if(Su(o,r)&&t.ref===e.ref)if(Vn=!1,e.pendingProps=r=o,(t.lanes&i)!==0)t.flags&131072&&(Vn=!0);else return e.lanes=t.lanes,Qi(t,e,i)}return Kg(t,e,n,r,i)}function RC(t,e,n){var r=e.pendingProps,i=r.children,o=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Je(Pl,ur),ur|=n;else{if(!(n&1073741824))return t=o!==null?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Je(Pl,ur),ur|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,Je(Pl,ur),ur|=r}else o!==null?(r=o.baseLanes|n,e.memoizedState=null):r=n,Je(Pl,ur),ur|=r;return Cn(t,e,i,n),e.child}function DC(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Kg(t,e,n,r,i){var o=Kn(n)?Rs:fn.current;return o=Vl(e,o),jl(e,i),n=gy(t,e,n,r,o,i),r=yy(),t!==null&&!Vn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Qi(t,e,i)):(it&&r&&iy(e),e.flags|=1,Cn(t,e,n,i),e.child)}function $w(t,e,n,r,i){if(Kn(n)){var o=!0;Yf(e)}else o=!1;if(jl(e,i),e.stateNode===null)Pf(t,e),NC(e,n,r),Vg(e,n,r,i),r=!0;else if(t===null){var s=e.stateNode,a=e.memoizedProps;s.props=a;var c=s.context,f=n.contextType;typeof f=="object"&&f!==null?f=Hr(f):(f=Kn(n)?Rs:fn.current,f=Vl(e,f));var d=n.getDerivedStateFromProps,p=typeof d=="function"||typeof s.getSnapshotBeforeUpdate=="function";p||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==r||c!==f)&&Iw(e,s,r,f),xo=!1;var m=e.memoizedState;s.state=m,nd(e,r,s,i),c=e.memoizedState,a!==r||m!==c||Wn.current||xo?(typeof d=="function"&&(Ug(e,n,d,r),c=e.memoizedState),(a=xo||Dw(e,n,a,r,m,c,f))?(p||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(e.flags|=4194308)):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),s.props=r,s.state=c,s.context=f,r=a):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{s=e.stateNode,aC(t,e),a=e.memoizedProps,f=e.type===e.elementType?a:Zr(e.type,a),s.props=f,p=e.pendingProps,m=s.context,c=n.contextType,typeof c=="object"&&c!==null?c=Hr(c):(c=Kn(n)?Rs:fn.current,c=Vl(e,c));var g=n.getDerivedStateFromProps;(d=typeof g=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==p||m!==c)&&Iw(e,s,r,c),xo=!1,m=e.memoizedState,s.state=m,nd(e,r,s,i);var v=e.memoizedState;a!==p||m!==v||Wn.current||xo?(typeof g=="function"&&(Ug(e,n,g,r),v=e.memoizedState),(f=xo||Dw(e,n,f,r,m,v,c)||!1)?(d||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(r,v,c),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(r,v,c)),typeof s.componentDidUpdate=="function"&&(e.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof s.componentDidUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=v),s.props=r,s.state=v,s.context=c,r=f):(typeof s.componentDidUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),r=!1)}return qg(t,e,n,r,o,i)}function qg(t,e,n,r,i,o){DC(t,e);var s=(e.flags&128)!==0;if(!r&&!s)return i&&Tw(e,n,!1),Qi(t,e,o);r=e.stateNode,pL.current=e;var a=s&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&s?(e.child=Kl(e,t.child,null,o),e.child=Kl(e,null,a,o)):Cn(t,e,a,o),e.memoizedState=r.state,i&&Tw(e,n,!0),e.child}function IC(t){var e=t.stateNode;e.pendingContext?Ew(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Ew(t,e.context,!1),dy(t,e.containerInfo)}function Hw(t,e,n,r,i){return Wl(),sy(i),e.flags|=256,Cn(t,e,n,r),e.child}var Gg={dehydrated:null,treeContext:null,retryLane:0};function Xg(t){return{baseLanes:t,cachePool:null,transitions:null}}function LC(t,e,n){var r=e.pendingProps,i=st.current,o=!1,s=(e.flags&128)!==0,a;if((a=s)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Je(st,i&1),t===null)return $g(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(s=r.children,t=r.fallback,o?(r=e.mode,o=e.child,s={mode:"hidden",children:s},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=s):o=mh(s,r,0,null),t=Ms(t,r,n,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=Xg(n),e.memoizedState=Gg,t):wy(e,s));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return mL(t,e,s,r,a,i,n);if(o){o=r.fallback,s=e.mode,i=t.child,a=i.sibling;var c={mode:"hidden",children:r.children};return!(s&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=Fo(i,c),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?o=Fo(a,o):(o=Ms(o,s,n,null),o.flags|=2),o.return=e,r.return=e,r.sibling=o,e.child=r,r=o,o=e.child,s=t.child.memoizedState,s=s===null?Xg(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},o.memoizedState=s,o.childLanes=t.childLanes&~n,e.memoizedState=Gg,r}return o=t.child,t=o.sibling,r=Fo(o,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function wy(t,e){return e=mh({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function of(t,e,n,r){return r!==null&&sy(r),Kl(e,t.child,null,n),t=wy(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function mL(t,e,n,r,i,o,s){if(n)return e.flags&256?(e.flags&=-257,r=bm(Error(J(422))),of(t,e,s,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=r.fallback,i=e.mode,r=mh({mode:"visible",children:r.children},i,0,null),o=Ms(o,i,s,null),o.flags|=2,r.return=e,o.return=e,r.sibling=o,e.child=r,e.mode&1&&Kl(e,t.child,null,s),e.child.memoizedState=Xg(s),e.memoizedState=Gg,o);if(!(e.mode&1))return of(t,e,s,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,o=Error(J(419)),r=bm(o,r,void 0),of(t,e,s,r)}if(a=(s&t.childLanes)!==0,Vn||a){if(r=$t,r!==null){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|s)?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,Yi(t,i),oi(r,t,i,-1))}return Ty(),r=bm(Error(J(421))),of(t,e,s,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=_L.bind(null,t),i._reactRetry=e,null):(t=o.treeContext,fr=Lo(i.nextSibling),dr=e,it=!0,ti=null,t!==null&&(Ir[Lr++]=Ui,Ir[Lr++]=Vi,Ir[Lr++]=Ds,Ui=t.id,Vi=t.overflow,Ds=e),e=wy(e,r.children),e.flags|=4096,e)}function Uw(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Hg(t.return,e,n)}function Cm(t,e,n,r,i){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function zC(t,e,n){var r=e.pendingProps,i=r.revealOrder,o=r.tail;if(Cn(t,e,r.children,n),r=st.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Uw(t,n,e);else if(t.tag===19)Uw(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Je(st,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&rd(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Cm(e,!1,i,n,o);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&rd(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Cm(e,!0,n,null,o);break;case"together":Cm(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Pf(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Qi(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Ls|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(J(153));if(e.child!==null){for(t=e.child,n=Fo(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Fo(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function gL(t,e,n){switch(e.tag){case 3:IC(e),Wl();break;case 5:uC(e);break;case 1:Kn(e.type)&&Yf(e);break;case 4:dy(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Je(ed,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Je(st,st.current&1),e.flags|=128,null):n&e.child.childLanes?LC(t,e,n):(Je(st,st.current&1),t=Qi(t,e,n),t!==null?t.sibling:null);Je(st,st.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return zC(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Je(st,st.current),r)break;return null;case 22:case 23:return e.lanes=0,RC(t,e,n)}return Qi(t,e,n)}var BC,Jg,jC,FC;BC=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Jg=function(){};jC=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Ss(Si.current);var o=null;switch(n){case"input":i=vg(t,i),r=vg(t,r),o=[];break;case"select":i=ut({},i,{value:void 0}),r=ut({},r,{value:void 0}),o=[];break;case"textarea":i=Sg(t,i),r=Sg(t,r),o=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Xf)}bg(n,r);var s;n=null;for(f in i)if(!r.hasOwnProperty(f)&&i.hasOwnProperty(f)&&i[f]!=null)if(f==="style"){var a=i[f];for(s in a)a.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else f!=="dangerouslySetInnerHTML"&&f!=="children"&&f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&f!=="autoFocus"&&(pu.hasOwnProperty(f)?o||(o=[]):(o=o||[]).push(f,null));for(f in r){var c=r[f];if(a=i!=null?i[f]:void 0,r.hasOwnProperty(f)&&c!==a&&(c!=null||a!=null))if(f==="style")if(a){for(s in a)!a.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in c)c.hasOwnProperty(s)&&a[s]!==c[s]&&(n||(n={}),n[s]=c[s])}else n||(o||(o=[]),o.push(f,n)),n=c;else f==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,a=a?a.__html:void 0,c!=null&&a!==c&&(o=o||[]).push(f,c)):f==="children"?typeof c!="string"&&typeof c!="number"||(o=o||[]).push(f,""+c):f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&(pu.hasOwnProperty(f)?(c!=null&&f==="onScroll"&&Ze("scroll",t),o||a===c||(o=[])):(o=o||[]).push(f,c))}n&&(o=o||[]).push("style",n);var f=o;(e.updateQueue=f)&&(e.flags|=4)}};FC=function(t,e,n,r){n!==r&&(e.flags|=4)};function Ra(t,e){if(!it)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function ln(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function yL(t,e,n){var r=e.pendingProps;switch(oy(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ln(e),null;case 1:return Kn(e.type)&&Jf(),ln(e),null;case 3:return r=e.stateNode,ql(),tt(Wn),tt(fn),py(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(nf(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,ti!==null&&(i0(ti),ti=null))),Jg(t,e),ln(e),null;case 5:hy(e);var i=Ss(Tu.current);if(n=e.type,t!==null&&e.stateNode!=null)jC(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(J(166));return ln(e),null}if(t=Ss(Si.current),nf(e)){r=e.stateNode,n=e.type;var o=e.memoizedProps;switch(r[xi]=e,r[Cu]=o,t=(e.mode&1)!==0,n){case"dialog":Ze("cancel",r),Ze("close",r);break;case"iframe":case"object":case"embed":Ze("load",r);break;case"video":case"audio":for(i=0;i<Ha.length;i++)Ze(Ha[i],r);break;case"source":Ze("error",r);break;case"img":case"image":case"link":Ze("error",r),Ze("load",r);break;case"details":Ze("toggle",r);break;case"input":Qx(r,o),Ze("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Ze("invalid",r);break;case"textarea":ew(r,o),Ze("invalid",r)}bg(n,o),i=null;for(var s in o)if(o.hasOwnProperty(s)){var a=o[s];s==="children"?typeof a=="string"?r.textContent!==a&&(o.suppressHydrationWarning!==!0&&tf(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(o.suppressHydrationWarning!==!0&&tf(r.textContent,a,t),i=["children",""+a]):pu.hasOwnProperty(s)&&a!=null&&s==="onScroll"&&Ze("scroll",r)}switch(n){case"input":qc(r),Zx(r,o,!0);break;case"textarea":qc(r),tw(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=Xf)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{s=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=pb(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=s.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=s.createElement(n,{is:r.is}):(t=s.createElement(n),n==="select"&&(s=t,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):t=s.createElementNS(t,n),t[xi]=e,t[Cu]=r,BC(t,e,!1,!1),e.stateNode=t;e:{switch(s=Cg(n,r),n){case"dialog":Ze("cancel",t),Ze("close",t),i=r;break;case"iframe":case"object":case"embed":Ze("load",t),i=r;break;case"video":case"audio":for(i=0;i<Ha.length;i++)Ze(Ha[i],t);i=r;break;case"source":Ze("error",t),i=r;break;case"img":case"image":case"link":Ze("error",t),Ze("load",t),i=r;break;case"details":Ze("toggle",t),i=r;break;case"input":Qx(t,r),i=vg(t,r),Ze("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=ut({},r,{value:void 0}),Ze("invalid",t);break;case"textarea":ew(t,r),i=Sg(t,r),Ze("invalid",t);break;default:i=r}bg(n,i),a=i;for(o in a)if(a.hasOwnProperty(o)){var c=a[o];o==="style"?yb(t,c):o==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&mb(t,c)):o==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&mu(t,c):typeof c=="number"&&mu(t,""+c):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(pu.hasOwnProperty(o)?c!=null&&o==="onScroll"&&Ze("scroll",t):c!=null&&V0(t,o,c,s))}switch(n){case"input":qc(t),Zx(t,r,!1);break;case"textarea":qc(t),tw(t);break;case"option":r.value!=null&&t.setAttribute("value",""+qo(r.value));break;case"select":t.multiple=!!r.multiple,o=r.value,o!=null?Il(t,!!r.multiple,o,!1):r.defaultValue!=null&&Il(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Xf)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return ln(e),null;case 6:if(t&&e.stateNode!=null)FC(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(J(166));if(n=Ss(Tu.current),Ss(Si.current),nf(e)){if(r=e.stateNode,n=e.memoizedProps,r[xi]=e,(o=r.nodeValue!==n)&&(t=dr,t!==null))switch(t.tag){case 3:tf(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&tf(r.nodeValue,n,(t.mode&1)!==0)}o&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[xi]=e,e.stateNode=r}return ln(e),null;case 13:if(tt(st),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(it&&fr!==null&&e.mode&1&&!(e.flags&128))iC(),Wl(),e.flags|=98560,o=!1;else if(o=nf(e),r!==null&&r.dehydrated!==null){if(t===null){if(!o)throw Error(J(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(J(317));o[xi]=e}else Wl(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ln(e),o=!1}else ti!==null&&(i0(ti),ti=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||st.current&1?Dt===0&&(Dt=3):Ty())),e.updateQueue!==null&&(e.flags|=4),ln(e),null);case 4:return ql(),Jg(t,e),t===null&&ku(e.stateNode.containerInfo),ln(e),null;case 10:return uy(e.type._context),ln(e),null;case 17:return Kn(e.type)&&Jf(),ln(e),null;case 19:if(tt(st),o=e.memoizedState,o===null)return ln(e),null;if(r=(e.flags&128)!==0,s=o.rendering,s===null)if(r)Ra(o,!1);else{if(Dt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(s=rd(t),s!==null){for(e.flags|=128,Ra(o,!1),r=s.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)o=n,t=r,o.flags&=14680066,s=o.alternate,s===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,t=s.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Je(st,st.current&1|2),e.child}t=t.sibling}o.tail!==null&&bt()>Xl&&(e.flags|=128,r=!0,Ra(o,!1),e.lanes=4194304)}else{if(!r)if(t=rd(s),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Ra(o,!0),o.tail===null&&o.tailMode==="hidden"&&!s.alternate&&!it)return ln(e),null}else 2*bt()-o.renderingStartTime>Xl&&n!==1073741824&&(e.flags|=128,r=!0,Ra(o,!1),e.lanes=4194304);o.isBackwards?(s.sibling=e.child,e.child=s):(n=o.last,n!==null?n.sibling=s:e.child=s,o.last=s)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=bt(),e.sibling=null,n=st.current,Je(st,r?n&1|2:n&1),e):(ln(e),null);case 22:case 23:return Ey(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?ur&1073741824&&(ln(e),e.subtreeFlags&6&&(e.flags|=8192)):ln(e),null;case 24:return null;case 25:return null}throw Error(J(156,e.tag))}function vL(t,e){switch(oy(e),e.tag){case 1:return Kn(e.type)&&Jf(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ql(),tt(Wn),tt(fn),py(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return hy(e),null;case 13:if(tt(st),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(J(340));Wl()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return tt(st),null;case 4:return ql(),null;case 10:return uy(e.type._context),null;case 22:case 23:return Ey(),null;case 24:return null;default:return null}}var sf=!1,cn=!1,xL=typeof WeakSet=="function"?WeakSet:Set,re=null;function Al(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){gt(t,e,r)}else n.current=null}function Yg(t,e,n){try{n()}catch(r){gt(t,e,r)}}var Vw=!1;function wL(t,e){if(Dg=Kf,t=Wb(),ry(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var s=0,a=-1,c=-1,f=0,d=0,p=t,m=null;t:for(;;){for(var g;p!==n||i!==0&&p.nodeType!==3||(a=s+i),p!==o||r!==0&&p.nodeType!==3||(c=s+r),p.nodeType===3&&(s+=p.nodeValue.length),(g=p.firstChild)!==null;)m=p,p=g;for(;;){if(p===t)break t;if(m===n&&++f===i&&(a=s),m===o&&++d===r&&(c=s),(g=p.nextSibling)!==null)break;p=m,m=p.parentNode}p=g}n=a===-1||c===-1?null:{start:a,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Ig={focusedElem:t,selectionRange:n},Kf=!1,re=e;re!==null;)if(e=re,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,re=t;else for(;re!==null;){e=re;try{var v=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var k=v.memoizedProps,b=v.memoizedState,x=e.stateNode,w=x.getSnapshotBeforeUpdate(e.elementType===e.type?k:Zr(e.type,k),b);x.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var E=e.stateNode.containerInfo;E.nodeType===1?E.textContent="":E.nodeType===9&&E.documentElement&&E.removeChild(E.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(J(163))}}catch(_){gt(e,e.return,_)}if(t=e.sibling,t!==null){t.return=e.return,re=t;break}re=e.return}return v=Vw,Vw=!1,v}function tu(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var o=i.destroy;i.destroy=void 0,o!==void 0&&Yg(e,n,o)}i=i.next}while(i!==r)}}function hh(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Qg(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function $C(t){var e=t.alternate;e!==null&&(t.alternate=null,$C(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[xi],delete e[Cu],delete e[Bg],delete e[nL],delete e[rL])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function HC(t){return t.tag===5||t.tag===3||t.tag===4}function Ww(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||HC(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Zg(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Xf));else if(r!==4&&(t=t.child,t!==null))for(Zg(t,e,n),t=t.sibling;t!==null;)Zg(t,e,n),t=t.sibling}function e0(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(e0(t,e,n),t=t.sibling;t!==null;)e0(t,e,n),t=t.sibling}var Gt=null,ei=!1;function ho(t,e,n){for(n=n.child;n!==null;)UC(t,e,n),n=n.sibling}function UC(t,e,n){if(wi&&typeof wi.onCommitFiberUnmount=="function")try{wi.onCommitFiberUnmount(oh,n)}catch{}switch(n.tag){case 5:cn||Al(n,e);case 6:var r=Gt,i=ei;Gt=null,ho(t,e,n),Gt=r,ei=i,Gt!==null&&(ei?(t=Gt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Gt.removeChild(n.stateNode));break;case 18:Gt!==null&&(ei?(t=Gt,n=n.stateNode,t.nodeType===8?ym(t.parentNode,n):t.nodeType===1&&ym(t,n),xu(t)):ym(Gt,n.stateNode));break;case 4:r=Gt,i=ei,Gt=n.stateNode.containerInfo,ei=!0,ho(t,e,n),Gt=r,ei=i;break;case 0:case 11:case 14:case 15:if(!cn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var o=i,s=o.destroy;o=o.tag,s!==void 0&&(o&2||o&4)&&Yg(n,e,s),i=i.next}while(i!==r)}ho(t,e,n);break;case 1:if(!cn&&(Al(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){gt(n,e,a)}ho(t,e,n);break;case 21:ho(t,e,n);break;case 22:n.mode&1?(cn=(r=cn)||n.memoizedState!==null,ho(t,e,n),cn=r):ho(t,e,n);break;default:ho(t,e,n)}}function Kw(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new xL),e.forEach(function(r){var i=NL.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Yr(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var o=t,s=e,a=s;e:for(;a!==null;){switch(a.tag){case 5:Gt=a.stateNode,ei=!1;break e;case 3:Gt=a.stateNode.containerInfo,ei=!0;break e;case 4:Gt=a.stateNode.containerInfo,ei=!0;break e}a=a.return}if(Gt===null)throw Error(J(160));UC(o,s,i),Gt=null,ei=!1;var c=i.alternate;c!==null&&(c.return=null),i.return=null}catch(f){gt(i,e,f)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)VC(e,t),e=e.sibling}function VC(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Yr(e,t),pi(t),r&4){try{tu(3,t,t.return),hh(3,t)}catch(k){gt(t,t.return,k)}try{tu(5,t,t.return)}catch(k){gt(t,t.return,k)}}break;case 1:Yr(e,t),pi(t),r&512&&n!==null&&Al(n,n.return);break;case 5:if(Yr(e,t),pi(t),r&512&&n!==null&&Al(n,n.return),t.flags&32){var i=t.stateNode;try{mu(i,"")}catch(k){gt(t,t.return,k)}}if(r&4&&(i=t.stateNode,i!=null)){var o=t.memoizedProps,s=n!==null?n.memoizedProps:o,a=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{a==="input"&&o.type==="radio"&&o.name!=null&&db(i,o),Cg(a,s);var f=Cg(a,o);for(s=0;s<c.length;s+=2){var d=c[s],p=c[s+1];d==="style"?yb(i,p):d==="dangerouslySetInnerHTML"?mb(i,p):d==="children"?mu(i,p):V0(i,d,p,f)}switch(a){case"input":xg(i,o);break;case"textarea":hb(i,o);break;case"select":var m=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var g=o.value;g!=null?Il(i,!!o.multiple,g,!1):m!==!!o.multiple&&(o.defaultValue!=null?Il(i,!!o.multiple,o.defaultValue,!0):Il(i,!!o.multiple,o.multiple?[]:"",!1))}i[Cu]=o}catch(k){gt(t,t.return,k)}}break;case 6:if(Yr(e,t),pi(t),r&4){if(t.stateNode===null)throw Error(J(162));i=t.stateNode,o=t.memoizedProps;try{i.nodeValue=o}catch(k){gt(t,t.return,k)}}break;case 3:if(Yr(e,t),pi(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{xu(e.containerInfo)}catch(k){gt(t,t.return,k)}break;case 4:Yr(e,t),pi(t);break;case 13:Yr(e,t),pi(t),i=t.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||(by=bt())),r&4&&Kw(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(cn=(f=cn)||d,Yr(e,t),cn=f):Yr(e,t),pi(t),r&8192){if(f=t.memoizedState!==null,(t.stateNode.isHidden=f)&&!d&&t.mode&1)for(re=t,d=t.child;d!==null;){for(p=re=d;re!==null;){switch(m=re,g=m.child,m.tag){case 0:case 11:case 14:case 15:tu(4,m,m.return);break;case 1:Al(m,m.return);var v=m.stateNode;if(typeof v.componentWillUnmount=="function"){r=m,n=m.return;try{e=r,v.props=e.memoizedProps,v.state=e.memoizedState,v.componentWillUnmount()}catch(k){gt(r,n,k)}}break;case 5:Al(m,m.return);break;case 22:if(m.memoizedState!==null){Gw(p);continue}}g!==null?(g.return=m,re=g):Gw(p)}d=d.sibling}e:for(d=null,p=t;;){if(p.tag===5){if(d===null){d=p;try{i=p.stateNode,f?(o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(a=p.stateNode,c=p.memoizedProps.style,s=c!=null&&c.hasOwnProperty("display")?c.display:null,a.style.display=gb("display",s))}catch(k){gt(t,t.return,k)}}}else if(p.tag===6){if(d===null)try{p.stateNode.nodeValue=f?"":p.memoizedProps}catch(k){gt(t,t.return,k)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===t)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===t)break e;for(;p.sibling===null;){if(p.return===null||p.return===t)break e;d===p&&(d=null),p=p.return}d===p&&(d=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:Yr(e,t),pi(t),r&4&&Kw(t);break;case 21:break;default:Yr(e,t),pi(t)}}function pi(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(HC(n)){var r=n;break e}n=n.return}throw Error(J(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(mu(i,""),r.flags&=-33);var o=Ww(t);e0(t,o,i);break;case 3:case 4:var s=r.stateNode.containerInfo,a=Ww(t);Zg(t,a,s);break;default:throw Error(J(161))}}catch(c){gt(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function SL(t,e,n){re=t,WC(t)}function WC(t,e,n){for(var r=(t.mode&1)!==0;re!==null;){var i=re,o=i.child;if(i.tag===22&&r){var s=i.memoizedState!==null||sf;if(!s){var a=i.alternate,c=a!==null&&a.memoizedState!==null||cn;a=sf;var f=cn;if(sf=s,(cn=c)&&!f)for(re=i;re!==null;)s=re,c=s.child,s.tag===22&&s.memoizedState!==null?Xw(i):c!==null?(c.return=s,re=c):Xw(i);for(;o!==null;)re=o,WC(o),o=o.sibling;re=i,sf=a,cn=f}qw(t)}else i.subtreeFlags&8772&&o!==null?(o.return=i,re=o):qw(t)}}function qw(t){for(;re!==null;){var e=re;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:cn||hh(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!cn)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Zr(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&Aw(e,o,r);break;case 3:var s=e.updateQueue;if(s!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Aw(e,s,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var f=e.alternate;if(f!==null){var d=f.memoizedState;if(d!==null){var p=d.dehydrated;p!==null&&xu(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(J(163))}cn||e.flags&512&&Qg(e)}catch(m){gt(e,e.return,m)}}if(e===t){re=null;break}if(n=e.sibling,n!==null){n.return=e.return,re=n;break}re=e.return}}function Gw(t){for(;re!==null;){var e=re;if(e===t){re=null;break}var n=e.sibling;if(n!==null){n.return=e.return,re=n;break}re=e.return}}function Xw(t){for(;re!==null;){var e=re;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{hh(4,e)}catch(c){gt(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(c){gt(e,i,c)}}var o=e.return;try{Qg(e)}catch(c){gt(e,o,c)}break;case 5:var s=e.return;try{Qg(e)}catch(c){gt(e,s,c)}}}catch(c){gt(e,e.return,c)}if(e===t){re=null;break}var a=e.sibling;if(a!==null){a.return=e.return,re=a;break}re=e.return}}var kL=Math.ceil,sd=Zi.ReactCurrentDispatcher,Sy=Zi.ReactCurrentOwner,jr=Zi.ReactCurrentBatchConfig,ze=0,$t=null,Mt=null,Qt=0,ur=0,Pl=Qo(0),Dt=0,Ou=null,Ls=0,ph=0,ky=0,nu=null,Hn=null,by=0,Xl=1/0,Fi=null,ld=!1,t0=null,Bo=null,lf=!1,_o=null,ad=0,ru=0,n0=null,Rf=-1,Df=0;function Tn(){return ze&6?bt():Rf!==-1?Rf:Rf=bt()}function jo(t){return t.mode&1?ze&2&&Qt!==0?Qt&-Qt:oL.transition!==null?(Df===0&&(Df=Nb()),Df):(t=We,t!==0||(t=window.event,t=t===void 0?16:Lb(t.type)),t):1}function oi(t,e,n,r){if(50<ru)throw ru=0,n0=null,Error(J(185));Uu(t,n,r),(!(ze&2)||t!==$t)&&(t===$t&&(!(ze&2)&&(ph|=n),Dt===4&&Co(t,Qt)),qn(t,r),n===1&&ze===0&&!(e.mode&1)&&(Xl=bt()+500,ch&&Zo()))}function qn(t,e){var n=t.callbackNode;oI(t,e);var r=Wf(t,t===$t?Qt:0);if(r===0)n!==null&&iw(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&iw(n),e===1)t.tag===0?iL(Jw.bind(null,t)):tC(Jw.bind(null,t)),eL(function(){!(ze&6)&&Zo()}),n=null;else{switch(Ob(r)){case 1:n=X0;break;case 4:n=Mb;break;case 16:n=Vf;break;case 536870912:n=_b;break;default:n=Vf}n=ZC(n,KC.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function KC(t,e){if(Rf=-1,Df=0,ze&6)throw Error(J(327));var n=t.callbackNode;if(Fl()&&t.callbackNode!==n)return null;var r=Wf(t,t===$t?Qt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=ud(t,r);else{e=r;var i=ze;ze|=2;var o=GC();($t!==t||Qt!==e)&&(Fi=null,Xl=bt()+500,Ts(t,e));do try{EL();break}catch(a){qC(t,a)}while(!0);ay(),sd.current=o,ze=i,Mt!==null?e=0:($t=null,Qt=0,e=Dt)}if(e!==0){if(e===2&&(i=Ng(t),i!==0&&(r=i,e=r0(t,i))),e===1)throw n=Ou,Ts(t,0),Co(t,r),qn(t,bt()),n;if(e===6)Co(t,r);else{if(i=t.current.alternate,!(r&30)&&!bL(i)&&(e=ud(t,r),e===2&&(o=Ng(t),o!==0&&(r=o,e=r0(t,o))),e===1))throw n=Ou,Ts(t,0),Co(t,r),qn(t,bt()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(J(345));case 2:ys(t,Hn,Fi);break;case 3:if(Co(t,r),(r&130023424)===r&&(e=by+500-bt(),10<e)){if(Wf(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Tn(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=zg(ys.bind(null,t,Hn,Fi),e);break}ys(t,Hn,Fi);break;case 4:if(Co(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var s=31-ii(r);o=1<<s,s=e[s],s>i&&(i=s),r&=~o}if(r=i,r=bt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*kL(r/1960))-r,10<r){t.timeoutHandle=zg(ys.bind(null,t,Hn,Fi),r);break}ys(t,Hn,Fi);break;case 5:ys(t,Hn,Fi);break;default:throw Error(J(329))}}}return qn(t,bt()),t.callbackNode===n?KC.bind(null,t):null}function r0(t,e){var n=nu;return t.current.memoizedState.isDehydrated&&(Ts(t,e).flags|=256),t=ud(t,e),t!==2&&(e=Hn,Hn=n,e!==null&&i0(e)),t}function i0(t){Hn===null?Hn=t:Hn.push.apply(Hn,t)}function bL(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!li(o(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Co(t,e){for(e&=~ky,e&=~ph,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-ii(e),r=1<<n;t[n]=-1,e&=~r}}function Jw(t){if(ze&6)throw Error(J(327));Fl();var e=Wf(t,0);if(!(e&1))return qn(t,bt()),null;var n=ud(t,e);if(t.tag!==0&&n===2){var r=Ng(t);r!==0&&(e=r,n=r0(t,r))}if(n===1)throw n=Ou,Ts(t,0),Co(t,e),qn(t,bt()),n;if(n===6)throw Error(J(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,ys(t,Hn,Fi),qn(t,bt()),null}function Cy(t,e){var n=ze;ze|=1;try{return t(e)}finally{ze=n,ze===0&&(Xl=bt()+500,ch&&Zo())}}function zs(t){_o!==null&&_o.tag===0&&!(ze&6)&&Fl();var e=ze;ze|=1;var n=jr.transition,r=We;try{if(jr.transition=null,We=1,t)return t()}finally{We=r,jr.transition=n,ze=e,!(ze&6)&&Zo()}}function Ey(){ur=Pl.current,tt(Pl)}function Ts(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,ZI(n)),Mt!==null)for(n=Mt.return;n!==null;){var r=n;switch(oy(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Jf();break;case 3:ql(),tt(Wn),tt(fn),py();break;case 5:hy(r);break;case 4:ql();break;case 13:tt(st);break;case 19:tt(st);break;case 10:uy(r.type._context);break;case 22:case 23:Ey()}n=n.return}if($t=t,Mt=t=Fo(t.current,null),Qt=ur=e,Dt=0,Ou=null,ky=ph=Ls=0,Hn=nu=null,ws!==null){for(e=0;e<ws.length;e++)if(n=ws[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,o=n.pending;if(o!==null){var s=o.next;o.next=i,r.next=s}n.pending=r}ws=null}return t}function qC(t,e){do{var n=Mt;try{if(ay(),Of.current=od,id){for(var r=at.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}id=!1}if(Is=0,Bt=Rt=at=null,eu=!1,Mu=0,Sy.current=null,n===null||n.return===null){Dt=1,Ou=e,Mt=null;break}e:{var o=t,s=n.return,a=n,c=e;if(e=Qt,a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var f=c,d=a,p=d.tag;if(!(d.mode&1)&&(p===0||p===11||p===15)){var m=d.alternate;m?(d.updateQueue=m.updateQueue,d.memoizedState=m.memoizedState,d.lanes=m.lanes):(d.updateQueue=null,d.memoizedState=null)}var g=zw(s);if(g!==null){g.flags&=-257,Bw(g,s,a,o,e),g.mode&1&&Lw(o,f,e),e=g,c=f;var v=e.updateQueue;if(v===null){var k=new Set;k.add(c),e.updateQueue=k}else v.add(c);break e}else{if(!(e&1)){Lw(o,f,e),Ty();break e}c=Error(J(426))}}else if(it&&a.mode&1){var b=zw(s);if(b!==null){!(b.flags&65536)&&(b.flags|=256),Bw(b,s,a,o,e),sy(Gl(c,a));break e}}o=c=Gl(c,a),Dt!==4&&(Dt=2),nu===null?nu=[o]:nu.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var x=OC(o,c,e);Ow(o,x);break e;case 1:a=c;var w=o.type,E=o.stateNode;if(!(o.flags&128)&&(typeof w.getDerivedStateFromError=="function"||E!==null&&typeof E.componentDidCatch=="function"&&(Bo===null||!Bo.has(E)))){o.flags|=65536,e&=-e,o.lanes|=e;var _=AC(o,a,e);Ow(o,_);break e}}o=o.return}while(o!==null)}JC(n)}catch(M){e=M,Mt===n&&n!==null&&(Mt=n=n.return);continue}break}while(!0)}function GC(){var t=sd.current;return sd.current=od,t===null?od:t}function Ty(){(Dt===0||Dt===3||Dt===2)&&(Dt=4),$t===null||!(Ls&268435455)&&!(ph&268435455)||Co($t,Qt)}function ud(t,e){var n=ze;ze|=2;var r=GC();($t!==t||Qt!==e)&&(Fi=null,Ts(t,e));do try{CL();break}catch(i){qC(t,i)}while(!0);if(ay(),ze=n,sd.current=r,Mt!==null)throw Error(J(261));return $t=null,Qt=0,Dt}function CL(){for(;Mt!==null;)XC(Mt)}function EL(){for(;Mt!==null&&!JD();)XC(Mt)}function XC(t){var e=QC(t.alternate,t,ur);t.memoizedProps=t.pendingProps,e===null?JC(t):Mt=e,Sy.current=null}function JC(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=vL(n,e),n!==null){n.flags&=32767,Mt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Dt=6,Mt=null;return}}else if(n=yL(n,e,ur),n!==null){Mt=n;return}if(e=e.sibling,e!==null){Mt=e;return}Mt=e=t}while(e!==null);Dt===0&&(Dt=5)}function ys(t,e,n){var r=We,i=jr.transition;try{jr.transition=null,We=1,TL(t,e,n,r)}finally{jr.transition=i,We=r}return null}function TL(t,e,n,r){do Fl();while(_o!==null);if(ze&6)throw Error(J(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(J(177));t.callbackNode=null,t.callbackPriority=0;var o=n.lanes|n.childLanes;if(sI(t,o),t===$t&&(Mt=$t=null,Qt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||lf||(lf=!0,ZC(Vf,function(){return Fl(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=jr.transition,jr.transition=null;var s=We;We=1;var a=ze;ze|=4,Sy.current=null,wL(t,n),VC(n,t),KI(Ig),Kf=!!Dg,Ig=Dg=null,t.current=n,SL(n),YD(),ze=a,We=s,jr.transition=o}else t.current=n;if(lf&&(lf=!1,_o=t,ad=i),o=t.pendingLanes,o===0&&(Bo=null),eI(n.stateNode),qn(t,bt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(ld)throw ld=!1,t=t0,t0=null,t;return ad&1&&t.tag!==0&&Fl(),o=t.pendingLanes,o&1?t===n0?ru++:(ru=0,n0=t):ru=0,Zo(),null}function Fl(){if(_o!==null){var t=Ob(ad),e=jr.transition,n=We;try{if(jr.transition=null,We=16>t?16:t,_o===null)var r=!1;else{if(t=_o,_o=null,ad=0,ze&6)throw Error(J(331));var i=ze;for(ze|=4,re=t.current;re!==null;){var o=re,s=o.child;if(re.flags&16){var a=o.deletions;if(a!==null){for(var c=0;c<a.length;c++){var f=a[c];for(re=f;re!==null;){var d=re;switch(d.tag){case 0:case 11:case 15:tu(8,d,o)}var p=d.child;if(p!==null)p.return=d,re=p;else for(;re!==null;){d=re;var m=d.sibling,g=d.return;if($C(d),d===f){re=null;break}if(m!==null){m.return=g,re=m;break}re=g}}}var v=o.alternate;if(v!==null){var k=v.child;if(k!==null){v.child=null;do{var b=k.sibling;k.sibling=null,k=b}while(k!==null)}}re=o}}if(o.subtreeFlags&2064&&s!==null)s.return=o,re=s;else e:for(;re!==null;){if(o=re,o.flags&2048)switch(o.tag){case 0:case 11:case 15:tu(9,o,o.return)}var x=o.sibling;if(x!==null){x.return=o.return,re=x;break e}re=o.return}}var w=t.current;for(re=w;re!==null;){s=re;var E=s.child;if(s.subtreeFlags&2064&&E!==null)E.return=s,re=E;else e:for(s=w;re!==null;){if(a=re,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:hh(9,a)}}catch(M){gt(a,a.return,M)}if(a===s){re=null;break e}var _=a.sibling;if(_!==null){_.return=a.return,re=_;break e}re=a.return}}if(ze=i,Zo(),wi&&typeof wi.onPostCommitFiberRoot=="function")try{wi.onPostCommitFiberRoot(oh,t)}catch{}r=!0}return r}finally{We=n,jr.transition=e}}return!1}function Yw(t,e,n){e=Gl(n,e),e=OC(t,e,1),t=zo(t,e,1),e=Tn(),t!==null&&(Uu(t,1,e),qn(t,e))}function gt(t,e,n){if(t.tag===3)Yw(t,t,n);else for(;e!==null;){if(e.tag===3){Yw(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Bo===null||!Bo.has(r))){t=Gl(n,t),t=AC(e,t,1),e=zo(e,t,1),t=Tn(),e!==null&&(Uu(e,1,t),qn(e,t));break}}e=e.return}}function ML(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Tn(),t.pingedLanes|=t.suspendedLanes&n,$t===t&&(Qt&n)===n&&(Dt===4||Dt===3&&(Qt&130023424)===Qt&&500>bt()-by?Ts(t,0):ky|=n),qn(t,e)}function YC(t,e){e===0&&(t.mode&1?(e=Jc,Jc<<=1,!(Jc&130023424)&&(Jc=4194304)):e=1);var n=Tn();t=Yi(t,e),t!==null&&(Uu(t,e,n),qn(t,n))}function _L(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),YC(t,n)}function NL(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(J(314))}r!==null&&r.delete(e),YC(t,n)}var QC;QC=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Wn.current)Vn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Vn=!1,gL(t,e,n);Vn=!!(t.flags&131072)}else Vn=!1,it&&e.flags&1048576&&nC(e,Zf,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Pf(t,e),t=e.pendingProps;var i=Vl(e,fn.current);jl(e,n),i=gy(null,e,r,t,i,n);var o=yy();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Kn(r)?(o=!0,Yf(e)):o=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,fy(e),i.updater=dh,e.stateNode=i,i._reactInternals=e,Vg(e,r,t,n),e=qg(null,e,r,!0,o,n)):(e.tag=0,it&&o&&iy(e),Cn(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Pf(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=AL(r),t=Zr(r,t),i){case 0:e=Kg(null,e,r,t,n);break e;case 1:e=$w(null,e,r,t,n);break e;case 11:e=jw(null,e,r,t,n);break e;case 14:e=Fw(null,e,r,Zr(r.type,t),n);break e}throw Error(J(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Zr(r,i),Kg(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Zr(r,i),$w(t,e,r,i,n);case 3:e:{if(IC(e),t===null)throw Error(J(387));r=e.pendingProps,o=e.memoizedState,i=o.element,aC(t,e),nd(e,r,null,n);var s=e.memoizedState;if(r=s.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){i=Gl(Error(J(423)),e),e=Hw(t,e,r,n,i);break e}else if(r!==i){i=Gl(Error(J(424)),e),e=Hw(t,e,r,n,i);break e}else for(fr=Lo(e.stateNode.containerInfo.firstChild),dr=e,it=!0,ti=null,n=sC(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Wl(),r===i){e=Qi(t,e,n);break e}Cn(t,e,r,n)}e=e.child}return e;case 5:return uC(e),t===null&&$g(e),r=e.type,i=e.pendingProps,o=t!==null?t.memoizedProps:null,s=i.children,Lg(r,i)?s=null:o!==null&&Lg(r,o)&&(e.flags|=32),DC(t,e),Cn(t,e,s,n),e.child;case 6:return t===null&&$g(e),null;case 13:return LC(t,e,n);case 4:return dy(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Kl(e,null,r,n):Cn(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Zr(r,i),jw(t,e,r,i,n);case 7:return Cn(t,e,e.pendingProps,n),e.child;case 8:return Cn(t,e,e.pendingProps.children,n),e.child;case 12:return Cn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,o=e.memoizedProps,s=i.value,Je(ed,r._currentValue),r._currentValue=s,o!==null)if(li(o.value,s)){if(o.children===i.children&&!Wn.current){e=Qi(t,e,n);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var a=o.dependencies;if(a!==null){s=o.child;for(var c=a.firstContext;c!==null;){if(c.context===r){if(o.tag===1){c=Ki(-1,n&-n),c.tag=2;var f=o.updateQueue;if(f!==null){f=f.shared;var d=f.pending;d===null?c.next=c:(c.next=d.next,d.next=c),f.pending=c}}o.lanes|=n,c=o.alternate,c!==null&&(c.lanes|=n),Hg(o.return,n,e),a.lanes|=n;break}c=c.next}}else if(o.tag===10)s=o.type===e.type?null:o.child;else if(o.tag===18){if(s=o.return,s===null)throw Error(J(341));s.lanes|=n,a=s.alternate,a!==null&&(a.lanes|=n),Hg(s,n,e),s=o.sibling}else s=o.child;if(s!==null)s.return=o;else for(s=o;s!==null;){if(s===e){s=null;break}if(o=s.sibling,o!==null){o.return=s.return,s=o;break}s=s.return}o=s}Cn(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,jl(e,n),i=Hr(i),r=r(i),e.flags|=1,Cn(t,e,r,n),e.child;case 14:return r=e.type,i=Zr(r,e.pendingProps),i=Zr(r.type,i),Fw(t,e,r,i,n);case 15:return PC(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Zr(r,i),Pf(t,e),e.tag=1,Kn(r)?(t=!0,Yf(e)):t=!1,jl(e,n),NC(e,r,i),Vg(e,r,i,n),qg(null,e,r,!0,t,n);case 19:return zC(t,e,n);case 22:return RC(t,e,n)}throw Error(J(156,e.tag))};function ZC(t,e){return Tb(t,e)}function OL(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Br(t,e,n,r){return new OL(t,e,n,r)}function My(t){return t=t.prototype,!(!t||!t.isReactComponent)}function AL(t){if(typeof t=="function")return My(t)?1:0;if(t!=null){if(t=t.$$typeof,t===K0)return 11;if(t===q0)return 14}return 2}function Fo(t,e){var n=t.alternate;return n===null?(n=Br(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function If(t,e,n,r,i,o){var s=2;if(r=t,typeof t=="function")My(t)&&(s=1);else if(typeof t=="string")s=5;else e:switch(t){case kl:return Ms(n.children,i,o,e);case W0:s=8,i|=8;break;case pg:return t=Br(12,n,e,i|2),t.elementType=pg,t.lanes=o,t;case mg:return t=Br(13,n,e,i),t.elementType=mg,t.lanes=o,t;case gg:return t=Br(19,n,e,i),t.elementType=gg,t.lanes=o,t;case ub:return mh(n,i,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case lb:s=10;break e;case ab:s=9;break e;case K0:s=11;break e;case q0:s=14;break e;case vo:s=16,r=null;break e}throw Error(J(130,t==null?t:typeof t,""))}return e=Br(s,n,e,i),e.elementType=t,e.type=r,e.lanes=o,e}function Ms(t,e,n,r){return t=Br(7,t,r,e),t.lanes=n,t}function mh(t,e,n,r){return t=Br(22,t,r,e),t.elementType=ub,t.lanes=n,t.stateNode={isHidden:!1},t}function Em(t,e,n){return t=Br(6,t,null,e),t.lanes=n,t}function Tm(t,e,n){return e=Br(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function PL(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=sm(0),this.expirationTimes=sm(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=sm(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function _y(t,e,n,r,i,o,s,a,c){return t=new PL(t,e,n,a,c),e===1?(e=1,o===!0&&(e|=8)):e=0,o=Br(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},fy(o),t}function RL(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Sl,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function eE(t){if(!t)return Go;t=t._reactInternals;e:{if(Vs(t)!==t||t.tag!==1)throw Error(J(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Kn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(J(171))}if(t.tag===1){var n=t.type;if(Kn(n))return eC(t,n,e)}return e}function tE(t,e,n,r,i,o,s,a,c){return t=_y(n,r,!0,t,i,o,s,a,c),t.context=eE(null),n=t.current,r=Tn(),i=jo(n),o=Ki(r,i),o.callback=e??null,zo(n,o,i),t.current.lanes=i,Uu(t,i,r),qn(t,r),t}function gh(t,e,n,r){var i=e.current,o=Tn(),s=jo(i);return n=eE(n),e.context===null?e.context=n:e.pendingContext=n,e=Ki(o,s),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=zo(i,e,s),t!==null&&(oi(t,i,s,o),Nf(t,i,s)),s}function cd(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Qw(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Ny(t,e){Qw(t,e),(t=t.alternate)&&Qw(t,e)}function DL(){return null}var nE=typeof reportError=="function"?reportError:function(t){console.error(t)};function Oy(t){this._internalRoot=t}yh.prototype.render=Oy.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(J(409));gh(t,e,null,null)};yh.prototype.unmount=Oy.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;zs(function(){gh(null,t,null,null)}),e[Ji]=null}};function yh(t){this._internalRoot=t}yh.prototype.unstable_scheduleHydration=function(t){if(t){var e=Rb();t={blockedOn:null,target:t,priority:e};for(var n=0;n<bo.length&&e!==0&&e<bo[n].priority;n++);bo.splice(n,0,t),n===0&&Ib(t)}};function Ay(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function vh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Zw(){}function IL(t,e,n,r,i){if(i){if(typeof r=="function"){var o=r;r=function(){var f=cd(s);o.call(f)}}var s=tE(e,r,t,0,null,!1,!1,"",Zw);return t._reactRootContainer=s,t[Ji]=s.current,ku(t.nodeType===8?t.parentNode:t),zs(),s}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var f=cd(c);a.call(f)}}var c=_y(t,0,!1,null,null,!1,!1,"",Zw);return t._reactRootContainer=c,t[Ji]=c.current,ku(t.nodeType===8?t.parentNode:t),zs(function(){gh(e,c,n,r)}),c}function xh(t,e,n,r,i){var o=n._reactRootContainer;if(o){var s=o;if(typeof i=="function"){var a=i;i=function(){var c=cd(s);a.call(c)}}gh(e,s,t,i)}else s=IL(n,e,t,i,r);return cd(s)}Ab=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=$a(e.pendingLanes);n!==0&&(J0(e,n|1),qn(e,bt()),!(ze&6)&&(Xl=bt()+500,Zo()))}break;case 13:zs(function(){var r=Yi(t,1);if(r!==null){var i=Tn();oi(r,t,1,i)}}),Ny(t,1)}};Y0=function(t){if(t.tag===13){var e=Yi(t,134217728);if(e!==null){var n=Tn();oi(e,t,134217728,n)}Ny(t,134217728)}};Pb=function(t){if(t.tag===13){var e=jo(t),n=Yi(t,e);if(n!==null){var r=Tn();oi(n,t,e,r)}Ny(t,e)}};Rb=function(){return We};Db=function(t,e){var n=We;try{return We=t,e()}finally{We=n}};Tg=function(t,e,n){switch(e){case"input":if(xg(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=uh(r);if(!i)throw Error(J(90));fb(r),xg(r,i)}}}break;case"textarea":hb(t,n);break;case"select":e=n.value,e!=null&&Il(t,!!n.multiple,e,!1)}};wb=Cy;Sb=zs;var LL={usingClientEntryPoint:!1,Events:[Wu,Tl,uh,vb,xb,Cy]},Da={findFiberByHostInstance:xs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},zL={bundleType:Da.bundleType,version:Da.version,rendererPackageName:Da.rendererPackageName,rendererConfig:Da.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Zi.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Cb(t),t===null?null:t.stateNode},findFiberByHostInstance:Da.findFiberByHostInstance||DL,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var af=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!af.isDisabled&&af.supportsFiber)try{oh=af.inject(zL),wi=af}catch{}}gr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=LL;gr.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Ay(e))throw Error(J(200));return RL(t,e,null,n)};gr.createRoot=function(t,e){if(!Ay(t))throw Error(J(299));var n=!1,r="",i=nE;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=_y(t,1,!1,null,null,n,!1,r,i),t[Ji]=e.current,ku(t.nodeType===8?t.parentNode:t),new Oy(e)};gr.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(J(188)):(t=Object.keys(t).join(","),Error(J(268,t)));return t=Cb(e),t=t===null?null:t.stateNode,t};gr.flushSync=function(t){return zs(t)};gr.hydrate=function(t,e,n){if(!vh(e))throw Error(J(200));return xh(null,t,e,!0,n)};gr.hydrateRoot=function(t,e,n){if(!Ay(t))throw Error(J(405));var r=n!=null&&n.hydratedSources||null,i=!1,o="",s=nE;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(s=n.onRecoverableError)),e=tE(e,null,t,1,n??null,i,!1,o,s),t[Ji]=e.current,ku(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new yh(e)};gr.render=function(t,e,n){if(!vh(e))throw Error(J(200));return xh(null,t,e,!1,n)};gr.unmountComponentAtNode=function(t){if(!vh(t))throw Error(J(40));return t._reactRootContainer?(zs(function(){xh(null,null,t,!1,function(){t._reactRootContainer=null,t[Ji]=null})}),!0):!1};gr.unstable_batchedUpdates=Cy;gr.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!vh(n))throw Error(J(200));if(t==null||t._reactInternals===void 0)throw Error(J(38));return xh(t,e,n,!1,r)};gr.version="18.3.1-next-f1338f8080-20240426";function rE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(rE)}catch(t){console.error(t)}}rE(),rb.exports=gr;var wh=rb.exports;const BL=rh(wh);var eS=wh;dg.createRoot=eS.createRoot,dg.hydrateRoot=eS.hydrateRoot;const qt=[];for(let t=0;t<256;++t)qt.push((t+256).toString(16).slice(1));function jL(t,e=0){return(qt[t[e+0]]+qt[t[e+1]]+qt[t[e+2]]+qt[t[e+3]]+"-"+qt[t[e+4]]+qt[t[e+5]]+"-"+qt[t[e+6]]+qt[t[e+7]]+"-"+qt[t[e+8]]+qt[t[e+9]]+"-"+qt[t[e+10]]+qt[t[e+11]]+qt[t[e+12]]+qt[t[e+13]]+qt[t[e+14]]+qt[t[e+15]]).toLowerCase()}let Mm;const FL=new Uint8Array(16);function $L(){if(!Mm){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");Mm=crypto.getRandomValues.bind(crypto)}return Mm(FL)}const HL=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),tS={randomUUID:HL};function UL(t,e,n){var i;t=t||{};const r=t.random??((i=t.rng)==null?void 0:i.call(t))??$L();if(r.length<16)throw new Error("Random bytes length must be >= 16");return r[6]=r[6]&15|64,r[8]=r[8]&63|128,jL(r)}function No(t,e,n){return tS.randomUUID&&!t?tS.randomUUID():UL(t)}const iE="gp_projects_list",oE=()=>{const t=localStorage.getItem(iE);return t?JSON.parse(t):[]},Ua=t=>{localStorage.setItem(iE,JSON.stringify(t))},VL=t=>{const e=`gp_project_${t}`,n=localStorage.getItem(e);return n?JSON.parse(n):{brainstorm:{items:[],connections:[]},members:[],todos:[],docs:[],ui:[]}},_m=(t,e)=>{const n=`gp_project_${t}`;localStorage.setItem(n,JSON.stringify(e));const r=oE(),i=r.findIndex(o=>o.id===t);i!==-1&&(r[i].lastModified=Date.now(),Ua(r))};function WL({onOpenProject:t}){const[e,n]=se.useState([]),r=se.useRef(null),[i,o]=se.useState({visible:!1,x:0,y:0,targetId:""});se.useEffect(()=>{n(oE());const p=()=>o({...i,visible:!1});return window.addEventListener("click",p),()=>window.removeEventListener("click",p)},[]);const s=()=>{const m=[{id:No(),name:"",cover:"",lastModified:Date.now()},...e];n(m),Ua(m)},a=(p,m)=>{p.preventDefault(),o({visible:!0,x:p.clientX,y:p.clientY,targetId:m})},c=p=>{var g;const m=(g=p.target.files)==null?void 0:g[0];if(m&&i.targetId){const v=new FileReader;v.onload=k=>{const b=e.map(x=>{var w;return x.id===i.targetId?{...x,cover:(w=k.target)==null?void 0:w.result}:x});n(b),Ua(b)},v.readAsDataURL(m)}p.target.value=""},f=(p,m)=>{const g=e.map(v=>v.id===p?{...v,name:m}:v);n(g),Ua(g)},d=()=>{if(confirm("")){const p=e.filter(m=>m.id!==i.targetId);n(p),Ua(p)}};return A.jsxs("div",{className:"flex flex-col h-screen w-screen bg-slate-900 text-slate-200 p-10 overflow-hidden relative",children:[A.jsx("input",{type:"file",ref:r,onChange:c,className:"hidden",accept:"image/*"}),A.jsxs("div",{className:"mb-10",children:[A.jsxs("h1",{className:"text-4xl font-bold text-white mb-2",children:["Game Planner ",A.jsx("span",{className:"text-emerald-500 text-sm align-top",children:"Pro"})]}),A.jsx("p",{className:"text-slate-400",children:""})]}),A.jsx("div",{className:"flex-1 overflow-y-auto",children:A.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-6 content-start pb-20",children:[A.jsxs("div",{onClick:s,className:"aspect-[4/3] rounded-xl border-2 border-dashed border-slate-700 hover:border-emerald-500 hover:bg-slate-800/50 flex flex-col items-center justify-center cursor-pointer transition-all group",children:[A.jsx("div",{className:"text-4xl text-slate-600 group-hover:text-emerald-500 mb-2 transition-colors",children:"+"}),A.jsx("span",{className:"text-slate-500 font-medium",children:""})]}),e.map(p=>A.jsxs("div",{onClick:()=>t(p),onContextMenu:m=>a(m,p.id),className:"group relative aspect-[4/3] bg-slate-800 rounded-xl border border-slate-700 hover:border-emerald-500 hover:shadow-xl transition-all cursor-pointer flex flex-col overflow-hidden",children:[A.jsx("div",{className:"flex-1 bg-slate-900 relative pointer-events-none",children:p.cover?A.jsx("img",{src:p.cover,className:"w-full h-full object-cover"}):A.jsx("div",{className:"w-full h-full flex items-center justify-center text-slate-700 text-4xl",children:""})}),A.jsx("div",{className:"h-12 bg-slate-800 border-t border-slate-700 flex items-center px-2",onClick:m=>m.stopPropagation(),children:A.jsx("input",{value:p.name,onChange:m=>f(p.id,m.target.value),className:"bg-transparent font-bold text-slate-200 w-full text-center outline-none focus:bg-slate-900 rounded px-1"})})]},p.id))]})}),i.visible&&A.jsxs("div",{className:"fixed z-[9999] bg-slate-800 border border-slate-600 rounded-lg shadow-xl py-1 w-32 flex flex-col",style:{top:i.y,left:i.x},onClick:p=>p.stopPropagation(),children:[A.jsx("button",{onClick:()=>{var p;return(p=r.current)==null?void 0:p.click()},className:"px-4 py-2 text-left text-sm text-slate-200 hover:bg-emerald-600",children:" "}),A.jsx("button",{onClick:d,className:"px-4 py-2 text-left text-sm text-red-400 hover:bg-red-600 hover:text-white",children:" "})]})]})}var sE={exports:{}},Va={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */Va.exports;var nS;function KL(){return nS||(nS=1,function(t,e){(function(){var n,r="4.17.21",i=200,o="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",s="Expected a function",a="Invalid `variable` option passed into `_.template`",c="__lodash_hash_undefined__",f=500,d="__lodash_placeholder__",p=1,m=2,g=4,v=1,k=2,b=1,x=2,w=4,E=8,_=16,M=32,P=64,O=128,D=256,z=512,j=30,ee="...",oe=800,he=16,_e=1,xe=2,$e=3,Re=1/0,B=9007199254740991,W=17976931348623157e292,G=NaN,Q=4294967295,ge=Q-1,Ie=Q>>>1,ft=[["ary",O],["bind",b],["bindKey",x],["curry",E],["curryRight",_],["flip",z],["partial",M],["partialRight",P],["rearg",D]],nt="[object Arguments]",Ge="[object Array]",Le="[object AsyncFunction]",$="[object Boolean]",Z="[object Date]",ae="[object DOMException]",fe="[object Error]",Ye="[object Function]",ye="[object GeneratorFunction]",Se="[object Map]",An="[object Number]",to="[object Null]",Vt="[object Object]",Pn="[object Promise]",ai="[object Proxy]",Lt="[object RegExp]",He="[object Set]",Et="[object String]",Tt="[object Symbol]",Ti="[object Undefined]",Vr="[object WeakMap]",Xs="[object WeakSet]",Wr="[object ArrayBuffer]",Jn="[object DataView]",dt="[object Float32Array]",ie="[object Float64Array]",Ae="[object Int8Array]",Be="[object Int16Array]",no="[object Int32Array]",Rn="[object Uint8Array]",Yn="[object Uint8ClampedArray]",xt="[object Uint16Array]",ht="[object Uint32Array]",ui=/\b__p \+= '';/g,xr=/\b(__p \+=) '' \+/g,Kr=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Dn=/&(?:amp|lt|gt|quot|#39);/g,Qn=/[&<>"']/g,hn=RegExp(Dn.source),wt=RegExp(Qn.source),ci=/<%-([\s\S]+?)%>/g,Zn=/<%([\s\S]+?)%>/g,wr=/<%=([\s\S]+?)%>/g,nn=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Sr=/^\w*$/,rs=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,pn=/[\\^$.*+?()[\]{}|]/g,In=RegExp(pn.source),mn=/^\s+/,Ln=/\s/,kr=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,br=/\{\n\/\* \[wrapped with (.+)\] \*/,Hh=/,? & /,Uh=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,gn=/[()=,{}\[\]\/\s]/,yn=/\\(\\)?/g,zn=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,vn=/\w*$/,aa=/^[-+]0x[0-9a-f]+$/i,er=/^0b[01]+$/i,Yu=/^\[object .+?Constructor\]$/,Qu=/^0o[0-7]+$/i,Zu=/^(?:0|[1-9]\d*)$/,ec=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,is=/($^)/,tc=/['\n\r\u2028\u2029\\]/g,Js="\\ud800-\\udfff",Vh="\\u0300-\\u036f",ua="\\ufe20-\\ufe2f",ca="\\u20d0-\\u20ff",nc=Vh+ua+ca,rc="\\u2700-\\u27bf",ic="a-z\\xdf-\\xf6\\xf8-\\xff",fa="\\xac\\xb1\\xd7\\xf7",c2="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",f2="\\u2000-\\u206f",d2=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Cv="A-Z\\xc0-\\xd6\\xd8-\\xde",Ev="\\ufe0e\\ufe0f",Tv=fa+c2+f2+d2,Wh="[']",h2="["+Js+"]",Mv="["+Tv+"]",oc="["+nc+"]",_v="\\d+",p2="["+rc+"]",Nv="["+ic+"]",Ov="[^"+Js+Tv+_v+rc+ic+Cv+"]",Kh="\\ud83c[\\udffb-\\udfff]",m2="(?:"+oc+"|"+Kh+")",Av="[^"+Js+"]",qh="(?:\\ud83c[\\udde6-\\uddff]){2}",Gh="[\\ud800-\\udbff][\\udc00-\\udfff]",Ys="["+Cv+"]",Pv="\\u200d",Rv="(?:"+Nv+"|"+Ov+")",g2="(?:"+Ys+"|"+Ov+")",Dv="(?:"+Wh+"(?:d|ll|m|re|s|t|ve))?",Iv="(?:"+Wh+"(?:D|LL|M|RE|S|T|VE))?",Lv=m2+"?",zv="["+Ev+"]?",y2="(?:"+Pv+"(?:"+[Av,qh,Gh].join("|")+")"+zv+Lv+")*",v2="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",x2="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Bv=zv+Lv+y2,w2="(?:"+[p2,qh,Gh].join("|")+")"+Bv,S2="(?:"+[Av+oc+"?",oc,qh,Gh,h2].join("|")+")",k2=RegExp(Wh,"g"),b2=RegExp(oc,"g"),Xh=RegExp(Kh+"(?="+Kh+")|"+S2+Bv,"g"),C2=RegExp([Ys+"?"+Nv+"+"+Dv+"(?="+[Mv,Ys,"$"].join("|")+")",g2+"+"+Iv+"(?="+[Mv,Ys+Rv,"$"].join("|")+")",Ys+"?"+Rv+"+"+Dv,Ys+"+"+Iv,x2,v2,_v,w2].join("|"),"g"),E2=RegExp("["+Pv+Js+nc+Ev+"]"),T2=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,M2=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],_2=-1,Qe={};Qe[dt]=Qe[ie]=Qe[Ae]=Qe[Be]=Qe[no]=Qe[Rn]=Qe[Yn]=Qe[xt]=Qe[ht]=!0,Qe[nt]=Qe[Ge]=Qe[Wr]=Qe[$]=Qe[Jn]=Qe[Z]=Qe[fe]=Qe[Ye]=Qe[Se]=Qe[An]=Qe[Vt]=Qe[Lt]=Qe[He]=Qe[Et]=Qe[Vr]=!1;var Xe={};Xe[nt]=Xe[Ge]=Xe[Wr]=Xe[Jn]=Xe[$]=Xe[Z]=Xe[dt]=Xe[ie]=Xe[Ae]=Xe[Be]=Xe[no]=Xe[Se]=Xe[An]=Xe[Vt]=Xe[Lt]=Xe[He]=Xe[Et]=Xe[Tt]=Xe[Rn]=Xe[Yn]=Xe[xt]=Xe[ht]=!0,Xe[fe]=Xe[Ye]=Xe[Vr]=!1;var N2={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},O2={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},A2={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},P2={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},R2=parseFloat,D2=parseInt,jv=typeof gl=="object"&&gl&&gl.Object===Object&&gl,I2=typeof self=="object"&&self&&self.Object===Object&&self,Wt=jv||I2||Function("return this")(),Jh=e&&!e.nodeType&&e,ss=Jh&&!0&&t&&!t.nodeType&&t,Fv=ss&&ss.exports===Jh,Yh=Fv&&jv.process,Cr=function(){try{var I=ss&&ss.require&&ss.require("util").types;return I||Yh&&Yh.binding&&Yh.binding("util")}catch{}}(),$v=Cr&&Cr.isArrayBuffer,Hv=Cr&&Cr.isDate,Uv=Cr&&Cr.isMap,Vv=Cr&&Cr.isRegExp,Wv=Cr&&Cr.isSet,Kv=Cr&&Cr.isTypedArray;function tr(I,H,F){switch(F.length){case 0:return I.call(H);case 1:return I.call(H,F[0]);case 2:return I.call(H,F[0],F[1]);case 3:return I.call(H,F[0],F[1],F[2])}return I.apply(H,F)}function L2(I,H,F,ne){for(var we=-1,je=I==null?0:I.length;++we<je;){var At=I[we];H(ne,At,F(At),I)}return ne}function Er(I,H){for(var F=-1,ne=I==null?0:I.length;++F<ne&&H(I[F],F,I)!==!1;);return I}function z2(I,H){for(var F=I==null?0:I.length;F--&&H(I[F],F,I)!==!1;);return I}function qv(I,H){for(var F=-1,ne=I==null?0:I.length;++F<ne;)if(!H(I[F],F,I))return!1;return!0}function ro(I,H){for(var F=-1,ne=I==null?0:I.length,we=0,je=[];++F<ne;){var At=I[F];H(At,F,I)&&(je[we++]=At)}return je}function sc(I,H){var F=I==null?0:I.length;return!!F&&Qs(I,H,0)>-1}function Qh(I,H,F){for(var ne=-1,we=I==null?0:I.length;++ne<we;)if(F(H,I[ne]))return!0;return!1}function rt(I,H){for(var F=-1,ne=I==null?0:I.length,we=Array(ne);++F<ne;)we[F]=H(I[F],F,I);return we}function io(I,H){for(var F=-1,ne=H.length,we=I.length;++F<ne;)I[we+F]=H[F];return I}function Zh(I,H,F,ne){var we=-1,je=I==null?0:I.length;for(ne&&je&&(F=I[++we]);++we<je;)F=H(F,I[we],we,I);return F}function B2(I,H,F,ne){var we=I==null?0:I.length;for(ne&&we&&(F=I[--we]);we--;)F=H(F,I[we],we,I);return F}function ep(I,H){for(var F=-1,ne=I==null?0:I.length;++F<ne;)if(H(I[F],F,I))return!0;return!1}var j2=tp("length");function F2(I){return I.split("")}function $2(I){return I.match(Uh)||[]}function Gv(I,H,F){var ne;return F(I,function(we,je,At){if(H(we,je,At))return ne=je,!1}),ne}function lc(I,H,F,ne){for(var we=I.length,je=F+(ne?1:-1);ne?je--:++je<we;)if(H(I[je],je,I))return je;return-1}function Qs(I,H,F){return H===H?Z2(I,H,F):lc(I,Xv,F)}function H2(I,H,F,ne){for(var we=F-1,je=I.length;++we<je;)if(ne(I[we],H))return we;return-1}function Xv(I){return I!==I}function Jv(I,H){var F=I==null?0:I.length;return F?rp(I,H)/F:G}function tp(I){return function(H){return H==null?n:H[I]}}function np(I){return function(H){return I==null?n:I[H]}}function Yv(I,H,F,ne,we){return we(I,function(je,At,Ke){F=ne?(ne=!1,je):H(F,je,At,Ke)}),F}function U2(I,H){var F=I.length;for(I.sort(H);F--;)I[F]=I[F].value;return I}function rp(I,H){for(var F,ne=-1,we=I.length;++ne<we;){var je=H(I[ne]);je!==n&&(F=F===n?je:F+je)}return F}function ip(I,H){for(var F=-1,ne=Array(I);++F<I;)ne[F]=H(F);return ne}function V2(I,H){return rt(H,function(F){return[F,I[F]]})}function Qv(I){return I&&I.slice(0,n1(I)+1).replace(mn,"")}function nr(I){return function(H){return I(H)}}function op(I,H){return rt(H,function(F){return I[F]})}function da(I,H){return I.has(H)}function Zv(I,H){for(var F=-1,ne=I.length;++F<ne&&Qs(H,I[F],0)>-1;);return F}function e1(I,H){for(var F=I.length;F--&&Qs(H,I[F],0)>-1;);return F}function W2(I,H){for(var F=I.length,ne=0;F--;)I[F]===H&&++ne;return ne}var K2=np(N2),q2=np(O2);function G2(I){return"\\"+P2[I]}function X2(I,H){return I==null?n:I[H]}function Zs(I){return E2.test(I)}function J2(I){return T2.test(I)}function Y2(I){for(var H,F=[];!(H=I.next()).done;)F.push(H.value);return F}function sp(I){var H=-1,F=Array(I.size);return I.forEach(function(ne,we){F[++H]=[we,ne]}),F}function t1(I,H){return function(F){return I(H(F))}}function oo(I,H){for(var F=-1,ne=I.length,we=0,je=[];++F<ne;){var At=I[F];(At===H||At===d)&&(I[F]=d,je[we++]=F)}return je}function ac(I){var H=-1,F=Array(I.size);return I.forEach(function(ne){F[++H]=ne}),F}function Q2(I){var H=-1,F=Array(I.size);return I.forEach(function(ne){F[++H]=[ne,ne]}),F}function Z2(I,H,F){for(var ne=F-1,we=I.length;++ne<we;)if(I[ne]===H)return ne;return-1}function e_(I,H,F){for(var ne=F+1;ne--;)if(I[ne]===H)return ne;return ne}function el(I){return Zs(I)?n_(I):j2(I)}function qr(I){return Zs(I)?r_(I):F2(I)}function n1(I){for(var H=I.length;H--&&Ln.test(I.charAt(H)););return H}var t_=np(A2);function n_(I){for(var H=Xh.lastIndex=0;Xh.test(I);)++H;return H}function r_(I){return I.match(Xh)||[]}function i_(I){return I.match(C2)||[]}var o_=function I(H){H=H==null?Wt:tl.defaults(Wt.Object(),H,tl.pick(Wt,M2));var F=H.Array,ne=H.Date,we=H.Error,je=H.Function,At=H.Math,Ke=H.Object,lp=H.RegExp,s_=H.String,Tr=H.TypeError,uc=F.prototype,l_=je.prototype,nl=Ke.prototype,cc=H["__core-js_shared__"],fc=l_.toString,Ue=nl.hasOwnProperty,a_=0,r1=function(){var l=/[^.]+$/.exec(cc&&cc.keys&&cc.keys.IE_PROTO||"");return l?"Symbol(src)_1."+l:""}(),dc=nl.toString,u_=fc.call(Ke),c_=Wt._,f_=lp("^"+fc.call(Ue).replace(pn,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),hc=Fv?H.Buffer:n,so=H.Symbol,pc=H.Uint8Array,i1=hc?hc.allocUnsafe:n,mc=t1(Ke.getPrototypeOf,Ke),o1=Ke.create,s1=nl.propertyIsEnumerable,gc=uc.splice,l1=so?so.isConcatSpreadable:n,ha=so?so.iterator:n,ls=so?so.toStringTag:n,yc=function(){try{var l=ds(Ke,"defineProperty");return l({},"",{}),l}catch{}}(),d_=H.clearTimeout!==Wt.clearTimeout&&H.clearTimeout,h_=ne&&ne.now!==Wt.Date.now&&ne.now,p_=H.setTimeout!==Wt.setTimeout&&H.setTimeout,vc=At.ceil,xc=At.floor,ap=Ke.getOwnPropertySymbols,m_=hc?hc.isBuffer:n,a1=H.isFinite,g_=uc.join,y_=t1(Ke.keys,Ke),Pt=At.max,rn=At.min,v_=ne.now,x_=H.parseInt,u1=At.random,w_=uc.reverse,up=ds(H,"DataView"),pa=ds(H,"Map"),cp=ds(H,"Promise"),rl=ds(H,"Set"),ma=ds(H,"WeakMap"),ga=ds(Ke,"create"),wc=ma&&new ma,il={},S_=hs(up),k_=hs(pa),b_=hs(cp),C_=hs(rl),E_=hs(ma),Sc=so?so.prototype:n,ya=Sc?Sc.valueOf:n,c1=Sc?Sc.toString:n;function C(l){if(pt(l)&&!ke(l)&&!(l instanceof Pe)){if(l instanceof Mr)return l;if(Ue.call(l,"__wrapped__"))return fx(l)}return new Mr(l)}var ol=function(){function l(){}return function(u){if(!ot(u))return{};if(o1)return o1(u);l.prototype=u;var h=new l;return l.prototype=n,h}}();function kc(){}function Mr(l,u){this.__wrapped__=l,this.__actions__=[],this.__chain__=!!u,this.__index__=0,this.__values__=n}C.templateSettings={escape:ci,evaluate:Zn,interpolate:wr,variable:"",imports:{_:C}},C.prototype=kc.prototype,C.prototype.constructor=C,Mr.prototype=ol(kc.prototype),Mr.prototype.constructor=Mr;function Pe(l){this.__wrapped__=l,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Q,this.__views__=[]}function T_(){var l=new Pe(this.__wrapped__);return l.__actions__=Bn(this.__actions__),l.__dir__=this.__dir__,l.__filtered__=this.__filtered__,l.__iteratees__=Bn(this.__iteratees__),l.__takeCount__=this.__takeCount__,l.__views__=Bn(this.__views__),l}function M_(){if(this.__filtered__){var l=new Pe(this);l.__dir__=-1,l.__filtered__=!0}else l=this.clone(),l.__dir__*=-1;return l}function __(){var l=this.__wrapped__.value(),u=this.__dir__,h=ke(l),y=u<0,S=h?l.length:0,T=FN(0,S,this.__views__),N=T.start,R=T.end,L=R-N,U=y?R:N-1,V=this.__iteratees__,K=V.length,Y=0,le=rn(L,this.__takeCount__);if(!h||!y&&S==L&&le==L)return D1(l,this.__actions__);var pe=[];e:for(;L--&&Y<le;){U+=u;for(var Ce=-1,me=l[U];++Ce<K;){var Ne=V[Ce],De=Ne.iteratee,or=Ne.type,Sn=De(me);if(or==xe)me=Sn;else if(!Sn){if(or==_e)continue e;break e}}pe[Y++]=me}return pe}Pe.prototype=ol(kc.prototype),Pe.prototype.constructor=Pe;function as(l){var u=-1,h=l==null?0:l.length;for(this.clear();++u<h;){var y=l[u];this.set(y[0],y[1])}}function N_(){this.__data__=ga?ga(null):{},this.size=0}function O_(l){var u=this.has(l)&&delete this.__data__[l];return this.size-=u?1:0,u}function A_(l){var u=this.__data__;if(ga){var h=u[l];return h===c?n:h}return Ue.call(u,l)?u[l]:n}function P_(l){var u=this.__data__;return ga?u[l]!==n:Ue.call(u,l)}function R_(l,u){var h=this.__data__;return this.size+=this.has(l)?0:1,h[l]=ga&&u===n?c:u,this}as.prototype.clear=N_,as.prototype.delete=O_,as.prototype.get=A_,as.prototype.has=P_,as.prototype.set=R_;function Mi(l){var u=-1,h=l==null?0:l.length;for(this.clear();++u<h;){var y=l[u];this.set(y[0],y[1])}}function D_(){this.__data__=[],this.size=0}function I_(l){var u=this.__data__,h=bc(u,l);if(h<0)return!1;var y=u.length-1;return h==y?u.pop():gc.call(u,h,1),--this.size,!0}function L_(l){var u=this.__data__,h=bc(u,l);return h<0?n:u[h][1]}function z_(l){return bc(this.__data__,l)>-1}function B_(l,u){var h=this.__data__,y=bc(h,l);return y<0?(++this.size,h.push([l,u])):h[y][1]=u,this}Mi.prototype.clear=D_,Mi.prototype.delete=I_,Mi.prototype.get=L_,Mi.prototype.has=z_,Mi.prototype.set=B_;function _i(l){var u=-1,h=l==null?0:l.length;for(this.clear();++u<h;){var y=l[u];this.set(y[0],y[1])}}function j_(){this.size=0,this.__data__={hash:new as,map:new(pa||Mi),string:new as}}function F_(l){var u=Ic(this,l).delete(l);return this.size-=u?1:0,u}function $_(l){return Ic(this,l).get(l)}function H_(l){return Ic(this,l).has(l)}function U_(l,u){var h=Ic(this,l),y=h.size;return h.set(l,u),this.size+=h.size==y?0:1,this}_i.prototype.clear=j_,_i.prototype.delete=F_,_i.prototype.get=$_,_i.prototype.has=H_,_i.prototype.set=U_;function us(l){var u=-1,h=l==null?0:l.length;for(this.__data__=new _i;++u<h;)this.add(l[u])}function V_(l){return this.__data__.set(l,c),this}function W_(l){return this.__data__.has(l)}us.prototype.add=us.prototype.push=V_,us.prototype.has=W_;function Gr(l){var u=this.__data__=new Mi(l);this.size=u.size}function K_(){this.__data__=new Mi,this.size=0}function q_(l){var u=this.__data__,h=u.delete(l);return this.size=u.size,h}function G_(l){return this.__data__.get(l)}function X_(l){return this.__data__.has(l)}function J_(l,u){var h=this.__data__;if(h instanceof Mi){var y=h.__data__;if(!pa||y.length<i-1)return y.push([l,u]),this.size=++h.size,this;h=this.__data__=new _i(y)}return h.set(l,u),this.size=h.size,this}Gr.prototype.clear=K_,Gr.prototype.delete=q_,Gr.prototype.get=G_,Gr.prototype.has=X_,Gr.prototype.set=J_;function f1(l,u){var h=ke(l),y=!h&&ps(l),S=!h&&!y&&fo(l),T=!h&&!y&&!S&&ul(l),N=h||y||S||T,R=N?ip(l.length,s_):[],L=R.length;for(var U in l)(u||Ue.call(l,U))&&!(N&&(U=="length"||S&&(U=="offset"||U=="parent")||T&&(U=="buffer"||U=="byteLength"||U=="byteOffset")||Pi(U,L)))&&R.push(U);return R}function d1(l){var u=l.length;return u?l[Sp(0,u-1)]:n}function Y_(l,u){return Lc(Bn(l),cs(u,0,l.length))}function Q_(l){return Lc(Bn(l))}function fp(l,u,h){(h!==n&&!Xr(l[u],h)||h===n&&!(u in l))&&Ni(l,u,h)}function va(l,u,h){var y=l[u];(!(Ue.call(l,u)&&Xr(y,h))||h===n&&!(u in l))&&Ni(l,u,h)}function bc(l,u){for(var h=l.length;h--;)if(Xr(l[h][0],u))return h;return-1}function Z_(l,u,h,y){return lo(l,function(S,T,N){u(y,S,h(S),N)}),y}function h1(l,u){return l&&di(u,zt(u),l)}function eN(l,u){return l&&di(u,Fn(u),l)}function Ni(l,u,h){u=="__proto__"&&yc?yc(l,u,{configurable:!0,enumerable:!0,value:h,writable:!0}):l[u]=h}function dp(l,u){for(var h=-1,y=u.length,S=F(y),T=l==null;++h<y;)S[h]=T?n:Kp(l,u[h]);return S}function cs(l,u,h){return l===l&&(h!==n&&(l=l<=h?l:h),u!==n&&(l=l>=u?l:u)),l}function _r(l,u,h,y,S,T){var N,R=u&p,L=u&m,U=u&g;if(h&&(N=S?h(l,y,S,T):h(l)),N!==n)return N;if(!ot(l))return l;var V=ke(l);if(V){if(N=HN(l),!R)return Bn(l,N)}else{var K=on(l),Y=K==Ye||K==ye;if(fo(l))return z1(l,R);if(K==Vt||K==nt||Y&&!S){if(N=L||Y?{}:nx(l),!R)return L?AN(l,eN(N,l)):ON(l,h1(N,l))}else{if(!Xe[K])return S?l:{};N=UN(l,K,R)}}T||(T=new Gr);var le=T.get(l);if(le)return le;T.set(l,N),Ax(l)?l.forEach(function(me){N.add(_r(me,u,h,me,l,T))}):Nx(l)&&l.forEach(function(me,Ne){N.set(Ne,_r(me,u,h,Ne,l,T))});var pe=U?L?Pp:Ap:L?Fn:zt,Ce=V?n:pe(l);return Er(Ce||l,function(me,Ne){Ce&&(Ne=me,me=l[Ne]),va(N,Ne,_r(me,u,h,Ne,l,T))}),N}function tN(l){var u=zt(l);return function(h){return p1(h,l,u)}}function p1(l,u,h){var y=h.length;if(l==null)return!y;for(l=Ke(l);y--;){var S=h[y],T=u[S],N=l[S];if(N===n&&!(S in l)||!T(N))return!1}return!0}function m1(l,u,h){if(typeof l!="function")throw new Tr(s);return Ea(function(){l.apply(n,h)},u)}function xa(l,u,h,y){var S=-1,T=sc,N=!0,R=l.length,L=[],U=u.length;if(!R)return L;h&&(u=rt(u,nr(h))),y?(T=Qh,N=!1):u.length>=i&&(T=da,N=!1,u=new us(u));e:for(;++S<R;){var V=l[S],K=h==null?V:h(V);if(V=y||V!==0?V:0,N&&K===K){for(var Y=U;Y--;)if(u[Y]===K)continue e;L.push(V)}else T(u,K,y)||L.push(V)}return L}var lo=H1(fi),g1=H1(pp,!0);function nN(l,u){var h=!0;return lo(l,function(y,S,T){return h=!!u(y,S,T),h}),h}function Cc(l,u,h){for(var y=-1,S=l.length;++y<S;){var T=l[y],N=u(T);if(N!=null&&(R===n?N===N&&!ir(N):h(N,R)))var R=N,L=T}return L}function rN(l,u,h,y){var S=l.length;for(h=be(h),h<0&&(h=-h>S?0:S+h),y=y===n||y>S?S:be(y),y<0&&(y+=S),y=h>y?0:Rx(y);h<y;)l[h++]=u;return l}function y1(l,u){var h=[];return lo(l,function(y,S,T){u(y,S,T)&&h.push(y)}),h}function Kt(l,u,h,y,S){var T=-1,N=l.length;for(h||(h=WN),S||(S=[]);++T<N;){var R=l[T];u>0&&h(R)?u>1?Kt(R,u-1,h,y,S):io(S,R):y||(S[S.length]=R)}return S}var hp=U1(),v1=U1(!0);function fi(l,u){return l&&hp(l,u,zt)}function pp(l,u){return l&&v1(l,u,zt)}function Ec(l,u){return ro(u,function(h){return Ri(l[h])})}function fs(l,u){u=uo(u,l);for(var h=0,y=u.length;l!=null&&h<y;)l=l[hi(u[h++])];return h&&h==y?l:n}function x1(l,u,h){var y=u(l);return ke(l)?y:io(y,h(l))}function xn(l){return l==null?l===n?Ti:to:ls&&ls in Ke(l)?jN(l):QN(l)}function mp(l,u){return l>u}function iN(l,u){return l!=null&&Ue.call(l,u)}function oN(l,u){return l!=null&&u in Ke(l)}function sN(l,u,h){return l>=rn(u,h)&&l<Pt(u,h)}function gp(l,u,h){for(var y=h?Qh:sc,S=l[0].length,T=l.length,N=T,R=F(T),L=1/0,U=[];N--;){var V=l[N];N&&u&&(V=rt(V,nr(u))),L=rn(V.length,L),R[N]=!h&&(u||S>=120&&V.length>=120)?new us(N&&V):n}V=l[0];var K=-1,Y=R[0];e:for(;++K<S&&U.length<L;){var le=V[K],pe=u?u(le):le;if(le=h||le!==0?le:0,!(Y?da(Y,pe):y(U,pe,h))){for(N=T;--N;){var Ce=R[N];if(!(Ce?da(Ce,pe):y(l[N],pe,h)))continue e}Y&&Y.push(pe),U.push(le)}}return U}function lN(l,u,h,y){return fi(l,function(S,T,N){u(y,h(S),T,N)}),y}function wa(l,u,h){u=uo(u,l),l=sx(l,u);var y=l==null?l:l[hi(Or(u))];return y==null?n:tr(y,l,h)}function w1(l){return pt(l)&&xn(l)==nt}function aN(l){return pt(l)&&xn(l)==Wr}function uN(l){return pt(l)&&xn(l)==Z}function Sa(l,u,h,y,S){return l===u?!0:l==null||u==null||!pt(l)&&!pt(u)?l!==l&&u!==u:cN(l,u,h,y,Sa,S)}function cN(l,u,h,y,S,T){var N=ke(l),R=ke(u),L=N?Ge:on(l),U=R?Ge:on(u);L=L==nt?Vt:L,U=U==nt?Vt:U;var V=L==Vt,K=U==Vt,Y=L==U;if(Y&&fo(l)){if(!fo(u))return!1;N=!0,V=!1}if(Y&&!V)return T||(T=new Gr),N||ul(l)?Z1(l,u,h,y,S,T):zN(l,u,L,h,y,S,T);if(!(h&v)){var le=V&&Ue.call(l,"__wrapped__"),pe=K&&Ue.call(u,"__wrapped__");if(le||pe){var Ce=le?l.value():l,me=pe?u.value():u;return T||(T=new Gr),S(Ce,me,h,y,T)}}return Y?(T||(T=new Gr),BN(l,u,h,y,S,T)):!1}function fN(l){return pt(l)&&on(l)==Se}function yp(l,u,h,y){var S=h.length,T=S,N=!y;if(l==null)return!T;for(l=Ke(l);S--;){var R=h[S];if(N&&R[2]?R[1]!==l[R[0]]:!(R[0]in l))return!1}for(;++S<T;){R=h[S];var L=R[0],U=l[L],V=R[1];if(N&&R[2]){if(U===n&&!(L in l))return!1}else{var K=new Gr;if(y)var Y=y(U,V,L,l,u,K);if(!(Y===n?Sa(V,U,v|k,y,K):Y))return!1}}return!0}function S1(l){if(!ot(l)||qN(l))return!1;var u=Ri(l)?f_:Yu;return u.test(hs(l))}function dN(l){return pt(l)&&xn(l)==Lt}function hN(l){return pt(l)&&on(l)==He}function pN(l){return pt(l)&&Hc(l.length)&&!!Qe[xn(l)]}function k1(l){return typeof l=="function"?l:l==null?$n:typeof l=="object"?ke(l)?E1(l[0],l[1]):C1(l):Vx(l)}function vp(l){if(!Ca(l))return y_(l);var u=[];for(var h in Ke(l))Ue.call(l,h)&&h!="constructor"&&u.push(h);return u}function mN(l){if(!ot(l))return YN(l);var u=Ca(l),h=[];for(var y in l)y=="constructor"&&(u||!Ue.call(l,y))||h.push(y);return h}function xp(l,u){return l<u}function b1(l,u){var h=-1,y=jn(l)?F(l.length):[];return lo(l,function(S,T,N){y[++h]=u(S,T,N)}),y}function C1(l){var u=Dp(l);return u.length==1&&u[0][2]?ix(u[0][0],u[0][1]):function(h){return h===l||yp(h,l,u)}}function E1(l,u){return Lp(l)&&rx(u)?ix(hi(l),u):function(h){var y=Kp(h,l);return y===n&&y===u?qp(h,l):Sa(u,y,v|k)}}function Tc(l,u,h,y,S){l!==u&&hp(u,function(T,N){if(S||(S=new Gr),ot(T))gN(l,u,N,h,Tc,y,S);else{var R=y?y(Bp(l,N),T,N+"",l,u,S):n;R===n&&(R=T),fp(l,N,R)}},Fn)}function gN(l,u,h,y,S,T,N){var R=Bp(l,h),L=Bp(u,h),U=N.get(L);if(U){fp(l,h,U);return}var V=T?T(R,L,h+"",l,u,N):n,K=V===n;if(K){var Y=ke(L),le=!Y&&fo(L),pe=!Y&&!le&&ul(L);V=L,Y||le||pe?ke(R)?V=R:St(R)?V=Bn(R):le?(K=!1,V=z1(L,!0)):pe?(K=!1,V=B1(L,!0)):V=[]:Ta(L)||ps(L)?(V=R,ps(R)?V=Dx(R):(!ot(R)||Ri(R))&&(V=nx(L))):K=!1}K&&(N.set(L,V),S(V,L,y,T,N),N.delete(L)),fp(l,h,V)}function T1(l,u){var h=l.length;if(h)return u+=u<0?h:0,Pi(u,h)?l[u]:n}function M1(l,u,h){u.length?u=rt(u,function(T){return ke(T)?function(N){return fs(N,T.length===1?T[0]:T)}:T}):u=[$n];var y=-1;u=rt(u,nr(de()));var S=b1(l,function(T,N,R){var L=rt(u,function(U){return U(T)});return{criteria:L,index:++y,value:T}});return U2(S,function(T,N){return NN(T,N,h)})}function yN(l,u){return _1(l,u,function(h,y){return qp(l,y)})}function _1(l,u,h){for(var y=-1,S=u.length,T={};++y<S;){var N=u[y],R=fs(l,N);h(R,N)&&ka(T,uo(N,l),R)}return T}function vN(l){return function(u){return fs(u,l)}}function wp(l,u,h,y){var S=y?H2:Qs,T=-1,N=u.length,R=l;for(l===u&&(u=Bn(u)),h&&(R=rt(l,nr(h)));++T<N;)for(var L=0,U=u[T],V=h?h(U):U;(L=S(R,V,L,y))>-1;)R!==l&&gc.call(R,L,1),gc.call(l,L,1);return l}function N1(l,u){for(var h=l?u.length:0,y=h-1;h--;){var S=u[h];if(h==y||S!==T){var T=S;Pi(S)?gc.call(l,S,1):Cp(l,S)}}return l}function Sp(l,u){return l+xc(u1()*(u-l+1))}function xN(l,u,h,y){for(var S=-1,T=Pt(vc((u-l)/(h||1)),0),N=F(T);T--;)N[y?T:++S]=l,l+=h;return N}function kp(l,u){var h="";if(!l||u<1||u>B)return h;do u%2&&(h+=l),u=xc(u/2),u&&(l+=l);while(u);return h}function Me(l,u){return jp(ox(l,u,$n),l+"")}function wN(l){return d1(cl(l))}function SN(l,u){var h=cl(l);return Lc(h,cs(u,0,h.length))}function ka(l,u,h,y){if(!ot(l))return l;u=uo(u,l);for(var S=-1,T=u.length,N=T-1,R=l;R!=null&&++S<T;){var L=hi(u[S]),U=h;if(L==="__proto__"||L==="constructor"||L==="prototype")return l;if(S!=N){var V=R[L];U=y?y(V,L,R):n,U===n&&(U=ot(V)?V:Pi(u[S+1])?[]:{})}va(R,L,U),R=R[L]}return l}var O1=wc?function(l,u){return wc.set(l,u),l}:$n,kN=yc?function(l,u){return yc(l,"toString",{configurable:!0,enumerable:!1,value:Xp(u),writable:!0})}:$n;function bN(l){return Lc(cl(l))}function Nr(l,u,h){var y=-1,S=l.length;u<0&&(u=-u>S?0:S+u),h=h>S?S:h,h<0&&(h+=S),S=u>h?0:h-u>>>0,u>>>=0;for(var T=F(S);++y<S;)T[y]=l[y+u];return T}function CN(l,u){var h;return lo(l,function(y,S,T){return h=u(y,S,T),!h}),!!h}function Mc(l,u,h){var y=0,S=l==null?y:l.length;if(typeof u=="number"&&u===u&&S<=Ie){for(;y<S;){var T=y+S>>>1,N=l[T];N!==null&&!ir(N)&&(h?N<=u:N<u)?y=T+1:S=T}return S}return bp(l,u,$n,h)}function bp(l,u,h,y){var S=0,T=l==null?0:l.length;if(T===0)return 0;u=h(u);for(var N=u!==u,R=u===null,L=ir(u),U=u===n;S<T;){var V=xc((S+T)/2),K=h(l[V]),Y=K!==n,le=K===null,pe=K===K,Ce=ir(K);if(N)var me=y||pe;else U?me=pe&&(y||Y):R?me=pe&&Y&&(y||!le):L?me=pe&&Y&&!le&&(y||!Ce):le||Ce?me=!1:me=y?K<=u:K<u;me?S=V+1:T=V}return rn(T,ge)}function A1(l,u){for(var h=-1,y=l.length,S=0,T=[];++h<y;){var N=l[h],R=u?u(N):N;if(!h||!Xr(R,L)){var L=R;T[S++]=N===0?0:N}}return T}function P1(l){return typeof l=="number"?l:ir(l)?G:+l}function rr(l){if(typeof l=="string")return l;if(ke(l))return rt(l,rr)+"";if(ir(l))return c1?c1.call(l):"";var u=l+"";return u=="0"&&1/l==-Re?"-0":u}function ao(l,u,h){var y=-1,S=sc,T=l.length,N=!0,R=[],L=R;if(h)N=!1,S=Qh;else if(T>=i){var U=u?null:IN(l);if(U)return ac(U);N=!1,S=da,L=new us}else L=u?[]:R;e:for(;++y<T;){var V=l[y],K=u?u(V):V;if(V=h||V!==0?V:0,N&&K===K){for(var Y=L.length;Y--;)if(L[Y]===K)continue e;u&&L.push(K),R.push(V)}else S(L,K,h)||(L!==R&&L.push(K),R.push(V))}return R}function Cp(l,u){return u=uo(u,l),l=sx(l,u),l==null||delete l[hi(Or(u))]}function R1(l,u,h,y){return ka(l,u,h(fs(l,u)),y)}function _c(l,u,h,y){for(var S=l.length,T=y?S:-1;(y?T--:++T<S)&&u(l[T],T,l););return h?Nr(l,y?0:T,y?T+1:S):Nr(l,y?T+1:0,y?S:T)}function D1(l,u){var h=l;return h instanceof Pe&&(h=h.value()),Zh(u,function(y,S){return S.func.apply(S.thisArg,io([y],S.args))},h)}function Ep(l,u,h){var y=l.length;if(y<2)return y?ao(l[0]):[];for(var S=-1,T=F(y);++S<y;)for(var N=l[S],R=-1;++R<y;)R!=S&&(T[S]=xa(T[S]||N,l[R],u,h));return ao(Kt(T,1),u,h)}function I1(l,u,h){for(var y=-1,S=l.length,T=u.length,N={};++y<S;){var R=y<T?u[y]:n;h(N,l[y],R)}return N}function Tp(l){return St(l)?l:[]}function Mp(l){return typeof l=="function"?l:$n}function uo(l,u){return ke(l)?l:Lp(l,u)?[l]:cx(Fe(l))}var EN=Me;function co(l,u,h){var y=l.length;return h=h===n?y:h,!u&&h>=y?l:Nr(l,u,h)}var L1=d_||function(l){return Wt.clearTimeout(l)};function z1(l,u){if(u)return l.slice();var h=l.length,y=i1?i1(h):new l.constructor(h);return l.copy(y),y}function _p(l){var u=new l.constructor(l.byteLength);return new pc(u).set(new pc(l)),u}function TN(l,u){var h=u?_p(l.buffer):l.buffer;return new l.constructor(h,l.byteOffset,l.byteLength)}function MN(l){var u=new l.constructor(l.source,vn.exec(l));return u.lastIndex=l.lastIndex,u}function _N(l){return ya?Ke(ya.call(l)):{}}function B1(l,u){var h=u?_p(l.buffer):l.buffer;return new l.constructor(h,l.byteOffset,l.length)}function j1(l,u){if(l!==u){var h=l!==n,y=l===null,S=l===l,T=ir(l),N=u!==n,R=u===null,L=u===u,U=ir(u);if(!R&&!U&&!T&&l>u||T&&N&&L&&!R&&!U||y&&N&&L||!h&&L||!S)return 1;if(!y&&!T&&!U&&l<u||U&&h&&S&&!y&&!T||R&&h&&S||!N&&S||!L)return-1}return 0}function NN(l,u,h){for(var y=-1,S=l.criteria,T=u.criteria,N=S.length,R=h.length;++y<N;){var L=j1(S[y],T[y]);if(L){if(y>=R)return L;var U=h[y];return L*(U=="desc"?-1:1)}}return l.index-u.index}function F1(l,u,h,y){for(var S=-1,T=l.length,N=h.length,R=-1,L=u.length,U=Pt(T-N,0),V=F(L+U),K=!y;++R<L;)V[R]=u[R];for(;++S<N;)(K||S<T)&&(V[h[S]]=l[S]);for(;U--;)V[R++]=l[S++];return V}function $1(l,u,h,y){for(var S=-1,T=l.length,N=-1,R=h.length,L=-1,U=u.length,V=Pt(T-R,0),K=F(V+U),Y=!y;++S<V;)K[S]=l[S];for(var le=S;++L<U;)K[le+L]=u[L];for(;++N<R;)(Y||S<T)&&(K[le+h[N]]=l[S++]);return K}function Bn(l,u){var h=-1,y=l.length;for(u||(u=F(y));++h<y;)u[h]=l[h];return u}function di(l,u,h,y){var S=!h;h||(h={});for(var T=-1,N=u.length;++T<N;){var R=u[T],L=y?y(h[R],l[R],R,h,l):n;L===n&&(L=l[R]),S?Ni(h,R,L):va(h,R,L)}return h}function ON(l,u){return di(l,Ip(l),u)}function AN(l,u){return di(l,ex(l),u)}function Nc(l,u){return function(h,y){var S=ke(h)?L2:Z_,T=u?u():{};return S(h,l,de(y,2),T)}}function sl(l){return Me(function(u,h){var y=-1,S=h.length,T=S>1?h[S-1]:n,N=S>2?h[2]:n;for(T=l.length>3&&typeof T=="function"?(S--,T):n,N&&wn(h[0],h[1],N)&&(T=S<3?n:T,S=1),u=Ke(u);++y<S;){var R=h[y];R&&l(u,R,y,T)}return u})}function H1(l,u){return function(h,y){if(h==null)return h;if(!jn(h))return l(h,y);for(var S=h.length,T=u?S:-1,N=Ke(h);(u?T--:++T<S)&&y(N[T],T,N)!==!1;);return h}}function U1(l){return function(u,h,y){for(var S=-1,T=Ke(u),N=y(u),R=N.length;R--;){var L=N[l?R:++S];if(h(T[L],L,T)===!1)break}return u}}function PN(l,u,h){var y=u&b,S=ba(l);function T(){var N=this&&this!==Wt&&this instanceof T?S:l;return N.apply(y?h:this,arguments)}return T}function V1(l){return function(u){u=Fe(u);var h=Zs(u)?qr(u):n,y=h?h[0]:u.charAt(0),S=h?co(h,1).join(""):u.slice(1);return y[l]()+S}}function ll(l){return function(u){return Zh(Hx($x(u).replace(k2,"")),l,"")}}function ba(l){return function(){var u=arguments;switch(u.length){case 0:return new l;case 1:return new l(u[0]);case 2:return new l(u[0],u[1]);case 3:return new l(u[0],u[1],u[2]);case 4:return new l(u[0],u[1],u[2],u[3]);case 5:return new l(u[0],u[1],u[2],u[3],u[4]);case 6:return new l(u[0],u[1],u[2],u[3],u[4],u[5]);case 7:return new l(u[0],u[1],u[2],u[3],u[4],u[5],u[6])}var h=ol(l.prototype),y=l.apply(h,u);return ot(y)?y:h}}function RN(l,u,h){var y=ba(l);function S(){for(var T=arguments.length,N=F(T),R=T,L=al(S);R--;)N[R]=arguments[R];var U=T<3&&N[0]!==L&&N[T-1]!==L?[]:oo(N,L);if(T-=U.length,T<h)return X1(l,u,Oc,S.placeholder,n,N,U,n,n,h-T);var V=this&&this!==Wt&&this instanceof S?y:l;return tr(V,this,N)}return S}function W1(l){return function(u,h,y){var S=Ke(u);if(!jn(u)){var T=de(h,3);u=zt(u),h=function(R){return T(S[R],R,S)}}var N=l(u,h,y);return N>-1?S[T?u[N]:N]:n}}function K1(l){return Ai(function(u){var h=u.length,y=h,S=Mr.prototype.thru;for(l&&u.reverse();y--;){var T=u[y];if(typeof T!="function")throw new Tr(s);if(S&&!N&&Dc(T)=="wrapper")var N=new Mr([],!0)}for(y=N?y:h;++y<h;){T=u[y];var R=Dc(T),L=R=="wrapper"?Rp(T):n;L&&zp(L[0])&&L[1]==(O|E|M|D)&&!L[4].length&&L[9]==1?N=N[Dc(L[0])].apply(N,L[3]):N=T.length==1&&zp(T)?N[R]():N.thru(T)}return function(){var U=arguments,V=U[0];if(N&&U.length==1&&ke(V))return N.plant(V).value();for(var K=0,Y=h?u[K].apply(this,U):V;++K<h;)Y=u[K].call(this,Y);return Y}})}function Oc(l,u,h,y,S,T,N,R,L,U){var V=u&O,K=u&b,Y=u&x,le=u&(E|_),pe=u&z,Ce=Y?n:ba(l);function me(){for(var Ne=arguments.length,De=F(Ne),or=Ne;or--;)De[or]=arguments[or];if(le)var Sn=al(me),sr=W2(De,Sn);if(y&&(De=F1(De,y,S,le)),T&&(De=$1(De,T,N,le)),Ne-=sr,le&&Ne<U){var kt=oo(De,Sn);return X1(l,u,Oc,me.placeholder,h,De,kt,R,L,U-Ne)}var Jr=K?h:this,Ii=Y?Jr[l]:l;return Ne=De.length,R?De=ZN(De,R):pe&&Ne>1&&De.reverse(),V&&L<Ne&&(De.length=L),this&&this!==Wt&&this instanceof me&&(Ii=Ce||ba(Ii)),Ii.apply(Jr,De)}return me}function q1(l,u){return function(h,y){return lN(h,l,u(y),{})}}function Ac(l,u){return function(h,y){var S;if(h===n&&y===n)return u;if(h!==n&&(S=h),y!==n){if(S===n)return y;typeof h=="string"||typeof y=="string"?(h=rr(h),y=rr(y)):(h=P1(h),y=P1(y)),S=l(h,y)}return S}}function Np(l){return Ai(function(u){return u=rt(u,nr(de())),Me(function(h){var y=this;return l(u,function(S){return tr(S,y,h)})})})}function Pc(l,u){u=u===n?" ":rr(u);var h=u.length;if(h<2)return h?kp(u,l):u;var y=kp(u,vc(l/el(u)));return Zs(u)?co(qr(y),0,l).join(""):y.slice(0,l)}function DN(l,u,h,y){var S=u&b,T=ba(l);function N(){for(var R=-1,L=arguments.length,U=-1,V=y.length,K=F(V+L),Y=this&&this!==Wt&&this instanceof N?T:l;++U<V;)K[U]=y[U];for(;L--;)K[U++]=arguments[++R];return tr(Y,S?h:this,K)}return N}function G1(l){return function(u,h,y){return y&&typeof y!="number"&&wn(u,h,y)&&(h=y=n),u=Di(u),h===n?(h=u,u=0):h=Di(h),y=y===n?u<h?1:-1:Di(y),xN(u,h,y,l)}}function Rc(l){return function(u,h){return typeof u=="string"&&typeof h=="string"||(u=Ar(u),h=Ar(h)),l(u,h)}}function X1(l,u,h,y,S,T,N,R,L,U){var V=u&E,K=V?N:n,Y=V?n:N,le=V?T:n,pe=V?n:T;u|=V?M:P,u&=~(V?P:M),u&w||(u&=-4);var Ce=[l,u,S,le,K,pe,Y,R,L,U],me=h.apply(n,Ce);return zp(l)&&lx(me,Ce),me.placeholder=y,ax(me,l,u)}function Op(l){var u=At[l];return function(h,y){if(h=Ar(h),y=y==null?0:rn(be(y),292),y&&a1(h)){var S=(Fe(h)+"e").split("e"),T=u(S[0]+"e"+(+S[1]+y));return S=(Fe(T)+"e").split("e"),+(S[0]+"e"+(+S[1]-y))}return u(h)}}var IN=rl&&1/ac(new rl([,-0]))[1]==Re?function(l){return new rl(l)}:Qp;function J1(l){return function(u){var h=on(u);return h==Se?sp(u):h==He?Q2(u):V2(u,l(u))}}function Oi(l,u,h,y,S,T,N,R){var L=u&x;if(!L&&typeof l!="function")throw new Tr(s);var U=y?y.length:0;if(U||(u&=-97,y=S=n),N=N===n?N:Pt(be(N),0),R=R===n?R:be(R),U-=S?S.length:0,u&P){var V=y,K=S;y=S=n}var Y=L?n:Rp(l),le=[l,u,h,y,S,V,K,T,N,R];if(Y&&JN(le,Y),l=le[0],u=le[1],h=le[2],y=le[3],S=le[4],R=le[9]=le[9]===n?L?0:l.length:Pt(le[9]-U,0),!R&&u&(E|_)&&(u&=-25),!u||u==b)var pe=PN(l,u,h);else u==E||u==_?pe=RN(l,u,R):(u==M||u==(b|M))&&!S.length?pe=DN(l,u,h,y):pe=Oc.apply(n,le);var Ce=Y?O1:lx;return ax(Ce(pe,le),l,u)}function Y1(l,u,h,y){return l===n||Xr(l,nl[h])&&!Ue.call(y,h)?u:l}function Q1(l,u,h,y,S,T){return ot(l)&&ot(u)&&(T.set(u,l),Tc(l,u,n,Q1,T),T.delete(u)),l}function LN(l){return Ta(l)?n:l}function Z1(l,u,h,y,S,T){var N=h&v,R=l.length,L=u.length;if(R!=L&&!(N&&L>R))return!1;var U=T.get(l),V=T.get(u);if(U&&V)return U==u&&V==l;var K=-1,Y=!0,le=h&k?new us:n;for(T.set(l,u),T.set(u,l);++K<R;){var pe=l[K],Ce=u[K];if(y)var me=N?y(Ce,pe,K,u,l,T):y(pe,Ce,K,l,u,T);if(me!==n){if(me)continue;Y=!1;break}if(le){if(!ep(u,function(Ne,De){if(!da(le,De)&&(pe===Ne||S(pe,Ne,h,y,T)))return le.push(De)})){Y=!1;break}}else if(!(pe===Ce||S(pe,Ce,h,y,T))){Y=!1;break}}return T.delete(l),T.delete(u),Y}function zN(l,u,h,y,S,T,N){switch(h){case Jn:if(l.byteLength!=u.byteLength||l.byteOffset!=u.byteOffset)return!1;l=l.buffer,u=u.buffer;case Wr:return!(l.byteLength!=u.byteLength||!T(new pc(l),new pc(u)));case $:case Z:case An:return Xr(+l,+u);case fe:return l.name==u.name&&l.message==u.message;case Lt:case Et:return l==u+"";case Se:var R=sp;case He:var L=y&v;if(R||(R=ac),l.size!=u.size&&!L)return!1;var U=N.get(l);if(U)return U==u;y|=k,N.set(l,u);var V=Z1(R(l),R(u),y,S,T,N);return N.delete(l),V;case Tt:if(ya)return ya.call(l)==ya.call(u)}return!1}function BN(l,u,h,y,S,T){var N=h&v,R=Ap(l),L=R.length,U=Ap(u),V=U.length;if(L!=V&&!N)return!1;for(var K=L;K--;){var Y=R[K];if(!(N?Y in u:Ue.call(u,Y)))return!1}var le=T.get(l),pe=T.get(u);if(le&&pe)return le==u&&pe==l;var Ce=!0;T.set(l,u),T.set(u,l);for(var me=N;++K<L;){Y=R[K];var Ne=l[Y],De=u[Y];if(y)var or=N?y(De,Ne,Y,u,l,T):y(Ne,De,Y,l,u,T);if(!(or===n?Ne===De||S(Ne,De,h,y,T):or)){Ce=!1;break}me||(me=Y=="constructor")}if(Ce&&!me){var Sn=l.constructor,sr=u.constructor;Sn!=sr&&"constructor"in l&&"constructor"in u&&!(typeof Sn=="function"&&Sn instanceof Sn&&typeof sr=="function"&&sr instanceof sr)&&(Ce=!1)}return T.delete(l),T.delete(u),Ce}function Ai(l){return jp(ox(l,n,px),l+"")}function Ap(l){return x1(l,zt,Ip)}function Pp(l){return x1(l,Fn,ex)}var Rp=wc?function(l){return wc.get(l)}:Qp;function Dc(l){for(var u=l.name+"",h=il[u],y=Ue.call(il,u)?h.length:0;y--;){var S=h[y],T=S.func;if(T==null||T==l)return S.name}return u}function al(l){var u=Ue.call(C,"placeholder")?C:l;return u.placeholder}function de(){var l=C.iteratee||Jp;return l=l===Jp?k1:l,arguments.length?l(arguments[0],arguments[1]):l}function Ic(l,u){var h=l.__data__;return KN(u)?h[typeof u=="string"?"string":"hash"]:h.map}function Dp(l){for(var u=zt(l),h=u.length;h--;){var y=u[h],S=l[y];u[h]=[y,S,rx(S)]}return u}function ds(l,u){var h=X2(l,u);return S1(h)?h:n}function jN(l){var u=Ue.call(l,ls),h=l[ls];try{l[ls]=n;var y=!0}catch{}var S=dc.call(l);return y&&(u?l[ls]=h:delete l[ls]),S}var Ip=ap?function(l){return l==null?[]:(l=Ke(l),ro(ap(l),function(u){return s1.call(l,u)}))}:Zp,ex=ap?function(l){for(var u=[];l;)io(u,Ip(l)),l=mc(l);return u}:Zp,on=xn;(up&&on(new up(new ArrayBuffer(1)))!=Jn||pa&&on(new pa)!=Se||cp&&on(cp.resolve())!=Pn||rl&&on(new rl)!=He||ma&&on(new ma)!=Vr)&&(on=function(l){var u=xn(l),h=u==Vt?l.constructor:n,y=h?hs(h):"";if(y)switch(y){case S_:return Jn;case k_:return Se;case b_:return Pn;case C_:return He;case E_:return Vr}return u});function FN(l,u,h){for(var y=-1,S=h.length;++y<S;){var T=h[y],N=T.size;switch(T.type){case"drop":l+=N;break;case"dropRight":u-=N;break;case"take":u=rn(u,l+N);break;case"takeRight":l=Pt(l,u-N);break}}return{start:l,end:u}}function $N(l){var u=l.match(br);return u?u[1].split(Hh):[]}function tx(l,u,h){u=uo(u,l);for(var y=-1,S=u.length,T=!1;++y<S;){var N=hi(u[y]);if(!(T=l!=null&&h(l,N)))break;l=l[N]}return T||++y!=S?T:(S=l==null?0:l.length,!!S&&Hc(S)&&Pi(N,S)&&(ke(l)||ps(l)))}function HN(l){var u=l.length,h=new l.constructor(u);return u&&typeof l[0]=="string"&&Ue.call(l,"index")&&(h.index=l.index,h.input=l.input),h}function nx(l){return typeof l.constructor=="function"&&!Ca(l)?ol(mc(l)):{}}function UN(l,u,h){var y=l.constructor;switch(u){case Wr:return _p(l);case $:case Z:return new y(+l);case Jn:return TN(l,h);case dt:case ie:case Ae:case Be:case no:case Rn:case Yn:case xt:case ht:return B1(l,h);case Se:return new y;case An:case Et:return new y(l);case Lt:return MN(l);case He:return new y;case Tt:return _N(l)}}function VN(l,u){var h=u.length;if(!h)return l;var y=h-1;return u[y]=(h>1?"& ":"")+u[y],u=u.join(h>2?", ":" "),l.replace(kr,`{
/* [wrapped with `+u+`] */
`)}function WN(l){return ke(l)||ps(l)||!!(l1&&l&&l[l1])}function Pi(l,u){var h=typeof l;return u=u??B,!!u&&(h=="number"||h!="symbol"&&Zu.test(l))&&l>-1&&l%1==0&&l<u}function wn(l,u,h){if(!ot(h))return!1;var y=typeof u;return(y=="number"?jn(h)&&Pi(u,h.length):y=="string"&&u in h)?Xr(h[u],l):!1}function Lp(l,u){if(ke(l))return!1;var h=typeof l;return h=="number"||h=="symbol"||h=="boolean"||l==null||ir(l)?!0:Sr.test(l)||!nn.test(l)||u!=null&&l in Ke(u)}function KN(l){var u=typeof l;return u=="string"||u=="number"||u=="symbol"||u=="boolean"?l!=="__proto__":l===null}function zp(l){var u=Dc(l),h=C[u];if(typeof h!="function"||!(u in Pe.prototype))return!1;if(l===h)return!0;var y=Rp(h);return!!y&&l===y[0]}function qN(l){return!!r1&&r1 in l}var GN=cc?Ri:em;function Ca(l){var u=l&&l.constructor,h=typeof u=="function"&&u.prototype||nl;return l===h}function rx(l){return l===l&&!ot(l)}function ix(l,u){return function(h){return h==null?!1:h[l]===u&&(u!==n||l in Ke(h))}}function XN(l){var u=Fc(l,function(y){return h.size===f&&h.clear(),y}),h=u.cache;return u}function JN(l,u){var h=l[1],y=u[1],S=h|y,T=S<(b|x|O),N=y==O&&h==E||y==O&&h==D&&l[7].length<=u[8]||y==(O|D)&&u[7].length<=u[8]&&h==E;if(!(T||N))return l;y&b&&(l[2]=u[2],S|=h&b?0:w);var R=u[3];if(R){var L=l[3];l[3]=L?F1(L,R,u[4]):R,l[4]=L?oo(l[3],d):u[4]}return R=u[5],R&&(L=l[5],l[5]=L?$1(L,R,u[6]):R,l[6]=L?oo(l[5],d):u[6]),R=u[7],R&&(l[7]=R),y&O&&(l[8]=l[8]==null?u[8]:rn(l[8],u[8])),l[9]==null&&(l[9]=u[9]),l[0]=u[0],l[1]=S,l}function YN(l){var u=[];if(l!=null)for(var h in Ke(l))u.push(h);return u}function QN(l){return dc.call(l)}function ox(l,u,h){return u=Pt(u===n?l.length-1:u,0),function(){for(var y=arguments,S=-1,T=Pt(y.length-u,0),N=F(T);++S<T;)N[S]=y[u+S];S=-1;for(var R=F(u+1);++S<u;)R[S]=y[S];return R[u]=h(N),tr(l,this,R)}}function sx(l,u){return u.length<2?l:fs(l,Nr(u,0,-1))}function ZN(l,u){for(var h=l.length,y=rn(u.length,h),S=Bn(l);y--;){var T=u[y];l[y]=Pi(T,h)?S[T]:n}return l}function Bp(l,u){if(!(u==="constructor"&&typeof l[u]=="function")&&u!="__proto__")return l[u]}var lx=ux(O1),Ea=p_||function(l,u){return Wt.setTimeout(l,u)},jp=ux(kN);function ax(l,u,h){var y=u+"";return jp(l,VN(y,eO($N(y),h)))}function ux(l){var u=0,h=0;return function(){var y=v_(),S=he-(y-h);if(h=y,S>0){if(++u>=oe)return arguments[0]}else u=0;return l.apply(n,arguments)}}function Lc(l,u){var h=-1,y=l.length,S=y-1;for(u=u===n?y:u;++h<u;){var T=Sp(h,S),N=l[T];l[T]=l[h],l[h]=N}return l.length=u,l}var cx=XN(function(l){var u=[];return l.charCodeAt(0)===46&&u.push(""),l.replace(rs,function(h,y,S,T){u.push(S?T.replace(yn,"$1"):y||h)}),u});function hi(l){if(typeof l=="string"||ir(l))return l;var u=l+"";return u=="0"&&1/l==-Re?"-0":u}function hs(l){if(l!=null){try{return fc.call(l)}catch{}try{return l+""}catch{}}return""}function eO(l,u){return Er(ft,function(h){var y="_."+h[0];u&h[1]&&!sc(l,y)&&l.push(y)}),l.sort()}function fx(l){if(l instanceof Pe)return l.clone();var u=new Mr(l.__wrapped__,l.__chain__);return u.__actions__=Bn(l.__actions__),u.__index__=l.__index__,u.__values__=l.__values__,u}function tO(l,u,h){(h?wn(l,u,h):u===n)?u=1:u=Pt(be(u),0);var y=l==null?0:l.length;if(!y||u<1)return[];for(var S=0,T=0,N=F(vc(y/u));S<y;)N[T++]=Nr(l,S,S+=u);return N}function nO(l){for(var u=-1,h=l==null?0:l.length,y=0,S=[];++u<h;){var T=l[u];T&&(S[y++]=T)}return S}function rO(){var l=arguments.length;if(!l)return[];for(var u=F(l-1),h=arguments[0],y=l;y--;)u[y-1]=arguments[y];return io(ke(h)?Bn(h):[h],Kt(u,1))}var iO=Me(function(l,u){return St(l)?xa(l,Kt(u,1,St,!0)):[]}),oO=Me(function(l,u){var h=Or(u);return St(h)&&(h=n),St(l)?xa(l,Kt(u,1,St,!0),de(h,2)):[]}),sO=Me(function(l,u){var h=Or(u);return St(h)&&(h=n),St(l)?xa(l,Kt(u,1,St,!0),n,h):[]});function lO(l,u,h){var y=l==null?0:l.length;return y?(u=h||u===n?1:be(u),Nr(l,u<0?0:u,y)):[]}function aO(l,u,h){var y=l==null?0:l.length;return y?(u=h||u===n?1:be(u),u=y-u,Nr(l,0,u<0?0:u)):[]}function uO(l,u){return l&&l.length?_c(l,de(u,3),!0,!0):[]}function cO(l,u){return l&&l.length?_c(l,de(u,3),!0):[]}function fO(l,u,h,y){var S=l==null?0:l.length;return S?(h&&typeof h!="number"&&wn(l,u,h)&&(h=0,y=S),rN(l,u,h,y)):[]}function dx(l,u,h){var y=l==null?0:l.length;if(!y)return-1;var S=h==null?0:be(h);return S<0&&(S=Pt(y+S,0)),lc(l,de(u,3),S)}function hx(l,u,h){var y=l==null?0:l.length;if(!y)return-1;var S=y-1;return h!==n&&(S=be(h),S=h<0?Pt(y+S,0):rn(S,y-1)),lc(l,de(u,3),S,!0)}function px(l){var u=l==null?0:l.length;return u?Kt(l,1):[]}function dO(l){var u=l==null?0:l.length;return u?Kt(l,Re):[]}function hO(l,u){var h=l==null?0:l.length;return h?(u=u===n?1:be(u),Kt(l,u)):[]}function pO(l){for(var u=-1,h=l==null?0:l.length,y={};++u<h;){var S=l[u];y[S[0]]=S[1]}return y}function mx(l){return l&&l.length?l[0]:n}function mO(l,u,h){var y=l==null?0:l.length;if(!y)return-1;var S=h==null?0:be(h);return S<0&&(S=Pt(y+S,0)),Qs(l,u,S)}function gO(l){var u=l==null?0:l.length;return u?Nr(l,0,-1):[]}var yO=Me(function(l){var u=rt(l,Tp);return u.length&&u[0]===l[0]?gp(u):[]}),vO=Me(function(l){var u=Or(l),h=rt(l,Tp);return u===Or(h)?u=n:h.pop(),h.length&&h[0]===l[0]?gp(h,de(u,2)):[]}),xO=Me(function(l){var u=Or(l),h=rt(l,Tp);return u=typeof u=="function"?u:n,u&&h.pop(),h.length&&h[0]===l[0]?gp(h,n,u):[]});function wO(l,u){return l==null?"":g_.call(l,u)}function Or(l){var u=l==null?0:l.length;return u?l[u-1]:n}function SO(l,u,h){var y=l==null?0:l.length;if(!y)return-1;var S=y;return h!==n&&(S=be(h),S=S<0?Pt(y+S,0):rn(S,y-1)),u===u?e_(l,u,S):lc(l,Xv,S,!0)}function kO(l,u){return l&&l.length?T1(l,be(u)):n}var bO=Me(gx);function gx(l,u){return l&&l.length&&u&&u.length?wp(l,u):l}function CO(l,u,h){return l&&l.length&&u&&u.length?wp(l,u,de(h,2)):l}function EO(l,u,h){return l&&l.length&&u&&u.length?wp(l,u,n,h):l}var TO=Ai(function(l,u){var h=l==null?0:l.length,y=dp(l,u);return N1(l,rt(u,function(S){return Pi(S,h)?+S:S}).sort(j1)),y});function MO(l,u){var h=[];if(!(l&&l.length))return h;var y=-1,S=[],T=l.length;for(u=de(u,3);++y<T;){var N=l[y];u(N,y,l)&&(h.push(N),S.push(y))}return N1(l,S),h}function Fp(l){return l==null?l:w_.call(l)}function _O(l,u,h){var y=l==null?0:l.length;return y?(h&&typeof h!="number"&&wn(l,u,h)?(u=0,h=y):(u=u==null?0:be(u),h=h===n?y:be(h)),Nr(l,u,h)):[]}function NO(l,u){return Mc(l,u)}function OO(l,u,h){return bp(l,u,de(h,2))}function AO(l,u){var h=l==null?0:l.length;if(h){var y=Mc(l,u);if(y<h&&Xr(l[y],u))return y}return-1}function PO(l,u){return Mc(l,u,!0)}function RO(l,u,h){return bp(l,u,de(h,2),!0)}function DO(l,u){var h=l==null?0:l.length;if(h){var y=Mc(l,u,!0)-1;if(Xr(l[y],u))return y}return-1}function IO(l){return l&&l.length?A1(l):[]}function LO(l,u){return l&&l.length?A1(l,de(u,2)):[]}function zO(l){var u=l==null?0:l.length;return u?Nr(l,1,u):[]}function BO(l,u,h){return l&&l.length?(u=h||u===n?1:be(u),Nr(l,0,u<0?0:u)):[]}function jO(l,u,h){var y=l==null?0:l.length;return y?(u=h||u===n?1:be(u),u=y-u,Nr(l,u<0?0:u,y)):[]}function FO(l,u){return l&&l.length?_c(l,de(u,3),!1,!0):[]}function $O(l,u){return l&&l.length?_c(l,de(u,3)):[]}var HO=Me(function(l){return ao(Kt(l,1,St,!0))}),UO=Me(function(l){var u=Or(l);return St(u)&&(u=n),ao(Kt(l,1,St,!0),de(u,2))}),VO=Me(function(l){var u=Or(l);return u=typeof u=="function"?u:n,ao(Kt(l,1,St,!0),n,u)});function WO(l){return l&&l.length?ao(l):[]}function KO(l,u){return l&&l.length?ao(l,de(u,2)):[]}function qO(l,u){return u=typeof u=="function"?u:n,l&&l.length?ao(l,n,u):[]}function $p(l){if(!(l&&l.length))return[];var u=0;return l=ro(l,function(h){if(St(h))return u=Pt(h.length,u),!0}),ip(u,function(h){return rt(l,tp(h))})}function yx(l,u){if(!(l&&l.length))return[];var h=$p(l);return u==null?h:rt(h,function(y){return tr(u,n,y)})}var GO=Me(function(l,u){return St(l)?xa(l,u):[]}),XO=Me(function(l){return Ep(ro(l,St))}),JO=Me(function(l){var u=Or(l);return St(u)&&(u=n),Ep(ro(l,St),de(u,2))}),YO=Me(function(l){var u=Or(l);return u=typeof u=="function"?u:n,Ep(ro(l,St),n,u)}),QO=Me($p);function ZO(l,u){return I1(l||[],u||[],va)}function eA(l,u){return I1(l||[],u||[],ka)}var tA=Me(function(l){var u=l.length,h=u>1?l[u-1]:n;return h=typeof h=="function"?(l.pop(),h):n,yx(l,h)});function vx(l){var u=C(l);return u.__chain__=!0,u}function nA(l,u){return u(l),l}function zc(l,u){return u(l)}var rA=Ai(function(l){var u=l.length,h=u?l[0]:0,y=this.__wrapped__,S=function(T){return dp(T,l)};return u>1||this.__actions__.length||!(y instanceof Pe)||!Pi(h)?this.thru(S):(y=y.slice(h,+h+(u?1:0)),y.__actions__.push({func:zc,args:[S],thisArg:n}),new Mr(y,this.__chain__).thru(function(T){return u&&!T.length&&T.push(n),T}))});function iA(){return vx(this)}function oA(){return new Mr(this.value(),this.__chain__)}function sA(){this.__values__===n&&(this.__values__=Px(this.value()));var l=this.__index__>=this.__values__.length,u=l?n:this.__values__[this.__index__++];return{done:l,value:u}}function lA(){return this}function aA(l){for(var u,h=this;h instanceof kc;){var y=fx(h);y.__index__=0,y.__values__=n,u?S.__wrapped__=y:u=y;var S=y;h=h.__wrapped__}return S.__wrapped__=l,u}function uA(){var l=this.__wrapped__;if(l instanceof Pe){var u=l;return this.__actions__.length&&(u=new Pe(this)),u=u.reverse(),u.__actions__.push({func:zc,args:[Fp],thisArg:n}),new Mr(u,this.__chain__)}return this.thru(Fp)}function cA(){return D1(this.__wrapped__,this.__actions__)}var fA=Nc(function(l,u,h){Ue.call(l,h)?++l[h]:Ni(l,h,1)});function dA(l,u,h){var y=ke(l)?qv:nN;return h&&wn(l,u,h)&&(u=n),y(l,de(u,3))}function hA(l,u){var h=ke(l)?ro:y1;return h(l,de(u,3))}var pA=W1(dx),mA=W1(hx);function gA(l,u){return Kt(Bc(l,u),1)}function yA(l,u){return Kt(Bc(l,u),Re)}function vA(l,u,h){return h=h===n?1:be(h),Kt(Bc(l,u),h)}function xx(l,u){var h=ke(l)?Er:lo;return h(l,de(u,3))}function wx(l,u){var h=ke(l)?z2:g1;return h(l,de(u,3))}var xA=Nc(function(l,u,h){Ue.call(l,h)?l[h].push(u):Ni(l,h,[u])});function wA(l,u,h,y){l=jn(l)?l:cl(l),h=h&&!y?be(h):0;var S=l.length;return h<0&&(h=Pt(S+h,0)),Uc(l)?h<=S&&l.indexOf(u,h)>-1:!!S&&Qs(l,u,h)>-1}var SA=Me(function(l,u,h){var y=-1,S=typeof u=="function",T=jn(l)?F(l.length):[];return lo(l,function(N){T[++y]=S?tr(u,N,h):wa(N,u,h)}),T}),kA=Nc(function(l,u,h){Ni(l,h,u)});function Bc(l,u){var h=ke(l)?rt:b1;return h(l,de(u,3))}function bA(l,u,h,y){return l==null?[]:(ke(u)||(u=u==null?[]:[u]),h=y?n:h,ke(h)||(h=h==null?[]:[h]),M1(l,u,h))}var CA=Nc(function(l,u,h){l[h?0:1].push(u)},function(){return[[],[]]});function EA(l,u,h){var y=ke(l)?Zh:Yv,S=arguments.length<3;return y(l,de(u,4),h,S,lo)}function TA(l,u,h){var y=ke(l)?B2:Yv,S=arguments.length<3;return y(l,de(u,4),h,S,g1)}function MA(l,u){var h=ke(l)?ro:y1;return h(l,$c(de(u,3)))}function _A(l){var u=ke(l)?d1:wN;return u(l)}function NA(l,u,h){(h?wn(l,u,h):u===n)?u=1:u=be(u);var y=ke(l)?Y_:SN;return y(l,u)}function OA(l){var u=ke(l)?Q_:bN;return u(l)}function AA(l){if(l==null)return 0;if(jn(l))return Uc(l)?el(l):l.length;var u=on(l);return u==Se||u==He?l.size:vp(l).length}function PA(l,u,h){var y=ke(l)?ep:CN;return h&&wn(l,u,h)&&(u=n),y(l,de(u,3))}var RA=Me(function(l,u){if(l==null)return[];var h=u.length;return h>1&&wn(l,u[0],u[1])?u=[]:h>2&&wn(u[0],u[1],u[2])&&(u=[u[0]]),M1(l,Kt(u,1),[])}),jc=h_||function(){return Wt.Date.now()};function DA(l,u){if(typeof u!="function")throw new Tr(s);return l=be(l),function(){if(--l<1)return u.apply(this,arguments)}}function Sx(l,u,h){return u=h?n:u,u=l&&u==null?l.length:u,Oi(l,O,n,n,n,n,u)}function kx(l,u){var h;if(typeof u!="function")throw new Tr(s);return l=be(l),function(){return--l>0&&(h=u.apply(this,arguments)),l<=1&&(u=n),h}}var Hp=Me(function(l,u,h){var y=b;if(h.length){var S=oo(h,al(Hp));y|=M}return Oi(l,y,u,h,S)}),bx=Me(function(l,u,h){var y=b|x;if(h.length){var S=oo(h,al(bx));y|=M}return Oi(u,y,l,h,S)});function Cx(l,u,h){u=h?n:u;var y=Oi(l,E,n,n,n,n,n,u);return y.placeholder=Cx.placeholder,y}function Ex(l,u,h){u=h?n:u;var y=Oi(l,_,n,n,n,n,n,u);return y.placeholder=Ex.placeholder,y}function Tx(l,u,h){var y,S,T,N,R,L,U=0,V=!1,K=!1,Y=!0;if(typeof l!="function")throw new Tr(s);u=Ar(u)||0,ot(h)&&(V=!!h.leading,K="maxWait"in h,T=K?Pt(Ar(h.maxWait)||0,u):T,Y="trailing"in h?!!h.trailing:Y);function le(kt){var Jr=y,Ii=S;return y=S=n,U=kt,N=l.apply(Ii,Jr),N}function pe(kt){return U=kt,R=Ea(Ne,u),V?le(kt):N}function Ce(kt){var Jr=kt-L,Ii=kt-U,Wx=u-Jr;return K?rn(Wx,T-Ii):Wx}function me(kt){var Jr=kt-L,Ii=kt-U;return L===n||Jr>=u||Jr<0||K&&Ii>=T}function Ne(){var kt=jc();if(me(kt))return De(kt);R=Ea(Ne,Ce(kt))}function De(kt){return R=n,Y&&y?le(kt):(y=S=n,N)}function or(){R!==n&&L1(R),U=0,y=L=S=R=n}function Sn(){return R===n?N:De(jc())}function sr(){var kt=jc(),Jr=me(kt);if(y=arguments,S=this,L=kt,Jr){if(R===n)return pe(L);if(K)return L1(R),R=Ea(Ne,u),le(L)}return R===n&&(R=Ea(Ne,u)),N}return sr.cancel=or,sr.flush=Sn,sr}var IA=Me(function(l,u){return m1(l,1,u)}),LA=Me(function(l,u,h){return m1(l,Ar(u)||0,h)});function zA(l){return Oi(l,z)}function Fc(l,u){if(typeof l!="function"||u!=null&&typeof u!="function")throw new Tr(s);var h=function(){var y=arguments,S=u?u.apply(this,y):y[0],T=h.cache;if(T.has(S))return T.get(S);var N=l.apply(this,y);return h.cache=T.set(S,N)||T,N};return h.cache=new(Fc.Cache||_i),h}Fc.Cache=_i;function $c(l){if(typeof l!="function")throw new Tr(s);return function(){var u=arguments;switch(u.length){case 0:return!l.call(this);case 1:return!l.call(this,u[0]);case 2:return!l.call(this,u[0],u[1]);case 3:return!l.call(this,u[0],u[1],u[2])}return!l.apply(this,u)}}function BA(l){return kx(2,l)}var jA=EN(function(l,u){u=u.length==1&&ke(u[0])?rt(u[0],nr(de())):rt(Kt(u,1),nr(de()));var h=u.length;return Me(function(y){for(var S=-1,T=rn(y.length,h);++S<T;)y[S]=u[S].call(this,y[S]);return tr(l,this,y)})}),Up=Me(function(l,u){var h=oo(u,al(Up));return Oi(l,M,n,u,h)}),Mx=Me(function(l,u){var h=oo(u,al(Mx));return Oi(l,P,n,u,h)}),FA=Ai(function(l,u){return Oi(l,D,n,n,n,u)});function $A(l,u){if(typeof l!="function")throw new Tr(s);return u=u===n?u:be(u),Me(l,u)}function HA(l,u){if(typeof l!="function")throw new Tr(s);return u=u==null?0:Pt(be(u),0),Me(function(h){var y=h[u],S=co(h,0,u);return y&&io(S,y),tr(l,this,S)})}function UA(l,u,h){var y=!0,S=!0;if(typeof l!="function")throw new Tr(s);return ot(h)&&(y="leading"in h?!!h.leading:y,S="trailing"in h?!!h.trailing:S),Tx(l,u,{leading:y,maxWait:u,trailing:S})}function VA(l){return Sx(l,1)}function WA(l,u){return Up(Mp(u),l)}function KA(){if(!arguments.length)return[];var l=arguments[0];return ke(l)?l:[l]}function qA(l){return _r(l,g)}function GA(l,u){return u=typeof u=="function"?u:n,_r(l,g,u)}function XA(l){return _r(l,p|g)}function JA(l,u){return u=typeof u=="function"?u:n,_r(l,p|g,u)}function YA(l,u){return u==null||p1(l,u,zt(u))}function Xr(l,u){return l===u||l!==l&&u!==u}var QA=Rc(mp),ZA=Rc(function(l,u){return l>=u}),ps=w1(function(){return arguments}())?w1:function(l){return pt(l)&&Ue.call(l,"callee")&&!s1.call(l,"callee")},ke=F.isArray,eP=$v?nr($v):aN;function jn(l){return l!=null&&Hc(l.length)&&!Ri(l)}function St(l){return pt(l)&&jn(l)}function tP(l){return l===!0||l===!1||pt(l)&&xn(l)==$}var fo=m_||em,nP=Hv?nr(Hv):uN;function rP(l){return pt(l)&&l.nodeType===1&&!Ta(l)}function iP(l){if(l==null)return!0;if(jn(l)&&(ke(l)||typeof l=="string"||typeof l.splice=="function"||fo(l)||ul(l)||ps(l)))return!l.length;var u=on(l);if(u==Se||u==He)return!l.size;if(Ca(l))return!vp(l).length;for(var h in l)if(Ue.call(l,h))return!1;return!0}function oP(l,u){return Sa(l,u)}function sP(l,u,h){h=typeof h=="function"?h:n;var y=h?h(l,u):n;return y===n?Sa(l,u,n,h):!!y}function Vp(l){if(!pt(l))return!1;var u=xn(l);return u==fe||u==ae||typeof l.message=="string"&&typeof l.name=="string"&&!Ta(l)}function lP(l){return typeof l=="number"&&a1(l)}function Ri(l){if(!ot(l))return!1;var u=xn(l);return u==Ye||u==ye||u==Le||u==ai}function _x(l){return typeof l=="number"&&l==be(l)}function Hc(l){return typeof l=="number"&&l>-1&&l%1==0&&l<=B}function ot(l){var u=typeof l;return l!=null&&(u=="object"||u=="function")}function pt(l){return l!=null&&typeof l=="object"}var Nx=Uv?nr(Uv):fN;function aP(l,u){return l===u||yp(l,u,Dp(u))}function uP(l,u,h){return h=typeof h=="function"?h:n,yp(l,u,Dp(u),h)}function cP(l){return Ox(l)&&l!=+l}function fP(l){if(GN(l))throw new we(o);return S1(l)}function dP(l){return l===null}function hP(l){return l==null}function Ox(l){return typeof l=="number"||pt(l)&&xn(l)==An}function Ta(l){if(!pt(l)||xn(l)!=Vt)return!1;var u=mc(l);if(u===null)return!0;var h=Ue.call(u,"constructor")&&u.constructor;return typeof h=="function"&&h instanceof h&&fc.call(h)==u_}var Wp=Vv?nr(Vv):dN;function pP(l){return _x(l)&&l>=-B&&l<=B}var Ax=Wv?nr(Wv):hN;function Uc(l){return typeof l=="string"||!ke(l)&&pt(l)&&xn(l)==Et}function ir(l){return typeof l=="symbol"||pt(l)&&xn(l)==Tt}var ul=Kv?nr(Kv):pN;function mP(l){return l===n}function gP(l){return pt(l)&&on(l)==Vr}function yP(l){return pt(l)&&xn(l)==Xs}var vP=Rc(xp),xP=Rc(function(l,u){return l<=u});function Px(l){if(!l)return[];if(jn(l))return Uc(l)?qr(l):Bn(l);if(ha&&l[ha])return Y2(l[ha]());var u=on(l),h=u==Se?sp:u==He?ac:cl;return h(l)}function Di(l){if(!l)return l===0?l:0;if(l=Ar(l),l===Re||l===-Re){var u=l<0?-1:1;return u*W}return l===l?l:0}function be(l){var u=Di(l),h=u%1;return u===u?h?u-h:u:0}function Rx(l){return l?cs(be(l),0,Q):0}function Ar(l){if(typeof l=="number")return l;if(ir(l))return G;if(ot(l)){var u=typeof l.valueOf=="function"?l.valueOf():l;l=ot(u)?u+"":u}if(typeof l!="string")return l===0?l:+l;l=Qv(l);var h=er.test(l);return h||Qu.test(l)?D2(l.slice(2),h?2:8):aa.test(l)?G:+l}function Dx(l){return di(l,Fn(l))}function wP(l){return l?cs(be(l),-B,B):l===0?l:0}function Fe(l){return l==null?"":rr(l)}var SP=sl(function(l,u){if(Ca(u)||jn(u)){di(u,zt(u),l);return}for(var h in u)Ue.call(u,h)&&va(l,h,u[h])}),Ix=sl(function(l,u){di(u,Fn(u),l)}),Vc=sl(function(l,u,h,y){di(u,Fn(u),l,y)}),kP=sl(function(l,u,h,y){di(u,zt(u),l,y)}),bP=Ai(dp);function CP(l,u){var h=ol(l);return u==null?h:h1(h,u)}var EP=Me(function(l,u){l=Ke(l);var h=-1,y=u.length,S=y>2?u[2]:n;for(S&&wn(u[0],u[1],S)&&(y=1);++h<y;)for(var T=u[h],N=Fn(T),R=-1,L=N.length;++R<L;){var U=N[R],V=l[U];(V===n||Xr(V,nl[U])&&!Ue.call(l,U))&&(l[U]=T[U])}return l}),TP=Me(function(l){return l.push(n,Q1),tr(Lx,n,l)});function MP(l,u){return Gv(l,de(u,3),fi)}function _P(l,u){return Gv(l,de(u,3),pp)}function NP(l,u){return l==null?l:hp(l,de(u,3),Fn)}function OP(l,u){return l==null?l:v1(l,de(u,3),Fn)}function AP(l,u){return l&&fi(l,de(u,3))}function PP(l,u){return l&&pp(l,de(u,3))}function RP(l){return l==null?[]:Ec(l,zt(l))}function DP(l){return l==null?[]:Ec(l,Fn(l))}function Kp(l,u,h){var y=l==null?n:fs(l,u);return y===n?h:y}function IP(l,u){return l!=null&&tx(l,u,iN)}function qp(l,u){return l!=null&&tx(l,u,oN)}var LP=q1(function(l,u,h){u!=null&&typeof u.toString!="function"&&(u=dc.call(u)),l[u]=h},Xp($n)),zP=q1(function(l,u,h){u!=null&&typeof u.toString!="function"&&(u=dc.call(u)),Ue.call(l,u)?l[u].push(h):l[u]=[h]},de),BP=Me(wa);function zt(l){return jn(l)?f1(l):vp(l)}function Fn(l){return jn(l)?f1(l,!0):mN(l)}function jP(l,u){var h={};return u=de(u,3),fi(l,function(y,S,T){Ni(h,u(y,S,T),y)}),h}function FP(l,u){var h={};return u=de(u,3),fi(l,function(y,S,T){Ni(h,S,u(y,S,T))}),h}var $P=sl(function(l,u,h){Tc(l,u,h)}),Lx=sl(function(l,u,h,y){Tc(l,u,h,y)}),HP=Ai(function(l,u){var h={};if(l==null)return h;var y=!1;u=rt(u,function(T){return T=uo(T,l),y||(y=T.length>1),T}),di(l,Pp(l),h),y&&(h=_r(h,p|m|g,LN));for(var S=u.length;S--;)Cp(h,u[S]);return h});function UP(l,u){return zx(l,$c(de(u)))}var VP=Ai(function(l,u){return l==null?{}:yN(l,u)});function zx(l,u){if(l==null)return{};var h=rt(Pp(l),function(y){return[y]});return u=de(u),_1(l,h,function(y,S){return u(y,S[0])})}function WP(l,u,h){u=uo(u,l);var y=-1,S=u.length;for(S||(S=1,l=n);++y<S;){var T=l==null?n:l[hi(u[y])];T===n&&(y=S,T=h),l=Ri(T)?T.call(l):T}return l}function KP(l,u,h){return l==null?l:ka(l,u,h)}function qP(l,u,h,y){return y=typeof y=="function"?y:n,l==null?l:ka(l,u,h,y)}var Bx=J1(zt),jx=J1(Fn);function GP(l,u,h){var y=ke(l),S=y||fo(l)||ul(l);if(u=de(u,4),h==null){var T=l&&l.constructor;S?h=y?new T:[]:ot(l)?h=Ri(T)?ol(mc(l)):{}:h={}}return(S?Er:fi)(l,function(N,R,L){return u(h,N,R,L)}),h}function XP(l,u){return l==null?!0:Cp(l,u)}function JP(l,u,h){return l==null?l:R1(l,u,Mp(h))}function YP(l,u,h,y){return y=typeof y=="function"?y:n,l==null?l:R1(l,u,Mp(h),y)}function cl(l){return l==null?[]:op(l,zt(l))}function QP(l){return l==null?[]:op(l,Fn(l))}function ZP(l,u,h){return h===n&&(h=u,u=n),h!==n&&(h=Ar(h),h=h===h?h:0),u!==n&&(u=Ar(u),u=u===u?u:0),cs(Ar(l),u,h)}function eR(l,u,h){return u=Di(u),h===n?(h=u,u=0):h=Di(h),l=Ar(l),sN(l,u,h)}function tR(l,u,h){if(h&&typeof h!="boolean"&&wn(l,u,h)&&(u=h=n),h===n&&(typeof u=="boolean"?(h=u,u=n):typeof l=="boolean"&&(h=l,l=n)),l===n&&u===n?(l=0,u=1):(l=Di(l),u===n?(u=l,l=0):u=Di(u)),l>u){var y=l;l=u,u=y}if(h||l%1||u%1){var S=u1();return rn(l+S*(u-l+R2("1e-"+((S+"").length-1))),u)}return Sp(l,u)}var nR=ll(function(l,u,h){return u=u.toLowerCase(),l+(h?Fx(u):u)});function Fx(l){return Gp(Fe(l).toLowerCase())}function $x(l){return l=Fe(l),l&&l.replace(ec,K2).replace(b2,"")}function rR(l,u,h){l=Fe(l),u=rr(u);var y=l.length;h=h===n?y:cs(be(h),0,y);var S=h;return h-=u.length,h>=0&&l.slice(h,S)==u}function iR(l){return l=Fe(l),l&&wt.test(l)?l.replace(Qn,q2):l}function oR(l){return l=Fe(l),l&&In.test(l)?l.replace(pn,"\\$&"):l}var sR=ll(function(l,u,h){return l+(h?"-":"")+u.toLowerCase()}),lR=ll(function(l,u,h){return l+(h?" ":"")+u.toLowerCase()}),aR=V1("toLowerCase");function uR(l,u,h){l=Fe(l),u=be(u);var y=u?el(l):0;if(!u||y>=u)return l;var S=(u-y)/2;return Pc(xc(S),h)+l+Pc(vc(S),h)}function cR(l,u,h){l=Fe(l),u=be(u);var y=u?el(l):0;return u&&y<u?l+Pc(u-y,h):l}function fR(l,u,h){l=Fe(l),u=be(u);var y=u?el(l):0;return u&&y<u?Pc(u-y,h)+l:l}function dR(l,u,h){return h||u==null?u=0:u&&(u=+u),x_(Fe(l).replace(mn,""),u||0)}function hR(l,u,h){return(h?wn(l,u,h):u===n)?u=1:u=be(u),kp(Fe(l),u)}function pR(){var l=arguments,u=Fe(l[0]);return l.length<3?u:u.replace(l[1],l[2])}var mR=ll(function(l,u,h){return l+(h?"_":"")+u.toLowerCase()});function gR(l,u,h){return h&&typeof h!="number"&&wn(l,u,h)&&(u=h=n),h=h===n?Q:h>>>0,h?(l=Fe(l),l&&(typeof u=="string"||u!=null&&!Wp(u))&&(u=rr(u),!u&&Zs(l))?co(qr(l),0,h):l.split(u,h)):[]}var yR=ll(function(l,u,h){return l+(h?" ":"")+Gp(u)});function vR(l,u,h){return l=Fe(l),h=h==null?0:cs(be(h),0,l.length),u=rr(u),l.slice(h,h+u.length)==u}function xR(l,u,h){var y=C.templateSettings;h&&wn(l,u,h)&&(u=n),l=Fe(l),u=Vc({},u,y,Y1);var S=Vc({},u.imports,y.imports,Y1),T=zt(S),N=op(S,T),R,L,U=0,V=u.interpolate||is,K="__p += '",Y=lp((u.escape||is).source+"|"+V.source+"|"+(V===wr?zn:is).source+"|"+(u.evaluate||is).source+"|$","g"),le="//# sourceURL="+(Ue.call(u,"sourceURL")?(u.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++_2+"]")+`
`;l.replace(Y,function(me,Ne,De,or,Sn,sr){return De||(De=or),K+=l.slice(U,sr).replace(tc,G2),Ne&&(R=!0,K+=`' +
__e(`+Ne+`) +
'`),Sn&&(L=!0,K+=`';
`+Sn+`;
__p += '`),De&&(K+=`' +
((__t = (`+De+`)) == null ? '' : __t) +
'`),U=sr+me.length,me}),K+=`';
`;var pe=Ue.call(u,"variable")&&u.variable;if(!pe)K=`with (obj) {
`+K+`
}
`;else if(gn.test(pe))throw new we(a);K=(L?K.replace(ui,""):K).replace(xr,"$1").replace(Kr,"$1;"),K="function("+(pe||"obj")+`) {
`+(pe?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(R?", __e = _.escape":"")+(L?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+K+`return __p
}`;var Ce=Ux(function(){return je(T,le+"return "+K).apply(n,N)});if(Ce.source=K,Vp(Ce))throw Ce;return Ce}function wR(l){return Fe(l).toLowerCase()}function SR(l){return Fe(l).toUpperCase()}function kR(l,u,h){if(l=Fe(l),l&&(h||u===n))return Qv(l);if(!l||!(u=rr(u)))return l;var y=qr(l),S=qr(u),T=Zv(y,S),N=e1(y,S)+1;return co(y,T,N).join("")}function bR(l,u,h){if(l=Fe(l),l&&(h||u===n))return l.slice(0,n1(l)+1);if(!l||!(u=rr(u)))return l;var y=qr(l),S=e1(y,qr(u))+1;return co(y,0,S).join("")}function CR(l,u,h){if(l=Fe(l),l&&(h||u===n))return l.replace(mn,"");if(!l||!(u=rr(u)))return l;var y=qr(l),S=Zv(y,qr(u));return co(y,S).join("")}function ER(l,u){var h=j,y=ee;if(ot(u)){var S="separator"in u?u.separator:S;h="length"in u?be(u.length):h,y="omission"in u?rr(u.omission):y}l=Fe(l);var T=l.length;if(Zs(l)){var N=qr(l);T=N.length}if(h>=T)return l;var R=h-el(y);if(R<1)return y;var L=N?co(N,0,R).join(""):l.slice(0,R);if(S===n)return L+y;if(N&&(R+=L.length-R),Wp(S)){if(l.slice(R).search(S)){var U,V=L;for(S.global||(S=lp(S.source,Fe(vn.exec(S))+"g")),S.lastIndex=0;U=S.exec(V);)var K=U.index;L=L.slice(0,K===n?R:K)}}else if(l.indexOf(rr(S),R)!=R){var Y=L.lastIndexOf(S);Y>-1&&(L=L.slice(0,Y))}return L+y}function TR(l){return l=Fe(l),l&&hn.test(l)?l.replace(Dn,t_):l}var MR=ll(function(l,u,h){return l+(h?" ":"")+u.toUpperCase()}),Gp=V1("toUpperCase");function Hx(l,u,h){return l=Fe(l),u=h?n:u,u===n?J2(l)?i_(l):$2(l):l.match(u)||[]}var Ux=Me(function(l,u){try{return tr(l,n,u)}catch(h){return Vp(h)?h:new we(h)}}),_R=Ai(function(l,u){return Er(u,function(h){h=hi(h),Ni(l,h,Hp(l[h],l))}),l});function NR(l){var u=l==null?0:l.length,h=de();return l=u?rt(l,function(y){if(typeof y[1]!="function")throw new Tr(s);return[h(y[0]),y[1]]}):[],Me(function(y){for(var S=-1;++S<u;){var T=l[S];if(tr(T[0],this,y))return tr(T[1],this,y)}})}function OR(l){return tN(_r(l,p))}function Xp(l){return function(){return l}}function AR(l,u){return l==null||l!==l?u:l}var PR=K1(),RR=K1(!0);function $n(l){return l}function Jp(l){return k1(typeof l=="function"?l:_r(l,p))}function DR(l){return C1(_r(l,p))}function IR(l,u){return E1(l,_r(u,p))}var LR=Me(function(l,u){return function(h){return wa(h,l,u)}}),zR=Me(function(l,u){return function(h){return wa(l,h,u)}});function Yp(l,u,h){var y=zt(u),S=Ec(u,y);h==null&&!(ot(u)&&(S.length||!y.length))&&(h=u,u=l,l=this,S=Ec(u,zt(u)));var T=!(ot(h)&&"chain"in h)||!!h.chain,N=Ri(l);return Er(S,function(R){var L=u[R];l[R]=L,N&&(l.prototype[R]=function(){var U=this.__chain__;if(T||U){var V=l(this.__wrapped__),K=V.__actions__=Bn(this.__actions__);return K.push({func:L,args:arguments,thisArg:l}),V.__chain__=U,V}return L.apply(l,io([this.value()],arguments))})}),l}function BR(){return Wt._===this&&(Wt._=c_),this}function Qp(){}function jR(l){return l=be(l),Me(function(u){return T1(u,l)})}var FR=Np(rt),$R=Np(qv),HR=Np(ep);function Vx(l){return Lp(l)?tp(hi(l)):vN(l)}function UR(l){return function(u){return l==null?n:fs(l,u)}}var VR=G1(),WR=G1(!0);function Zp(){return[]}function em(){return!1}function KR(){return{}}function qR(){return""}function GR(){return!0}function XR(l,u){if(l=be(l),l<1||l>B)return[];var h=Q,y=rn(l,Q);u=de(u),l-=Q;for(var S=ip(y,u);++h<l;)u(h);return S}function JR(l){return ke(l)?rt(l,hi):ir(l)?[l]:Bn(cx(Fe(l)))}function YR(l){var u=++a_;return Fe(l)+u}var QR=Ac(function(l,u){return l+u},0),ZR=Op("ceil"),eD=Ac(function(l,u){return l/u},1),tD=Op("floor");function nD(l){return l&&l.length?Cc(l,$n,mp):n}function rD(l,u){return l&&l.length?Cc(l,de(u,2),mp):n}function iD(l){return Jv(l,$n)}function oD(l,u){return Jv(l,de(u,2))}function sD(l){return l&&l.length?Cc(l,$n,xp):n}function lD(l,u){return l&&l.length?Cc(l,de(u,2),xp):n}var aD=Ac(function(l,u){return l*u},1),uD=Op("round"),cD=Ac(function(l,u){return l-u},0);function fD(l){return l&&l.length?rp(l,$n):0}function dD(l,u){return l&&l.length?rp(l,de(u,2)):0}return C.after=DA,C.ary=Sx,C.assign=SP,C.assignIn=Ix,C.assignInWith=Vc,C.assignWith=kP,C.at=bP,C.before=kx,C.bind=Hp,C.bindAll=_R,C.bindKey=bx,C.castArray=KA,C.chain=vx,C.chunk=tO,C.compact=nO,C.concat=rO,C.cond=NR,C.conforms=OR,C.constant=Xp,C.countBy=fA,C.create=CP,C.curry=Cx,C.curryRight=Ex,C.debounce=Tx,C.defaults=EP,C.defaultsDeep=TP,C.defer=IA,C.delay=LA,C.difference=iO,C.differenceBy=oO,C.differenceWith=sO,C.drop=lO,C.dropRight=aO,C.dropRightWhile=uO,C.dropWhile=cO,C.fill=fO,C.filter=hA,C.flatMap=gA,C.flatMapDeep=yA,C.flatMapDepth=vA,C.flatten=px,C.flattenDeep=dO,C.flattenDepth=hO,C.flip=zA,C.flow=PR,C.flowRight=RR,C.fromPairs=pO,C.functions=RP,C.functionsIn=DP,C.groupBy=xA,C.initial=gO,C.intersection=yO,C.intersectionBy=vO,C.intersectionWith=xO,C.invert=LP,C.invertBy=zP,C.invokeMap=SA,C.iteratee=Jp,C.keyBy=kA,C.keys=zt,C.keysIn=Fn,C.map=Bc,C.mapKeys=jP,C.mapValues=FP,C.matches=DR,C.matchesProperty=IR,C.memoize=Fc,C.merge=$P,C.mergeWith=Lx,C.method=LR,C.methodOf=zR,C.mixin=Yp,C.negate=$c,C.nthArg=jR,C.omit=HP,C.omitBy=UP,C.once=BA,C.orderBy=bA,C.over=FR,C.overArgs=jA,C.overEvery=$R,C.overSome=HR,C.partial=Up,C.partialRight=Mx,C.partition=CA,C.pick=VP,C.pickBy=zx,C.property=Vx,C.propertyOf=UR,C.pull=bO,C.pullAll=gx,C.pullAllBy=CO,C.pullAllWith=EO,C.pullAt=TO,C.range=VR,C.rangeRight=WR,C.rearg=FA,C.reject=MA,C.remove=MO,C.rest=$A,C.reverse=Fp,C.sampleSize=NA,C.set=KP,C.setWith=qP,C.shuffle=OA,C.slice=_O,C.sortBy=RA,C.sortedUniq=IO,C.sortedUniqBy=LO,C.split=gR,C.spread=HA,C.tail=zO,C.take=BO,C.takeRight=jO,C.takeRightWhile=FO,C.takeWhile=$O,C.tap=nA,C.throttle=UA,C.thru=zc,C.toArray=Px,C.toPairs=Bx,C.toPairsIn=jx,C.toPath=JR,C.toPlainObject=Dx,C.transform=GP,C.unary=VA,C.union=HO,C.unionBy=UO,C.unionWith=VO,C.uniq=WO,C.uniqBy=KO,C.uniqWith=qO,C.unset=XP,C.unzip=$p,C.unzipWith=yx,C.update=JP,C.updateWith=YP,C.values=cl,C.valuesIn=QP,C.without=GO,C.words=Hx,C.wrap=WA,C.xor=XO,C.xorBy=JO,C.xorWith=YO,C.zip=QO,C.zipObject=ZO,C.zipObjectDeep=eA,C.zipWith=tA,C.entries=Bx,C.entriesIn=jx,C.extend=Ix,C.extendWith=Vc,Yp(C,C),C.add=QR,C.attempt=Ux,C.camelCase=nR,C.capitalize=Fx,C.ceil=ZR,C.clamp=ZP,C.clone=qA,C.cloneDeep=XA,C.cloneDeepWith=JA,C.cloneWith=GA,C.conformsTo=YA,C.deburr=$x,C.defaultTo=AR,C.divide=eD,C.endsWith=rR,C.eq=Xr,C.escape=iR,C.escapeRegExp=oR,C.every=dA,C.find=pA,C.findIndex=dx,C.findKey=MP,C.findLast=mA,C.findLastIndex=hx,C.findLastKey=_P,C.floor=tD,C.forEach=xx,C.forEachRight=wx,C.forIn=NP,C.forInRight=OP,C.forOwn=AP,C.forOwnRight=PP,C.get=Kp,C.gt=QA,C.gte=ZA,C.has=IP,C.hasIn=qp,C.head=mx,C.identity=$n,C.includes=wA,C.indexOf=mO,C.inRange=eR,C.invoke=BP,C.isArguments=ps,C.isArray=ke,C.isArrayBuffer=eP,C.isArrayLike=jn,C.isArrayLikeObject=St,C.isBoolean=tP,C.isBuffer=fo,C.isDate=nP,C.isElement=rP,C.isEmpty=iP,C.isEqual=oP,C.isEqualWith=sP,C.isError=Vp,C.isFinite=lP,C.isFunction=Ri,C.isInteger=_x,C.isLength=Hc,C.isMap=Nx,C.isMatch=aP,C.isMatchWith=uP,C.isNaN=cP,C.isNative=fP,C.isNil=hP,C.isNull=dP,C.isNumber=Ox,C.isObject=ot,C.isObjectLike=pt,C.isPlainObject=Ta,C.isRegExp=Wp,C.isSafeInteger=pP,C.isSet=Ax,C.isString=Uc,C.isSymbol=ir,C.isTypedArray=ul,C.isUndefined=mP,C.isWeakMap=gP,C.isWeakSet=yP,C.join=wO,C.kebabCase=sR,C.last=Or,C.lastIndexOf=SO,C.lowerCase=lR,C.lowerFirst=aR,C.lt=vP,C.lte=xP,C.max=nD,C.maxBy=rD,C.mean=iD,C.meanBy=oD,C.min=sD,C.minBy=lD,C.stubArray=Zp,C.stubFalse=em,C.stubObject=KR,C.stubString=qR,C.stubTrue=GR,C.multiply=aD,C.nth=kO,C.noConflict=BR,C.noop=Qp,C.now=jc,C.pad=uR,C.padEnd=cR,C.padStart=fR,C.parseInt=dR,C.random=tR,C.reduce=EA,C.reduceRight=TA,C.repeat=hR,C.replace=pR,C.result=WP,C.round=uD,C.runInContext=I,C.sample=_A,C.size=AA,C.snakeCase=mR,C.some=PA,C.sortedIndex=NO,C.sortedIndexBy=OO,C.sortedIndexOf=AO,C.sortedLastIndex=PO,C.sortedLastIndexBy=RO,C.sortedLastIndexOf=DO,C.startCase=yR,C.startsWith=vR,C.subtract=cD,C.sum=fD,C.sumBy=dD,C.template=xR,C.times=XR,C.toFinite=Di,C.toInteger=be,C.toLength=Rx,C.toLower=wR,C.toNumber=Ar,C.toSafeInteger=wP,C.toString=Fe,C.toUpper=SR,C.trim=kR,C.trimEnd=bR,C.trimStart=CR,C.truncate=ER,C.unescape=TR,C.uniqueId=YR,C.upperCase=MR,C.upperFirst=Gp,C.each=xx,C.eachRight=wx,C.first=mx,Yp(C,function(){var l={};return fi(C,function(u,h){Ue.call(C.prototype,h)||(l[h]=u)}),l}(),{chain:!1}),C.VERSION=r,Er(["bind","bindKey","curry","curryRight","partial","partialRight"],function(l){C[l].placeholder=C}),Er(["drop","take"],function(l,u){Pe.prototype[l]=function(h){h=h===n?1:Pt(be(h),0);var y=this.__filtered__&&!u?new Pe(this):this.clone();return y.__filtered__?y.__takeCount__=rn(h,y.__takeCount__):y.__views__.push({size:rn(h,Q),type:l+(y.__dir__<0?"Right":"")}),y},Pe.prototype[l+"Right"]=function(h){return this.reverse()[l](h).reverse()}}),Er(["filter","map","takeWhile"],function(l,u){var h=u+1,y=h==_e||h==$e;Pe.prototype[l]=function(S){var T=this.clone();return T.__iteratees__.push({iteratee:de(S,3),type:h}),T.__filtered__=T.__filtered__||y,T}}),Er(["head","last"],function(l,u){var h="take"+(u?"Right":"");Pe.prototype[l]=function(){return this[h](1).value()[0]}}),Er(["initial","tail"],function(l,u){var h="drop"+(u?"":"Right");Pe.prototype[l]=function(){return this.__filtered__?new Pe(this):this[h](1)}}),Pe.prototype.compact=function(){return this.filter($n)},Pe.prototype.find=function(l){return this.filter(l).head()},Pe.prototype.findLast=function(l){return this.reverse().find(l)},Pe.prototype.invokeMap=Me(function(l,u){return typeof l=="function"?new Pe(this):this.map(function(h){return wa(h,l,u)})}),Pe.prototype.reject=function(l){return this.filter($c(de(l)))},Pe.prototype.slice=function(l,u){l=be(l);var h=this;return h.__filtered__&&(l>0||u<0)?new Pe(h):(l<0?h=h.takeRight(-l):l&&(h=h.drop(l)),u!==n&&(u=be(u),h=u<0?h.dropRight(-u):h.take(u-l)),h)},Pe.prototype.takeRightWhile=function(l){return this.reverse().takeWhile(l).reverse()},Pe.prototype.toArray=function(){return this.take(Q)},fi(Pe.prototype,function(l,u){var h=/^(?:filter|find|map|reject)|While$/.test(u),y=/^(?:head|last)$/.test(u),S=C[y?"take"+(u=="last"?"Right":""):u],T=y||/^find/.test(u);S&&(C.prototype[u]=function(){var N=this.__wrapped__,R=y?[1]:arguments,L=N instanceof Pe,U=R[0],V=L||ke(N),K=function(Ne){var De=S.apply(C,io([Ne],R));return y&&Y?De[0]:De};V&&h&&typeof U=="function"&&U.length!=1&&(L=V=!1);var Y=this.__chain__,le=!!this.__actions__.length,pe=T&&!Y,Ce=L&&!le;if(!T&&V){N=Ce?N:new Pe(this);var me=l.apply(N,R);return me.__actions__.push({func:zc,args:[K],thisArg:n}),new Mr(me,Y)}return pe&&Ce?l.apply(this,R):(me=this.thru(K),pe?y?me.value()[0]:me.value():me)})}),Er(["pop","push","shift","sort","splice","unshift"],function(l){var u=uc[l],h=/^(?:push|sort|unshift)$/.test(l)?"tap":"thru",y=/^(?:pop|shift)$/.test(l);C.prototype[l]=function(){var S=arguments;if(y&&!this.__chain__){var T=this.value();return u.apply(ke(T)?T:[],S)}return this[h](function(N){return u.apply(ke(N)?N:[],S)})}}),fi(Pe.prototype,function(l,u){var h=C[u];if(h){var y=h.name+"";Ue.call(il,y)||(il[y]=[]),il[y].push({name:u,func:h})}}),il[Oc(n,x).name]=[{name:"wrapper",func:n}],Pe.prototype.clone=T_,Pe.prototype.reverse=M_,Pe.prototype.value=__,C.prototype.at=rA,C.prototype.chain=iA,C.prototype.commit=oA,C.prototype.next=sA,C.prototype.plant=aA,C.prototype.reverse=uA,C.prototype.toJSON=C.prototype.valueOf=C.prototype.value=cA,C.prototype.first=C.prototype.head,ha&&(C.prototype[ha]=lA),C},tl=o_();ss?((ss.exports=tl)._=tl,Jh._=tl):Wt._=tl}).call(gl)}(Va,Va.exports)),Va.exports}var Nm={exports:{}},Om,rS;function qL(){if(rS)return Om;rS=1;var t="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return Om=t,Om}var Am,iS;function GL(){if(iS)return Am;iS=1;var t=qL();function e(){}function n(){}return n.resetWarningCache=e,Am=function(){function r(s,a,c,f,d,p){if(p!==t){var m=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw m.name="Invariant Violation",m}}r.isRequired=r;function i(){return r}var o={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:i,element:r,elementType:r,instanceOf:i,node:r,objectOf:i,oneOf:i,oneOfType:i,shape:i,exact:i,checkPropTypes:n,resetWarningCache:e};return o.PropTypes=o,o},Am}var oS;function Py(){return oS||(oS=1,Nm.exports=GL()()),Nm.exports}(function(t,e){(function(r,i){t.exports=i(se,KL(),Py())})(gl,function(n,r,i){return function(){var o={"./src/Xarrow/utils/buzzier.js":function(f,d,p){p.r(d),p.d(d,{bzFunction:function(){return m},buzzierMinSols:function(){return g}});var m=function(k,b,x,w){return function(E){return Math.pow(1-E,3)*k+3*Math.pow(1-E,2)*E*b+3*(1-E)*Math.pow(E,2)*x+Math.pow(E,3)*w}},g=function(k,b,x,w){var E=m(k,b,x,w),_=-6*k+12*b-6*x,M=Math.pow(-6*k+12*b-6*x,2)-4*(3*b-3*k)*(-3*k+9*b-9*x+3*w),P=2*(-3*k+9*b-9*x+3*w),O=E((_+Math.sqrt(M))/P),D=E((_-Math.sqrt(M))/P);return[O,D]}},"./src/Xarrow/Xarrow.tsx":function(f,d,p){var m=this&&this.__assign||function(){return m=Object.assign||function(D){for(var z,j=1,ee=arguments.length;j<ee;j++){z=arguments[j];for(var oe in z)Object.prototype.hasOwnProperty.call(z,oe)&&(D[oe]=z[oe])}return D},m.apply(this,arguments)},g=this&&this.__createBinding||(Object.create?function(D,z,j,ee){ee===void 0&&(ee=j),Object.defineProperty(D,ee,{enumerable:!0,get:function(){return z[j]}})}:function(D,z,j,ee){ee===void 0&&(ee=j),D[ee]=z[j]}),v=this&&this.__setModuleDefault||(Object.create?function(D,z){Object.defineProperty(D,"default",{enumerable:!0,value:z})}:function(D,z){D.default=z}),k=this&&this.__importStar||function(D){if(D&&D.__esModule)return D;var z={};if(D!=null)for(var j in D)j!=="default"&&Object.prototype.hasOwnProperty.call(D,j)&&g(z,D,j);return v(z,D),z},b=this&&this.__spreadArray||function(D,z){for(var j=0,ee=z.length,oe=D.length;j<ee;j++,oe++)D[oe]=z[j];return D},x=this&&this.__importDefault||function(D){return D&&D.__esModule?D:{default:D}};Object.defineProperty(d,"__esModule",{value:!0});var w=k(p("react")),E=x(p("./src/Xarrow/useXarrowProps.ts")),_=p("./src/Xwrapper.tsx"),M=x(p("./src/Xarrow/propTypes.ts")),P=p("./src/Xarrow/utils/GetPosition.tsx"),O=function(D){var z,j=w.useRef({svgRef:w.useRef(null),lineRef:w.useRef(null),headRef:w.useRef(null),tailRef:w.useRef(null),lineDrawAnimRef:w.useRef(null),lineDashAnimRef:w.useRef(null),headOpacityAnimRef:w.useRef(null)}),ee=j.current,oe=ee.svgRef,he=ee.lineRef,_e=ee.headRef;ee.tailRef;var xe=ee.lineDrawAnimRef,$e=ee.lineDashAnimRef,Re=ee.headOpacityAnimRef;w.useContext(_.XarrowContext);var B=E.default(D,j.current),W=B[0],G=W.labels,Q=W.lineColor,ge=W.headColor,Ie=W.tailColor,ft=W.strokeWidth,nt=W.showHead,Ge=W.showTail,Le=W.dashness,$=W.headShape,Z=W.tailShape,ae=W.showXarrow,fe=W.animateDrawing,Ye=W.zIndex,ye=W.passProps,Se=W.arrowBodyProps,An=W.arrowHeadProps,to=W.arrowTailProps,Vt=W.SVGcanvasProps,Pn=W.divContainerProps,ai=W.divContainerStyle,Lt=W.SVGcanvasStyle,He=W._debug,Et=W.shouldUpdatePosition;fe=D.animateDrawing;var Tt=w.useState(!fe),Ti=Tt[0],Vr=Tt[1],Xs=w.useState({}),Wr=Xs[1],Jn=function(){return Wr({})},dt=w.useState({cx0:0,cy0:0,cw:0,ch:0,x1:0,y1:0,x2:0,y2:0,dx:0,dy:0,absDx:0,absDy:0,cpx1:0,cpy1:0,cpx2:0,cpy2:0,headOrient:0,tailOrient:0,arrowHeadOffset:{x:0,y:0},arrowTailOffset:{x:0,y:0},headOffset:0,excRight:0,excLeft:0,excUp:0,excDown:0,startPoints:[],endPoints:[],mainDivPos:{x:0,y:0},xSign:1,ySign:1,lineLength:0,fHeadSize:1,fTailSize:1,arrowPath:"",labelStartPos:{x:0,y:0},labelMiddlePos:{x:0,y:0},labelEndPos:{x:0,y:0}}),ie=dt[0],Ae=dt[1];w.useLayoutEffect(function(){if(Et.current){var hn=P.getPosition(B,j);Ae(hn),Et.current=!1}});var Be=ie.x2-ie.arrowHeadOffset.x,no=ie.y2-ie.arrowHeadOffset.y,Rn=ie.x1-ie.arrowTailOffset.x,Yn=ie.y1-ie.arrowTailOffset.y,xt=Le.strokeLen+Le.nonStrokeLen,ht=1;Le.animation<0&&(Le.animation*=-1,ht=-1);var ui,xr,Kr,Dn,Qn=0;return fe&&Ti==!1?(typeof fe=="boolean"&&(fe=1),xr=fe+"s",ui=ie.lineLength,Dn=ie.lineLength,Kr=1,fe<0&&(z=[Qn,Dn],Dn=z[0],Qn=z[1],xr=fe*-1+"s")):(ui=Le.strokeLen+" "+Le.nonStrokeLen,xr=1/Le.animation+"s",Dn=xt*ht,Kr="indefinite",Qn=0),w.useLayoutEffect(function(){he.current&&Ae(function(hn){var wt,ci;return m(m({},hn),{lineLength:(ci=(wt=he.current)===null||wt===void 0?void 0:wt.getTotalLength())!==null&&ci!==void 0?ci:0})})},[he.current]),w.useEffect(function(){var hn=function(){window.addEventListener("resize",Jn);var ci=function(){var wr,nn;Vr(!0),(wr=Re.current)===null||wr===void 0||wr.beginElement(),(nn=$e.current)===null||nn===void 0||nn.beginElement()},Zn=function(){return _e.current.style.opacity="0"};return xe.current&&_e.current&&(xe.current.addEventListener("endEvent",ci),xe.current.addEventListener("beginEvent",Zn)),function(){window.removeEventListener("resize",Jn),xe.current&&(xe.current.removeEventListener("endEvent",ci),_e.current&&xe.current.removeEventListener("beginEvent",Zn))}},wt=hn();return function(){Vr(!1),wt()}},[ae]),w.default.createElement("div",m({},Pn,{style:m({position:"absolute",zIndex:Ye},ai)}),ae?w.default.createElement(w.default.Fragment,null,w.default.createElement("svg",m({ref:oe,width:ie.cw,height:ie.ch,style:m({position:"absolute",left:ie.cx0,top:ie.cy0,pointerEvents:"none",border:He?"1px dashed yellow":null},Lt),overflow:"auto"},Vt),w.default.createElement("path",m({ref:he,d:ie.arrowPath,stroke:Q,strokeDasharray:ui,strokeWidth:ft,fill:"transparent",pointerEvents:"visibleStroke"},ye,Se),w.default.createElement(w.default.Fragment,null,Ti?w.default.createElement(w.default.Fragment,null,Le.animation?w.default.createElement("animate",{ref:$e,attributeName:"stroke-dashoffset",values:xt*ht+";0",dur:1/Le.animation+"s",repeatCount:"indefinite"}):null):w.default.createElement(w.default.Fragment,null,fe?w.default.createElement("animate",{ref:xe,id:"svgEndAnimate",attributeName:"stroke-dashoffset",values:Dn+";"+Qn,dur:xr,repeatCount:Kr}):null))),Ge?w.default.createElement("g",m({fill:Ie,pointerEvents:"auto",transform:"translate("+Rn+","+Yn+") rotate("+ie.tailOrient+") scale("+ie.fTailSize+")"},ye,to),Z.svgElem):null,nt?w.default.createElement("g",m({ref:_e,fill:ge,pointerEvents:"auto",transform:"translate("+Be+","+no+") rotate("+ie.headOrient+") scale("+ie.fHeadSize+")",opacity:fe&&!Ti?0:1},ye,An),w.default.createElement("animate",{ref:Re,dur:"0.4",attributeName:"opacity",from:"0",to:"1",begin:"indefinite",repeatCount:"0",fill:"freeze"}),$.svgElem):null,He?w.default.createElement(w.default.Fragment,null,w.default.createElement("circle",{r:"5",cx:ie.cpx1,cy:ie.cpy1,fill:"green"}),w.default.createElement("circle",{r:"5",cx:ie.cpx2,cy:ie.cpy2,fill:"blue"}),w.default.createElement("rect",{x:ie.excLeft,y:ie.excUp,width:ie.absDx,height:ie.absDy,fill:"none",stroke:"pink",strokeWidth:"2px"})):null),G.start?w.default.createElement("div",{style:{transform:ie.dx<0?"translate(-100% , -50%)":"translate(-0% , -50%)",width:"max-content",position:"absolute",left:ie.cx0+ie.labelStartPos.x,top:ie.cy0+ie.labelStartPos.y-ft-5}},G.start):null,G.middle?w.default.createElement("div",{style:{display:"table",width:"max-content",transform:"translate(-50% , -50%)",position:"absolute",left:ie.cx0+ie.labelMiddlePos.x,top:ie.cy0+ie.labelMiddlePos.y}},G.middle):null,G.end?w.default.createElement("div",{style:{transform:ie.dx>0?"translate(-100% , -50%)":"translate(-0% , -50%)",width:"max-content",position:"absolute",left:ie.cx0+ie.labelEndPos.x,top:ie.cy0+ie.labelEndPos.y+ft+5}},G.end):null,He?w.default.createElement(w.default.Fragment,null,b(b([],ie.startPoints),ie.endPoints).map(function(hn,wt){return w.default.createElement("div",{key:wt,style:{background:"gray",opacity:.5,borderRadius:"50%",transform:"translate(-50%, -50%)",height:5,width:5,position:"absolute",left:hn.x-ie.mainDivPos.x,top:hn.y-ie.mainDivPos.y}})})):null):null)};O.propTypes=M.default,d.default=O},"./src/Xarrow/anchors.ts":function(f,d,p){f=p.nmd(f),Object.defineProperty(d,"__esModule",{value:!0}),d.calcAnchors=void 0;var m=function(v,k){return{middle:{x:v*.5,y:k*.5},left:{x:0,y:k*.5},right:{x:v,y:k*.5},top:{x:v*.5,y:0},bottom:{x:v*.5,y:k}}},g=function(v,k){return v.map(function(b){var x=m(k.right-k.x,k.bottom-k.y),w=x[b.position],E=w.x,_=w.y;return{x:k.x+E+b.offset.x,y:k.y+_+b.offset.y,anchor:b}})};d.calcAnchors=g,p.c[p.s]},"./src/Xarrow/propTypes.ts":function(f,d,p){var m=this&&this.__importDefault||function(j){return j&&j.__esModule?j:{default:j}};Object.defineProperty(d,"__esModule",{value:!0});var g=m(p("prop-types")),v=p("./src/constants.tsx"),k=g.default.oneOf(v.cAnchorEdge),b=g.default.exact({position:k.isRequired,offset:g.default.exact({x:g.default.number,y:g.default.number}).isRequired}),x=g.default.oneOfType([k,b]),w=g.default.oneOfType([x,g.default.arrayOf(x)]),E=g.default.oneOfType([g.default.string,g.default.exact({current:g.default.any})]),_=g.default.oneOfType([g.default.element,g.default.string]),M=g.default.exact({start:_,middle:_,end:_}),P=g.default.oneOf(Object.keys(v.arrowShapes)),O=g.default.any,D=g.default.oneOfType([P,g.default.exact({svgElem:O,offsetForward:g.default.number}).isRequired]),z={start:E.isRequired,end:E.isRequired,startAnchor:w,endAnchor:w,labels:g.default.oneOfType([_,M]),color:g.default.string,lineColor:g.default.string,showHead:g.default.bool,headColor:g.default.string,headSize:g.default.number,tailSize:g.default.number,tailColor:g.default.string,strokeWidth:g.default.number,showTail:g.default.bool,path:g.default.oneOf(v.cPaths),showXarrow:g.default.bool,curveness:g.default.number,gridBreak:g.default.string,dashness:g.default.oneOfType([g.default.bool,g.default.object]),headShape:D,tailShape:D,animateDrawing:g.default.oneOfType([g.default.bool,g.default.number]),zIndex:g.default.number,passProps:g.default.object,arrowBodyProps:g.default.object,arrowHeadProps:g.default.object,arrowTailProps:g.default.object,SVGcanvasProps:g.default.object,divContainerProps:g.default.object,_extendSVGcanvas:g.default.number,_debug:g.default.bool,_cpx1Offset:g.default.number,_cpy1Offset:g.default.number,_cpx2Offset:g.default.number,_cpy2Offset:g.default.number};d.default=z},"./src/Xarrow/useXarrowProps.ts":function(f,d,p){var m=this&&this.__assign||function(){return m=Object.assign||function($){for(var Z,ae=1,fe=arguments.length;ae<fe;ae++){Z=arguments[ae];for(var Ye in Z)Object.prototype.hasOwnProperty.call(Z,Ye)&&($[Ye]=Z[Ye])}return $},m.apply(this,arguments)},g=this&&this.__createBinding||(Object.create?function($,Z,ae,fe){fe===void 0&&(fe=ae),Object.defineProperty($,fe,{enumerable:!0,get:function(){return Z[ae]}})}:function($,Z,ae,fe){fe===void 0&&(fe=ae),$[fe]=Z[ae]}),v=this&&this.__setModuleDefault||(Object.create?function($,Z){Object.defineProperty($,"default",{enumerable:!0,value:Z})}:function($,Z){$.default=Z}),k=this&&this.__importStar||function($){if($&&$.__esModule)return $;var Z={};if($!=null)for(var ae in $)ae!=="default"&&Object.prototype.hasOwnProperty.call($,ae)&&g(Z,$,ae);return v(Z,$),Z},b=this&&this.__importDefault||function($){return $&&$.__esModule?$:{default:$}};Object.defineProperty(d,"__esModule",{value:!0});var x=k(p("react")),w=p("./src/Xarrow/utils/index.ts"),E=b(p("lodash")),_=p("./src/constants.tsx"),M=function($){var Z={start:null,middle:null,end:null};if($)if(typeof $=="string"||x.default.isValidElement($))Z.middle=$;else for(var ae in $)Z[ae]=$[ae];return Z},P=function($){var Z=Array.isArray($)?$:[$],ae=Z.map(function(ye){return typeof ye=="string"?{position:ye}:ye});ae=ae.filter(function(ye){return _.cAnchorEdge.includes(ye.position)}),ae.length==0&&(ae=[{position:"auto"}]);var fe=ae.filter(function(ye){return ye.position==="auto"});fe.length>0&&(ae=ae.filter(function(ye){return ye.position!=="auto"}),ae.push.apply(ae,fe.flatMap(function(ye){return["left","right","top","bottom"].map(function(Se){return m(m({},ye),{position:Se})})})));var Ye=ae.map(function(ye){if(typeof ye=="object"){var Se=ye;return Se.position||(Se.position="auto"),Se.offset||(Se.offset={x:0,y:0}),Se.offset.y||(Se.offset.y=0),Se.offset.x||(Se.offset.x=0),Se=Se,Se}else return ye});return Ye},O=function($,Z){var ae=0,fe=0,Ye,ye=1;return typeof $=="object"?(ae=$.strokeLen||Z.strokeWidth*2,fe=$.strokeLen?$.nonStrokeLen:Z.strokeWidth,Ye=$.animation?$.animation:null):typeof $=="boolean"&&$&&(ae=Z.strokeWidth*2,fe=Z.strokeWidth,Ye=null),{strokeLen:ae,nonStrokeLen:fe,animation:Ye,animDirection:ye}},D=function($){return typeof $=="string"&&($ in _.arrowShapes?$=_.arrowShapes[$]:(console.warn("'"+$+"' is not supported arrow shape. the supported arrow shapes is one of "+_.cArrowShapes+`.
           reverting to default shape.`),$=_.arrowShapes.arrow1)),$=$,($==null?void 0:$.offsetForward)===void 0&&($.offsetForward=.25),($==null?void 0:$.svgElem)===void 0&&($.svgElem="path"),$},z=function($){var Z=w.xStr2absRelative($);return Z||(Z={relative:.5,abs:0}),Z},j=function($,Z){return Z&&(Z.current=!0),$},ee=function($){return $},oe=function($,Z,ae){return j($,ae)},he=function($,Z,ae){return j(Number($),ae)},_e=function($){return Number($)},xe={start:function($){return w.getElementByPropGiven($)},end:function($){return w.getElementByPropGiven($)},startAnchor:function($,Z,ae){return j(P($),ae)},endAnchor:function($,Z,ae){return j(P($),ae)},labels:function($){return M($)},color:ee,lineColor:function($,Z){return $||Z.color},headColor:function($,Z){return $||Z.color},tailColor:function($,Z){return $||Z.color},strokeWidth:he,showHead:oe,headSize:he,showTail:oe,tailSize:he,path:oe,curveness:he,gridBreak:function($,Z,ae){return j(z($),ae)},dashness:function($,Z){return O($,Z)},headShape:function($){return D($)},tailShape:function($){return D($)},showXarrow:ee,animateDrawing:ee,zIndex:_e,passProps:ee,arrowBodyProps:oe,arrowHeadProps:oe,arrowTailProps:oe,SVGcanvasProps:oe,divContainerProps:oe,divContainerStyle:oe,SVGcanvasStyle:oe,_extendSVGcanvas:oe,_debug:oe,_cpx1Offset:oe,_cpy1Offset:oe,_cpx2Offset:oe,_cpy2Offset:oe},$e={};for(var Re in xe)$e[Re]=[Re];for(var B=0,W=["lineColor","headColor","tailColor"];B<W.length;B++){var Re=W[B];$e[Re].push("color")}var G=function($,Z){for(var ae,fe=0,Ye=Object.entries($);fe<Ye.length;fe++){var ye=Ye[fe],Se=ye[0],An=ye[1];Z[Se]=(ae=xe==null?void 0:xe[Se])===null||ae===void 0?void 0:ae.call(xe,An,Z)}return Z},Q={start:null,end:null,startAnchor:"auto",endAnchor:"auto",labels:null,color:"CornflowerBlue",lineColor:null,headColor:null,tailColor:null,strokeWidth:4,showHead:!0,headSize:6,showTail:!1,tailSize:6,path:"smooth",curveness:.8,gridBreak:"50%",dashness:!1,headShape:"arrow1",tailShape:"arrow1",showXarrow:!0,animateDrawing:!1,zIndex:0,passProps:{},arrowBodyProps:{},arrowHeadProps:{},arrowTailProps:{},SVGcanvasProps:{},divContainerProps:{},divContainerStyle:{},SVGcanvasStyle:{},_extendSVGcanvas:0,_debug:!1,_cpx1Offset:0,_cpy1Offset:0,_cpx2Offset:0,_cpy2Offset:0},ge={};ge=G(Q,ge);var Ie={startPos:{x:0,y:0,right:0,bottom:0},endPos:{x:0,y:0,right:0,bottom:0}};function ft($,Z){return E.default.isEqual($,Z)}function nt($){var Z=x.useRef();return ft($,Z.current)||(Z.current=$),Z.current}function Ge($,Z){x.useLayoutEffect($,Z.map(nt))}var Le=function($,Z){var ae=x.useState(ge),fe=ae[0],Ye=ae[1],ye=x.useRef(!1);fe.shouldUpdatePosition=ye;var Se=m(m({},Q),$),An=function(Et){x.useLayoutEffect(function(){var Tt;fe[Et]=(Tt=xe==null?void 0:xe[Et])===null||Tt===void 0?void 0:Tt.call(xe,Se[Et],fe,ye),Ye(m({},fe))},$e[Et].map(function(Tt){return $[Tt]}))};for(var to in Q)An(to);var Vt=x.useState(Ie),Pn=Vt[0],ai=Vt[1],Lt=w.getElemPos(fe.start);Ge(function(){Pn.startPos=Lt,ye.current=!0,ai(m({},Pn))},[Lt]);var He=w.getElemPos(fe.end);return Ge(function(){Pn.endPos=He,ye.current=!0,ai(m({},Pn))},[He]),x.useLayoutEffect(function(){ye.current=!0,ai(m({},Pn))},[fe.headShape.svgElem,fe.tailShape.svgElem]),[fe,Pn]};d.default=Le},"./src/Xarrow/utils/GetPosition.tsx":function(f,d,p){var m=this&&this.__importDefault||function(E){return E&&E.__esModule?E:{default:E}};Object.defineProperty(d,"__esModule",{value:!0}),d.getPosition=void 0;var g=p("./src/Xarrow/anchors.ts"),v=p("./src/Xarrow/utils/index.ts"),k=m(p("lodash")),b=p("./src/constants.tsx"),x=p("./src/Xarrow/utils/buzzier.js"),w=function(E,_){var M,P,O,D,z=E[0],j=E[1],ee=z.startAnchor,oe=z.endAnchor,he=z.strokeWidth,_e=z.showHead,xe=z.headSize,$e=z.showTail,Re=z.tailSize,B=z.path,W=z.curveness,G=z.gridBreak,Q=z.headShape,ge=z.tailShape,Ie=z._extendSVGcanvas,ft=z._cpx1Offset,nt=z._cpy1Offset,Ge=z._cpx2Offset,Le=z._cpy2Offset,$=j.startPos,Z=j.endPos,ae=_.current,fe=ae.svgRef,Ye=ae.lineRef,ye=0,Se=0,An=g.calcAnchors(ee,$),to=g.calcAnchors(oe,Z),Vt=v.getShortestLine(An,to),Pn=Vt.chosenStart,ai=Vt.chosenEnd,Lt=Pn.anchor.position,He=ai.anchor.position,Et=k.default.pick(Pn,["x","y"]),Tt=k.default.pick(ai,["x","y"]),Ti=v.getSvgPos(fe),Vr=Math.min(Et.x,Tt.x)-Ti.x,Xs=Math.min(Et.y,Tt.y)-Ti.y,Wr=Tt.x-Et.x,Jn=Tt.y-Et.y,dt=Math.abs(Tt.x-Et.x),ie=Math.abs(Tt.y-Et.y),Ae=Wr>0?1:-1,Be=Jn>0?1:-1,no=[Q.offsetForward,ge.offsetForward],Rn=no[0],Yn=no[1],xt=xe*he,ht=Re*he,ui=0,xr=0,Kr=0,Dn=0,Qn=xt*Rn,hn=ht*Yn,wt=Number(W);b.cPaths.includes(B)||(B="smooth"),B==="straight"&&(wt=0,B="smooth");var ci=xe>Re?xe:Re,Zn=he+he*ci/2,wr=Zn,nn=Zn,Sr=Zn,rs=Zn;nn+=Number(Ie),wr+=Number(Ie),Sr+=Number(Ie),rs+=Number(Ie);var pn=0,In=dt,mn=0,Ln=ie;if(Wr<0&&(M=[In,pn],pn=M[0],In=M[1]),Jn<0&&(P=[Ln,mn],mn=P[0],Ln=P[1]),wt===0){var kr=Math.atan(ie/dt);_e&&(In-=xt*(1-Rn)*Ae*Math.cos(kr),Ln-=xt*(1-Rn)*Be*Math.sin(kr),kr*=Be,Ae<0&&(kr=(Math.PI-kr*Ae)*Ae),ui=Math.cos(kr)*Qn-Math.sin(kr)*xt/2,xr=Math.cos(kr)*xt/2+Math.sin(kr)*Qn,ye=kr*180/Math.PI);var br=Math.atan(ie/dt);$e&&(pn+=ht*(1-Yn)*Ae*Math.cos(br),mn+=ht*(1-Yn)*Be*Math.sin(br),br*=-Be,Ae>0&&(br=(Math.PI-br*Ae)*Ae),Kr=Math.cos(br)*hn-Math.sin(br)*ht/2,Dn=Math.cos(br)*ht/2+Math.sin(br)*hn,Se=br*180/Math.PI)}else He==="middle"&&(dt>ie?He="left":He="top"),_e&&(["left","right"].includes(He)?(ui+=Qn*Ae,In-=xt*(1-Rn)*Ae,xr+=xt*Ae/2,He==="left"?(ye=0,Ae<0&&(ye+=180)):(ye=180,Ae>0&&(ye+=180))):["top","bottom"].includes(He)&&(ui+=xt*-Be/2,xr+=Qn*Be,Ln-=xt*Be-xr,He==="top"?(ye=270,Be>0&&(ye+=180)):(ye=90,Be<0&&(ye+=180))));$e&&wt!==0&&(["left","right"].includes(Lt)?(Kr+=hn*-Ae,pn+=ht*Ae+Kr,Dn+=-(ht*Ae)/2,Lt==="left"?(Se=180,Ae<0&&(Se+=180)):(Se=0,Ae>0&&(Se+=180))):["top","bottom"].includes(Lt)&&(Dn+=hn*-Be,mn+=ht*Be+Dn,Kr+=ht*Be/2,Lt==="top"?(Se=90,Be>0&&(Se+=180)):(Se=270,Be<0&&(Se+=180))));var Hh={x:ui,y:xr},Uh={x:Kr,y:Dn},gn=pn,yn=mn,zn=In,vn=Ln,aa={};B==="smooth"?aa={hh:function(){gn+=dt*wt*Ae,zn-=dt*wt*Ae},vv:function(){yn+=ie*wt*Be,vn-=ie*wt*Be},hv:function(){gn+=dt*wt*Ae,vn-=ie*wt*Be},vh:function(){yn+=ie*wt*Be,zn-=dt*wt*Ae}}:B==="grid"&&(aa={hh:function(){gn+=(dt*G.relative+G.abs)*Ae,zn-=(dt*(1-G.relative)-G.abs)*Ae,_e&&(gn-=xt*(1-Rn)/2*Ae,zn+=xt*(1-Rn)/2*Ae),$e&&(gn-=ht*(1-Yn)/2*Ae,zn+=ht*(1-Yn)/2*Ae)},vv:function(){yn+=(ie*G.relative+G.abs)*Be,vn-=(ie*(1-G.relative)-G.abs)*Be,_e&&(yn-=xt*(1-Rn)/2*Be,vn+=xt*(1-Rn)/2*Be),$e&&(yn-=ht*(1-Yn)/2*Be,vn+=ht*(1-Yn)/2*Be)},hv:function(){gn=In},vh:function(){yn=Ln}});var er="";["left","right"].includes(Lt)?er+="h":["bottom","top"].includes(Lt)?er+="v":Lt==="middle"&&(er+="m"),["left","right"].includes(He)?er+="h":["bottom","top"].includes(He)?er+="v":He==="middle"&&(er+="m"),dt>ie?er=er.replace(/m/g,"h"):er=er.replace(/m/g,"v"),aa[er](),gn+=ft,yn+=nt,zn+=Ge,vn+=Le;var Yu=x.buzzierMinSols(pn,gn,zn,In),Qu=Yu[0],Zu=Yu[1],ec=x.buzzierMinSols(mn,yn,vn,Ln),is=ec[0],tc=ec[1];Qu<0&&(nn+=-Qu),Zu>dt&&(wr+=Zu-dt),is<0&&(Sr+=-is),tc>ie&&(rs+=tc-ie),B==="grid"&&(nn+=Zn,wr+=Zn,Sr+=Zn,rs+=Zn),pn+=nn,In+=nn,mn+=Sr,Ln+=Sr,gn+=nn,zn+=nn,yn+=Sr,vn+=Sr;var Js=dt+nn+wr,Vh=ie+Sr+rs;Vr-=nn,Xs-=Sr;var ua=x.bzFunction(pn,gn,zn,In),ca=x.bzFunction(mn,yn,vn,Ln),nc={x:ua(.01),y:ca(.01)},rc={x:ua(.5),y:ca(.5)},ic={x:ua(.99),y:ca(.99)},fa;return B==="grid"?fa="M "+pn+" "+mn+" L  "+gn+" "+yn+" L "+zn+" "+vn+" "+In+" "+Ln:B==="smooth"&&(fa="M "+pn+" "+mn+" C "+gn+" "+yn+", "+zn+" "+vn+", "+In+" "+Ln),{cx0:Vr,cy0:Xs,x1:pn,x2:In,y1:mn,y2:Ln,cw:Js,ch:Vh,cpx1:gn,cpy1:yn,cpx2:zn,cpy2:vn,dx:Wr,dy:Jn,absDx:dt,absDy:ie,headOrient:ye,tailOrient:Se,labelStartPos:nc,labelMiddlePos:rc,labelEndPos:ic,excLeft:nn,excRight:wr,excUp:Sr,excDown:rs,headOffset:Qn,arrowHeadOffset:Hh,arrowTailOffset:Uh,startPoints:An,endPoints:to,mainDivPos:Ti,xSign:Ae,ySign:Be,lineLength:(D=(O=Ye.current)===null||O===void 0?void 0:O.getTotalLength())!==null&&D!==void 0?D:0,fHeadSize:xt,fTailSize:ht,arrowPath:fa}};d.getPosition=w},"./src/Xarrow/utils/index.ts":function(f,d){Object.defineProperty(d,"__esModule",{value:!0}),d.getSvgPos=d.getElemPos=d.getShortestLine=d.xStr2absRelative=d.factorDpathStr=d.getElementByPropGiven=void 0;var p=function(w){var E;return typeof w=="string"?E=document.getElementById(w):E=w==null?void 0:w.current,E};d.getElementByPropGiven=p;var m=function(w,E){var _=w.split(/(\d+(?:\.\d+)?)/);return _=_.map(function(M){return Number(M)?(Number(M)*E).toString():M}),_.join("")};d.factorDpathStr=m;var g=function(w){if(typeof w!="string")return{abs:0,relative:.5};var E=w.split("%"),_=0,M=0;if(E.length==1){var P=parseFloat(E[0]);if(!isNaN(P))return _=P,{abs:_,relative:0}}else if(E.length==2){var O=[parseFloat(E[0]),parseFloat(E[1])],D=O[0],z=O[1];if(isNaN(D)||(M=D/100),isNaN(z)||(_=z),!isNaN(D)||!isNaN(z))return{abs:_,relative:M}}};d.xStr2absRelative=g;var v=function(w,E){return Math.sqrt(Math.pow(w.x-E.x,2)+Math.pow(w.y-E.y,2))},k=function(w,E){var _=1/0,M=1/0,P;return w.forEach(function(O){E.forEach(function(D){M=v(O,D),M<_&&(_=M,P={chosenStart:O,chosenEnd:D})})}),P};d.getShortestLine=k;var b=function(w){if(!w)return{x:0,y:0,right:0,bottom:0};var E=w.getBoundingClientRect();return{x:E.left,y:E.top,right:E.right,bottom:E.bottom}};d.getElemPos=b;var x=function(w){if(!w.current)return{x:0,y:0};var E=w.current.getBoundingClientRect(),_=E.left,M=E.top,P=getComputedStyle(w.current),O=Number(P.left.slice(0,-2)),D=Number(P.top.slice(0,-2));return{x:_-O,y:M-D}};d.getSvgPos=x},"./src/Xwrapper.tsx":function(f,d,p){var m=this&&this.__createBinding||(Object.create?function(M,P,O,D){D===void 0&&(D=O),Object.defineProperty(M,D,{enumerable:!0,get:function(){return P[O]}})}:function(M,P,O,D){D===void 0&&(D=O),M[D]=P[O]}),g=this&&this.__setModuleDefault||(Object.create?function(M,P){Object.defineProperty(M,"default",{enumerable:!0,value:P})}:function(M,P){M.default=P}),v=this&&this.__importStar||function(M){if(M&&M.__esModule)return M;var P={};if(M!=null)for(var O in M)O!=="default"&&Object.prototype.hasOwnProperty.call(M,O)&&m(P,M,O);return g(P,M),P};Object.defineProperty(d,"__esModule",{value:!0}),d.XarrowContext=d.XelemContext=void 0;var k=v(p("react"));d.XelemContext=k.default.createContext(null),d.XarrowContext=k.default.createContext(null);var b={},x=0,w=function(M){var P=M.children,O=M.instanceCount,D=k.useState({}),z=D[1],j=function(){return z({})};return k.useEffect(function(){O.current=x,b[O.current]=j},[]),k.default.createElement(d.XarrowContext.Provider,{value:j},P)},E=function(M){var P=M.children,O=M.instanceCount;return k.default.createElement(d.XelemContext.Provider,{value:b[O.current]},P)},_=function(M){var P=M.children,O=k.useRef(x),D=k.useState({}),z=D[1];return k.useEffect(function(){return x++,z({}),function(){delete b[O.current]}},[]),k.default.createElement(E,{instanceCount:O},k.default.createElement(w,{instanceCount:O},P))};d.default=_},"./src/constants.tsx":function(f,d,p){var m=this&&this.__importDefault||function(v){return v&&v.__esModule?v:{default:v}};Object.defineProperty(d,"__esModule",{value:!0}),d.cArrowShapes=d.arrowShapes=d.cSvgElems=d.cPaths=d.cAnchorEdge=void 0;var g=m(p("react"));d.cAnchorEdge=["middle","left","right","top","bottom","auto"],d.cPaths=["smooth","grid","straight"],d.cSvgElems=["circle","ellipse","line","path","polygon","polyline","rect"],d.arrowShapes={arrow1:{svgElem:g.default.createElement("path",{d:"M 0 0 L 1 0.5 L 0 1 L 0.25 0.5 z"}),offsetForward:.25},heart:{svgElem:g.default.createElement("path",{d:"M 0,0.25 A 0.125,0.125 0,0,1 0.5,0.25 A 0.125,0.125 0,0,1 1,0.25 Q 1,0.625 0.5,1 Q 0,0.625 0,0.25 z"}),offsetForward:.1},circle:{svgElem:g.default.createElement("circle",{r:.5,cx:.5,cy:.5}),offsetForward:0}},d.cArrowShapes=Object.keys(d.arrowShapes)},"./src/index.tsx":function(f,d,p){var m=this&&this.__createBinding||(Object.create?function(w,E,_,M){M===void 0&&(M=_),Object.defineProperty(w,M,{enumerable:!0,get:function(){return E[_]}})}:function(w,E,_,M){M===void 0&&(M=_),w[M]=E[_]}),g=this&&this.__exportStar||function(w,E){for(var _ in w)_!=="default"&&!Object.prototype.hasOwnProperty.call(E,_)&&m(E,w,_)},v=this&&this.__importDefault||function(w){return w&&w.__esModule?w:{default:w}};Object.defineProperty(d,"__esModule",{value:!0}),d.useXarrow=d.Xwrapper=d.default=void 0;var k=p("./src/Xarrow/Xarrow.tsx");Object.defineProperty(d,"default",{enumerable:!0,get:function(){return v(k).default}}),g(p("./src/types.ts"),d),g(p("./src/constants.tsx"),d);var b=p("./src/Xwrapper.tsx");Object.defineProperty(d,"Xwrapper",{enumerable:!0,get:function(){return v(b).default}});var x=p("./src/useXarrow.tsx");Object.defineProperty(d,"useXarrow",{enumerable:!0,get:function(){return v(x).default}})},"./src/types.ts":function(f,d){Object.defineProperty(d,"__esModule",{value:!0})},"./src/useXarrow.tsx":function(f,d,p){Object.defineProperty(d,"__esModule",{value:!0});var m=p("react"),g=p("./src/Xwrapper.tsx"),v=function(){var k=m.useState({}),b=k[1],x=function(){return b({})},w=m.useContext(g.XelemContext);return w||(w=function(){}),m.useLayoutEffect(function(){w()}),x};d.default=v},lodash:function(f){f.exports=r},"prop-types":function(f){f.exports=i},react:function(f){f.exports=n}},s={};function a(f){var d=s[f];if(d!==void 0)return d.exports;var p=s[f]={id:f,loaded:!1,exports:{}};return o[f].call(p.exports,p,p.exports,a),p.loaded=!0,p.exports}a.c=s,function(){a.d=function(f,d){for(var p in d)a.o(d,p)&&!a.o(f,p)&&Object.defineProperty(f,p,{enumerable:!0,get:d[p]})}}(),function(){a.o=function(f,d){return Object.prototype.hasOwnProperty.call(f,d)}}(),function(){a.r=function(f){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(f,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(f,"__esModule",{value:!0})}}(),function(){a.nmd=function(f){return f.paths=[],f.children||(f.children=[]),f}}();var c=a(a.s="./src/index.tsx");return c}()})})(sE);var o0=sE.exports;const XL=rh(o0);function JL(t,e){if(t.match(/^[a-z]+:\/\//i))return t;if(t.match(/^\/\//))return window.location.protocol+t;if(t.match(/^[a-z]+:/i))return t;const n=document.implementation.createHTMLDocument(),r=n.createElement("base"),i=n.createElement("a");return n.head.appendChild(r),n.body.appendChild(i),e&&(r.href=e),i.href=t,i.href}const YL=(()=>{let t=0;const e=()=>`0000${(Math.random()*36**4<<0).toString(36)}`.slice(-4);return()=>(t+=1,`u${e()}${t}`)})();function $o(t){const e=[];for(let n=0,r=t.length;n<r;n++)e.push(t[n]);return e}let dl=null;function lE(t={}){return dl||(t.includeStyleProperties?(dl=t.includeStyleProperties,dl):(dl=$o(window.getComputedStyle(document.documentElement)),dl))}function fd(t,e){const r=(t.ownerDocument.defaultView||window).getComputedStyle(t).getPropertyValue(e);return r?parseFloat(r.replace("px","")):0}function QL(t){const e=fd(t,"border-left-width"),n=fd(t,"border-right-width");return t.clientWidth+e+n}function ZL(t){const e=fd(t,"border-top-width"),n=fd(t,"border-bottom-width");return t.clientHeight+e+n}function aE(t,e={}){const n=e.width||QL(t),r=e.height||ZL(t);return{width:n,height:r}}function e3(){let t,e;try{e=process}catch{}const n=e&&e.env?e.env.devicePixelRatio:null;return n&&(t=parseInt(n,10),Number.isNaN(t)&&(t=1)),t||window.devicePixelRatio||1}const lr=16384;function t3(t){(t.width>lr||t.height>lr)&&(t.width>lr&&t.height>lr?t.width>t.height?(t.height*=lr/t.width,t.width=lr):(t.width*=lr/t.height,t.height=lr):t.width>lr?(t.height*=lr/t.width,t.width=lr):(t.width*=lr/t.height,t.height=lr))}function dd(t){return new Promise((e,n)=>{const r=new Image;r.onload=()=>{r.decode().then(()=>{requestAnimationFrame(()=>e(r))})},r.onerror=n,r.crossOrigin="anonymous",r.decoding="async",r.src=t})}async function n3(t){return Promise.resolve().then(()=>new XMLSerializer().serializeToString(t)).then(encodeURIComponent).then(e=>`data:image/svg+xml;charset=utf-8,${e}`)}async function r3(t,e,n){const r="http://www.w3.org/2000/svg",i=document.createElementNS(r,"svg"),o=document.createElementNS(r,"foreignObject");return i.setAttribute("width",`${e}`),i.setAttribute("height",`${n}`),i.setAttribute("viewBox",`0 0 ${e} ${n}`),o.setAttribute("width","100%"),o.setAttribute("height","100%"),o.setAttribute("x","0"),o.setAttribute("y","0"),o.setAttribute("externalResourcesRequired","true"),i.appendChild(o),o.appendChild(t),n3(i)}const Gn=(t,e)=>{if(t instanceof e)return!0;const n=Object.getPrototypeOf(t);return n===null?!1:n.constructor.name===e.name||Gn(n,e)};function i3(t){const e=t.getPropertyValue("content");return`${t.cssText} content: '${e.replace(/'|"/g,"")}';`}function o3(t,e){return lE(e).map(n=>{const r=t.getPropertyValue(n),i=t.getPropertyPriority(n);return`${n}: ${r}${i?" !important":""};`}).join(" ")}function s3(t,e,n,r){const i=`.${t}:${e}`,o=n.cssText?i3(n):o3(n,r);return document.createTextNode(`${i}{${o}}`)}function sS(t,e,n,r){const i=window.getComputedStyle(t,n),o=i.getPropertyValue("content");if(o===""||o==="none")return;const s=YL();try{e.className=`${e.className} ${s}`}catch{return}const a=document.createElement("style");a.appendChild(s3(s,n,i,r)),e.appendChild(a)}function l3(t,e,n){sS(t,e,":before",n),sS(t,e,":after",n)}const lS="application/font-woff",aS="image/jpeg",a3={woff:lS,woff2:lS,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:aS,jpeg:aS,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml",webp:"image/webp"};function u3(t){const e=/\.([^./]*?)$/g.exec(t);return e?e[1]:""}function Ry(t){const e=u3(t).toLowerCase();return a3[e]||""}function c3(t){return t.split(/,/)[1]}function s0(t){return t.search(/^(data:)/)!==-1}function f3(t,e){return`data:${e};base64,${t}`}async function uE(t,e,n){const r=await fetch(t,e);if(r.status===404)throw new Error(`Resource "${r.url}" not found`);const i=await r.blob();return new Promise((o,s)=>{const a=new FileReader;a.onerror=s,a.onloadend=()=>{try{o(n({res:r,result:a.result}))}catch(c){s(c)}},a.readAsDataURL(i)})}const Pm={};function d3(t,e,n){let r=t.replace(/\?.*/,"");return n&&(r=t),/ttf|otf|eot|woff2?/i.test(r)&&(r=r.replace(/.*\//,"")),e?`[${e}]${r}`:r}async function Dy(t,e,n){const r=d3(t,e,n.includeQueryParams);if(Pm[r]!=null)return Pm[r];n.cacheBust&&(t+=(/\?/.test(t)?"&":"?")+new Date().getTime());let i;try{const o=await uE(t,n.fetchRequestInit,({res:s,result:a})=>(e||(e=s.headers.get("Content-Type")||""),c3(a)));i=f3(o,e)}catch(o){i=n.imagePlaceholder||"";let s=`Failed to fetch resource: ${t}`;o&&(s=typeof o=="string"?o:o.message),s&&console.warn(s)}return Pm[r]=i,i}async function h3(t){const e=t.toDataURL();return e==="data:,"?t.cloneNode(!1):dd(e)}async function p3(t,e){if(t.currentSrc){const o=document.createElement("canvas"),s=o.getContext("2d");o.width=t.clientWidth,o.height=t.clientHeight,s==null||s.drawImage(t,0,0,o.width,o.height);const a=o.toDataURL();return dd(a)}const n=t.poster,r=Ry(n),i=await Dy(n,r,e);return dd(i)}async function m3(t,e){var n;try{if(!((n=t==null?void 0:t.contentDocument)===null||n===void 0)&&n.body)return await Sh(t.contentDocument.body,e,!0)}catch{}return t.cloneNode(!1)}async function g3(t,e){return Gn(t,HTMLCanvasElement)?h3(t):Gn(t,HTMLVideoElement)?p3(t,e):Gn(t,HTMLIFrameElement)?m3(t,e):t.cloneNode(cE(t))}const y3=t=>t.tagName!=null&&t.tagName.toUpperCase()==="SLOT",cE=t=>t.tagName!=null&&t.tagName.toUpperCase()==="SVG";async function v3(t,e,n){var r,i;if(cE(e))return e;let o=[];return y3(t)&&t.assignedNodes?o=$o(t.assignedNodes()):Gn(t,HTMLIFrameElement)&&(!((r=t.contentDocument)===null||r===void 0)&&r.body)?o=$o(t.contentDocument.body.childNodes):o=$o(((i=t.shadowRoot)!==null&&i!==void 0?i:t).childNodes),o.length===0||Gn(t,HTMLVideoElement)||await o.reduce((s,a)=>s.then(()=>Sh(a,n)).then(c=>{c&&e.appendChild(c)}),Promise.resolve()),e}function x3(t,e,n){const r=e.style;if(!r)return;const i=window.getComputedStyle(t);i.cssText?(r.cssText=i.cssText,r.transformOrigin=i.transformOrigin):lE(n).forEach(o=>{let s=i.getPropertyValue(o);o==="font-size"&&s.endsWith("px")&&(s=`${Math.floor(parseFloat(s.substring(0,s.length-2)))-.1}px`),Gn(t,HTMLIFrameElement)&&o==="display"&&s==="inline"&&(s="block"),o==="d"&&e.getAttribute("d")&&(s=`path(${e.getAttribute("d")})`),r.setProperty(o,s,i.getPropertyPriority(o))})}function w3(t,e){Gn(t,HTMLTextAreaElement)&&(e.innerHTML=t.value),Gn(t,HTMLInputElement)&&e.setAttribute("value",t.value)}function S3(t,e){if(Gn(t,HTMLSelectElement)){const n=e,r=Array.from(n.children).find(i=>t.value===i.getAttribute("value"));r&&r.setAttribute("selected","")}}function k3(t,e,n){return Gn(e,Element)&&(x3(t,e,n),l3(t,e,n),w3(t,e),S3(t,e)),e}async function b3(t,e){const n=t.querySelectorAll?t.querySelectorAll("use"):[];if(n.length===0)return t;const r={};for(let o=0;o<n.length;o++){const a=n[o].getAttribute("xlink:href");if(a){const c=t.querySelector(a),f=document.querySelector(a);!c&&f&&!r[a]&&(r[a]=await Sh(f,e,!0))}}const i=Object.values(r);if(i.length){const o="http://www.w3.org/1999/xhtml",s=document.createElementNS(o,"svg");s.setAttribute("xmlns",o),s.style.position="absolute",s.style.width="0",s.style.height="0",s.style.overflow="hidden",s.style.display="none";const a=document.createElementNS(o,"defs");s.appendChild(a);for(let c=0;c<i.length;c++)a.appendChild(i[c]);t.appendChild(s)}return t}async function Sh(t,e,n){return!n&&e.filter&&!e.filter(t)?null:Promise.resolve(t).then(r=>g3(r,e)).then(r=>v3(t,r,e)).then(r=>k3(t,r,e)).then(r=>b3(r,e))}const fE=/url\((['"]?)([^'"]+?)\1\)/g,C3=/url\([^)]+\)\s*format\((["']?)([^"']+)\1\)/g,E3=/src:\s*(?:url\([^)]+\)\s*format\([^)]+\)[,;]\s*)+/g;function T3(t){const e=t.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1");return new RegExp(`(url\\(['"]?)(${e})(['"]?\\))`,"g")}function M3(t){const e=[];return t.replace(fE,(n,r,i)=>(e.push(i),n)),e.filter(n=>!s0(n))}async function _3(t,e,n,r,i){try{const o=n?JL(e,n):e,s=Ry(e);let a;return i||(a=await Dy(o,s,r)),t.replace(T3(e),`$1${a}$3`)}catch{}return t}function N3(t,{preferredFontFormat:e}){return e?t.replace(E3,n=>{for(;;){const[r,,i]=C3.exec(n)||[];if(!i)return"";if(i===e)return`src: ${r};`}}):t}function dE(t){return t.search(fE)!==-1}async function hE(t,e,n){if(!dE(t))return t;const r=N3(t,n);return M3(r).reduce((o,s)=>o.then(a=>_3(a,s,e,n)),Promise.resolve(r))}async function hl(t,e,n){var r;const i=(r=e.style)===null||r===void 0?void 0:r.getPropertyValue(t);if(i){const o=await hE(i,null,n);return e.style.setProperty(t,o,e.style.getPropertyPriority(t)),!0}return!1}async function O3(t,e){await hl("background",t,e)||await hl("background-image",t,e),await hl("mask",t,e)||await hl("-webkit-mask",t,e)||await hl("mask-image",t,e)||await hl("-webkit-mask-image",t,e)}async function A3(t,e){const n=Gn(t,HTMLImageElement);if(!(n&&!s0(t.src))&&!(Gn(t,SVGImageElement)&&!s0(t.href.baseVal)))return;const r=n?t.src:t.href.baseVal,i=await Dy(r,Ry(r),e);await new Promise((o,s)=>{t.onload=o,t.onerror=e.onImageErrorHandler?(...c)=>{try{o(e.onImageErrorHandler(...c))}catch(f){s(f)}}:s;const a=t;a.decode&&(a.decode=o),a.loading==="lazy"&&(a.loading="eager"),n?(t.srcset="",t.src=i):t.href.baseVal=i})}async function P3(t,e){const r=$o(t.childNodes).map(i=>pE(i,e));await Promise.all(r).then(()=>t)}async function pE(t,e){Gn(t,Element)&&(await O3(t,e),await A3(t,e),await P3(t,e))}function R3(t,e){const{style:n}=t;e.backgroundColor&&(n.backgroundColor=e.backgroundColor),e.width&&(n.width=`${e.width}px`),e.height&&(n.height=`${e.height}px`);const r=e.style;return r!=null&&Object.keys(r).forEach(i=>{n[i]=r[i]}),t}const uS={};async function cS(t){let e=uS[t];if(e!=null)return e;const r=await(await fetch(t)).text();return e={url:t,cssText:r},uS[t]=e,e}async function fS(t,e){let n=t.cssText;const r=/url\(["']?([^"')]+)["']?\)/g,o=(n.match(/url\([^)]+\)/g)||[]).map(async s=>{let a=s.replace(r,"$1");return a.startsWith("https://")||(a=new URL(a,t.url).href),uE(a,e.fetchRequestInit,({result:c})=>(n=n.replace(s,`url(${c})`),[s,c]))});return Promise.all(o).then(()=>n)}function dS(t){if(t==null)return[];const e=[],n=/(\/\*[\s\S]*?\*\/)/gi;let r=t.replace(n,"");const i=new RegExp("((@.*?keyframes [\\s\\S]*?){([\\s\\S]*?}\\s*?)})","gi");for(;;){const c=i.exec(r);if(c===null)break;e.push(c[0])}r=r.replace(i,"");const o=/@import[\s\S]*?url\([^)]*\)[\s\S]*?;/gi,s="((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})",a=new RegExp(s,"gi");for(;;){let c=o.exec(r);if(c===null){if(c=a.exec(r),c===null)break;o.lastIndex=a.lastIndex}else a.lastIndex=o.lastIndex;e.push(c[0])}return e}async function D3(t,e){const n=[],r=[];return t.forEach(i=>{if("cssRules"in i)try{$o(i.cssRules||[]).forEach((o,s)=>{if(o.type===CSSRule.IMPORT_RULE){let a=s+1;const c=o.href,f=cS(c).then(d=>fS(d,e)).then(d=>dS(d).forEach(p=>{try{i.insertRule(p,p.startsWith("@import")?a+=1:i.cssRules.length)}catch(m){console.error("Error inserting rule from remote css",{rule:p,error:m})}})).catch(d=>{console.error("Error loading remote css",d.toString())});r.push(f)}})}catch(o){const s=t.find(a=>a.href==null)||document.styleSheets[0];i.href!=null&&r.push(cS(i.href).then(a=>fS(a,e)).then(a=>dS(a).forEach(c=>{s.insertRule(c,s.cssRules.length)})).catch(a=>{console.error("Error loading remote stylesheet",a)})),console.error("Error inlining remote css file",o)}}),Promise.all(r).then(()=>(t.forEach(i=>{if("cssRules"in i)try{$o(i.cssRules||[]).forEach(o=>{n.push(o)})}catch(o){console.error(`Error while reading CSS rules from ${i.href}`,o)}}),n))}function I3(t){return t.filter(e=>e.type===CSSRule.FONT_FACE_RULE).filter(e=>dE(e.style.getPropertyValue("src")))}async function L3(t,e){if(t.ownerDocument==null)throw new Error("Provided element is not within a Document");const n=$o(t.ownerDocument.styleSheets),r=await D3(n,e);return I3(r)}function mE(t){return t.trim().replace(/["']/g,"")}function z3(t){const e=new Set;function n(r){(r.style.fontFamily||getComputedStyle(r).fontFamily).split(",").forEach(o=>{e.add(mE(o))}),Array.from(r.children).forEach(o=>{o instanceof HTMLElement&&n(o)})}return n(t),e}async function B3(t,e){const n=await L3(t,e),r=z3(t);return(await Promise.all(n.filter(o=>r.has(mE(o.style.fontFamily))).map(o=>{const s=o.parentStyleSheet?o.parentStyleSheet.href:null;return hE(o.cssText,s,e)}))).join(`
`)}async function j3(t,e){const n=e.fontEmbedCSS!=null?e.fontEmbedCSS:e.skipFonts?null:await B3(t,e);if(n){const r=document.createElement("style"),i=document.createTextNode(n);r.appendChild(i),t.firstChild?t.insertBefore(r,t.firstChild):t.appendChild(r)}}async function F3(t,e={}){const{width:n,height:r}=aE(t,e),i=await Sh(t,e,!0);return await j3(i,e),await pE(i,e),R3(i,e),await r3(i,n,r)}async function $3(t,e={}){const{width:n,height:r}=aE(t,e),i=await F3(t,e),o=await dd(i),s=document.createElement("canvas"),a=s.getContext("2d"),c=e.pixelRatio||e3(),f=e.canvasWidth||n,d=e.canvasHeight||r;return s.width=f*c,s.height=d*c,e.skipAutoScale||t3(s),s.style.width=`${f}`,s.style.height=`${d}`,e.backgroundColor&&(a.fillStyle=e.backgroundColor,a.fillRect(0,0,s.width,s.height)),a.drawImage(o,0,0,s.width,s.height),s}async function H3(t,e={}){return(await $3(t,e)).toDataURL()}var kh={exports:{}},gE={},l0={exports:{}};function yE(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=yE(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function hS(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=yE(t))&&(r&&(r+=" "),r+=e);return r}l0.exports=hS,l0.exports.clsx=hS;var U3=l0.exports,vt={},Ci={};Object.defineProperty(Ci,"__esModule",{value:!0});Ci.dontSetMe=G3;Ci.findInArray=V3;Ci.int=q3;Ci.isFunction=W3;Ci.isNum=K3;function V3(t,e){for(let n=0,r=t.length;n<r;n++)if(e.apply(e,[t[n],n,t]))return t[n]}function W3(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Function]"}function K3(t){return typeof t=="number"&&!isNaN(t)}function q3(t){return parseInt(t,10)}function G3(t,e,n){if(t[e])return new Error(`Invalid prop ${e} passed to ${n} - do not set this, set it on the child.`)}var Ws={};Object.defineProperty(Ws,"__esModule",{value:!0});Ws.browserPrefixToKey=xE;Ws.browserPrefixToStyle=X3;Ws.default=void 0;Ws.getPrefix=vE;const Rm=["Moz","Webkit","O","ms"];function vE(){var n,r;let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"transform";if(typeof window>"u")return"";const e=(r=(n=window.document)==null?void 0:n.documentElement)==null?void 0:r.style;if(!e||t in e)return"";for(let i=0;i<Rm.length;i++)if(xE(t,Rm[i])in e)return Rm[i];return""}function xE(t,e){return e?`${e}${J3(t)}`:t}function X3(t,e){return e?`-${e.toLowerCase()}-${t}`:t}function J3(t){let e="",n=!0;for(let r=0;r<t.length;r++)n?(e+=t[r].toUpperCase(),n=!1):t[r]==="-"?n=!0:e+=t[r];return e}Ws.default=vE();Object.defineProperty(vt,"__esModule",{value:!0});vt.addClassName=kE;vt.addEvent=Q3;vt.addUserSelectStyles=uz;vt.createCSSTransform=oz;vt.createSVGTransform=sz;vt.getTouch=lz;vt.getTouchIdentifier=az;vt.getTranslation=Iy;vt.innerHeight=nz;vt.innerWidth=rz;vt.matchesSelector=SE;vt.matchesSelectorAndParentsTo=Y3;vt.offsetXYFromParent=iz;vt.outerHeight=ez;vt.outerWidth=tz;vt.removeClassName=bE;vt.removeEvent=Z3;vt.scheduleRemoveUserSelectStyles=cz;var hr=Ci,pS=wE(Ws);function wE(t,e){if(typeof WeakMap=="function")var n=new WeakMap,r=new WeakMap;return(wE=function(i,o){if(!o&&i&&i.__esModule)return i;var s,a,c={__proto__:null,default:i};if(i===null||typeof i!="object"&&typeof i!="function")return c;if(s=o?r:n){if(s.has(i))return s.get(i);s.set(i,c)}for(const f in i)f!=="default"&&{}.hasOwnProperty.call(i,f)&&((a=(s=Object.defineProperty)&&Object.getOwnPropertyDescriptor(i,f))&&(a.get||a.set)?s(c,f,a):c[f]=i[f]);return c})(t,e)}let uf="";function SE(t,e){return uf||(uf=(0,hr.findInArray)(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],function(n){return(0,hr.isFunction)(t[n])})),(0,hr.isFunction)(t[uf])?t[uf](e):!1}function Y3(t,e,n){let r=t;do{if(SE(r,e))return!0;if(r===n)return!1;r=r.parentNode}while(r);return!1}function Q3(t,e,n,r){if(!t)return;const i={capture:!0,...r};t.addEventListener?t.addEventListener(e,n,i):t.attachEvent?t.attachEvent("on"+e,n):t["on"+e]=n}function Z3(t,e,n,r){if(!t)return;const i={capture:!0,...r};t.removeEventListener?t.removeEventListener(e,n,i):t.detachEvent?t.detachEvent("on"+e,n):t["on"+e]=null}function ez(t){let e=t.clientHeight;const n=t.ownerDocument.defaultView.getComputedStyle(t);return e+=(0,hr.int)(n.borderTopWidth),e+=(0,hr.int)(n.borderBottomWidth),e}function tz(t){let e=t.clientWidth;const n=t.ownerDocument.defaultView.getComputedStyle(t);return e+=(0,hr.int)(n.borderLeftWidth),e+=(0,hr.int)(n.borderRightWidth),e}function nz(t){let e=t.clientHeight;const n=t.ownerDocument.defaultView.getComputedStyle(t);return e-=(0,hr.int)(n.paddingTop),e-=(0,hr.int)(n.paddingBottom),e}function rz(t){let e=t.clientWidth;const n=t.ownerDocument.defaultView.getComputedStyle(t);return e-=(0,hr.int)(n.paddingLeft),e-=(0,hr.int)(n.paddingRight),e}function iz(t,e,n){const i=e===e.ownerDocument.body?{left:0,top:0}:e.getBoundingClientRect(),o=(t.clientX+e.scrollLeft-i.left)/n,s=(t.clientY+e.scrollTop-i.top)/n;return{x:o,y:s}}function oz(t,e){const n=Iy(t,e,"px");return{[(0,pS.browserPrefixToKey)("transform",pS.default)]:n}}function sz(t,e){return Iy(t,e,"")}function Iy(t,e,n){let{x:r,y:i}=t,o=`translate(${r}${n},${i}${n})`;if(e){const s=`${typeof e.x=="string"?e.x:e.x+n}`,a=`${typeof e.y=="string"?e.y:e.y+n}`;o=`translate(${s}, ${a})`+o}return o}function lz(t,e){return t.targetTouches&&(0,hr.findInArray)(t.targetTouches,n=>e===n.identifier)||t.changedTouches&&(0,hr.findInArray)(t.changedTouches,n=>e===n.identifier)}function az(t){if(t.targetTouches&&t.targetTouches[0])return t.targetTouches[0].identifier;if(t.changedTouches&&t.changedTouches[0])return t.changedTouches[0].identifier}function uz(t){if(!t)return;let e=t.getElementById("react-draggable-style-el");e||(e=t.createElement("style"),e.type="text/css",e.id="react-draggable-style-el",e.innerHTML=`.react-draggable-transparent-selection *::-moz-selection {all: inherit;}
`,e.innerHTML+=`.react-draggable-transparent-selection *::selection {all: inherit;}
`,t.getElementsByTagName("head")[0].appendChild(e)),t.body&&kE(t.body,"react-draggable-transparent-selection")}function cz(t){window.requestAnimationFrame?window.requestAnimationFrame(()=>{mS(t)}):mS(t)}function mS(t){if(t)try{if(t.body&&bE(t.body,"react-draggable-transparent-selection"),t.selection)t.selection.empty();else{const e=(t.defaultView||window).getSelection();e&&e.type!=="Caret"&&e.removeAllRanges()}}catch{}}function kE(t,e){t.classList?t.classList.add(e):t.className.match(new RegExp(`(?:^|\\s)${e}(?!\\S)`))||(t.className+=` ${e}`)}function bE(t,e){t.classList?t.classList.remove(e):t.className=t.className.replace(new RegExp(`(?:^|\\s)${e}(?!\\S)`,"g"),"")}var Ei={};Object.defineProperty(Ei,"__esModule",{value:!0});Ei.canDragX=hz;Ei.canDragY=pz;Ei.createCoreData=gz;Ei.createDraggableData=yz;Ei.getBoundPosition=fz;Ei.getControlPosition=mz;Ei.snapToGrid=dz;var ar=Ci,Rl=vt;function fz(t,e,n){if(!t.props.bounds)return[e,n];let{bounds:r}=t.props;r=typeof r=="string"?r:vz(r);const i=Ly(t);if(typeof r=="string"){const{ownerDocument:o}=i,s=o.defaultView;let a;if(r==="parent"?a=i.parentNode:a=i.getRootNode().querySelector(r),!(a instanceof s.HTMLElement))throw new Error('Bounds selector "'+r+'" could not find an element.');const c=a,f=s.getComputedStyle(i),d=s.getComputedStyle(c);r={left:-i.offsetLeft+(0,ar.int)(d.paddingLeft)+(0,ar.int)(f.marginLeft),top:-i.offsetTop+(0,ar.int)(d.paddingTop)+(0,ar.int)(f.marginTop),right:(0,Rl.innerWidth)(c)-(0,Rl.outerWidth)(i)-i.offsetLeft+(0,ar.int)(d.paddingRight)-(0,ar.int)(f.marginRight),bottom:(0,Rl.innerHeight)(c)-(0,Rl.outerHeight)(i)-i.offsetTop+(0,ar.int)(d.paddingBottom)-(0,ar.int)(f.marginBottom)}}return(0,ar.isNum)(r.right)&&(e=Math.min(e,r.right)),(0,ar.isNum)(r.bottom)&&(n=Math.min(n,r.bottom)),(0,ar.isNum)(r.left)&&(e=Math.max(e,r.left)),(0,ar.isNum)(r.top)&&(n=Math.max(n,r.top)),[e,n]}function dz(t,e,n){const r=Math.round(e/t[0])*t[0],i=Math.round(n/t[1])*t[1];return[r,i]}function hz(t){return t.props.axis==="both"||t.props.axis==="x"}function pz(t){return t.props.axis==="both"||t.props.axis==="y"}function mz(t,e,n){const r=typeof e=="number"?(0,Rl.getTouch)(t,e):null;if(typeof e=="number"&&!r)return null;const i=Ly(n),o=n.props.offsetParent||i.offsetParent||i.ownerDocument.body;return(0,Rl.offsetXYFromParent)(r||t,o,n.props.scale)}function gz(t,e,n){const r=!(0,ar.isNum)(t.lastX),i=Ly(t);return r?{node:i,deltaX:0,deltaY:0,lastX:e,lastY:n,x:e,y:n}:{node:i,deltaX:e-t.lastX,deltaY:n-t.lastY,lastX:t.lastX,lastY:t.lastY,x:e,y:n}}function yz(t,e){const n=t.props.scale;return{node:e.node,x:t.state.x+e.deltaX/n,y:t.state.y+e.deltaY/n,deltaX:e.deltaX/n,deltaY:e.deltaY/n,lastX:t.state.x,lastY:t.state.y}}function vz(t){return{left:t.left,top:t.top,right:t.right,bottom:t.bottom}}function Ly(t){const e=t.findDOMNode();if(!e)throw new Error("<DraggableCore>: Unmounted during event!");return e}var bh={},Ch={};Object.defineProperty(Ch,"__esModule",{value:!0});Ch.default=xz;function xz(){}Object.defineProperty(bh,"__esModule",{value:!0});bh.default=void 0;var Dm=CE(se),kn=zy(Py()),wz=zy(wh),an=vt,po=Ei,Im=Ci,Ia=zy(Ch);function zy(t){return t&&t.__esModule?t:{default:t}}function CE(t,e){if(typeof WeakMap=="function")var n=new WeakMap,r=new WeakMap;return(CE=function(i,o){if(!o&&i&&i.__esModule)return i;var s,a,c={__proto__:null,default:i};if(i===null||typeof i!="object"&&typeof i!="function")return c;if(s=o?r:n){if(s.has(i))return s.get(i);s.set(i,c)}for(const f in i)f!=="default"&&{}.hasOwnProperty.call(i,f)&&((a=(s=Object.defineProperty)&&Object.getOwnPropertyDescriptor(i,f))&&(a.get||a.set)?s(c,f,a):c[f]=i[f]);return c})(t,e)}function bn(t,e,n){return(e=Sz(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Sz(t){var e=kz(t,"string");return typeof e=="symbol"?e:e+""}function kz(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}const Qr={touch:{start:"touchstart",move:"touchmove",stop:"touchend"},mouse:{start:"mousedown",move:"mousemove",stop:"mouseup"}};let mo=Qr.mouse,Eh=class extends Dm.Component{constructor(){super(...arguments),bn(this,"dragging",!1),bn(this,"lastX",NaN),bn(this,"lastY",NaN),bn(this,"touchIdentifier",null),bn(this,"mounted",!1),bn(this,"handleDragStart",e=>{if(this.props.onMouseDown(e),!this.props.allowAnyClick&&typeof e.button=="number"&&e.button!==0)return!1;const n=this.findDOMNode();if(!n||!n.ownerDocument||!n.ownerDocument.body)throw new Error("<DraggableCore> not mounted on DragStart!");const{ownerDocument:r}=n;if(this.props.disabled||!(e.target instanceof r.defaultView.Node)||this.props.handle&&!(0,an.matchesSelectorAndParentsTo)(e.target,this.props.handle,n)||this.props.cancel&&(0,an.matchesSelectorAndParentsTo)(e.target,this.props.cancel,n))return;e.type==="touchstart"&&!this.props.allowMobileScroll&&e.preventDefault();const i=(0,an.getTouchIdentifier)(e);this.touchIdentifier=i;const o=(0,po.getControlPosition)(e,i,this);if(o==null)return;const{x:s,y:a}=o,c=(0,po.createCoreData)(this,s,a);(0,Ia.default)("DraggableCore: handleDragStart: %j",c),(0,Ia.default)("calling",this.props.onStart),!(this.props.onStart(e,c)===!1||this.mounted===!1)&&(this.props.enableUserSelectHack&&(0,an.addUserSelectStyles)(r),this.dragging=!0,this.lastX=s,this.lastY=a,(0,an.addEvent)(r,mo.move,this.handleDrag),(0,an.addEvent)(r,mo.stop,this.handleDragStop))}),bn(this,"handleDrag",e=>{const n=(0,po.getControlPosition)(e,this.touchIdentifier,this);if(n==null)return;let{x:r,y:i}=n;if(Array.isArray(this.props.grid)){let a=r-this.lastX,c=i-this.lastY;if([a,c]=(0,po.snapToGrid)(this.props.grid,a,c),!a&&!c)return;r=this.lastX+a,i=this.lastY+c}const o=(0,po.createCoreData)(this,r,i);if((0,Ia.default)("DraggableCore: handleDrag: %j",o),this.props.onDrag(e,o)===!1||this.mounted===!1){try{this.handleDragStop(new MouseEvent("mouseup"))}catch{const c=document.createEvent("MouseEvents");c.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),this.handleDragStop(c)}return}this.lastX=r,this.lastY=i}),bn(this,"handleDragStop",e=>{if(!this.dragging)return;const n=(0,po.getControlPosition)(e,this.touchIdentifier,this);if(n==null)return;let{x:r,y:i}=n;if(Array.isArray(this.props.grid)){let c=r-this.lastX||0,f=i-this.lastY||0;[c,f]=(0,po.snapToGrid)(this.props.grid,c,f),r=this.lastX+c,i=this.lastY+f}const o=(0,po.createCoreData)(this,r,i);if(this.props.onStop(e,o)===!1||this.mounted===!1)return!1;const a=this.findDOMNode();a&&this.props.enableUserSelectHack&&(0,an.scheduleRemoveUserSelectStyles)(a.ownerDocument),(0,Ia.default)("DraggableCore: handleDragStop: %j",o),this.dragging=!1,this.lastX=NaN,this.lastY=NaN,a&&((0,Ia.default)("DraggableCore: Removing handlers"),(0,an.removeEvent)(a.ownerDocument,mo.move,this.handleDrag),(0,an.removeEvent)(a.ownerDocument,mo.stop,this.handleDragStop))}),bn(this,"onMouseDown",e=>(mo=Qr.mouse,this.handleDragStart(e))),bn(this,"onMouseUp",e=>(mo=Qr.mouse,this.handleDragStop(e))),bn(this,"onTouchStart",e=>(mo=Qr.touch,this.handleDragStart(e))),bn(this,"onTouchEnd",e=>(mo=Qr.touch,this.handleDragStop(e)))}componentDidMount(){this.mounted=!0;const e=this.findDOMNode();e&&(0,an.addEvent)(e,Qr.touch.start,this.onTouchStart,{passive:!1})}componentWillUnmount(){this.mounted=!1;const e=this.findDOMNode();if(e){const{ownerDocument:n}=e;(0,an.removeEvent)(n,Qr.mouse.move,this.handleDrag),(0,an.removeEvent)(n,Qr.touch.move,this.handleDrag),(0,an.removeEvent)(n,Qr.mouse.stop,this.handleDragStop),(0,an.removeEvent)(n,Qr.touch.stop,this.handleDragStop),(0,an.removeEvent)(e,Qr.touch.start,this.onTouchStart,{passive:!1}),this.props.enableUserSelectHack&&(0,an.scheduleRemoveUserSelectStyles)(n)}}findDOMNode(){var e,n,r;return(e=this.props)!=null&&e.nodeRef?(r=(n=this.props)==null?void 0:n.nodeRef)==null?void 0:r.current:wz.default.findDOMNode(this)}render(){return Dm.cloneElement(Dm.Children.only(this.props.children),{onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}};bh.default=Eh;bn(Eh,"displayName","DraggableCore");bn(Eh,"propTypes",{allowAnyClick:kn.default.bool,allowMobileScroll:kn.default.bool,children:kn.default.node.isRequired,disabled:kn.default.bool,enableUserSelectHack:kn.default.bool,offsetParent:function(t,e){if(t[e]&&t[e].nodeType!==1)throw new Error("Draggable's offsetParent must be a DOM Node.")},grid:kn.default.arrayOf(kn.default.number),handle:kn.default.string,cancel:kn.default.string,nodeRef:kn.default.object,onStart:kn.default.func,onDrag:kn.default.func,onStop:kn.default.func,onMouseDown:kn.default.func,scale:kn.default.number,className:Im.dontSetMe,style:Im.dontSetMe,transform:Im.dontSetMe});bn(Eh,"defaultProps",{allowAnyClick:!1,allowMobileScroll:!1,disabled:!1,enableUserSelectHack:!0,onStart:function(){},onDrag:function(){},onStop:function(){},onMouseDown:function(){},scale:1});(function(t){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"DraggableCore",{enumerable:!0,get:function(){return c.default}}),t.default=void 0;var e=p(se),n=d(Py()),r=d(wh),i=U3,o=vt,s=Ei,a=Ci,c=d(bh),f=d(Ch);function d(x){return x&&x.__esModule?x:{default:x}}function p(x,w){if(typeof WeakMap=="function")var E=new WeakMap,_=new WeakMap;return(p=function(M,P){if(!P&&M&&M.__esModule)return M;var O,D,z={__proto__:null,default:M};if(M===null||typeof M!="object"&&typeof M!="function")return z;if(O=P?_:E){if(O.has(M))return O.get(M);O.set(M,z)}for(const j in M)j!=="default"&&{}.hasOwnProperty.call(M,j)&&((D=(O=Object.defineProperty)&&Object.getOwnPropertyDescriptor(M,j))&&(D.get||D.set)?O(z,j,D):z[j]=M[j]);return z})(x,w)}function m(){return m=Object.assign?Object.assign.bind():function(x){for(var w=1;w<arguments.length;w++){var E=arguments[w];for(var _ in E)({}).hasOwnProperty.call(E,_)&&(x[_]=E[_])}return x},m.apply(null,arguments)}function g(x,w,E){return(w=v(w))in x?Object.defineProperty(x,w,{value:E,enumerable:!0,configurable:!0,writable:!0}):x[w]=E,x}function v(x){var w=k(x,"string");return typeof w=="symbol"?w:w+""}function k(x,w){if(typeof x!="object"||!x)return x;var E=x[Symbol.toPrimitive];if(E!==void 0){var _=E.call(x,w);if(typeof _!="object")return _;throw new TypeError("@@toPrimitive must return a primitive value.")}return(w==="string"?String:Number)(x)}class b extends e.Component{static getDerivedStateFromProps(w,E){let{position:_}=w,{prevPropsPosition:M}=E;return _&&(!M||_.x!==M.x||_.y!==M.y)?((0,f.default)("Draggable: getDerivedStateFromProps %j",{position:_,prevPropsPosition:M}),{x:_.x,y:_.y,prevPropsPosition:{..._}}):null}constructor(w){super(w),g(this,"onDragStart",(E,_)=>{if((0,f.default)("Draggable: onDragStart: %j",_),this.props.onStart(E,(0,s.createDraggableData)(this,_))===!1)return!1;this.setState({dragging:!0,dragged:!0})}),g(this,"onDrag",(E,_)=>{if(!this.state.dragging)return!1;(0,f.default)("Draggable: onDrag: %j",_);const M=(0,s.createDraggableData)(this,_),P={x:M.x,y:M.y,slackX:0,slackY:0};if(this.props.bounds){const{x:D,y:z}=P;P.x+=this.state.slackX,P.y+=this.state.slackY;const[j,ee]=(0,s.getBoundPosition)(this,P.x,P.y);P.x=j,P.y=ee,P.slackX=this.state.slackX+(D-P.x),P.slackY=this.state.slackY+(z-P.y),M.x=P.x,M.y=P.y,M.deltaX=P.x-this.state.x,M.deltaY=P.y-this.state.y}if(this.props.onDrag(E,M)===!1)return!1;this.setState(P)}),g(this,"onDragStop",(E,_)=>{if(!this.state.dragging||this.props.onStop(E,(0,s.createDraggableData)(this,_))===!1)return!1;(0,f.default)("Draggable: onDragStop: %j",_);const P={dragging:!1,slackX:0,slackY:0};if(!!this.props.position){const{x:D,y:z}=this.props.position;P.x=D,P.y=z}this.setState(P)}),this.state={dragging:!1,dragged:!1,x:w.position?w.position.x:w.defaultPosition.x,y:w.position?w.position.y:w.defaultPosition.y,prevPropsPosition:{...w.position},slackX:0,slackY:0,isElementSVG:!1},w.position&&!(w.onDrag||w.onStop)&&console.warn("A `position` was applied to this <Draggable>, without drag handlers. This will make this component effectively undraggable. Please attach `onDrag` or `onStop` handlers so you can adjust the `position` of this element.")}componentDidMount(){typeof window.SVGElement<"u"&&this.findDOMNode()instanceof window.SVGElement&&this.setState({isElementSVG:!0})}componentWillUnmount(){this.state.dragging&&this.setState({dragging:!1})}findDOMNode(){var w,E;return((E=(w=this.props)==null?void 0:w.nodeRef)==null?void 0:E.current)??r.default.findDOMNode(this)}render(){const{axis:w,bounds:E,children:_,defaultPosition:M,defaultClassName:P,defaultClassNameDragging:O,defaultClassNameDragged:D,position:z,positionOffset:j,scale:ee,...oe}=this.props;let he={},_e=null;const $e=!!!z||this.state.dragging,Re=z||M,B={x:(0,s.canDragX)(this)&&$e?this.state.x:Re.x,y:(0,s.canDragY)(this)&&$e?this.state.y:Re.y};this.state.isElementSVG?_e=(0,o.createSVGTransform)(B,j):he=(0,o.createCSSTransform)(B,j);const W=(0,i.clsx)(_.props.className||"",P,{[O]:this.state.dragging,[D]:this.state.dragged});return e.createElement(c.default,m({},oe,{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),e.cloneElement(e.Children.only(_),{className:W,style:{..._.props.style,...he},transform:_e}))}}t.default=b,g(b,"displayName","Draggable"),g(b,"propTypes",{...c.default.propTypes,axis:n.default.oneOf(["both","x","y","none"]),bounds:n.default.oneOfType([n.default.shape({left:n.default.number,right:n.default.number,top:n.default.number,bottom:n.default.number}),n.default.string,n.default.oneOf([!1])]),defaultClassName:n.default.string,defaultClassNameDragging:n.default.string,defaultClassNameDragged:n.default.string,defaultPosition:n.default.shape({x:n.default.number,y:n.default.number}),positionOffset:n.default.shape({x:n.default.oneOfType([n.default.number,n.default.string]),y:n.default.oneOfType([n.default.number,n.default.string])}),position:n.default.shape({x:n.default.number,y:n.default.number}),className:a.dontSetMe,style:a.dontSetMe,transform:a.dontSetMe}),g(b,"defaultProps",{...c.default.defaultProps,axis:"both",bounds:!1,defaultClassName:"react-draggable",defaultClassNameDragging:"react-draggable-dragging",defaultClassNameDragged:"react-draggable-dragged",defaultPosition:{x:0,y:0},scale:1})})(gE);const{default:EE,DraggableCore:bz}=gE;kh.exports=EE;kh.exports.default=EE;kh.exports.DraggableCore=bz;var Cz=kh.exports;const Ez=rh(Cz),Lm={used:{label:"",color:"bg-emerald-500",text:"text-white"},unused:{label:"",color:"bg-slate-600",text:"text-slate-200"},deprecated:{label:"",color:"bg-red-500",text:"text-white"},verify:{label:"",color:"bg-yellow-500",text:"text-black"},core:{label:"",color:"bg-purple-600",text:"text-white"}};function Tz({id:t,type:e,content:n,x:r,y:i,scale:o,isSelected:s,onUpdate:a,onDelete:c,onDrag:f,onConnectStart:d,onConnectEnd:p}){const m=se.useRef(null),[g,v]=se.useState(!n),k=n&&Lm[n]?n:"unused",b=Lm[k],x=()=>{const P=Object.keys(Lm),D=(P.indexOf(k)+1)%P.length;a(t,P[D])},w=()=>{if(e==="status")return A.jsxs("div",{className:"relative group",children:[A.jsx("div",{onClick:x,className:`drag-handle w-32 h-10 ${b.color} ${b.text} rounded-full shadow-lg flex items-center justify-center font-bold text-sm cursor-pointer border-2 border-white/20 select-none hover:brightness-110 active:scale-95 transition-all z-[60]`,children:b.label}),A.jsx("button",{onClick:O=>{O.stopPropagation(),c(t)},className:"absolute -top-2 -right-2 w-5 h-5 bg-slate-700 text-slate-300 hover:bg-red-500 hover:text-white rounded-full opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center text-xs z-[70] border border-slate-500 cursor-pointer pointer-events-auto",children:""})]});const P=O=>O.stopPropagation();return(e==="video"||e==="audio"||e==="link")&&(g||!n)?A.jsxs("div",{className:"w-full h-32 bg-slate-800 flex flex-col items-center justify-center p-4 gap-3 rounded-lg",onMouseDown:P,children:[A.jsxs("span",{className:"text-slate-400 text-xs uppercase font-bold tracking-wider",children:[e," URL"]}),A.jsx("input",{className:"w-full bg-slate-900 text-white text-xs px-3 py-2 rounded border border-slate-600 outline-none focus:border-emerald-500 transition-colors",placeholder:"...",autoFocus:!0,defaultValue:n,onKeyDown:O=>{O.key==="Enter"&&(a(t,O.currentTarget.value),v(!1))}})]}):e==="image"?A.jsx("img",{src:n,className:"w-full h-auto object-cover pointer-events-none display-block"}):e==="video"?A.jsxs("div",{className:"w-full h-auto bg-black flex items-center justify-center relative group",onMouseDown:P,children:[A.jsx("video",{src:n,controls:!0,className:"w-full h-auto max-h-[300px] object-contain"}),A.jsx("button",{onClick:()=>v(!0),className:"absolute top-2 right-2 p-1.5 bg-black/50 text-white rounded opacity-0 group-hover:opacity-100 transition-opacity z-10 hover:bg-emerald-600",children:""})]}):e==="audio"?A.jsxs("div",{className:"w-full h-20 bg-slate-800 flex items-center justify-center relative group",onMouseDown:P,children:[A.jsx("audio",{src:n,controls:!0,className:"w-11/12 h-8"}),A.jsx("button",{onClick:()=>v(!0),className:"absolute top-2 right-2 p-1 text-slate-400 hover:text-white opacity-0 group-hover:opacity-100",children:""})]}):e==="code"?A.jsxs("div",{className:"w-full bg-[#1e1e1e] flex flex-col",onMouseDown:P,children:[A.jsxs("div",{className:"h-7 bg-[#252526] flex items-center px-3 border-b border-black/40 select-none shrink-0",children:[A.jsxs("div",{className:"flex gap-1.5 opacity-60",children:[A.jsx("div",{className:"w-2.5 h-2.5 rounded-full bg-[#ff5f56]"}),A.jsx("div",{className:"w-2.5 h-2.5 rounded-full bg-[#ffbd2e]"}),A.jsx("div",{className:"w-2.5 h-2.5 rounded-full bg-[#27c93f]"})]}),A.jsx("span",{className:"ml-3 text-[10px] text-slate-500 font-mono tracking-tight",children:"SNIPPET"})]}),A.jsx("textarea",{className:"w-full bg-transparent resize-none outline-none text-green-400 font-mono text-xs p-3 leading-relaxed min-h-[120px] block",value:n,onChange:O=>a(t,O.target.value),spellCheck:!1})]}):e==="link"?A.jsxs("div",{className:"w-full h-auto min-h-[80px] bg-slate-900 flex items-center justify-center p-4 relative group",onMouseDown:P,children:[A.jsx("a",{href:n,target:"_blank",rel:"noreferrer",className:"text-blue-400 underline text-sm break-all hover:text-blue-300 text-center",children:n}),A.jsx("button",{onClick:()=>v(!0),className:"absolute bottom-2 right-2 p-1.5 text-slate-500 hover:text-white opacity-0 group-hover:opacity-100 transition-opacity",children:""})]}):A.jsx("textarea",{className:"w-full h-32 bg-[#fff9c4] resize-none outline-none text-slate-800 placeholder-slate-500/50 font-medium p-3 cursor-text block",placeholder:"...",value:n,onChange:O=>a(t,O.target.value),onMouseDown:P})};let E="absolute shadow-sm transition-shadow flex flex-col ",_="w-full h-full overflow-hidden ";e==="status"?E+="z-[50] ":e==="video"||e==="code"||e==="image"?(E+="w-72 h-auto "+(s?"z-20 ring-2 ring-emerald-500":"z-10"),_+="rounded-lg border-2 "+(e==="image"?"border-white bg-white":"border-slate-700 bg-[#1e1e1e]")):e==="audio"||e==="link"?(E+="w-64 h-auto "+(s?"z-20 ring-2 ring-emerald-500":"z-10"),_+="rounded-lg border border-slate-600 bg-slate-800"):(E+="w-48 h-auto "+(s?"z-20 ring-2 ring-emerald-500":"z-10 hover:ring-1 hover:ring-black/10"),_+="rounded-lg border border-transparent bg-[#fff9c4]");const M="w-3 h-3 bg-white border border-slate-400 hover:bg-emerald-500 hover:border-emerald-500 rounded-full absolute transition-all cursor-crosshair z-[100] opacity-0 group-hover:opacity-100 shadow-sm";return A.jsx(Ez,{nodeRef:m,position:{x:r,y:i},scale:o,onStart:()=>{},onDrag:(P,O)=>f(t,O.x,O.y),onStop:()=>{},handle:".drag-handle",children:A.jsxs("div",{ref:m,id:t,className:`${E} group cursor-default`,children:[e==="status"?w():A.jsxs("div",{className:_,children:[A.jsx("div",{className:`drag-handle h-6 shrink-0 flex items-center justify-end px-2 cursor-grab active:cursor-grabbing border-b ${e==="code"||e==="video"||e==="audio"||e==="link"?"bg-[#252526] border-black/20":"bg-black/5 border-transparent"}`,children:A.jsx("button",{onClick:P=>{P.stopPropagation(),c(t)},className:"text-slate-400 hover:text-red-500 font-bold text-xs",children:""})}),w()]}),A.jsx("div",{className:`${M} -top-1.5 left-1/2 -translate-x-1/2`,onMouseDown:P=>{P.stopPropagation(),d&&d(t)},onMouseUp:P=>{P.stopPropagation(),p&&p(t)}}),A.jsx("div",{className:`${M} -bottom-1.5 left-1/2 -translate-x-1/2`,onMouseDown:P=>{P.stopPropagation(),d&&d(t)},onMouseUp:P=>{P.stopPropagation(),p&&p(t)}}),A.jsx("div",{className:`${M} top-1/2 -left-1.5 -translate-y-1/2`,onMouseDown:P=>{P.stopPropagation(),d&&d(t)},onMouseUp:P=>{P.stopPropagation(),p&&p(t)}}),A.jsx("div",{className:`${M} top-1/2 -right-1.5 -translate-y-1/2`,onMouseDown:P=>{P.stopPropagation(),d&&d(t)},onMouseUp:P=>{P.stopPropagation(),p&&p(t)}})]})})}/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mz=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),_z=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,r)=>r?r.toUpperCase():n.toLowerCase()),gS=t=>{const e=_z(t);return e.charAt(0).toUpperCase()+e.slice(1)},TE=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim(),Nz=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Oz={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Az=se.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:o,iconNode:s,...a},c)=>se.createElement("svg",{ref:c,...Oz,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:TE("lucide",i),...!o&&!Nz(a)&&{"aria-hidden":"true"},...a},[...s.map(([f,d])=>se.createElement(f,d)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tn=(t,e)=>{const n=se.forwardRef(({className:r,...i},o)=>se.createElement(Az,{ref:o,iconNode:e,className:TE(`lucide-${Mz(gS(t))}`,`lucide-${t}`,r),...i}));return n.displayName=gS(t),n};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pz=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],Rz=tn("activity",Pz);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dz=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Iz=tn("chevron-down",Dz);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lz=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],zz=tn("chevron-right",Lz);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bz=[["path",{d:"m16 18 6-6-6-6",key:"eg8j8"}],["path",{d:"m8 6-6 6 6 6",key:"ppft3o"}]],jz=tn("code",Bz);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fz=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],$z=tn("download",Fz);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hz=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]],Uz=tn("ellipsis",Hz);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vz=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M9 15h6",key:"cctwl0"}],["path",{d:"M12 18v-6",key:"17g6i2"}]],Wz=tn("file-plus",Vz);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kz=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],qz=tn("file-text",Kz);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gz=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],Xz=tn("folder",Gz);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jz=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],Yz=tn("hash",Jz);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qz=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],Zz=tn("image",Qz);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e4=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],t4=tn("link",e4);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n4=[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]],r4=tn("music",n4);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i4=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],yS=tn("plus",i4);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o4=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],s4=tn("trash-2",o4);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l4=[["path",{d:"M12 4v16",key:"1654pz"}],["path",{d:"M4 7V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2",key:"e0r10z"}],["path",{d:"M9 20h6",key:"s66wpe"}]],a4=tn("type",l4);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u4=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],c4=tn("video",u4);function f4({initialItems:t=[],initialConnections:e=[],onDataChange:n}){const[r,i]=se.useState(t),[o,s]=se.useState(e),[a,c]=se.useState(1),[f,d]=se.useState({x:0,y:0}),[p,m]=se.useState(null),[g,v]=se.useState(!1),k=se.useRef(!1),b=se.useRef({x:0,y:0}),x=se.useRef(null),w=se.useRef(null),E=se.useRef(null),_=o0.useXarrow();se.useEffect(()=>{(t.length>0||e.length>0)&&(i(t),s(e))},[t,e]),se.useEffect(()=>{n&&n(r,o)},[r,o,n]),se.useEffect(()=>{const B=setTimeout(()=>{_()},50);return()=>clearTimeout(B)},[a,f,r,o]);const M=B=>{var $;B.preventDefault();const W=($=x.current)==null?void 0:$.getBoundingClientRect();if(!W)return;const G=B.clientX-W.left,Q=B.clientY-W.top,ge=(G-f.x)/a,Ie=(Q-f.y)/a,nt=Math.min(Math.max(a-B.deltaY*.001,.1),5),Ge=G-ge*nt,Le=Q-Ie*nt;c(nt),d({x:Ge,y:Le})},P=async()=>{if(!w.current||r.length===0)return;v(!1);const B=a,W=f;try{c(1),d({x:0,y:0}),setTimeout(async()=>{if(_(),w.current){const G=await H3(w.current,{backgroundColor:"#0f172a",pixelRatio:2,filter:ge=>{var Ie;return!((Ie=ge.classList)!=null&&Ie.contains("drag-handle-ignored"))}}),Q=document.createElement("a");Q.download=`GP_Board_${Date.now()}.png`,Q.href=G,Q.click()}c(B),d(W)},500)}catch(G){console.error("Export failed:",G),alert(""),c(B),d(W)}},O=()=>{var ge,Ie;const B=((ge=x.current)==null?void 0:ge.clientWidth)||window.innerWidth,W=((Ie=x.current)==null?void 0:Ie.clientHeight)||window.innerHeight,G=(B/2-f.x)/a,Q=(W/2-f.y)/a;return{x:G-100,y:Q-60}},D=B=>{var Ge;B.preventDefault(),B.stopPropagation();const G=Array.from(B.dataTransfer.files).filter(Le=>Le.type.startsWith("image/")||Le.type.startsWith("video/")||Le.type.startsWith("audio/"));if(G.length===0)return;const Q=(Ge=x.current)==null?void 0:Ge.getBoundingClientRect(),ge=B.clientX-((Q==null?void 0:Q.left)||0),Ie=B.clientY-((Q==null?void 0:Q.top)||0),ft=(ge-f.x)/a,nt=(Ie-f.y)/a;G.forEach((Le,$)=>{const Z=new FileReader;Z.onload=ae=>{let fe="image";Le.type.startsWith("video/")&&(fe="video"),Le.type.startsWith("audio/")&&(fe="audio"),i(Ye=>{var ye;return[...Ye,{id:No(),type:fe,content:(ye=ae.target)==null?void 0:ye.result,x:ft+$*20-100,y:nt+$*20-60}]})},Z.readAsDataURL(Le)})},z=B=>{B.preventDefault(),B.stopPropagation()},j=(B,W="")=>{const{x:G,y:Q}=O();i(ge=>[...ge,{id:No(),type:B,content:W,x:G,y:Q}]),v(!1)},ee=()=>{var B;(B=E.current)==null||B.click(),v(!1)},oe=B=>{var G;const W=(G=B.target.files)==null?void 0:G[0];if(W){const Q=new FileReader;Q.onload=ge=>{let Ie="image";W.type.startsWith("video/")&&(Ie="video"),W.type.startsWith("audio/")&&(Ie="audio");const{x:ft,y:nt}=O();i(Ge=>{var Le;return[...Ge,{id:No(),type:Ie,content:(Le=ge.target)==null?void 0:Le.result,x:ft,y:nt}]})},Q.readAsDataURL(W)}B.target.value=""},he=B=>s(W=>W.filter(G=>G.id!==B)),_e=B=>{p&&p!==B&&(o.find(G=>G.start===p&&G.end===B||G.start===B&&G.end===p)||s(G=>[...G,{id:No(),start:p,end:B}])),m(null)},xe=B=>{B.button===1&&(k.current=!0,b.current={x:B.clientX,y:B.clientY})},$e=B=>{if(k.current){const W=B.clientX-b.current.x,G=B.clientY-b.current.y;d(Q=>({x:Q.x+W,y:Q.y+G})),b.current={x:B.clientX,y:B.clientY}}},Re=()=>{k.current=!1,m(null)};return A.jsxs("div",{ref:x,className:"absolute inset-0 bg-slate-900 overflow-hidden select-none",onWheel:M,onMouseDown:xe,onMouseMove:$e,onMouseUp:Re,onMouseLeave:Re,onDrop:D,onDragOver:z,children:[A.jsx("input",{type:"file",ref:E,onChange:oe,className:"hidden",accept:"image/*,video/*,audio/*"}),A.jsxs("div",{className:"absolute top-4 left-4 z-50 text-slate-500 text-sm pointer-events-none bg-slate-900/50 p-2 rounded backdrop-blur-sm border border-slate-700",children:[A.jsx("p",{children:" :  | :  |  "}),A.jsxs("p",{className:"text-xs mt-1 text-slate-600",children:["Scale: ",a.toFixed(2),"x"]})]}),A.jsx(o0.Xwrapper,{children:A.jsxs("div",{ref:w,className:"absolute inset-0 w-full h-full",children:[A.jsx("div",{className:"absolute inset-0 will-change-transform origin-top-left",style:{transform:`translate(${f.x}px, ${f.y}px) scale(${a})`},children:A.jsxs("div",{className:"relative w-[5000px] h-[5000px]",children:[A.jsx("div",{className:"absolute inset-0 opacity-10 pointer-events-none",style:{backgroundImage:"radial-gradient(#ffffff 1px, transparent 1px)",backgroundSize:"40px 40px"}}),r.map(B=>A.jsx(Tz,{...B,scale:a,isSelected:p===B.id,onUpdate:(W,G)=>i(Q=>Q.map(ge=>ge.id===W?{...ge,content:G}:ge)),onDelete:W=>{i(G=>G.filter(Q=>Q.id!==W)),s(G=>G.filter(Q=>Q.start!==W&&Q.end!==W))},onDrag:(W,G,Q)=>{i(ge=>ge.map(Ie=>Ie.id===W?{...Ie,x:G,y:Q}:Ie)),_()},onConnectStart:m,onConnectEnd:_e},B.id))]})}),A.jsx("div",{className:"absolute inset-0 pointer-events-none",style:{transform:`translate(${f.x}px, ${f.y}px)`},children:o.map(B=>A.jsx(XL,{start:B.start,end:B.end,color:"#10b981",strokeWidth:3,headSize:6,path:"smooth",zIndex:10,labels:{middle:A.jsx("div",{onClick:W=>{W.stopPropagation(),he(B.id)},className:"pointer-events-auto cursor-pointer p-1 rounded-full bg-slate-800 border border-slate-600 hover:bg-red-500 hover:border-red-500 hover:text-white text-slate-400 transition-colors z-[999]",title:"",children:A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor",children:A.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})}},B.id))})]})}),A.jsxs("div",{className:"absolute bottom-8 right-8 flex flex-col items-end gap-4 z-[100]",children:[A.jsxs("div",{className:`flex flex-col gap-3 transition-all duration-300 origin-bottom ${g?"opacity-100 scale-100":"opacity-0 scale-0 pointer-events-none"}`,children:[A.jsxs("div",{className:"flex gap-2",children:[A.jsx("button",{onClick:P,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-500 text-white rounded-full shadow-lg",title:"",children:A.jsx(Zz,{size:18})}),A.jsx("button",{onClick:ee,className:"flex items-center gap-2 px-4 py-2 bg-indigo-600 hover:bg-indigo-500 text-white rounded-full shadow-lg",title:"",children:A.jsx(Uz,{size:18})})]}),A.jsxs("div",{className:"flex gap-2",children:[A.jsx("button",{onClick:()=>j("video"),className:"flex items-center gap-2 px-4 py-2 bg-red-600 hover:bg-red-500 text-white rounded-full shadow-lg",title:"",children:A.jsx(c4,{size:18})}),A.jsx("button",{onClick:()=>j("audio"),className:"flex items-center gap-2 px-4 py-2 bg-pink-600 hover:bg-pink-500 text-white rounded-full shadow-lg",title:"",children:A.jsx(r4,{size:18})})]}),A.jsxs("div",{className:"flex gap-2",children:[A.jsx("button",{onClick:()=>j("code"),className:"flex items-center gap-2 px-4 py-2 bg-slate-700 hover:bg-slate-600 text-white rounded-full shadow-lg",title:"",children:A.jsx(jz,{size:18})}),A.jsx("button",{onClick:()=>j("link"),className:"flex items-center gap-2 px-4 py-2 bg-sky-600 hover:bg-sky-500 text-white rounded-full shadow-lg",title:"",children:A.jsx(t4,{size:18})})]}),A.jsxs("div",{className:"flex gap-2",children:[A.jsx("button",{onClick:()=>j("status","unused"),className:"flex items-center gap-2 px-4 py-2 bg-purple-600 hover:bg-purple-500 text-white rounded-full shadow-lg",title:"",children:A.jsx(Rz,{size:18})}),A.jsx("button",{onClick:()=>j("text"),className:"flex items-center gap-2 px-4 py-2 bg-yellow-500 hover:bg-yellow-400 text-white rounded-full shadow-lg",title:"",children:A.jsx(a4,{size:18})})]})]}),A.jsx("button",{onClick:()=>v(!g),className:`w-16 h-16 bg-emerald-500 hover:bg-emerald-400 text-white rounded-full shadow-2xl flex items-center justify-center text-3xl font-bold transition-transform duration-300 ${g?"rotate-45":"rotate-0"}`,children:"+"})]})]})}function d4({todos:t,members:e,onUpdate:n}){const[r,i]=se.useState(""),[o,s]=se.useState(""),a=d=>{d.preventDefault(),r.trim()&&(n([...t,{id:No(),text:r,done:!1,assigneeId:o}]),i(""))},c=d=>{n(t.map(p=>p.id===d?{...p,done:!p.done}:p))},f=d=>{n(t.filter(p=>p.id!==d))};return A.jsxs("div",{className:"w-80 bg-slate-800 border-l border-slate-700 flex flex-col shrink-0 h-full",children:[A.jsxs("div",{className:"p-4 border-b border-slate-700 font-bold text-slate-200 flex justify-between items-center",children:[A.jsx("span",{children:" "}),A.jsxs("span",{className:"text-xs text-slate-500",children:[t.filter(d=>!d.done).length," "]})]}),A.jsxs("div",{className:"flex-1 overflow-y-auto p-3 space-y-2",children:[t.map(d=>{const p=e.find(m=>m.id===d.assigneeId);return A.jsx("div",{className:"bg-slate-900/50 p-2 rounded border border-slate-700/50 hover:border-emerald-500/30 group transition-colors",children:A.jsxs("div",{className:"flex gap-2 items-start",children:[A.jsx("input",{type:"checkbox",checked:d.done,onChange:()=>c(d.id),className:"mt-1 accent-emerald-500 cursor-pointer"}),A.jsxs("div",{className:"flex-1 min-w-0",children:[A.jsx("div",{className:`text-sm break-words ${d.done?"line-through text-slate-600":"text-slate-300"}`,children:d.text}),p&&A.jsxs("div",{className:"flex items-center gap-1 mt-1 bg-slate-800/50 w-fit px-1 rounded",children:[p.avatar?A.jsx("img",{src:p.avatar,className:"w-4 h-4 rounded-full object-cover"}):A.jsx("div",{className:`w-4 h-4 rounded-full ${p.color} text-[8px] flex items-center justify-center text-white`,children:p.name[0]}),A.jsx("span",{className:"text-xs text-slate-400",children:p.name})]})]}),A.jsx("button",{onClick:()=>f(d.id),className:"text-slate-600 hover:text-red-400 opacity-0 group-hover:opacity-100 px-1 font-bold",children:""})]})},d.id)}),t.length===0&&A.jsx("div",{className:"text-center text-slate-600 text-sm mt-10",children:""})]}),A.jsxs("form",{onSubmit:a,className:"p-3 border-t border-slate-700 flex flex-col gap-2 bg-slate-800",children:[A.jsx("input",{value:r,onChange:d=>i(d.target.value),className:"bg-slate-900 border border-slate-600 rounded px-2 py-2 text-sm text-white outline-none focus:border-emerald-500 transition-colors",placeholder:"..."}),A.jsxs("div",{className:"flex gap-2",children:[A.jsxs("select",{value:o,onChange:d=>s(d.target.value),className:"bg-slate-700 text-slate-300 text-xs rounded border border-slate-600 flex-1 outline-none px-2",children:[A.jsx("option",{value:"",children:"--  --"}),e.map(d=>A.jsxs("option",{value:d.id,children:[d.name," - ",d.role]},d.id))]}),A.jsx("button",{type:"submit",className:"bg-emerald-600 hover:bg-emerald-500 text-white text-xs px-4 rounded font-bold",children:""})]})]})]})}function h4({members:t,todos:e,onUpdateMembers:n,onUpdateTodos:r}){var b;const i=se.useRef(null),[o,s]=se.useState({visible:!1,x:0,y:0,memberId:""}),[a,c]=se.useState({isOpen:!1,type:"add",inputValue:""});se.useEffect(()=>{const x=()=>s(w=>({...w,visible:!1}));return window.addEventListener("click",x),()=>window.removeEventListener("click",x)},[]);const f=x=>{if(x.preventDefault(),!!a.inputValue.trim()){if(a.type==="add"){const w=["bg-red-500","bg-blue-500","bg-emerald-500","bg-purple-500","bg-yellow-500","bg-orange-500","bg-pink-500"],E={id:No(),name:a.inputValue.trim(),role:"",color:w[Math.floor(Math.random()*w.length)]};n([...t,E])}else a.type==="rename"&&a.targetId?n(t.map(w=>w.id===a.targetId?{...w,name:a.inputValue.trim()}:w)):a.type==="role"&&a.targetId&&n(t.map(w=>w.id===a.targetId?{...w,role:a.inputValue.trim()}:w));c({...a,isOpen:!1})}},d=()=>{c({isOpen:!0,type:"add",inputValue:""})},p=()=>{const x=t.find(w=>w.id===o.memberId);x&&(c({isOpen:!0,type:"rename",inputValue:x.name,targetId:x.id}),s(w=>({...w,visible:!1})))},m=()=>{const x=t.find(w=>w.id===o.memberId);x&&(c({isOpen:!0,type:"role",inputValue:x.role,targetId:x.id}),s(w=>({...w,visible:!1})))},g=(x,w)=>{x.preventDefault(),x.stopPropagation();const E=Math.min(x.clientX,window.innerWidth-200),_=Math.min(x.clientY,window.innerHeight-250);s({visible:!0,x:E,y:_,memberId:w})},v=x=>{var E;const w=(E=x.target.files)==null?void 0:E[0];if(w&&o.memberId){const _=new FileReader;_.onload=M=>{n(t.map(P=>{var O;return P.id===o.memberId?{...P,avatar:(O=M.target)==null?void 0:O.result}:P}))},_.readAsDataURL(w)}s(_=>({..._,visible:!1})),x.target.value=""},k=()=>{confirm("")&&n(t.filter(x=>x.id!==o.memberId)),s(x=>({...x,visible:!1}))};return A.jsxs("div",{className:"flex h-full w-full bg-slate-900 overflow-hidden relative",children:[A.jsx("input",{type:"file",ref:i,onChange:v,className:"hidden",accept:"image/*"}),A.jsxs("div",{className:"flex-1 flex flex-col min-w-0",children:[A.jsxs("div",{className:"p-8 pb-4 border-b border-slate-800 flex justify-between items-center shrink-0",children:[A.jsxs("div",{children:[A.jsx("h2",{className:"text-3xl font-bold text-white",children:" "}),A.jsx("p",{className:"text-slate-400 text-sm mt-1",children:""})]}),A.jsxs("button",{onClick:d,className:"bg-emerald-600 hover:bg-emerald-500 text-white px-6 py-2 rounded-lg font-bold shadow-lg transition-colors flex items-center gap-2",children:[A.jsx("span",{children:"+"})," "]})]}),A.jsx("div",{className:"flex-1 overflow-y-auto p-8",children:A.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-6",children:[t.map(x=>A.jsxs("div",{onContextMenu:w=>g(w,x.id),className:"bg-slate-800 border border-slate-700 rounded-xl p-6 flex flex-col items-center gap-4 hover:border-emerald-500 hover:shadow-xl hover:-translate-y-1 transition-all group relative cursor-pointer select-none",children:[A.jsx("div",{className:`w-20 h-20 rounded-full border-4 border-slate-700 flex items-center justify-center text-3xl text-white font-bold overflow-hidden shadow-inner ${x.color}`,children:x.avatar?A.jsx("img",{src:x.avatar,className:"w-full h-full object-cover"}):x.name[0]}),A.jsxs("div",{className:"text-center w-full",children:[A.jsx("h3",{className:"text-lg font-bold text-white truncate px-2",children:x.name}),A.jsx("div",{className:"mt-1 inline-block px-2 py-0.5 bg-slate-900 rounded text-xs text-emerald-400 border border-slate-700 max-w-full truncate",children:x.role})]}),A.jsx("div",{className:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity text-slate-500",children:""})]},x.id)),t.length===0&&A.jsx("div",{className:"col-span-full py-10 text-center text-slate-500 border-2 border-dashed border-slate-800 rounded-xl",children:""})]})})]}),A.jsx(d4,{todos:e,members:t,onUpdate:r}),a.isOpen&&A.jsx("div",{className:"fixed inset-0 bg-black/70 z-[10000] flex items-center justify-center backdrop-blur-sm",onClick:()=>c({...a,isOpen:!1}),children:A.jsxs("div",{className:"bg-slate-800 border border-slate-700 p-6 rounded-xl w-96 shadow-2xl animate-in zoom-in-95 duration-200",onClick:x=>x.stopPropagation(),children:[A.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:a.type==="add"?"":a.type==="rename"?"":""}),A.jsxs("form",{onSubmit:f,children:[A.jsx("input",{autoFocus:!0,value:a.inputValue,onChange:x=>c({...a,inputValue:x.target.value}),placeholder:a.type==="role"?": , ...":"...",className:"w-full bg-slate-900 border border-slate-600 rounded px-4 py-3 text-white outline-none focus:border-emerald-500 mb-6"}),A.jsxs("div",{className:"flex justify-end gap-3",children:[A.jsx("button",{type:"button",onClick:()=>c({...a,isOpen:!1}),className:"px-4 py-2 text-slate-400 hover:text-white transition-colors",children:""}),A.jsx("button",{type:"submit",className:"bg-emerald-600 hover:bg-emerald-500 text-white px-6 py-2 rounded font-bold shadow-lg",children:""})]})]})]})}),o.visible&&A.jsxs(A.Fragment,{children:[A.jsx("div",{className:"fixed inset-0 z-[9998]",onClick:()=>s(x=>({...x,visible:!1}))}),A.jsxs("div",{className:"fixed z-[9999] bg-slate-800 border border-slate-600 rounded-lg shadow-2xl py-1 w-44 flex flex-col animate-in fade-in zoom-in-95 duration-100",style:{top:o.y,left:o.x},children:[A.jsxs("div",{className:"px-4 py-2 text-xs text-slate-500 border-b border-slate-700 font-bold bg-slate-900/50",children:[": ",(b=t.find(x=>x.id===o.memberId))==null?void 0:b.name]}),A.jsxs("button",{onClick:p,className:"px-4 py-3 text-left text-slate-200 hover:bg-emerald-600 hover:text-white flex items-center gap-3 transition-colors text-sm",children:[A.jsx("span",{children:""})," "]}),A.jsxs("button",{onClick:m,className:"px-4 py-3 text-left text-slate-200 hover:bg-emerald-600 hover:text-white flex items-center gap-3 transition-colors text-sm",children:[A.jsx("span",{children:""})," "]}),A.jsxs("button",{onClick:()=>{var x;return(x=i.current)==null?void 0:x.click()},className:"px-4 py-3 text-left text-slate-200 hover:bg-emerald-600 hover:text-white flex items-center gap-3 transition-colors text-sm",children:[A.jsx("span",{children:""})," "]}),A.jsx("div",{className:"h-[1px] bg-slate-700 my-1 mx-2"}),A.jsxs("button",{onClick:k,className:"px-4 py-3 text-left text-red-400 hover:bg-red-600 hover:text-white flex items-center gap-3 transition-colors text-sm rounded-b-lg",children:[A.jsx("span",{children:""})," "]})]})]})]})}var ME={exports:{}},_E={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jl=se;function p4(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var m4=typeof Object.is=="function"?Object.is:p4,g4=Jl.useState,y4=Jl.useEffect,v4=Jl.useLayoutEffect,x4=Jl.useDebugValue;function w4(t,e){var n=e(),r=g4({inst:{value:n,getSnapshot:e}}),i=r[0].inst,o=r[1];return v4(function(){i.value=n,i.getSnapshot=e,zm(i)&&o({inst:i})},[t,n,e]),y4(function(){return zm(i)&&o({inst:i}),t(function(){zm(i)&&o({inst:i})})},[t]),x4(n),n}function zm(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!m4(t,n)}catch{return!0}}function S4(t,e){return e()}var k4=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?S4:w4;_E.useSyncExternalStore=Jl.useSyncExternalStore!==void 0?Jl.useSyncExternalStore:k4;ME.exports=_E;var By=ME.exports;function Xt(t){this.content=t}Xt.prototype={constructor:Xt,find:function(t){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===t)return e;return-1},get:function(t){var e=this.find(t);return e==-1?void 0:this.content[e+1]},update:function(t,e,n){var r=n&&n!=t?this.remove(n):this,i=r.find(t),o=r.content.slice();return i==-1?o.push(n||t,e):(o[i+1]=e,n&&(o[i]=n)),new Xt(o)},remove:function(t){var e=this.find(t);if(e==-1)return this;var n=this.content.slice();return n.splice(e,2),new Xt(n)},addToStart:function(t,e){return new Xt([t,e].concat(this.remove(t).content))},addToEnd:function(t,e){var n=this.remove(t).content.slice();return n.push(t,e),new Xt(n)},addBefore:function(t,e,n){var r=this.remove(e),i=r.content.slice(),o=r.find(t);return i.splice(o==-1?i.length:o,0,e,n),new Xt(i)},forEach:function(t){for(var e=0;e<this.content.length;e+=2)t(this.content[e],this.content[e+1])},prepend:function(t){return t=Xt.from(t),t.size?new Xt(t.content.concat(this.subtract(t).content)):this},append:function(t){return t=Xt.from(t),t.size?new Xt(this.subtract(t).content.concat(t.content)):this},subtract:function(t){var e=this;t=Xt.from(t);for(var n=0;n<t.content.length;n+=2)e=e.remove(t.content[n]);return e},toObject:function(){var t={};return this.forEach(function(e,n){t[e]=n}),t},get size(){return this.content.length>>1}};Xt.from=function(t){if(t instanceof Xt)return t;var e=[];if(t)for(var n in t)e.push(n,t[n]);return new Xt(e)};function NE(t,e,n){for(let r=0;;r++){if(r==t.childCount||r==e.childCount)return t.childCount==e.childCount?null:n;let i=t.child(r),o=e.child(r);if(i==o){n+=i.nodeSize;continue}if(!i.sameMarkup(o))return n;if(i.isText&&i.text!=o.text){for(let s=0;i.text[s]==o.text[s];s++)n++;return n}if(i.content.size||o.content.size){let s=NE(i.content,o.content,n+1);if(s!=null)return s}n+=i.nodeSize}}function OE(t,e,n,r){for(let i=t.childCount,o=e.childCount;;){if(i==0||o==0)return i==o?null:{a:n,b:r};let s=t.child(--i),a=e.child(--o),c=s.nodeSize;if(s==a){n-=c,r-=c;continue}if(!s.sameMarkup(a))return{a:n,b:r};if(s.isText&&s.text!=a.text){let f=0,d=Math.min(s.text.length,a.text.length);for(;f<d&&s.text[s.text.length-f-1]==a.text[a.text.length-f-1];)f++,n--,r--;return{a:n,b:r}}if(s.content.size||a.content.size){let f=OE(s.content,a.content,n-1,r-1);if(f)return f}n-=c,r-=c}}class q{constructor(e,n){if(this.content=e,this.size=n||0,n==null)for(let r=0;r<e.length;r++)this.size+=e[r].nodeSize}nodesBetween(e,n,r,i=0,o){for(let s=0,a=0;a<n;s++){let c=this.content[s],f=a+c.nodeSize;if(f>e&&r(c,i+a,o||null,s)!==!1&&c.content.size){let d=a+1;c.nodesBetween(Math.max(0,e-d),Math.min(c.content.size,n-d),r,i+d)}a=f}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,n,r,i){let o="",s=!0;return this.nodesBetween(e,n,(a,c)=>{let f=a.isText?a.text.slice(Math.max(e,c)-c,n-c):a.isLeaf?i?typeof i=="function"?i(a):i:a.type.spec.leafText?a.type.spec.leafText(a):"":"";a.isBlock&&(a.isLeaf&&f||a.isTextblock)&&r&&(s?s=!1:o+=r),o+=f},0),o}append(e){if(!e.size)return this;if(!this.size)return e;let n=this.lastChild,r=e.firstChild,i=this.content.slice(),o=0;for(n.isText&&n.sameMarkup(r)&&(i[i.length-1]=n.withText(n.text+r.text),o=1);o<e.content.length;o++)i.push(e.content[o]);return new q(i,this.size+e.size)}cut(e,n=this.size){if(e==0&&n==this.size)return this;let r=[],i=0;if(n>e)for(let o=0,s=0;s<n;o++){let a=this.content[o],c=s+a.nodeSize;c>e&&((s<e||c>n)&&(a.isText?a=a.cut(Math.max(0,e-s),Math.min(a.text.length,n-s)):a=a.cut(Math.max(0,e-s-1),Math.min(a.content.size,n-s-1))),r.push(a),i+=a.nodeSize),s=c}return new q(r,i)}cutByIndex(e,n){return e==n?q.empty:e==0&&n==this.content.length?this:new q(this.content.slice(e,n))}replaceChild(e,n){let r=this.content[e];if(r==n)return this;let i=this.content.slice(),o=this.size+n.nodeSize-r.nodeSize;return i[e]=n,new q(i,o)}addToStart(e){return new q([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new q(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let n=0;n<this.content.length;n++)if(!this.content[n].eq(e.content[n]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let n=this.content[e];if(!n)throw new RangeError("Index "+e+" out of range for "+this);return n}maybeChild(e){return this.content[e]||null}forEach(e){for(let n=0,r=0;n<this.content.length;n++){let i=this.content[n];e(i,r,n),r+=i.nodeSize}}findDiffStart(e,n=0){return NE(this,e,n)}findDiffEnd(e,n=this.size,r=e.size){return OE(this,e,n,r)}findIndex(e){if(e==0)return cf(0,e);if(e==this.size)return cf(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let n=0,r=0;;n++){let i=this.child(n),o=r+i.nodeSize;if(o>=e)return o==e?cf(n+1,o):cf(n,r);r=o}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,n){if(!n)return q.empty;if(!Array.isArray(n))throw new RangeError("Invalid input for Fragment.fromJSON");return new q(n.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return q.empty;let n,r=0;for(let i=0;i<e.length;i++){let o=e[i];r+=o.nodeSize,i&&o.isText&&e[i-1].sameMarkup(o)?(n||(n=e.slice(0,i)),n[n.length-1]=o.withText(n[n.length-1].text+o.text)):n&&n.push(o)}return new q(n||e,r)}static from(e){if(!e)return q.empty;if(e instanceof q)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new q([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}q.empty=new q([],0);const Bm={index:0,offset:0};function cf(t,e){return Bm.index=t,Bm.offset=e,Bm}function hd(t,e){if(t===e)return!0;if(!(t&&typeof t=="object")||!(e&&typeof e=="object"))return!1;let n=Array.isArray(t);if(Array.isArray(e)!=n)return!1;if(n){if(t.length!=e.length)return!1;for(let r=0;r<t.length;r++)if(!hd(t[r],e[r]))return!1}else{for(let r in t)if(!(r in e)||!hd(t[r],e[r]))return!1;for(let r in e)if(!(r in t))return!1}return!0}let qe=class a0{constructor(e,n){this.type=e,this.attrs=n}addToSet(e){let n,r=!1;for(let i=0;i<e.length;i++){let o=e[i];if(this.eq(o))return e;if(this.type.excludes(o.type))n||(n=e.slice(0,i));else{if(o.type.excludes(this.type))return e;!r&&o.type.rank>this.type.rank&&(n||(n=e.slice(0,i)),n.push(this),r=!0),n&&n.push(o)}}return n||(n=e.slice()),r||n.push(this),n}removeFromSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return e.slice(0,n).concat(e.slice(n+1));return e}isInSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return!0;return!1}eq(e){return this==e||this.type==e.type&&hd(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Mark.fromJSON");let r=e.marks[n.type];if(!r)throw new RangeError(`There is no mark type ${n.type} in this schema`);let i=r.create(n.attrs);return r.checkAttrs(i.attrs),i}static sameSet(e,n){if(e==n)return!0;if(e.length!=n.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].eq(n[r]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return a0.none;if(e instanceof a0)return[e];let n=e.slice();return n.sort((r,i)=>r.type.rank-i.type.rank),n}};qe.none=[];class pd extends Error{}class te{constructor(e,n,r){this.content=e,this.openStart=n,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,n){let r=PE(this.content,e+this.openStart,n);return r&&new te(r,this.openStart,this.openEnd)}removeBetween(e,n){return new te(AE(this.content,e+this.openStart,n+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,n){if(!n)return te.empty;let r=n.openStart||0,i=n.openEnd||0;if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new te(q.fromJSON(e,n.content),r,i)}static maxOpen(e,n=!0){let r=0,i=0;for(let o=e.firstChild;o&&!o.isLeaf&&(n||!o.type.spec.isolating);o=o.firstChild)r++;for(let o=e.lastChild;o&&!o.isLeaf&&(n||!o.type.spec.isolating);o=o.lastChild)i++;return new te(e,r,i)}}te.empty=new te(q.empty,0,0);function AE(t,e,n){let{index:r,offset:i}=t.findIndex(e),o=t.maybeChild(r),{index:s,offset:a}=t.findIndex(n);if(i==e||o.isText){if(a!=n&&!t.child(s).isText)throw new RangeError("Removing non-flat range");return t.cut(0,e).append(t.cut(n))}if(r!=s)throw new RangeError("Removing non-flat range");return t.replaceChild(r,o.copy(AE(o.content,e-i-1,n-i-1)))}function PE(t,e,n,r){let{index:i,offset:o}=t.findIndex(e),s=t.maybeChild(i);if(o==e||s.isText)return r&&!r.canReplace(i,i,n)?null:t.cut(0,e).append(n).append(t.cut(e));let a=PE(s.content,e-o-1,n,s);return a&&t.replaceChild(i,s.copy(a))}function b4(t,e,n){if(n.openStart>t.depth)throw new pd("Inserted content deeper than insertion position");if(t.depth-n.openStart!=e.depth-n.openEnd)throw new pd("Inconsistent open depths");return RE(t,e,n,0)}function RE(t,e,n,r){let i=t.index(r),o=t.node(r);if(i==e.index(r)&&r<t.depth-n.openStart){let s=RE(t,e,n,r+1);return o.copy(o.content.replaceChild(i,s))}else if(n.content.size)if(!n.openStart&&!n.openEnd&&t.depth==r&&e.depth==r){let s=t.parent,a=s.content;return Ns(s,a.cut(0,t.parentOffset).append(n.content).append(a.cut(e.parentOffset)))}else{let{start:s,end:a}=C4(n,t);return Ns(o,IE(t,s,a,e,r))}else return Ns(o,md(t,e,r))}function DE(t,e){if(!e.type.compatibleContent(t.type))throw new pd("Cannot join "+e.type.name+" onto "+t.type.name)}function u0(t,e,n){let r=t.node(n);return DE(r,e.node(n)),r}function _s(t,e){let n=e.length-1;n>=0&&t.isText&&t.sameMarkup(e[n])?e[n]=t.withText(e[n].text+t.text):e.push(t)}function iu(t,e,n,r){let i=(e||t).node(n),o=0,s=e?e.index(n):i.childCount;t&&(o=t.index(n),t.depth>n?o++:t.textOffset&&(_s(t.nodeAfter,r),o++));for(let a=o;a<s;a++)_s(i.child(a),r);e&&e.depth==n&&e.textOffset&&_s(e.nodeBefore,r)}function Ns(t,e){return t.type.checkContent(e),t.copy(e)}function IE(t,e,n,r,i){let o=t.depth>i&&u0(t,e,i+1),s=r.depth>i&&u0(n,r,i+1),a=[];return iu(null,t,i,a),o&&s&&e.index(i)==n.index(i)?(DE(o,s),_s(Ns(o,IE(t,e,n,r,i+1)),a)):(o&&_s(Ns(o,md(t,e,i+1)),a),iu(e,n,i,a),s&&_s(Ns(s,md(n,r,i+1)),a)),iu(r,null,i,a),new q(a)}function md(t,e,n){let r=[];if(iu(null,t,n,r),t.depth>n){let i=u0(t,e,n+1);_s(Ns(i,md(t,e,n+1)),r)}return iu(e,null,n,r),new q(r)}function C4(t,e){let n=e.depth-t.openStart,i=e.node(n).copy(t.content);for(let o=n-1;o>=0;o--)i=e.node(o).copy(q.from(i));return{start:i.resolveNoCache(t.openStart+n),end:i.resolveNoCache(i.content.size-t.openEnd-n)}}class Au{constructor(e,n,r){this.pos=e,this.path=n,this.parentOffset=r,this.depth=n.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,n=this.index(this.depth);if(n==e.childCount)return null;let r=this.pos-this.path[this.path.length-1],i=e.child(n);return r?e.child(n).cut(r):i}get nodeBefore(){let e=this.index(this.depth),n=this.pos-this.path[this.path.length-1];return n?this.parent.child(e).cut(0,n):e==0?null:this.parent.child(e-1)}posAtIndex(e,n){n=this.resolveDepth(n);let r=this.path[n*3],i=n==0?0:this.path[n*3-1]+1;for(let o=0;o<e;o++)i+=r.child(o).nodeSize;return i}marks(){let e=this.parent,n=this.index();if(e.content.size==0)return qe.none;if(this.textOffset)return e.child(n).marks;let r=e.maybeChild(n-1),i=e.maybeChild(n);if(!r){let a=r;r=i,i=a}let o=r.marks;for(var s=0;s<o.length;s++)o[s].type.spec.inclusive===!1&&(!i||!o[s].isInSet(i.marks))&&(o=o[s--].removeFromSet(o));return o}marksAcross(e){let n=this.parent.maybeChild(this.index());if(!n||!n.isInline)return null;let r=n.marks,i=e.parent.maybeChild(e.index());for(var o=0;o<r.length;o++)r[o].type.spec.inclusive===!1&&(!i||!r[o].isInSet(i.marks))&&(r=r[o--].removeFromSet(r));return r}sharedDepth(e){for(let n=this.depth;n>0;n--)if(this.start(n)<=e&&this.end(n)>=e)return n;return 0}blockRange(e=this,n){if(e.pos<this.pos)return e.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);r>=0;r--)if(e.pos<=this.end(r)&&(!n||n(this.node(r))))return new gd(this,e,r);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let n=1;n<=this.depth;n++)e+=(e?"/":"")+this.node(n).type.name+"_"+this.index(n-1);return e+":"+this.parentOffset}static resolve(e,n){if(!(n>=0&&n<=e.content.size))throw new RangeError("Position "+n+" out of range");let r=[],i=0,o=n;for(let s=e;;){let{index:a,offset:c}=s.content.findIndex(o),f=o-c;if(r.push(s,a,i+c),!f||(s=s.child(a),s.isText))break;o=f-1,i+=c+1}return new Au(n,r,o)}static resolveCached(e,n){let r=vS.get(e);if(r)for(let o=0;o<r.elts.length;o++){let s=r.elts[o];if(s.pos==n)return s}else vS.set(e,r=new E4);let i=r.elts[r.i]=Au.resolve(e,n);return r.i=(r.i+1)%T4,i}}class E4{constructor(){this.elts=[],this.i=0}}const T4=12,vS=new WeakMap;class gd{constructor(e,n,r){this.$from=e,this.$to=n,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const M4=Object.create(null);class si{constructor(e,n,r,i=qe.none){this.type=e,this.attrs=n,this.marks=i,this.content=r||q.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,n,r,i=0){this.content.nodesBetween(e,n,r,i,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,n,r,i){return this.content.textBetween(e,n,r,i)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,n,r){return this.type==e&&hd(this.attrs,n||e.defaultAttrs||M4)&&qe.sameSet(this.marks,r||qe.none)}copy(e=null){return e==this.content?this:new si(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new si(this.type,this.attrs,this.content,e)}cut(e,n=this.content.size){return e==0&&n==this.content.size?this:this.copy(this.content.cut(e,n))}slice(e,n=this.content.size,r=!1){if(e==n)return te.empty;let i=this.resolve(e),o=this.resolve(n),s=r?0:i.sharedDepth(n),a=i.start(s),f=i.node(s).content.cut(i.pos-a,o.pos-a);return new te(f,i.depth-s,o.depth-s)}replace(e,n,r){return b4(this.resolve(e),this.resolve(n),r)}nodeAt(e){for(let n=this;;){let{index:r,offset:i}=n.content.findIndex(e);if(n=n.maybeChild(r),!n)return null;if(i==e||n.isText)return n;e-=i+1}}childAfter(e){let{index:n,offset:r}=this.content.findIndex(e);return{node:this.content.maybeChild(n),index:n,offset:r}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:n,offset:r}=this.content.findIndex(e);if(r<e)return{node:this.content.child(n),index:n,offset:r};let i=this.content.child(n-1);return{node:i,index:n-1,offset:r-i.nodeSize}}resolve(e){return Au.resolveCached(this,e)}resolveNoCache(e){return Au.resolve(this,e)}rangeHasMark(e,n,r){let i=!1;return n>e&&this.nodesBetween(e,n,o=>(r.isInSet(o.marks)&&(i=!0),!i)),i}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),LE(this.marks,e)}contentMatchAt(e){let n=this.type.contentMatch.matchFragment(this.content,0,e);if(!n)throw new Error("Called contentMatchAt on a node with invalid content");return n}canReplace(e,n,r=q.empty,i=0,o=r.childCount){let s=this.contentMatchAt(e).matchFragment(r,i,o),a=s&&s.matchFragment(this.content,n);if(!a||!a.validEnd)return!1;for(let c=i;c<o;c++)if(!this.type.allowsMarks(r.child(c).marks))return!1;return!0}canReplaceWith(e,n,r,i){if(i&&!this.type.allowsMarks(i))return!1;let o=this.contentMatchAt(e).matchType(r),s=o&&o.matchFragment(this.content,n);return s?s.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=qe.none;for(let n=0;n<this.marks.length;n++){let r=this.marks[n];r.type.checkAttrs(r.attrs),e=r.addToSet(e)}if(!qe.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(n=>n.type.name)}`);this.content.forEach(n=>n.check())}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(n=>n.toJSON())),e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Node.fromJSON");let r;if(n.marks){if(!Array.isArray(n.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=n.marks.map(e.markFromJSON)}if(n.type=="text"){if(typeof n.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(n.text,r)}let i=q.fromJSON(e,n.content),o=e.nodeType(n.type).create(n.attrs,i,r);return o.type.checkAttrs(o.attrs),o}}si.prototype.text=void 0;class yd extends si{constructor(e,n,r,i){if(super(e,n,null,i),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):LE(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,n){return this.text.slice(e,n)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new yd(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new yd(this.type,this.attrs,e,this.marks)}cut(e=0,n=this.text.length){return e==0&&n==this.text.length?this:this.withText(this.text.slice(e,n))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function LE(t,e){for(let n=t.length-1;n>=0;n--)e=t[n].type.name+"("+e+")";return e}class Bs{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,n){let r=new _4(e,n);if(r.next==null)return Bs.empty;let i=zE(r);r.next&&r.err("Unexpected trailing text");let o=I4(D4(i));return L4(o,r),o}matchType(e){for(let n=0;n<this.next.length;n++)if(this.next[n].type==e)return this.next[n].next;return null}matchFragment(e,n=0,r=e.childCount){let i=this;for(let o=n;i&&o<r;o++)i=i.matchType(e.child(o).type);return i}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:n}=this.next[e];if(!(n.isText||n.hasRequiredAttrs()))return n}return null}compatible(e){for(let n=0;n<this.next.length;n++)for(let r=0;r<e.next.length;r++)if(this.next[n].type==e.next[r].type)return!0;return!1}fillBefore(e,n=!1,r=0){let i=[this];function o(s,a){let c=s.matchFragment(e,r);if(c&&(!n||c.validEnd))return q.from(a.map(f=>f.createAndFill()));for(let f=0;f<s.next.length;f++){let{type:d,next:p}=s.next[f];if(!(d.isText||d.hasRequiredAttrs())&&i.indexOf(p)==-1){i.push(p);let m=o(p,a.concat(d));if(m)return m}}return null}return o(this,[])}findWrapping(e){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==e)return this.wrapCache[r+1];let n=this.computeWrapping(e);return this.wrapCache.push(e,n),n}computeWrapping(e){let n=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let i=r.shift(),o=i.match;if(o.matchType(e)){let s=[];for(let a=i;a.type;a=a.via)s.push(a.type);return s.reverse()}for(let s=0;s<o.next.length;s++){let{type:a,next:c}=o.next[s];!a.isLeaf&&!a.hasRequiredAttrs()&&!(a.name in n)&&(!i.type||c.validEnd)&&(r.push({match:a.contentMatch,type:a,via:i}),n[a.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function n(r){e.push(r);for(let i=0;i<r.next.length;i++)e.indexOf(r.next[i].next)==-1&&n(r.next[i].next)}return n(this),e.map((r,i)=>{let o=i+(r.validEnd?"*":" ")+" ";for(let s=0;s<r.next.length;s++)o+=(s?", ":"")+r.next[s].type.name+"->"+e.indexOf(r.next[s].next);return o}).join(`
`)}}Bs.empty=new Bs(!0);class _4{constructor(e,n){this.string=e,this.nodeTypes=n,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function zE(t){let e=[];do e.push(N4(t));while(t.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function N4(t){let e=[];do e.push(O4(t));while(t.next&&t.next!=")"&&t.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function O4(t){let e=R4(t);for(;;)if(t.eat("+"))e={type:"plus",expr:e};else if(t.eat("*"))e={type:"star",expr:e};else if(t.eat("?"))e={type:"opt",expr:e};else if(t.eat("{"))e=A4(t,e);else break;return e}function xS(t){/\D/.test(t.next)&&t.err("Expected number, got '"+t.next+"'");let e=Number(t.next);return t.pos++,e}function A4(t,e){let n=xS(t),r=n;return t.eat(",")&&(t.next!="}"?r=xS(t):r=-1),t.eat("}")||t.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:e}}function P4(t,e){let n=t.nodeTypes,r=n[e];if(r)return[r];let i=[];for(let o in n){let s=n[o];s.isInGroup(e)&&i.push(s)}return i.length==0&&t.err("No node type or group '"+e+"' found"),i}function R4(t){if(t.eat("(")){let e=zE(t);return t.eat(")")||t.err("Missing closing paren"),e}else if(/\W/.test(t.next))t.err("Unexpected token '"+t.next+"'");else{let e=P4(t,t.next).map(n=>(t.inline==null?t.inline=n.isInline:t.inline!=n.isInline&&t.err("Mixing inline and block content"),{type:"name",value:n}));return t.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function D4(t){let e=[[]];return i(o(t,0),n()),e;function n(){return e.push([])-1}function r(s,a,c){let f={term:c,to:a};return e[s].push(f),f}function i(s,a){s.forEach(c=>c.to=a)}function o(s,a){if(s.type=="choice")return s.exprs.reduce((c,f)=>c.concat(o(f,a)),[]);if(s.type=="seq")for(let c=0;;c++){let f=o(s.exprs[c],a);if(c==s.exprs.length-1)return f;i(f,a=n())}else if(s.type=="star"){let c=n();return r(a,c),i(o(s.expr,c),c),[r(c)]}else if(s.type=="plus"){let c=n();return i(o(s.expr,a),c),i(o(s.expr,c),c),[r(c)]}else{if(s.type=="opt")return[r(a)].concat(o(s.expr,a));if(s.type=="range"){let c=a;for(let f=0;f<s.min;f++){let d=n();i(o(s.expr,c),d),c=d}if(s.max==-1)i(o(s.expr,c),c);else for(let f=s.min;f<s.max;f++){let d=n();r(c,d),i(o(s.expr,c),d),c=d}return[r(c)]}else{if(s.type=="name")return[r(a,void 0,s.value)];throw new Error("Unknown expr type")}}}}function BE(t,e){return e-t}function wS(t,e){let n=[];return r(e),n.sort(BE);function r(i){let o=t[i];if(o.length==1&&!o[0].term)return r(o[0].to);n.push(i);for(let s=0;s<o.length;s++){let{term:a,to:c}=o[s];!a&&n.indexOf(c)==-1&&r(c)}}}function I4(t){let e=Object.create(null);return n(wS(t,0));function n(r){let i=[];r.forEach(s=>{t[s].forEach(({term:a,to:c})=>{if(!a)return;let f;for(let d=0;d<i.length;d++)i[d][0]==a&&(f=i[d][1]);wS(t,c).forEach(d=>{f||i.push([a,f=[]]),f.indexOf(d)==-1&&f.push(d)})})});let o=e[r.join(",")]=new Bs(r.indexOf(t.length-1)>-1);for(let s=0;s<i.length;s++){let a=i[s][1].sort(BE);o.next.push({type:i[s][0],next:e[a.join(",")]||n(a)})}return o}}function L4(t,e){for(let n=0,r=[t];n<r.length;n++){let i=r[n],o=!i.validEnd,s=[];for(let a=0;a<i.next.length;a++){let{type:c,next:f}=i.next[a];s.push(c.name),o&&!(c.isText||c.hasRequiredAttrs())&&(o=!1),r.indexOf(f)==-1&&r.push(f)}o&&e.err("Only non-generatable nodes ("+s.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function jE(t){let e=Object.create(null);for(let n in t){let r=t[n];if(!r.hasDefault)return null;e[n]=r.default}return e}function FE(t,e){let n=Object.create(null);for(let r in t){let i=e&&e[r];if(i===void 0){let o=t[r];if(o.hasDefault)i=o.default;else throw new RangeError("No value supplied for attribute "+r)}n[r]=i}return n}function $E(t,e,n,r){for(let i in e)if(!(i in t))throw new RangeError(`Unsupported attribute ${i} for ${n} of type ${i}`);for(let i in t){let o=t[i];o.validate&&o.validate(e[i])}}function HE(t,e){let n=Object.create(null);if(e)for(let r in e)n[r]=new B4(t,r,e[r]);return n}let SS=class UE{constructor(e,n,r){this.name=e,this.schema=n,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=HE(e,r.attrs),this.defaultAttrs=jE(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==Bs.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(e){return this.groups.indexOf(e)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:FE(this.attrs,e)}create(e=null,n,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new si(this,this.computeAttrs(e),q.from(n),qe.setFrom(r))}createChecked(e=null,n,r){return n=q.from(n),this.checkContent(n),new si(this,this.computeAttrs(e),n,qe.setFrom(r))}createAndFill(e=null,n,r){if(e=this.computeAttrs(e),n=q.from(n),n.size){let s=this.contentMatch.fillBefore(n);if(!s)return null;n=s.append(n)}let i=this.contentMatch.matchFragment(n),o=i&&i.fillBefore(q.empty,!0);return o?new si(this,e,n.append(o),qe.setFrom(r)):null}validContent(e){let n=this.contentMatch.matchFragment(e);if(!n||!n.validEnd)return!1;for(let r=0;r<e.childCount;r++)if(!this.allowsMarks(e.child(r).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){$E(this.attrs,e,"node",this.name)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let n=0;n<e.length;n++)if(!this.allowsMarkType(e[n].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let n;for(let r=0;r<e.length;r++)this.allowsMarkType(e[r].type)?n&&n.push(e[r]):n||(n=e.slice(0,r));return n?n.length?n:qe.none:e}static compile(e,n){let r=Object.create(null);e.forEach((o,s)=>r[o]=new UE(o,n,s));let i=n.spec.topNode||"doc";if(!r[i])throw new RangeError("Schema is missing its top node type ('"+i+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let o in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}};function z4(t,e,n){let r=n.split("|");return i=>{let o=i===null?"null":typeof i;if(r.indexOf(o)<0)throw new RangeError(`Expected value of type ${r} for attribute ${e} on type ${t}, got ${o}`)}}class B4{constructor(e,n,r){this.hasDefault=Object.prototype.hasOwnProperty.call(r,"default"),this.default=r.default,this.validate=typeof r.validate=="string"?z4(e,n,r.validate):r.validate}get isRequired(){return!this.hasDefault}}class Th{constructor(e,n,r,i){this.name=e,this.rank=n,this.schema=r,this.spec=i,this.attrs=HE(e,i.attrs),this.excluded=null;let o=jE(this.attrs);this.instance=o?new qe(this,o):null}create(e=null){return!e&&this.instance?this.instance:new qe(this,FE(this.attrs,e))}static compile(e,n){let r=Object.create(null),i=0;return e.forEach((o,s)=>r[o]=new Th(o,i++,n,s)),r}removeFromSet(e){for(var n=0;n<e.length;n++)e[n].type==this&&(e=e.slice(0,n).concat(e.slice(n+1)),n--);return e}isInSet(e){for(let n=0;n<e.length;n++)if(e[n].type==this)return e[n]}checkAttrs(e){$E(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}}class VE{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let n=this.spec={};for(let i in e)n[i]=e[i];n.nodes=Xt.from(e.nodes),n.marks=Xt.from(e.marks||{}),this.nodes=SS.compile(this.spec.nodes,this),this.marks=Th.compile(this.spec.marks,this);let r=Object.create(null);for(let i in this.nodes){if(i in this.marks)throw new RangeError(i+" can not be both a node and a mark");let o=this.nodes[i],s=o.spec.content||"",a=o.spec.marks;if(o.contentMatch=r[s]||(r[s]=Bs.parse(s,this.nodes)),o.inlineContent=o.contentMatch.inlineContent,o.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!o.isInline||!o.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=o}o.markSet=a=="_"?null:a?kS(this,a.split(" ")):a==""||!o.inlineContent?[]:null}for(let i in this.marks){let o=this.marks[i],s=o.spec.excludes;o.excluded=s==null?[o]:s==""?[]:kS(this,s.split(" "))}this.nodeFromJSON=i=>si.fromJSON(this,i),this.markFromJSON=i=>qe.fromJSON(this,i),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,n=null,r,i){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof SS){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(n,r,i)}text(e,n){let r=this.nodes.text;return new yd(r,r.defaultAttrs,e,qe.setFrom(n))}mark(e,n){return typeof e=="string"&&(e=this.marks[e]),e.create(n)}nodeType(e){let n=this.nodes[e];if(!n)throw new RangeError("Unknown node type: "+e);return n}}function kS(t,e){let n=[];for(let r=0;r<e.length;r++){let i=e[r],o=t.marks[i],s=o;if(o)n.push(o);else for(let a in t.marks){let c=t.marks[a];(i=="_"||c.spec.group&&c.spec.group.split(" ").indexOf(i)>-1)&&n.push(s=c)}if(!s)throw new SyntaxError("Unknown mark type: '"+e[r]+"'")}return n}function j4(t){return t.tag!=null}function F4(t){return t.style!=null}class Ho{constructor(e,n){this.schema=e,this.rules=n,this.tags=[],this.styles=[];let r=this.matchedStyles=[];n.forEach(i=>{if(j4(i))this.tags.push(i);else if(F4(i)){let o=/[^=]*/.exec(i.style)[0];r.indexOf(o)<0&&r.push(o),this.styles.push(i)}}),this.normalizeLists=!this.tags.some(i=>{if(!/^(ul|ol)\b/.test(i.tag)||!i.node)return!1;let o=e.nodes[i.node];return o.contentMatch.matchType(o)})}parse(e,n={}){let r=new CS(this,n,!1);return r.addAll(e,qe.none,n.from,n.to),r.finish()}parseSlice(e,n={}){let r=new CS(this,n,!0);return r.addAll(e,qe.none,n.from,n.to),te.maxOpen(r.finish())}matchTag(e,n,r){for(let i=r?this.tags.indexOf(r)+1:0;i<this.tags.length;i++){let o=this.tags[i];if(U4(e,o.tag)&&(o.namespace===void 0||e.namespaceURI==o.namespace)&&(!o.context||n.matchesContext(o.context))){if(o.getAttrs){let s=o.getAttrs(e);if(s===!1)continue;o.attrs=s||void 0}return o}}}matchStyle(e,n,r,i){for(let o=i?this.styles.indexOf(i)+1:0;o<this.styles.length;o++){let s=this.styles[o],a=s.style;if(!(a.indexOf(e)!=0||s.context&&!r.matchesContext(s.context)||a.length>e.length&&(a.charCodeAt(e.length)!=61||a.slice(e.length+1)!=n))){if(s.getAttrs){let c=s.getAttrs(n);if(c===!1)continue;s.attrs=c||void 0}return s}}}static schemaRules(e){let n=[];function r(i){let o=i.priority==null?50:i.priority,s=0;for(;s<n.length;s++){let a=n[s];if((a.priority==null?50:a.priority)<o)break}n.splice(s,0,i)}for(let i in e.marks){let o=e.marks[i].spec.parseDOM;o&&o.forEach(s=>{r(s=ES(s)),s.mark||s.ignore||s.clearMark||(s.mark=i)})}for(let i in e.nodes){let o=e.nodes[i].spec.parseDOM;o&&o.forEach(s=>{r(s=ES(s)),s.node||s.ignore||s.mark||(s.node=i)})}return n}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new Ho(e,Ho.schemaRules(e)))}}const WE={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},$4={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},KE={ol:!0,ul:!0},Pu=1,c0=2,ou=4;function bS(t,e,n){return e!=null?(e?Pu:0)|(e==="full"?c0:0):t&&t.whitespace=="pre"?Pu|c0:n&~ou}class ff{constructor(e,n,r,i,o,s){this.type=e,this.attrs=n,this.marks=r,this.solid=i,this.options=s,this.content=[],this.activeMarks=qe.none,this.match=o||(s&ou?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let n=this.type.contentMatch.fillBefore(q.from(e));if(n)this.match=this.type.contentMatch.matchFragment(n);else{let r=this.type.contentMatch,i;return(i=r.findWrapping(e.type))?(this.match=r,i):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&Pu)){let r=this.content[this.content.length-1],i;if(r&&r.isText&&(i=/[ \t\r\n\u000c]+$/.exec(r.text))){let o=r;r.text.length==i[0].length?this.content.pop():this.content[this.content.length-1]=o.withText(o.text.slice(0,o.text.length-i[0].length))}}let n=q.from(this.content);return!e&&this.match&&(n=n.append(this.match.fillBefore(q.empty,!0))),this.type?this.type.create(this.attrs,n,this.marks):n}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!WE.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class CS{constructor(e,n,r){this.parser=e,this.options=n,this.isOpen=r,this.open=0,this.localPreserveWS=!1;let i=n.topNode,o,s=bS(null,n.preserveWhitespace,0)|(r?ou:0);i?o=new ff(i.type,i.attrs,qe.none,!0,n.topMatch||i.type.contentMatch,s):r?o=new ff(null,null,qe.none,!0,null,s):o=new ff(e.schema.topNodeType,null,qe.none,!0,null,s),this.nodes=[o],this.find=n.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e,n){e.nodeType==3?this.addTextNode(e,n):e.nodeType==1&&this.addElement(e,n)}addTextNode(e,n){let r=e.nodeValue,i=this.top,o=i.options&c0?"full":this.localPreserveWS||(i.options&Pu)>0,{schema:s}=this.parser;if(o==="full"||i.inlineContext(e)||/[^ \t\r\n\u000c]/.test(r)){if(o)if(o==="full")r=r.replace(/\r\n?/g,`
`);else if(s.linebreakReplacement&&/[\r\n]/.test(r)&&this.top.findWrapping(s.linebreakReplacement.create())){let a=r.split(/\r?\n|\r/);for(let c=0;c<a.length;c++)c&&this.insertNode(s.linebreakReplacement.create(),n,!0),a[c]&&this.insertNode(s.text(a[c]),n,!/\S/.test(a[c]));r=""}else r=r.replace(/\r?\n|\r/g," ");else if(r=r.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(r)&&this.open==this.nodes.length-1){let a=i.content[i.content.length-1],c=e.previousSibling;(!a||c&&c.nodeName=="BR"||a.isText&&/[ \t\r\n\u000c]$/.test(a.text))&&(r=r.slice(1))}r&&this.insertNode(s.text(r),n,!/\S/.test(r)),this.findInText(e)}else this.findInside(e)}addElement(e,n,r){let i=this.localPreserveWS,o=this.top;(e.tagName=="PRE"||/pre/.test(e.style&&e.style.whiteSpace))&&(this.localPreserveWS=!0);let s=e.nodeName.toLowerCase(),a;KE.hasOwnProperty(s)&&this.parser.normalizeLists&&H4(e);let c=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(a=this.parser.matchTag(e,this,r));e:if(c?c.ignore:$4.hasOwnProperty(s))this.findInside(e),this.ignoreFallback(e,n);else if(!c||c.skip||c.closeParent){c&&c.closeParent?this.open=Math.max(0,this.open-1):c&&c.skip.nodeType&&(e=c.skip);let f,d=this.needsBlock;if(WE.hasOwnProperty(s))o.content.length&&o.content[0].isInline&&this.open&&(this.open--,o=this.top),f=!0,o.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,n);break e}let p=c&&c.skip?n:this.readStyles(e,n);p&&this.addAll(e,p),f&&this.sync(o),this.needsBlock=d}else{let f=this.readStyles(e,n);f&&this.addElementByRule(e,c,f,c.consuming===!1?a:void 0)}this.localPreserveWS=i}leafFallback(e,n){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`),n)}ignoreFallback(e,n){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),n,!0)}readStyles(e,n){let r=e.style;if(r&&r.length)for(let i=0;i<this.parser.matchedStyles.length;i++){let o=this.parser.matchedStyles[i],s=r.getPropertyValue(o);if(s)for(let a=void 0;;){let c=this.parser.matchStyle(o,s,this,a);if(!c)break;if(c.ignore)return null;if(c.clearMark?n=n.filter(f=>!c.clearMark(f)):n=n.concat(this.parser.schema.marks[c.mark].create(c.attrs)),c.consuming===!1)a=c;else break}}return n}addElementByRule(e,n,r,i){let o,s;if(n.node)if(s=this.parser.schema.nodes[n.node],s.isLeaf)this.insertNode(s.create(n.attrs),r,e.nodeName=="BR")||this.leafFallback(e,r);else{let c=this.enter(s,n.attrs||null,r,n.preserveWhitespace);c&&(o=!0,r=c)}else{let c=this.parser.schema.marks[n.mark];r=r.concat(c.create(n.attrs))}let a=this.top;if(s&&s.isLeaf)this.findInside(e);else if(i)this.addElement(e,r,i);else if(n.getContent)this.findInside(e),n.getContent(e,this.parser.schema).forEach(c=>this.insertNode(c,r,!1));else{let c=e;typeof n.contentElement=="string"?c=e.querySelector(n.contentElement):typeof n.contentElement=="function"?c=n.contentElement(e):n.contentElement&&(c=n.contentElement),this.findAround(e,c,!0),this.addAll(c,r),this.findAround(e,c,!1)}o&&this.sync(a)&&this.open--}addAll(e,n,r,i){let o=r||0;for(let s=r?e.childNodes[r]:e.firstChild,a=i==null?null:e.childNodes[i];s!=a;s=s.nextSibling,++o)this.findAtPoint(e,o),this.addDOM(s,n);this.findAtPoint(e,o)}findPlace(e,n,r){let i,o;for(let s=this.open,a=0;s>=0;s--){let c=this.nodes[s],f=c.findWrapping(e);if(f&&(!i||i.length>f.length+a)&&(i=f,o=c,!f.length))break;if(c.solid){if(r)break;a+=2}}if(!i)return null;this.sync(o);for(let s=0;s<i.length;s++)n=this.enterInner(i[s],null,n,!1);return n}insertNode(e,n,r){if(e.isInline&&this.needsBlock&&!this.top.type){let o=this.textblockFromContext();o&&(n=this.enterInner(o,null,n))}let i=this.findPlace(e,n,r);if(i){this.closeExtra();let o=this.top;o.match&&(o.match=o.match.matchType(e.type));let s=qe.none;for(let a of i.concat(e.marks))(o.type?o.type.allowsMarkType(a.type):TS(a.type,e.type))&&(s=a.addToSet(s));return o.content.push(e.mark(s)),!0}return!1}enter(e,n,r,i){let o=this.findPlace(e.create(n),r,!1);return o&&(o=this.enterInner(e,n,r,!0,i)),o}enterInner(e,n,r,i=!1,o){this.closeExtra();let s=this.top;s.match=s.match&&s.match.matchType(e);let a=bS(e,o,s.options);s.options&ou&&s.content.length==0&&(a|=ou);let c=qe.none;return r=r.filter(f=>(s.type?s.type.allowsMarkType(f.type):TS(f.type,e))?(c=f.addToSet(c),!1):!0),this.nodes.push(new ff(e,n,c,i,null,a)),this.open++,r}closeExtra(e=!1){let n=this.nodes.length-1;if(n>this.open){for(;n>this.open;n--)this.nodes[n-1].content.push(this.nodes[n].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(e){for(let n=this.open;n>=0;n--){if(this.nodes[n]==e)return this.open=n,!0;this.localPreserveWS&&(this.nodes[n].options|=Pu)}return!1}get currentPos(){this.closeExtra();let e=0;for(let n=this.open;n>=0;n--){let r=this.nodes[n].content;for(let i=r.length-1;i>=0;i--)e+=r[i].nodeSize;n&&e++}return e}findAtPoint(e,n){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&this.find[r].offset==n&&(this.find[r].pos=this.currentPos)}findInside(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].pos==null&&e.nodeType==1&&e.contains(this.find[n].node)&&(this.find[n].pos=this.currentPos)}findAround(e,n,r){if(e!=n&&this.find)for(let i=0;i<this.find.length;i++)this.find[i].pos==null&&e.nodeType==1&&e.contains(this.find[i].node)&&n.compareDocumentPosition(this.find[i].node)&(r?2:4)&&(this.find[i].pos=this.currentPos)}findInText(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==e&&(this.find[n].pos=this.currentPos-(e.nodeValue.length-this.find[n].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let n=e.split("/"),r=this.options.context,i=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),o=-(r?r.depth+1:0)+(i?0:1),s=(a,c)=>{for(;a>=0;a--){let f=n[a];if(f==""){if(a==n.length-1||a==0)continue;for(;c>=o;c--)if(s(a-1,c))return!0;return!1}else{let d=c>0||c==0&&i?this.nodes[c].type:r&&c>=o?r.node(c-o).type:null;if(!d||d.name!=f&&!d.isInGroup(f))return!1;c--}}return!0};return s(n.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let n=e.depth;n>=0;n--){let r=e.node(n).contentMatchAt(e.indexAfter(n)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let n in this.parser.schema.nodes){let r=this.parser.schema.nodes[n];if(r.isTextblock&&r.defaultAttrs)return r}}}function H4(t){for(let e=t.firstChild,n=null;e;e=e.nextSibling){let r=e.nodeType==1?e.nodeName.toLowerCase():null;r&&KE.hasOwnProperty(r)&&n?(n.appendChild(e),e=n):r=="li"?n=e:r&&(n=null)}}function U4(t,e){return(t.matches||t.msMatchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector).call(t,e)}function ES(t){let e={};for(let n in t)e[n]=t[n];return e}function TS(t,e){let n=e.schema.nodes;for(let r in n){let i=n[r];if(!i.allowsMarkType(t))continue;let o=[],s=a=>{o.push(a);for(let c=0;c<a.edgeCount;c++){let{type:f,next:d}=a.edge(c);if(f==e||o.indexOf(d)<0&&s(d))return!0}};if(s(i.contentMatch))return!0}}class Ks{constructor(e,n){this.nodes=e,this.marks=n}serializeFragment(e,n={},r){r||(r=jm(n).createDocumentFragment());let i=r,o=[];return e.forEach(s=>{if(o.length||s.marks.length){let a=0,c=0;for(;a<o.length&&c<s.marks.length;){let f=s.marks[c];if(!this.marks[f.type.name]){c++;continue}if(!f.eq(o[a][0])||f.type.spec.spanning===!1)break;a++,c++}for(;a<o.length;)i=o.pop()[1];for(;c<s.marks.length;){let f=s.marks[c++],d=this.serializeMark(f,s.isInline,n);d&&(o.push([f,i]),i.appendChild(d.dom),i=d.contentDOM||d.dom)}}i.appendChild(this.serializeNodeInner(s,n))}),r}serializeNodeInner(e,n){let{dom:r,contentDOM:i}=Lf(jm(n),this.nodes[e.type.name](e),null,e.attrs);if(i){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,n,i)}return r}serializeNode(e,n={}){let r=this.serializeNodeInner(e,n);for(let i=e.marks.length-1;i>=0;i--){let o=this.serializeMark(e.marks[i],e.isInline,n);o&&((o.contentDOM||o.dom).appendChild(r),r=o.dom)}return r}serializeMark(e,n,r={}){let i=this.marks[e.type.name];return i&&Lf(jm(r),i(e,n),null,e.attrs)}static renderSpec(e,n,r=null,i){return Lf(e,n,r,i)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new Ks(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let n=MS(e.nodes);return n.text||(n.text=r=>r.text),n}static marksFromSchema(e){return MS(e.marks)}}function MS(t){let e={};for(let n in t){let r=t[n].spec.toDOM;r&&(e[n]=r)}return e}function jm(t){return t.document||window.document}const _S=new WeakMap;function V4(t){let e=_S.get(t);return e===void 0&&_S.set(t,e=W4(t)),e}function W4(t){let e=null;function n(r){if(r&&typeof r=="object")if(Array.isArray(r))if(typeof r[0]=="string")e||(e=[]),e.push(r);else for(let i=0;i<r.length;i++)n(r[i]);else for(let i in r)n(r[i])}return n(t),e}function Lf(t,e,n,r){if(typeof e=="string")return{dom:t.createTextNode(e)};if(e.nodeType!=null)return{dom:e};if(e.dom&&e.dom.nodeType!=null)return e;let i=e[0],o;if(typeof i!="string")throw new RangeError("Invalid array passed to renderSpec");if(r&&(o=V4(r))&&o.indexOf(e)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let s=i.indexOf(" ");s>0&&(n=i.slice(0,s),i=i.slice(s+1));let a,c=n?t.createElementNS(n,i):t.createElement(i),f=e[1],d=1;if(f&&typeof f=="object"&&f.nodeType==null&&!Array.isArray(f)){d=2;for(let p in f)if(f[p]!=null){let m=p.indexOf(" ");m>0?c.setAttributeNS(p.slice(0,m),p.slice(m+1),f[p]):p=="style"&&c.style?c.style.cssText=f[p]:c.setAttribute(p,f[p])}}for(let p=d;p<e.length;p++){let m=e[p];if(m===0){if(p<e.length-1||p>d)throw new RangeError("Content hole must be the only child of its parent node");return{dom:c,contentDOM:c}}else{let{dom:g,contentDOM:v}=Lf(t,m,n,r);if(c.appendChild(g),v){if(a)throw new RangeError("Multiple content holes");a=v}}}return{dom:c,contentDOM:a}}const qE=65535,GE=Math.pow(2,16);function K4(t,e){return t+e*GE}function NS(t){return t&qE}function q4(t){return(t-(t&qE))/GE}const XE=1,JE=2,zf=4,YE=8;class f0{constructor(e,n,r){this.pos=e,this.delInfo=n,this.recover=r}get deleted(){return(this.delInfo&YE)>0}get deletedBefore(){return(this.delInfo&(XE|zf))>0}get deletedAfter(){return(this.delInfo&(JE|zf))>0}get deletedAcross(){return(this.delInfo&zf)>0}}class cr{constructor(e,n=!1){if(this.ranges=e,this.inverted=n,!e.length&&cr.empty)return cr.empty}recover(e){let n=0,r=NS(e);if(!this.inverted)for(let i=0;i<r;i++)n+=this.ranges[i*3+2]-this.ranges[i*3+1];return this.ranges[r*3]+n+q4(e)}mapResult(e,n=1){return this._map(e,n,!1)}map(e,n=1){return this._map(e,n,!0)}_map(e,n,r){let i=0,o=this.inverted?2:1,s=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let c=this.ranges[a]-(this.inverted?i:0);if(c>e)break;let f=this.ranges[a+o],d=this.ranges[a+s],p=c+f;if(e<=p){let m=f?e==c?-1:e==p?1:n:n,g=c+i+(m<0?0:d);if(r)return g;let v=e==(n<0?c:p)?null:K4(a/3,e-c),k=e==c?JE:e==p?XE:zf;return(n<0?e!=c:e!=p)&&(k|=YE),new f0(g,k,v)}i+=d-f}return r?e+i:new f0(e+i,0,null)}touches(e,n){let r=0,i=NS(n),o=this.inverted?2:1,s=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let c=this.ranges[a]-(this.inverted?r:0);if(c>e)break;let f=this.ranges[a+o],d=c+f;if(e<=d&&a==i*3)return!0;r+=this.ranges[a+s]-f}return!1}forEach(e){let n=this.inverted?2:1,r=this.inverted?1:2;for(let i=0,o=0;i<this.ranges.length;i+=3){let s=this.ranges[i],a=s-(this.inverted?o:0),c=s+(this.inverted?0:o),f=this.ranges[i+n],d=this.ranges[i+r];e(a,a+f,c,c+d),o+=d-f}}invert(){return new cr(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?cr.empty:new cr(e<0?[0,-e,0]:[0,0,e])}}cr.empty=new cr([]);class Ru{constructor(e,n,r=0,i=e?e.length:0){this.mirror=n,this.from=r,this.to=i,this._maps=e||[],this.ownData=!(e||n)}get maps(){return this._maps}slice(e=0,n=this.maps.length){return new Ru(this._maps,this.mirror,e,n)}appendMap(e,n){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(e),n!=null&&this.setMirror(this._maps.length-1,n)}appendMapping(e){for(let n=0,r=this._maps.length;n<e._maps.length;n++){let i=e.getMirror(n);this.appendMap(e._maps[n],i!=null&&i<n?r+i:void 0)}}getMirror(e){if(this.mirror){for(let n=0;n<this.mirror.length;n++)if(this.mirror[n]==e)return this.mirror[n+(n%2?-1:1)]}}setMirror(e,n){this.mirror||(this.mirror=[]),this.mirror.push(e,n)}appendMappingInverted(e){for(let n=e.maps.length-1,r=this._maps.length+e._maps.length;n>=0;n--){let i=e.getMirror(n);this.appendMap(e._maps[n].invert(),i!=null&&i>n?r-i-1:void 0)}}invert(){let e=new Ru;return e.appendMappingInverted(this),e}map(e,n=1){if(this.mirror)return this._map(e,n,!0);for(let r=this.from;r<this.to;r++)e=this._maps[r].map(e,n);return e}mapResult(e,n=1){return this._map(e,n,!1)}_map(e,n,r){let i=0;for(let o=this.from;o<this.to;o++){let s=this._maps[o],a=s.mapResult(e,n);if(a.recover!=null){let c=this.getMirror(o);if(c!=null&&c>o&&c<this.to){o=c,e=this._maps[c].recover(a.recover);continue}}i|=a.delInfo,e=a.pos}return r?e:new f0(e,i,null)}}const Fm=Object.create(null);class dn{getMap(){return cr.empty}merge(e){return null}static fromJSON(e,n){if(!n||!n.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=Fm[n.stepType];if(!r)throw new RangeError(`No step type ${n.stepType} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in Fm)throw new RangeError("Duplicate use of step JSON ID "+e);return Fm[e]=n,n.prototype.jsonID=e,n}}class _t{constructor(e,n){this.doc=e,this.failed=n}static ok(e){return new _t(e,null)}static fail(e){return new _t(null,e)}static fromReplace(e,n,r,i){try{return _t.ok(e.replace(n,r,i))}catch(o){if(o instanceof pd)return _t.fail(o.message);throw o}}}function jy(t,e,n){let r=[];for(let i=0;i<t.childCount;i++){let o=t.child(i);o.content.size&&(o=o.copy(jy(o.content,e,o))),o.isInline&&(o=e(o,n,i)),r.push(o)}return q.fromArray(r)}class Oo extends dn{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=e.resolve(this.from),i=r.node(r.sharedDepth(this.to)),o=new te(jy(n.content,(s,a)=>!s.isAtom||!a.type.allowsMarkType(this.mark.type)?s:s.mark(this.mark.addToSet(s.marks)),i),n.openStart,n.openEnd);return _t.fromReplace(e,this.from,this.to,o)}invert(){return new ri(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new Oo(n.pos,r.pos,this.mark)}merge(e){return e instanceof Oo&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new Oo(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new Oo(n.from,n.to,e.markFromJSON(n.mark))}}dn.jsonID("addMark",Oo);class ri extends dn{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=new te(jy(n.content,i=>i.mark(this.mark.removeFromSet(i.marks)),e),n.openStart,n.openEnd);return _t.fromReplace(e,this.from,this.to,r)}invert(){return new Oo(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new ri(n.pos,r.pos,this.mark)}merge(e){return e instanceof ri&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new ri(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new ri(n.from,n.to,e.markFromJSON(n.mark))}}dn.jsonID("removeMark",ri);class Ao extends dn{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return _t.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.addToSet(n.marks));return _t.fromReplace(e,this.pos,this.pos+1,new te(q.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);if(n){let r=this.mark.addToSet(n.marks);if(r.length==n.marks.length){for(let i=0;i<n.marks.length;i++)if(!n.marks[i].isInSet(r))return new Ao(this.pos,n.marks[i]);return new Ao(this.pos,this.mark)}}return new js(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new Ao(n.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new Ao(n.pos,e.markFromJSON(n.mark))}}dn.jsonID("addNodeMark",Ao);class js extends dn{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return _t.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.removeFromSet(n.marks));return _t.fromReplace(e,this.pos,this.pos+1,new te(q.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);return!n||!this.mark.isInSet(n.marks)?this:new Ao(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new js(n.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new js(n.pos,e.markFromJSON(n.mark))}}dn.jsonID("removeNodeMark",js);class jt extends dn{constructor(e,n,r,i=!1){super(),this.from=e,this.to=n,this.slice=r,this.structure=i}apply(e){return this.structure&&d0(e,this.from,this.to)?_t.fail("Structure replace would overwrite content"):_t.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new cr([this.from,this.to-this.from,this.slice.size])}invert(e){return new jt(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deletedAcross&&r.deletedAcross?null:new jt(n.pos,Math.max(n.pos,r.pos),this.slice,this.structure)}merge(e){if(!(e instanceof jt)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let n=this.slice.size+e.slice.size==0?te.empty:new te(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new jt(this.from,this.to+(e.to-e.from),n,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let n=this.slice.size+e.slice.size==0?te.empty:new te(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new jt(e.from,this.to,n,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new jt(n.from,n.to,te.fromJSON(e,n.slice),!!n.structure)}}dn.jsonID("replace",jt);class Ht extends dn{constructor(e,n,r,i,o,s,a=!1){super(),this.from=e,this.to=n,this.gapFrom=r,this.gapTo=i,this.slice=o,this.insert=s,this.structure=a}apply(e){if(this.structure&&(d0(e,this.from,this.gapFrom)||d0(e,this.gapTo,this.to)))return _t.fail("Structure gap-replace would overwrite content");let n=e.slice(this.gapFrom,this.gapTo);if(n.openStart||n.openEnd)return _t.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,n.content);return r?_t.fromReplace(e,this.from,this.to,r):_t.fail("Content does not fit in gap")}getMap(){return new cr([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let n=this.gapTo-this.gapFrom;return new Ht(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),i=this.from==this.gapFrom?n.pos:e.map(this.gapFrom,-1),o=this.to==this.gapTo?r.pos:e.map(this.gapTo,1);return n.deletedAcross&&r.deletedAcross||i<n.pos||o>r.pos?null:new Ht(n.pos,r.pos,i,o,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number"||typeof n.gapFrom!="number"||typeof n.gapTo!="number"||typeof n.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new Ht(n.from,n.to,n.gapFrom,n.gapTo,te.fromJSON(e,n.slice),n.insert,!!n.structure)}}dn.jsonID("replaceAround",Ht);function d0(t,e,n){let r=t.resolve(e),i=n-e,o=r.depth;for(;i>0&&o>0&&r.indexAfter(o)==r.node(o).childCount;)o--,i--;if(i>0){let s=r.node(o).maybeChild(r.indexAfter(o));for(;i>0;){if(!s||s.isLeaf)return!0;s=s.firstChild,i--}}return!1}function G4(t,e,n,r){let i=[],o=[],s,a;t.doc.nodesBetween(e,n,(c,f,d)=>{if(!c.isInline)return;let p=c.marks;if(!r.isInSet(p)&&d.type.allowsMarkType(r.type)){let m=Math.max(f,e),g=Math.min(f+c.nodeSize,n),v=r.addToSet(p);for(let k=0;k<p.length;k++)p[k].isInSet(v)||(s&&s.to==m&&s.mark.eq(p[k])?s.to=g:i.push(s=new ri(m,g,p[k])));a&&a.to==m?a.to=g:o.push(a=new Oo(m,g,r))}}),i.forEach(c=>t.step(c)),o.forEach(c=>t.step(c))}function X4(t,e,n,r){let i=[],o=0;t.doc.nodesBetween(e,n,(s,a)=>{if(!s.isInline)return;o++;let c=null;if(r instanceof Th){let f=s.marks,d;for(;d=r.isInSet(f);)(c||(c=[])).push(d),f=d.removeFromSet(f)}else r?r.isInSet(s.marks)&&(c=[r]):c=s.marks;if(c&&c.length){let f=Math.min(a+s.nodeSize,n);for(let d=0;d<c.length;d++){let p=c[d],m;for(let g=0;g<i.length;g++){let v=i[g];v.step==o-1&&p.eq(i[g].style)&&(m=v)}m?(m.to=f,m.step=o):i.push({style:p,from:Math.max(a,e),to:f,step:o})}}}),i.forEach(s=>t.step(new ri(s.from,s.to,s.style)))}function Fy(t,e,n,r=n.contentMatch,i=!0){let o=t.doc.nodeAt(e),s=[],a=e+1;for(let c=0;c<o.childCount;c++){let f=o.child(c),d=a+f.nodeSize,p=r.matchType(f.type);if(!p)s.push(new jt(a,d,te.empty));else{r=p;for(let m=0;m<f.marks.length;m++)n.allowsMarkType(f.marks[m].type)||t.step(new ri(a,d,f.marks[m]));if(i&&f.isText&&n.whitespace!="pre"){let m,g=/\r?\n|\r/g,v;for(;m=g.exec(f.text);)v||(v=new te(q.from(n.schema.text(" ",n.allowedMarks(f.marks))),0,0)),s.push(new jt(a+m.index,a+m.index+m[0].length,v))}}a=d}if(!r.validEnd){let c=r.fillBefore(q.empty,!0);t.replace(a,a,new te(c,0,0))}for(let c=s.length-1;c>=0;c--)t.step(s[c])}function J4(t,e,n){return(e==0||t.canReplace(e,t.childCount))&&(n==t.childCount||t.canReplace(0,n))}function la(t){let n=t.parent.content.cutByIndex(t.startIndex,t.endIndex);for(let r=t.depth,i=0,o=0;;--r){let s=t.$from.node(r),a=t.$from.index(r)+i,c=t.$to.indexAfter(r)-o;if(r<t.depth&&s.canReplace(a,c,n))return r;if(r==0||s.type.spec.isolating||!J4(s,a,c))break;a&&(i=1),c<s.childCount&&(o=1)}return null}function Y4(t,e,n){let{$from:r,$to:i,depth:o}=e,s=r.before(o+1),a=i.after(o+1),c=s,f=a,d=q.empty,p=0;for(let v=o,k=!1;v>n;v--)k||r.index(v)>0?(k=!0,d=q.from(r.node(v).copy(d)),p++):c--;let m=q.empty,g=0;for(let v=o,k=!1;v>n;v--)k||i.after(v+1)<i.end(v)?(k=!0,m=q.from(i.node(v).copy(m)),g++):f++;t.step(new Ht(c,f,s,a,new te(d.append(m),p,g),d.size-p,!0))}function $y(t,e,n=null,r=t){let i=Q4(t,e),o=i&&Z4(r,e);return o?i.map(OS).concat({type:e,attrs:n}).concat(o.map(OS)):null}function OS(t){return{type:t,attrs:null}}function Q4(t,e){let{parent:n,startIndex:r,endIndex:i}=t,o=n.contentMatchAt(r).findWrapping(e);if(!o)return null;let s=o.length?o[0]:e;return n.canReplaceWith(r,i,s)?o:null}function Z4(t,e){let{parent:n,startIndex:r,endIndex:i}=t,o=n.child(r),s=e.contentMatch.findWrapping(o.type);if(!s)return null;let c=(s.length?s[s.length-1]:e).contentMatch;for(let f=r;c&&f<i;f++)c=c.matchType(n.child(f).type);return!c||!c.validEnd?null:s}function eB(t,e,n){let r=q.empty;for(let s=n.length-1;s>=0;s--){if(r.size){let a=n[s].type.contentMatch.matchFragment(r);if(!a||!a.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=q.from(n[s].type.create(n[s].attrs,r))}let i=e.start,o=e.end;t.step(new Ht(i,o,i,o,new te(r,0,0),n.length,!0))}function tB(t,e,n,r,i){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let o=t.steps.length;t.doc.nodesBetween(e,n,(s,a)=>{let c=typeof i=="function"?i(s):i;if(s.isTextblock&&!s.hasMarkup(r,c)&&nB(t.doc,t.mapping.slice(o).map(a),r)){let f=null;if(r.schema.linebreakReplacement){let g=r.whitespace=="pre",v=!!r.contentMatch.matchType(r.schema.linebreakReplacement);g&&!v?f=!1:!g&&v&&(f=!0)}f===!1&&ZE(t,s,a,o),Fy(t,t.mapping.slice(o).map(a,1),r,void 0,f===null);let d=t.mapping.slice(o),p=d.map(a,1),m=d.map(a+s.nodeSize,1);return t.step(new Ht(p,m,p+1,m-1,new te(q.from(r.create(c,null,s.marks)),0,0),1,!0)),f===!0&&QE(t,s,a,o),!1}})}function QE(t,e,n,r){e.forEach((i,o)=>{if(i.isText){let s,a=/\r?\n|\r/g;for(;s=a.exec(i.text);){let c=t.mapping.slice(r).map(n+1+o+s.index);t.replaceWith(c,c+1,e.type.schema.linebreakReplacement.create())}}})}function ZE(t,e,n,r){e.forEach((i,o)=>{if(i.type==i.type.schema.linebreakReplacement){let s=t.mapping.slice(r).map(n+1+o);t.replaceWith(s,s+1,e.type.schema.text(`
`))}})}function nB(t,e,n){let r=t.resolve(e),i=r.index();return r.parent.canReplaceWith(i,i+1,n)}function rB(t,e,n,r,i){let o=t.doc.nodeAt(e);if(!o)throw new RangeError("No node at given position");n||(n=o.type);let s=n.create(r,null,i||o.marks);if(o.isLeaf)return t.replaceWith(e,e+o.nodeSize,s);if(!n.validContent(o.content))throw new RangeError("Invalid content for node type "+n.name);t.step(new Ht(e,e+o.nodeSize,e+1,e+o.nodeSize-1,new te(q.from(s),0,0),1,!0))}function qi(t,e,n=1,r){let i=t.resolve(e),o=i.depth-n,s=r&&r[r.length-1]||i.parent;if(o<0||i.parent.type.spec.isolating||!i.parent.canReplace(i.index(),i.parent.childCount)||!s.type.validContent(i.parent.content.cutByIndex(i.index(),i.parent.childCount)))return!1;for(let f=i.depth-1,d=n-2;f>o;f--,d--){let p=i.node(f),m=i.index(f);if(p.type.spec.isolating)return!1;let g=p.content.cutByIndex(m,p.childCount),v=r&&r[d+1];v&&(g=g.replaceChild(0,v.type.create(v.attrs)));let k=r&&r[d]||p;if(!p.canReplace(m+1,p.childCount)||!k.type.validContent(g))return!1}let a=i.indexAfter(o),c=r&&r[0];return i.node(o).canReplaceWith(a,a,c?c.type:i.node(o+1).type)}function iB(t,e,n=1,r){let i=t.doc.resolve(e),o=q.empty,s=q.empty;for(let a=i.depth,c=i.depth-n,f=n-1;a>c;a--,f--){o=q.from(i.node(a).copy(o));let d=r&&r[f];s=q.from(d?d.type.create(d.attrs,s):i.node(a).copy(s))}t.step(new jt(e,e,new te(o.append(s),n,n),!0))}function es(t,e){let n=t.resolve(e),r=n.index();return eT(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)}function oB(t,e){e.content.size||t.type.compatibleContent(e.type);let n=t.contentMatchAt(t.childCount),{linebreakReplacement:r}=t.type.schema;for(let i=0;i<e.childCount;i++){let o=e.child(i),s=o.type==r?t.type.schema.nodes.text:o.type;if(n=n.matchType(s),!n||!t.type.allowsMarks(o.marks))return!1}return n.validEnd}function eT(t,e){return!!(t&&e&&!t.isLeaf&&oB(t,e))}function Mh(t,e,n=-1){let r=t.resolve(e);for(let i=r.depth;;i--){let o,s,a=r.index(i);if(i==r.depth?(o=r.nodeBefore,s=r.nodeAfter):n>0?(o=r.node(i+1),a++,s=r.node(i).maybeChild(a)):(o=r.node(i).maybeChild(a-1),s=r.node(i+1)),o&&!o.isTextblock&&eT(o,s)&&r.node(i).canReplace(a,a+1))return e;if(i==0)break;e=n<0?r.before(i):r.after(i)}}function sB(t,e,n){let r=null,{linebreakReplacement:i}=t.doc.type.schema,o=t.doc.resolve(e-n),s=o.node().type;if(i&&s.inlineContent){let d=s.whitespace=="pre",p=!!s.contentMatch.matchType(i);d&&!p?r=!1:!d&&p&&(r=!0)}let a=t.steps.length;if(r===!1){let d=t.doc.resolve(e+n);ZE(t,d.node(),d.before(),a)}s.inlineContent&&Fy(t,e+n-1,s,o.node().contentMatchAt(o.index()),r==null);let c=t.mapping.slice(a),f=c.map(e-n);if(t.step(new jt(f,c.map(e+n,-1),te.empty,!0)),r===!0){let d=t.doc.resolve(f);QE(t,d.node(),d.before(),t.steps.length)}return t}function lB(t,e,n){let r=t.resolve(e);if(r.parent.canReplaceWith(r.index(),r.index(),n))return e;if(r.parentOffset==0)for(let i=r.depth-1;i>=0;i--){let o=r.index(i);if(r.node(i).canReplaceWith(o,o,n))return r.before(i+1);if(o>0)return null}if(r.parentOffset==r.parent.content.size)for(let i=r.depth-1;i>=0;i--){let o=r.indexAfter(i);if(r.node(i).canReplaceWith(o,o,n))return r.after(i+1);if(o<r.node(i).childCount)return null}return null}function tT(t,e,n){let r=t.resolve(e);if(!n.content.size)return e;let i=n.content;for(let o=0;o<n.openStart;o++)i=i.firstChild.content;for(let o=1;o<=(n.openStart==0&&n.size?2:1);o++)for(let s=r.depth;s>=0;s--){let a=s==r.depth?0:r.pos<=(r.start(s+1)+r.end(s+1))/2?-1:1,c=r.index(s)+(a>0?1:0),f=r.node(s),d=!1;if(o==1)d=f.canReplace(c,c,i);else{let p=f.contentMatchAt(c).findWrapping(i.firstChild.type);d=p&&f.canReplaceWith(c,c,p[0])}if(d)return a==0?r.pos:a<0?r.before(s+1):r.after(s+1)}return null}function _h(t,e,n=e,r=te.empty){if(e==n&&!r.size)return null;let i=t.resolve(e),o=t.resolve(n);return nT(i,o,r)?new jt(e,n,r):new aB(i,o,r).fit()}function nT(t,e,n){return!n.openStart&&!n.openEnd&&t.start()==e.start()&&t.parent.canReplace(t.index(),e.index(),n.content)}class aB{constructor(e,n,r){this.$from=e,this.$to=n,this.unplaced=r,this.frontier=[],this.placed=q.empty;for(let i=0;i<=e.depth;i++){let o=e.node(i);this.frontier.push({type:o.type,match:o.contentMatchAt(e.indexAfter(i))})}for(let i=e.depth;i>0;i--)this.placed=q.from(e.node(i).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let f=this.findFittable();f?this.placeNodes(f):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,r=this.$from,i=this.close(e<0?this.$to:r.doc.resolve(e));if(!i)return null;let o=this.placed,s=r.depth,a=i.depth;for(;s&&a&&o.childCount==1;)o=o.firstChild.content,s--,a--;let c=new te(o,s,a);return e>-1?new Ht(r.pos,e,this.$to.pos,this.$to.end(),c,n):c.size||r.pos!=this.$to.pos?new jt(r.pos,i.pos,c):null}findFittable(){let e=this.unplaced.openStart;for(let n=this.unplaced.content,r=0,i=this.unplaced.openEnd;r<e;r++){let o=n.firstChild;if(n.childCount>1&&(i=0),o.type.spec.isolating&&i<=r){e=r;break}n=o.content}for(let n=1;n<=2;n++)for(let r=n==1?e:this.unplaced.openStart;r>=0;r--){let i,o=null;r?(o=$m(this.unplaced.content,r-1).firstChild,i=o.content):i=this.unplaced.content;let s=i.firstChild;for(let a=this.depth;a>=0;a--){let{type:c,match:f}=this.frontier[a],d,p=null;if(n==1&&(s?f.matchType(s.type)||(p=f.fillBefore(q.from(s),!1)):o&&c.compatibleContent(o.type)))return{sliceDepth:r,frontierDepth:a,parent:o,inject:p};if(n==2&&s&&(d=f.findWrapping(s.type)))return{sliceDepth:r,frontierDepth:a,parent:o,wrap:d};if(o&&f.matchType(o.type))break}}}openMore(){let{content:e,openStart:n,openEnd:r}=this.unplaced,i=$m(e,n);return!i.childCount||i.firstChild.isLeaf?!1:(this.unplaced=new te(e,n+1,Math.max(r,i.size+n>=e.size-r?n+1:0)),!0)}dropNode(){let{content:e,openStart:n,openEnd:r}=this.unplaced,i=$m(e,n);if(i.childCount<=1&&n>0){let o=e.size-n<=n+i.size;this.unplaced=new te(Wa(e,n-1,1),n-1,o?n-1:r)}else this.unplaced=new te(Wa(e,n,1),n,r)}placeNodes({sliceDepth:e,frontierDepth:n,parent:r,inject:i,wrap:o}){for(;this.depth>n;)this.closeFrontierNode();if(o)for(let k=0;k<o.length;k++)this.openFrontierNode(o[k]);let s=this.unplaced,a=r?r.content:s.content,c=s.openStart-e,f=0,d=[],{match:p,type:m}=this.frontier[n];if(i){for(let k=0;k<i.childCount;k++)d.push(i.child(k));p=p.matchFragment(i)}let g=a.size+e-(s.content.size-s.openEnd);for(;f<a.childCount;){let k=a.child(f),b=p.matchType(k.type);if(!b)break;f++,(f>1||c==0||k.content.size)&&(p=b,d.push(rT(k.mark(m.allowedMarks(k.marks)),f==1?c:0,f==a.childCount?g:-1)))}let v=f==a.childCount;v||(g=-1),this.placed=Ka(this.placed,n,q.from(d)),this.frontier[n].match=p,v&&g<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let k=0,b=a;k<g;k++){let x=b.lastChild;this.frontier.push({type:x.type,match:x.contentMatchAt(x.childCount)}),b=x.content}this.unplaced=v?e==0?te.empty:new te(Wa(s.content,e-1,1),e-1,g<0?s.openEnd:e-1):new te(Wa(s.content,e,f),s.openStart,s.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],n;if(!e.type.isTextblock||!Hm(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(n=this.findCloseLevel(this.$to))&&n.depth==this.depth)return-1;let{depth:r}=this.$to,i=this.$to.after(r);for(;r>1&&i==this.$to.end(--r);)++i;return i}findCloseLevel(e){e:for(let n=Math.min(this.depth,e.depth);n>=0;n--){let{match:r,type:i}=this.frontier[n],o=n<e.depth&&e.end(n+1)==e.pos+(e.depth-(n+1)),s=Hm(e,n,i,r,o);if(s){for(let a=n-1;a>=0;a--){let{match:c,type:f}=this.frontier[a],d=Hm(e,a,f,c,!0);if(!d||d.childCount)continue e}return{depth:n,fit:s,move:o?e.doc.resolve(e.after(n+1)):e}}}}close(e){let n=this.findCloseLevel(e);if(!n)return null;for(;this.depth>n.depth;)this.closeFrontierNode();n.fit.childCount&&(this.placed=Ka(this.placed,n.depth,n.fit)),e=n.move;for(let r=n.depth+1;r<=e.depth;r++){let i=e.node(r),o=i.type.contentMatch.fillBefore(i.content,!0,e.index(r));this.openFrontierNode(i.type,i.attrs,o)}return e}openFrontierNode(e,n=null,r){let i=this.frontier[this.depth];i.match=i.match.matchType(e),this.placed=Ka(this.placed,this.depth,q.from(e.create(n,r))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let n=this.frontier.pop().match.fillBefore(q.empty,!0);n.childCount&&(this.placed=Ka(this.placed,this.frontier.length,n))}}function Wa(t,e,n){return e==0?t.cutByIndex(n,t.childCount):t.replaceChild(0,t.firstChild.copy(Wa(t.firstChild.content,e-1,n)))}function Ka(t,e,n){return e==0?t.append(n):t.replaceChild(t.childCount-1,t.lastChild.copy(Ka(t.lastChild.content,e-1,n)))}function $m(t,e){for(let n=0;n<e;n++)t=t.firstChild.content;return t}function rT(t,e,n){if(e<=0)return t;let r=t.content;return e>1&&(r=r.replaceChild(0,rT(r.firstChild,e-1,r.childCount==1?n-1:0))),e>0&&(r=t.type.contentMatch.fillBefore(r).append(r),n<=0&&(r=r.append(t.type.contentMatch.matchFragment(r).fillBefore(q.empty,!0)))),t.copy(r)}function Hm(t,e,n,r,i){let o=t.node(e),s=i?t.indexAfter(e):t.index(e);if(s==o.childCount&&!n.compatibleContent(o.type))return null;let a=r.fillBefore(o.content,!0,s);return a&&!uB(n,o.content,s)?a:null}function uB(t,e,n){for(let r=n;r<e.childCount;r++)if(!t.allowsMarks(e.child(r).marks))return!0;return!1}function cB(t){return t.spec.defining||t.spec.definingForContent}function fB(t,e,n,r){if(!r.size)return t.deleteRange(e,n);let i=t.doc.resolve(e),o=t.doc.resolve(n);if(nT(i,o,r))return t.step(new jt(e,n,r));let s=oT(i,o);s[s.length-1]==0&&s.pop();let a=-(i.depth+1);s.unshift(a);for(let m=i.depth,g=i.pos-1;m>0;m--,g--){let v=i.node(m).type.spec;if(v.defining||v.definingAsContext||v.isolating)break;s.indexOf(m)>-1?a=m:i.before(m)==g&&s.splice(1,0,-m)}let c=s.indexOf(a),f=[],d=r.openStart;for(let m=r.content,g=0;;g++){let v=m.firstChild;if(f.push(v),g==r.openStart)break;m=v.content}for(let m=d-1;m>=0;m--){let g=f[m],v=cB(g.type);if(v&&!g.sameMarkup(i.node(Math.abs(a)-1)))d=m;else if(v||!g.type.isTextblock)break}for(let m=r.openStart;m>=0;m--){let g=(m+d+1)%(r.openStart+1),v=f[g];if(v)for(let k=0;k<s.length;k++){let b=s[(k+c)%s.length],x=!0;b<0&&(x=!1,b=-b);let w=i.node(b-1),E=i.index(b-1);if(w.canReplaceWith(E,E,v.type,v.marks))return t.replace(i.before(b),x?o.after(b):n,new te(iT(r.content,0,r.openStart,g),g,r.openEnd))}}let p=t.steps.length;for(let m=s.length-1;m>=0&&(t.replace(e,n,r),!(t.steps.length>p));m--){let g=s[m];g<0||(e=i.before(g),n=o.after(g))}}function iT(t,e,n,r,i){if(e<n){let o=t.firstChild;t=t.replaceChild(0,o.copy(iT(o.content,e+1,n,r,o)))}if(e>r){let o=i.contentMatchAt(0),s=o.fillBefore(t).append(t);t=s.append(o.matchFragment(s).fillBefore(q.empty,!0))}return t}function dB(t,e,n,r){if(!r.isInline&&e==n&&t.doc.resolve(e).parent.content.size){let i=lB(t.doc,e,r.type);i!=null&&(e=n=i)}t.replaceRange(e,n,new te(q.from(r),0,0))}function hB(t,e,n){let r=t.doc.resolve(e),i=t.doc.resolve(n),o=oT(r,i);for(let s=0;s<o.length;s++){let a=o[s],c=s==o.length-1;if(c&&a==0||r.node(a).type.contentMatch.validEnd)return t.delete(r.start(a),i.end(a));if(a>0&&(c||r.node(a-1).canReplace(r.index(a-1),i.indexAfter(a-1))))return t.delete(r.before(a),i.after(a))}for(let s=1;s<=r.depth&&s<=i.depth;s++)if(e-r.start(s)==r.depth-s&&n>r.end(s)&&i.end(s)-n!=i.depth-s&&r.start(s-1)==i.start(s-1)&&r.node(s-1).canReplace(r.index(s-1),i.index(s-1)))return t.delete(r.before(s),n);t.delete(e,n)}function oT(t,e){let n=[],r=Math.min(t.depth,e.depth);for(let i=r;i>=0;i--){let o=t.start(i);if(o<t.pos-(t.depth-i)||e.end(i)>e.pos+(e.depth-i)||t.node(i).type.spec.isolating||e.node(i).type.spec.isolating)break;(o==e.start(i)||i==t.depth&&i==e.depth&&t.parent.inlineContent&&e.parent.inlineContent&&i&&e.start(i-1)==o-1)&&n.push(i)}return n}class $l extends dn{constructor(e,n,r){super(),this.pos=e,this.attr=n,this.value=r}apply(e){let n=e.nodeAt(this.pos);if(!n)return _t.fail("No node at attribute step's position");let r=Object.create(null);for(let o in n.attrs)r[o]=n.attrs[o];r[this.attr]=this.value;let i=n.type.create(r,null,n.marks);return _t.fromReplace(e,this.pos,this.pos+1,new te(q.from(i),0,n.isLeaf?0:1))}getMap(){return cr.empty}invert(e){return new $l(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new $l(n.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.pos!="number"||typeof n.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new $l(n.pos,n.attr,n.value)}}dn.jsonID("attr",$l);class Du extends dn{constructor(e,n){super(),this.attr=e,this.value=n}apply(e){let n=Object.create(null);for(let i in e.attrs)n[i]=e.attrs[i];n[this.attr]=this.value;let r=e.type.create(n,e.content,e.marks);return _t.ok(r)}getMap(){return cr.empty}invert(e){return new Du(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new Du(n.attr,n.value)}}dn.jsonID("docAttr",Du);let Yl=class extends Error{};Yl=function t(e){let n=Error.call(this,e);return n.__proto__=t.prototype,n};Yl.prototype=Object.create(Error.prototype);Yl.prototype.constructor=Yl;Yl.prototype.name="TransformError";class sT{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new Ru}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let n=this.maybeStep(e);if(n.failed)throw new Yl(n.failed);return this}maybeStep(e){let n=e.apply(this.doc);return n.failed||this.addStep(e,n.doc),n}get docChanged(){return this.steps.length>0}addStep(e,n){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=n}replace(e,n=e,r=te.empty){let i=_h(this.doc,e,n,r);return i&&this.step(i),this}replaceWith(e,n,r){return this.replace(e,n,new te(q.from(r),0,0))}delete(e,n){return this.replace(e,n,te.empty)}insert(e,n){return this.replaceWith(e,e,n)}replaceRange(e,n,r){return fB(this,e,n,r),this}replaceRangeWith(e,n,r){return dB(this,e,n,r),this}deleteRange(e,n){return hB(this,e,n),this}lift(e,n){return Y4(this,e,n),this}join(e,n=1){return sB(this,e,n),this}wrap(e,n){return eB(this,e,n),this}setBlockType(e,n=e,r,i=null){return tB(this,e,n,r,i),this}setNodeMarkup(e,n,r=null,i){return rB(this,e,n,r,i),this}setNodeAttribute(e,n,r){return this.step(new $l(e,n,r)),this}setDocAttribute(e,n){return this.step(new Du(e,n)),this}addNodeMark(e,n){return this.step(new Ao(e,n)),this}removeNodeMark(e,n){let r=this.doc.nodeAt(e);if(!r)throw new RangeError("No node at position "+e);if(n instanceof qe)n.isInSet(r.marks)&&this.step(new js(e,n));else{let i=r.marks,o,s=[];for(;o=n.isInSet(i);)s.push(new js(e,o)),i=o.removeFromSet(i);for(let a=s.length-1;a>=0;a--)this.step(s[a])}return this}split(e,n=1,r){return iB(this,e,n,r),this}addMark(e,n,r){return G4(this,e,n,r),this}removeMark(e,n,r){return X4(this,e,n,r),this}clearIncompatible(e,n,r){return Fy(this,e,n,r),this}}const Um=Object.create(null);class Te{constructor(e,n,r){this.$anchor=e,this.$head=n,this.ranges=r||[new pB(e.min(n),e.max(n))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let n=0;n<e.length;n++)if(e[n].$from.pos!=e[n].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,n=te.empty){let r=n.content.lastChild,i=null;for(let a=0;a<n.openEnd;a++)i=r,r=r.lastChild;let o=e.steps.length,s=this.ranges;for(let a=0;a<s.length;a++){let{$from:c,$to:f}=s[a],d=e.mapping.slice(o);e.replaceRange(d.map(c.pos),d.map(f.pos),a?te.empty:n),a==0&&RS(e,o,(r?r.isInline:i&&i.isTextblock)?-1:1)}}replaceWith(e,n){let r=e.steps.length,i=this.ranges;for(let o=0;o<i.length;o++){let{$from:s,$to:a}=i[o],c=e.mapping.slice(r),f=c.map(s.pos),d=c.map(a.pos);o?e.deleteRange(f,d):(e.replaceRangeWith(f,d,n),RS(e,r,n.isInline?-1:1))}}static findFrom(e,n,r=!1){let i=e.parent.inlineContent?new ve(e):yl(e.node(0),e.parent,e.pos,e.index(),n,r);if(i)return i;for(let o=e.depth-1;o>=0;o--){let s=n<0?yl(e.node(0),e.node(o),e.before(o+1),e.index(o),n,r):yl(e.node(0),e.node(o),e.after(o+1),e.index(o)+1,n,r);if(s)return s}return null}static near(e,n=1){return this.findFrom(e,n)||this.findFrom(e,-n)||new pr(e.node(0))}static atStart(e){return yl(e,e,0,0,1)||new pr(e)}static atEnd(e){return yl(e,e,e.content.size,e.childCount,-1)||new pr(e)}static fromJSON(e,n){if(!n||!n.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=Um[n.type];if(!r)throw new RangeError(`No selection type ${n.type} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in Um)throw new RangeError("Duplicate use of selection JSON ID "+e);return Um[e]=n,n.prototype.jsonID=e,n}getBookmark(){return ve.between(this.$anchor,this.$head).getBookmark()}}Te.prototype.visible=!0;class pB{constructor(e,n){this.$from=e,this.$to=n}}let AS=!1;function PS(t){!AS&&!t.parent.inlineContent&&(AS=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+t.parent.type.name+")"))}class ve extends Te{constructor(e,n=e){PS(e),PS(n),super(e,n)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,n){let r=e.resolve(n.map(this.head));if(!r.parent.inlineContent)return Te.near(r);let i=e.resolve(n.map(this.anchor));return new ve(i.parent.inlineContent?i:r,r)}replace(e,n=te.empty){if(super.replace(e,n),n==te.empty){let r=this.$from.marksAcross(this.$to);r&&e.ensureMarks(r)}}eq(e){return e instanceof ve&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new Nh(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,n){if(typeof n.anchor!="number"||typeof n.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new ve(e.resolve(n.anchor),e.resolve(n.head))}static create(e,n,r=n){let i=e.resolve(n);return new this(i,r==n?i:e.resolve(r))}static between(e,n,r){let i=e.pos-n.pos;if((!r||i)&&(r=i>=0?1:-1),!n.parent.inlineContent){let o=Te.findFrom(n,r,!0)||Te.findFrom(n,-r,!0);if(o)n=o.$head;else return Te.near(n,r)}return e.parent.inlineContent||(i==0?e=n:(e=(Te.findFrom(e,-r,!0)||Te.findFrom(e,r,!0)).$anchor,e.pos<n.pos!=i<0&&(e=n))),new ve(e,n)}}Te.jsonID("text",ve);class Nh{constructor(e,n){this.anchor=e,this.head=n}map(e){return new Nh(e.map(this.anchor),e.map(this.head))}resolve(e){return ve.between(e.resolve(this.anchor),e.resolve(this.head))}}class ce extends Te{constructor(e){let n=e.nodeAfter,r=e.node(0).resolve(e.pos+n.nodeSize);super(e,r),this.node=n}map(e,n){let{deleted:r,pos:i}=n.mapResult(this.anchor),o=e.resolve(i);return r?Te.near(o):new ce(o)}content(){return new te(q.from(this.node),0,0)}eq(e){return e instanceof ce&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new Hy(this.anchor)}static fromJSON(e,n){if(typeof n.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new ce(e.resolve(n.anchor))}static create(e,n){return new ce(e.resolve(n))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}ce.prototype.visible=!1;Te.jsonID("node",ce);class Hy{constructor(e){this.anchor=e}map(e){let{deleted:n,pos:r}=e.mapResult(this.anchor);return n?new Nh(r,r):new Hy(r)}resolve(e){let n=e.resolve(this.anchor),r=n.nodeAfter;return r&&ce.isSelectable(r)?new ce(n):Te.near(n)}}class pr extends Te{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,n=te.empty){if(n==te.empty){e.delete(0,e.doc.content.size);let r=Te.atStart(e.doc);r.eq(e.selection)||e.setSelection(r)}else super.replace(e,n)}toJSON(){return{type:"all"}}static fromJSON(e){return new pr(e)}map(e){return new pr(e)}eq(e){return e instanceof pr}getBookmark(){return mB}}Te.jsonID("all",pr);const mB={map(){return this},resolve(t){return new pr(t)}};function yl(t,e,n,r,i,o=!1){if(e.inlineContent)return ve.create(t,n);for(let s=r-(i>0?0:1);i>0?s<e.childCount:s>=0;s+=i){let a=e.child(s);if(a.isAtom){if(!o&&ce.isSelectable(a))return ce.create(t,n-(i<0?a.nodeSize:0))}else{let c=yl(t,a,n+i,i<0?a.childCount:0,i,o);if(c)return c}n+=a.nodeSize*i}return null}function RS(t,e,n){let r=t.steps.length-1;if(r<e)return;let i=t.steps[r];if(!(i instanceof jt||i instanceof Ht))return;let o=t.mapping.maps[r],s;o.forEach((a,c,f,d)=>{s==null&&(s=d)}),t.setSelection(Te.near(t.doc.resolve(s),n))}const DS=1,df=2,IS=4;class gB extends sT{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|DS)&~df,this.storedMarks=null,this}get selectionSet(){return(this.updated&DS)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=df,this}ensureMarks(e){return qe.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&df)>0}addStep(e,n){super.addStep(e,n),this.updated=this.updated&~df,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,n=!0){let r=this.selection;return n&&(e=e.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||qe.none))),r.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,n,r){let i=this.doc.type.schema;if(n==null)return e?this.replaceSelectionWith(i.text(e),!0):this.deleteSelection();{if(r==null&&(r=n),!e)return this.deleteRange(n,r);let o=this.storedMarks;if(!o){let s=this.doc.resolve(n);o=r==n?s.marks():s.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(n,r,i.text(e,o)),!this.selection.empty&&this.selection.to==n+e.length&&this.setSelection(Te.near(this.selection.$to)),this}}setMeta(e,n){return this.meta[typeof e=="string"?e:e.key]=n,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=IS,this}get scrolledIntoView(){return(this.updated&IS)>0}}function LS(t,e){return!e||!t?t:t.bind(e)}class qa{constructor(e,n,r){this.name=e,this.init=LS(n.init,r),this.apply=LS(n.apply,r)}}const yB=[new qa("doc",{init(t){return t.doc||t.schema.topNodeType.createAndFill()},apply(t){return t.doc}}),new qa("selection",{init(t,e){return t.selection||Te.atStart(e.doc)},apply(t){return t.selection}}),new qa("storedMarks",{init(t){return t.storedMarks||null},apply(t,e,n,r){return r.selection.$cursor?t.storedMarks:null}}),new qa("scrollToSelection",{init(){return 0},apply(t,e){return t.scrolledIntoView?e+1:e}})];class Vm{constructor(e,n){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=yB.slice(),n&&n.forEach(r=>{if(this.pluginsByKey[r.key])throw new RangeError("Adding different instances of a keyed plugin ("+r.key+")");this.plugins.push(r),this.pluginsByKey[r.key]=r,r.spec.state&&this.fields.push(new qa(r.key,r.spec.state,r))})}}class Dl{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,n=-1){for(let r=0;r<this.config.plugins.length;r++)if(r!=n){let i=this.config.plugins[r];if(i.spec.filterTransaction&&!i.spec.filterTransaction.call(i,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let n=[e],r=this.applyInner(e),i=null;for(;;){let o=!1;for(let s=0;s<this.config.plugins.length;s++){let a=this.config.plugins[s];if(a.spec.appendTransaction){let c=i?i[s].n:0,f=i?i[s].state:this,d=c<n.length&&a.spec.appendTransaction.call(a,c?n.slice(c):n,f,r);if(d&&r.filterTransaction(d,s)){if(d.setMeta("appendedTransaction",e),!i){i=[];for(let p=0;p<this.config.plugins.length;p++)i.push(p<s?{state:r,n:n.length}:{state:this,n:0})}n.push(d),r=r.applyInner(d),o=!0}i&&(i[s]={state:r,n:n.length})}}if(!o)return{state:r,transactions:n}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let n=new Dl(this.config),r=this.config.fields;for(let i=0;i<r.length;i++){let o=r[i];n[o.name]=o.apply(e,this[o.name],this,n)}return n}get tr(){return new gB(this)}static create(e){let n=new Vm(e.doc?e.doc.type.schema:e.schema,e.plugins),r=new Dl(n);for(let i=0;i<n.fields.length;i++)r[n.fields[i].name]=n.fields[i].init(e,r);return r}reconfigure(e){let n=new Vm(this.schema,e.plugins),r=n.fields,i=new Dl(n);for(let o=0;o<r.length;o++){let s=r[o].name;i[s]=this.hasOwnProperty(s)?this[s]:r[o].init(e,i)}return i}toJSON(e){let n={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(n.storedMarks=this.storedMarks.map(r=>r.toJSON())),e&&typeof e=="object")for(let r in e){if(r=="doc"||r=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let i=e[r],o=i.spec.state;o&&o.toJSON&&(n[r]=o.toJSON.call(i,this[i.key]))}return n}static fromJSON(e,n,r){if(!n)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let i=new Vm(e.schema,e.plugins),o=new Dl(i);return i.fields.forEach(s=>{if(s.name=="doc")o.doc=si.fromJSON(e.schema,n.doc);else if(s.name=="selection")o.selection=Te.fromJSON(o.doc,n.selection);else if(s.name=="storedMarks")n.storedMarks&&(o.storedMarks=n.storedMarks.map(e.schema.markFromJSON));else{if(r)for(let a in r){let c=r[a],f=c.spec.state;if(c.key==s.name&&f&&f.fromJSON&&Object.prototype.hasOwnProperty.call(n,a)){o[s.name]=f.fromJSON.call(c,e,n[a],o);return}}o[s.name]=s.init(e,o)}}),o}}function lT(t,e,n){for(let r in t){let i=t[r];i instanceof Function?i=i.bind(e):r=="handleDOMEvents"&&(i=lT(i,e,{})),n[r]=i}return n}class ct{constructor(e){this.spec=e,this.props={},e.props&&lT(e.props,this,this.props),this.key=e.key?e.key.key:aT("plugin")}getState(e){return e[this.key]}}const Wm=Object.create(null);function aT(t){return t in Wm?t+"$"+ ++Wm[t]:(Wm[t]=0,t+"$")}class It{constructor(e="key"){this.key=aT(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const Uy=(t,e)=>t.selection.empty?!1:(e&&e(t.tr.deleteSelection().scrollIntoView()),!0);function uT(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("backward",t):n.parentOffset>0)?null:n}const cT=(t,e,n)=>{let r=uT(t,n);if(!r)return!1;let i=Vy(r);if(!i){let s=r.blockRange(),a=s&&la(s);return a==null?!1:(e&&e(t.tr.lift(s,a).scrollIntoView()),!0)}let o=i.nodeBefore;if(xT(t,i,e,-1))return!0;if(r.parent.content.size==0&&(Ql(o,"end")||ce.isSelectable(o)))for(let s=r.depth;;s--){let a=_h(t.doc,r.before(s),r.after(s),te.empty);if(a&&a.slice.size<a.to-a.from){if(e){let c=t.tr.step(a);c.setSelection(Ql(o,"end")?Te.findFrom(c.doc.resolve(c.mapping.map(i.pos,-1)),-1):ce.create(c.doc,i.pos-o.nodeSize)),e(c.scrollIntoView())}return!0}if(s==1||r.node(s-1).childCount>1)break}return o.isAtom&&i.depth==r.depth-1?(e&&e(t.tr.delete(i.pos-o.nodeSize,i.pos).scrollIntoView()),!0):!1},vB=(t,e,n)=>{let r=uT(t,n);if(!r)return!1;let i=Vy(r);return i?fT(t,i,e):!1},xB=(t,e,n)=>{let r=hT(t,n);if(!r)return!1;let i=Wy(r);return i?fT(t,i,e):!1};function fT(t,e,n){let r=e.nodeBefore,i=r,o=e.pos-1;for(;!i.isTextblock;o--){if(i.type.spec.isolating)return!1;let d=i.lastChild;if(!d)return!1;i=d}let s=e.nodeAfter,a=s,c=e.pos+1;for(;!a.isTextblock;c++){if(a.type.spec.isolating)return!1;let d=a.firstChild;if(!d)return!1;a=d}let f=_h(t.doc,o,c,te.empty);if(!f||f.from!=o||f instanceof jt&&f.slice.size>=c-o)return!1;if(n){let d=t.tr.step(f);d.setSelection(ve.create(d.doc,o)),n(d.scrollIntoView())}return!0}function Ql(t,e,n=!1){for(let r=t;r;r=e=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(n&&r.childCount!=1)return!1}return!1}const dT=(t,e,n)=>{let{$head:r,empty:i}=t.selection,o=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("backward",t):r.parentOffset>0)return!1;o=Vy(r)}let s=o&&o.nodeBefore;return!s||!ce.isSelectable(s)?!1:(e&&e(t.tr.setSelection(ce.create(t.doc,o.pos-s.nodeSize)).scrollIntoView()),!0)};function Vy(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){if(t.index(e)>0)return t.doc.resolve(t.before(e+1));if(t.node(e).type.spec.isolating)break}return null}function hT(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("forward",t):n.parentOffset<n.parent.content.size)?null:n}const pT=(t,e,n)=>{let r=hT(t,n);if(!r)return!1;let i=Wy(r);if(!i)return!1;let o=i.nodeAfter;if(xT(t,i,e,1))return!0;if(r.parent.content.size==0&&(Ql(o,"start")||ce.isSelectable(o))){let s=_h(t.doc,r.before(),r.after(),te.empty);if(s&&s.slice.size<s.to-s.from){if(e){let a=t.tr.step(s);a.setSelection(Ql(o,"start")?Te.findFrom(a.doc.resolve(a.mapping.map(i.pos)),1):ce.create(a.doc,a.mapping.map(i.pos))),e(a.scrollIntoView())}return!0}}return o.isAtom&&i.depth==r.depth-1?(e&&e(t.tr.delete(i.pos,i.pos+o.nodeSize).scrollIntoView()),!0):!1},mT=(t,e,n)=>{let{$head:r,empty:i}=t.selection,o=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("forward",t):r.parentOffset<r.parent.content.size)return!1;o=Wy(r)}let s=o&&o.nodeAfter;return!s||!ce.isSelectable(s)?!1:(e&&e(t.tr.setSelection(ce.create(t.doc,o.pos)).scrollIntoView()),!0)};function Wy(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){let n=t.node(e);if(t.index(e)+1<n.childCount)return t.doc.resolve(t.after(e+1));if(n.type.spec.isolating)break}return null}const wB=(t,e)=>{let n=t.selection,r=n instanceof ce,i;if(r){if(n.node.isTextblock||!es(t.doc,n.from))return!1;i=n.from}else if(i=Mh(t.doc,n.from,-1),i==null)return!1;if(e){let o=t.tr.join(i);r&&o.setSelection(ce.create(o.doc,i-t.doc.resolve(i).nodeBefore.nodeSize)),e(o.scrollIntoView())}return!0},SB=(t,e)=>{let n=t.selection,r;if(n instanceof ce){if(n.node.isTextblock||!es(t.doc,n.to))return!1;r=n.to}else if(r=Mh(t.doc,n.to,1),r==null)return!1;return e&&e(t.tr.join(r).scrollIntoView()),!0},kB=(t,e)=>{let{$from:n,$to:r}=t.selection,i=n.blockRange(r),o=i&&la(i);return o==null?!1:(e&&e(t.tr.lift(i,o).scrollIntoView()),!0)},gT=(t,e)=>{let{$head:n,$anchor:r}=t.selection;return!n.parent.type.spec.code||!n.sameParent(r)?!1:(e&&e(t.tr.insertText(`
`).scrollIntoView()),!0)};function Ky(t){for(let e=0;e<t.edgeCount;e++){let{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}const bB=(t,e)=>{let{$head:n,$anchor:r}=t.selection;if(!n.parent.type.spec.code||!n.sameParent(r))return!1;let i=n.node(-1),o=n.indexAfter(-1),s=Ky(i.contentMatchAt(o));if(!s||!i.canReplaceWith(o,o,s))return!1;if(e){let a=n.after(),c=t.tr.replaceWith(a,a,s.createAndFill());c.setSelection(Te.near(c.doc.resolve(a),1)),e(c.scrollIntoView())}return!0},yT=(t,e)=>{let n=t.selection,{$from:r,$to:i}=n;if(n instanceof pr||r.parent.inlineContent||i.parent.inlineContent)return!1;let o=Ky(i.parent.contentMatchAt(i.indexAfter()));if(!o||!o.isTextblock)return!1;if(e){let s=(!r.parentOffset&&i.index()<i.parent.childCount?r:i).pos,a=t.tr.insert(s,o.createAndFill());a.setSelection(ve.create(a.doc,s+1)),e(a.scrollIntoView())}return!0},vT=(t,e)=>{let{$cursor:n}=t.selection;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){let o=n.before();if(qi(t.doc,o))return e&&e(t.tr.split(o).scrollIntoView()),!0}let r=n.blockRange(),i=r&&la(r);return i==null?!1:(e&&e(t.tr.lift(r,i).scrollIntoView()),!0)};function CB(t){return(e,n)=>{let{$from:r,$to:i}=e.selection;if(e.selection instanceof ce&&e.selection.node.isBlock)return!r.parentOffset||!qi(e.doc,r.pos)?!1:(n&&n(e.tr.split(r.pos).scrollIntoView()),!0);if(!r.depth)return!1;let o=[],s,a,c=!1,f=!1;for(let g=r.depth;;g--)if(r.node(g).isBlock){c=r.end(g)==r.pos+(r.depth-g),f=r.start(g)==r.pos-(r.depth-g),a=Ky(r.node(g-1).contentMatchAt(r.indexAfter(g-1))),o.unshift(c&&a?{type:a}:null),s=g;break}else{if(g==1)return!1;o.unshift(null)}let d=e.tr;(e.selection instanceof ve||e.selection instanceof pr)&&d.deleteSelection();let p=d.mapping.map(r.pos),m=qi(d.doc,p,o.length,o);if(m||(o[0]=a?{type:a}:null,m=qi(d.doc,p,o.length,o)),!m)return!1;if(d.split(p,o.length,o),!c&&f&&r.node(s).type!=a){let g=d.mapping.map(r.before(s)),v=d.doc.resolve(g);a&&r.node(s-1).canReplaceWith(v.index(),v.index()+1,a)&&d.setNodeMarkup(d.mapping.map(r.before(s)),a)}return n&&n(d.scrollIntoView()),!0}}const EB=CB(),TB=(t,e)=>{let{$from:n,to:r}=t.selection,i,o=n.sharedDepth(r);return o==0?!1:(i=n.before(o),e&&e(t.tr.setSelection(ce.create(t.doc,i))),!0)};function MB(t,e,n){let r=e.nodeBefore,i=e.nodeAfter,o=e.index();return!r||!i||!r.type.compatibleContent(i.type)?!1:!r.content.size&&e.parent.canReplace(o-1,o)?(n&&n(t.tr.delete(e.pos-r.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(o,o+1)||!(i.isTextblock||es(t.doc,e.pos))?!1:(n&&n(t.tr.join(e.pos).scrollIntoView()),!0)}function xT(t,e,n,r){let i=e.nodeBefore,o=e.nodeAfter,s,a,c=i.type.spec.isolating||o.type.spec.isolating;if(!c&&MB(t,e,n))return!0;let f=!c&&e.parent.canReplace(e.index(),e.index()+1);if(f&&(s=(a=i.contentMatchAt(i.childCount)).findWrapping(o.type))&&a.matchType(s[0]||o.type).validEnd){if(n){let g=e.pos+o.nodeSize,v=q.empty;for(let x=s.length-1;x>=0;x--)v=q.from(s[x].create(null,v));v=q.from(i.copy(v));let k=t.tr.step(new Ht(e.pos-1,g,e.pos,g,new te(v,1,0),s.length,!0)),b=k.doc.resolve(g+2*s.length);b.nodeAfter&&b.nodeAfter.type==i.type&&es(k.doc,b.pos)&&k.join(b.pos),n(k.scrollIntoView())}return!0}let d=o.type.spec.isolating||r>0&&c?null:Te.findFrom(e,1),p=d&&d.$from.blockRange(d.$to),m=p&&la(p);if(m!=null&&m>=e.depth)return n&&n(t.tr.lift(p,m).scrollIntoView()),!0;if(f&&Ql(o,"start",!0)&&Ql(i,"end")){let g=i,v=[];for(;v.push(g),!g.isTextblock;)g=g.lastChild;let k=o,b=1;for(;!k.isTextblock;k=k.firstChild)b++;if(g.canReplace(g.childCount,g.childCount,k.content)){if(n){let x=q.empty;for(let E=v.length-1;E>=0;E--)x=q.from(v[E].copy(x));let w=t.tr.step(new Ht(e.pos-v.length,e.pos+o.nodeSize,e.pos+b,e.pos+o.nodeSize-b,new te(x,v.length,0),0,!0));n(w.scrollIntoView())}return!0}}return!1}function wT(t){return function(e,n){let r=e.selection,i=t<0?r.$from:r.$to,o=i.depth;for(;i.node(o).isInline;){if(!o)return!1;o--}return i.node(o).isTextblock?(n&&n(e.tr.setSelection(ve.create(e.doc,t<0?i.start(o):i.end(o)))),!0):!1}}const _B=wT(-1),NB=wT(1);function OB(t,e=null){return function(n,r){let{$from:i,$to:o}=n.selection,s=i.blockRange(o),a=s&&$y(s,t,e);return a?(r&&r(n.tr.wrap(s,a).scrollIntoView()),!0):!1}}function zS(t,e=null){return function(n,r){let i=!1;for(let o=0;o<n.selection.ranges.length&&!i;o++){let{$from:{pos:s},$to:{pos:a}}=n.selection.ranges[o];n.doc.nodesBetween(s,a,(c,f)=>{if(i)return!1;if(!(!c.isTextblock||c.hasMarkup(t,e)))if(c.type==t)i=!0;else{let d=n.doc.resolve(f),p=d.index();i=d.parent.canReplaceWith(p,p+1,t)}})}if(!i)return!1;if(r){let o=n.tr;for(let s=0;s<n.selection.ranges.length;s++){let{$from:{pos:a},$to:{pos:c}}=n.selection.ranges[s];o.setBlockType(a,c,t,e)}r(o.scrollIntoView())}return!0}}function qy(...t){return function(e,n,r){for(let i=0;i<t.length;i++)if(t[i](e,n,r))return!0;return!1}}qy(Uy,cT,dT);qy(Uy,pT,mT);qy(gT,yT,vT,EB);typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function AB(t,e=null){return function(n,r){let{$from:i,$to:o}=n.selection,s=i.blockRange(o);if(!s)return!1;let a=r?n.tr:null;return PB(a,s,t,e)?(r&&r(a.scrollIntoView()),!0):!1}}function PB(t,e,n,r=null){let i=!1,o=e,s=e.$from.doc;if(e.depth>=2&&e.$from.node(e.depth-1).type.compatibleContent(n)&&e.startIndex==0){if(e.$from.index(e.depth-1)==0)return!1;let c=s.resolve(e.start-2);o=new gd(c,c,e.depth),e.endIndex<e.parent.childCount&&(e=new gd(e.$from,s.resolve(e.$to.end(e.depth)),e.depth)),i=!0}let a=$y(o,n,r,e);return a?(t&&RB(t,e,a,i,n),!0):!1}function RB(t,e,n,r,i){let o=q.empty;for(let d=n.length-1;d>=0;d--)o=q.from(n[d].type.create(n[d].attrs,o));t.step(new Ht(e.start-(r?2:0),e.end,e.start,e.end,new te(o,0,0),n.length,!0));let s=0;for(let d=0;d<n.length;d++)n[d].type==i&&(s=d+1);let a=n.length-s,c=e.start+n.length-(r?2:0),f=e.parent;for(let d=e.startIndex,p=e.endIndex,m=!0;d<p;d++,m=!1)!m&&qi(t.doc,c,a)&&(t.split(c,a),c+=2*a),c+=f.child(d).nodeSize;return t}function DB(t){return function(e,n){let{$from:r,$to:i}=e.selection,o=r.blockRange(i,s=>s.childCount>0&&s.firstChild.type==t);return o?n?r.node(o.depth-1).type==t?IB(e,n,t,o):LB(e,n,o):!0:!1}}function IB(t,e,n,r){let i=t.tr,o=r.end,s=r.$to.end(r.depth);o<s&&(i.step(new Ht(o-1,s,o,s,new te(q.from(n.create(null,r.parent.copy())),1,0),1,!0)),r=new gd(i.doc.resolve(r.$from.pos),i.doc.resolve(s),r.depth));const a=la(r);if(a==null)return!1;i.lift(r,a);let c=i.doc.resolve(i.mapping.map(o,-1)-1);return es(i.doc,c.pos)&&c.nodeBefore.type==c.nodeAfter.type&&i.join(c.pos),e(i.scrollIntoView()),!0}function LB(t,e,n){let r=t.tr,i=n.parent;for(let g=n.end,v=n.endIndex-1,k=n.startIndex;v>k;v--)g-=i.child(v).nodeSize,r.delete(g-1,g+1);let o=r.doc.resolve(n.start),s=o.nodeAfter;if(r.mapping.map(n.end)!=n.start+o.nodeAfter.nodeSize)return!1;let a=n.startIndex==0,c=n.endIndex==i.childCount,f=o.node(-1),d=o.index(-1);if(!f.canReplace(d+(a?0:1),d+1,s.content.append(c?q.empty:q.from(i))))return!1;let p=o.pos,m=p+s.nodeSize;return r.step(new Ht(p-(a?1:0),m+(c?1:0),p+1,m-1,new te((a?q.empty:q.from(i.copy(q.empty))).append(c?q.empty:q.from(i.copy(q.empty))),a?0:1,c?0:1),a?0:1)),e(r.scrollIntoView()),!0}function zB(t){return function(e,n){let{$from:r,$to:i}=e.selection,o=r.blockRange(i,f=>f.childCount>0&&f.firstChild.type==t);if(!o)return!1;let s=o.startIndex;if(s==0)return!1;let a=o.parent,c=a.child(s-1);if(c.type!=t)return!1;if(n){let f=c.lastChild&&c.lastChild.type==a.type,d=q.from(f?t.create():null),p=new te(q.from(t.create(null,q.from(a.type.create(null,d)))),f?3:1,0),m=o.start,g=o.end;n(e.tr.step(new Ht(m-(f?3:1),g,m,g,p,1,!0)).scrollIntoView())}return!0}}const Jt=function(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e},Zl=function(t){let e=t.assignedSlot||t.parentNode;return e&&e.nodeType==11?e.host:e};let h0=null;const $i=function(t,e,n){let r=h0||(h0=document.createRange());return r.setEnd(t,n??t.nodeValue.length),r.setStart(t,e||0),r},BB=function(){h0=null},Fs=function(t,e,n,r){return n&&(BS(t,e,n,r,-1)||BS(t,e,n,r,1))},jB=/^(img|br|input|textarea|hr)$/i;function BS(t,e,n,r,i){for(var o;;){if(t==n&&e==r)return!0;if(e==(i<0?0:zr(t))){let s=t.parentNode;if(!s||s.nodeType!=1||qu(t)||jB.test(t.nodeName)||t.contentEditable=="false")return!1;e=Jt(t)+(i<0?0:1),t=s}else if(t.nodeType==1){let s=t.childNodes[e+(i<0?-1:0)];if(s.nodeType==1&&s.contentEditable=="false")if(!((o=s.pmViewDesc)===null||o===void 0)&&o.ignoreForSelection)e+=i;else return!1;else t=s,e=i<0?zr(t):0}else return!1}}function zr(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function FB(t,e){for(;;){if(t.nodeType==3&&e)return t;if(t.nodeType==1&&e>0){if(t.contentEditable=="false")return null;t=t.childNodes[e-1],e=zr(t)}else if(t.parentNode&&!qu(t))e=Jt(t),t=t.parentNode;else return null}}function $B(t,e){for(;;){if(t.nodeType==3&&e<t.nodeValue.length)return t;if(t.nodeType==1&&e<t.childNodes.length){if(t.contentEditable=="false")return null;t=t.childNodes[e],e=0}else if(t.parentNode&&!qu(t))e=Jt(t)+1,t=t.parentNode;else return null}}function HB(t,e,n){for(let r=e==0,i=e==zr(t);r||i;){if(t==n)return!0;let o=Jt(t);if(t=t.parentNode,!t)return!1;r=r&&o==0,i=i&&o==zr(t)}}function qu(t){let e;for(let n=t;n&&!(e=n.pmViewDesc);n=n.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==t||e.contentDOM==t)}const Oh=function(t){return t.focusNode&&Fs(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset)};function vs(t,e){let n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=t,n.key=n.code=e,n}function UB(t){let e=t.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function VB(t,e,n){if(t.caretPositionFromPoint)try{let r=t.caretPositionFromPoint(e,n);if(r)return{node:r.offsetNode,offset:Math.min(zr(r.offsetNode),r.offset)}}catch{}if(t.caretRangeFromPoint){let r=t.caretRangeFromPoint(e,n);if(r)return{node:r.startContainer,offset:Math.min(zr(r.startContainer),r.startOffset)}}}const ki=typeof navigator<"u"?navigator:null,jS=typeof document<"u"?document:null,ts=ki&&ki.userAgent||"",p0=/Edge\/(\d+)/.exec(ts),ST=/MSIE \d/.exec(ts),m0=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(ts),Xn=!!(ST||m0||p0),Uo=ST?document.documentMode:m0?+m0[1]:p0?+p0[1]:0,Fr=!Xn&&/gecko\/(\d+)/i.test(ts);Fr&&+(/Firefox\/(\d+)/.exec(ts)||[0,0])[1];const g0=!Xn&&/Chrome\/(\d+)/.exec(ts),Ft=!!g0,kT=g0?+g0[1]:0,en=!Xn&&!!ki&&/Apple Computer/.test(ki.vendor),ea=en&&(/Mobile\/\w+/.test(ts)||!!ki&&ki.maxTouchPoints>2),Dr=ea||(ki?/Mac/.test(ki.platform):!1),bT=ki?/Win/.test(ki.platform):!1,Wi=/Android \d/.test(ts),Gu=!!jS&&"webkitFontSmoothing"in jS.documentElement.style,WB=Gu?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function KB(t){let e=t.defaultView&&t.defaultView.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:t.documentElement.clientWidth,top:0,bottom:t.documentElement.clientHeight}}function Li(t,e){return typeof t=="number"?t:t[e]}function qB(t){let e=t.getBoundingClientRect(),n=e.width/t.offsetWidth||1,r=e.height/t.offsetHeight||1;return{left:e.left,right:e.left+t.clientWidth*n,top:e.top,bottom:e.top+t.clientHeight*r}}function FS(t,e,n){let r=t.someProp("scrollThreshold")||0,i=t.someProp("scrollMargin")||5,o=t.dom.ownerDocument;for(let s=n||t.dom;s;){if(s.nodeType!=1){s=Zl(s);continue}let a=s,c=a==o.body,f=c?KB(o):qB(a),d=0,p=0;if(e.top<f.top+Li(r,"top")?p=-(f.top-e.top+Li(i,"top")):e.bottom>f.bottom-Li(r,"bottom")&&(p=e.bottom-e.top>f.bottom-f.top?e.top+Li(i,"top")-f.top:e.bottom-f.bottom+Li(i,"bottom")),e.left<f.left+Li(r,"left")?d=-(f.left-e.left+Li(i,"left")):e.right>f.right-Li(r,"right")&&(d=e.right-f.right+Li(i,"right")),d||p)if(c)o.defaultView.scrollBy(d,p);else{let g=a.scrollLeft,v=a.scrollTop;p&&(a.scrollTop+=p),d&&(a.scrollLeft+=d);let k=a.scrollLeft-g,b=a.scrollTop-v;e={left:e.left-k,top:e.top-b,right:e.right-k,bottom:e.bottom-b}}let m=c?"fixed":getComputedStyle(s).position;if(/^(fixed|sticky)$/.test(m))break;s=m=="absolute"?s.offsetParent:Zl(s)}}function GB(t){let e=t.dom.getBoundingClientRect(),n=Math.max(0,e.top),r,i;for(let o=(e.left+e.right)/2,s=n+1;s<Math.min(innerHeight,e.bottom);s+=5){let a=t.root.elementFromPoint(o,s);if(!a||a==t.dom||!t.dom.contains(a))continue;let c=a.getBoundingClientRect();if(c.top>=n-20){r=a,i=c.top;break}}return{refDOM:r,refTop:i,stack:CT(t.dom)}}function CT(t){let e=[],n=t.ownerDocument;for(let r=t;r&&(e.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),t!=n);r=Zl(r));return e}function XB({refDOM:t,refTop:e,stack:n}){let r=t?t.getBoundingClientRect().top:0;ET(n,r==0?0:r-e)}function ET(t,e){for(let n=0;n<t.length;n++){let{dom:r,top:i,left:o}=t[n];r.scrollTop!=i+e&&(r.scrollTop=i+e),r.scrollLeft!=o&&(r.scrollLeft=o)}}let pl=null;function JB(t){if(t.setActive)return t.setActive();if(pl)return t.focus(pl);let e=CT(t);t.focus(pl==null?{get preventScroll(){return pl={preventScroll:!0},!0}}:void 0),pl||(pl=!1,ET(e,0))}function TT(t,e){let n,r=2e8,i,o=0,s=e.top,a=e.top,c,f;for(let d=t.firstChild,p=0;d;d=d.nextSibling,p++){let m;if(d.nodeType==1)m=d.getClientRects();else if(d.nodeType==3)m=$i(d).getClientRects();else continue;for(let g=0;g<m.length;g++){let v=m[g];if(v.top<=s&&v.bottom>=a){s=Math.max(v.bottom,s),a=Math.min(v.top,a);let k=v.left>e.left?v.left-e.left:v.right<e.left?e.left-v.right:0;if(k<r){n=d,r=k,i=k&&n.nodeType==3?{left:v.right<e.left?v.right:v.left,top:e.top}:e,d.nodeType==1&&k&&(o=p+(e.left>=(v.left+v.right)/2?1:0));continue}}else v.top>e.top&&!c&&v.left<=e.left&&v.right>=e.left&&(c=d,f={left:Math.max(v.left,Math.min(v.right,e.left)),top:v.top});!n&&(e.left>=v.right&&e.top>=v.top||e.left>=v.left&&e.top>=v.bottom)&&(o=p+1)}}return!n&&c&&(n=c,i=f,r=0),n&&n.nodeType==3?YB(n,i):!n||r&&n.nodeType==1?{node:t,offset:o}:TT(n,i)}function YB(t,e){let n=t.nodeValue.length,r=document.createRange(),i;for(let o=0;o<n;o++){r.setEnd(t,o+1),r.setStart(t,o);let s=yo(r,1);if(s.top!=s.bottom&&Gy(e,s)){i={node:t,offset:o+(e.left>=(s.left+s.right)/2?1:0)};break}}return r.detach(),i||{node:t,offset:0}}function Gy(t,e){return t.left>=e.left-1&&t.left<=e.right+1&&t.top>=e.top-1&&t.top<=e.bottom+1}function QB(t,e){let n=t.parentNode;return n&&/^li$/i.test(n.nodeName)&&e.left<t.getBoundingClientRect().left?n:t}function ZB(t,e,n){let{node:r,offset:i}=TT(e,n),o=-1;if(r.nodeType==1&&!r.firstChild){let s=r.getBoundingClientRect();o=s.left!=s.right&&n.left>(s.left+s.right)/2?1:-1}return t.docView.posFromDOM(r,i,o)}function ej(t,e,n,r){let i=-1;for(let o=e,s=!1;o!=t.dom;){let a=t.docView.nearestDesc(o,!0),c;if(!a)return null;if(a.dom.nodeType==1&&(a.node.isBlock&&a.parent||!a.contentDOM)&&((c=a.dom.getBoundingClientRect()).width||c.height)&&(a.node.isBlock&&a.parent&&!/^T(R|BODY|HEAD|FOOT)$/.test(a.dom.nodeName)&&(!s&&c.left>r.left||c.top>r.top?i=a.posBefore:(!s&&c.right<r.left||c.bottom<r.top)&&(i=a.posAfter),s=!0),!a.contentDOM&&i<0&&!a.node.isText))return(a.node.isBlock?r.top<(c.top+c.bottom)/2:r.left<(c.left+c.right)/2)?a.posBefore:a.posAfter;o=a.dom.parentNode}return i>-1?i:t.docView.posFromDOM(e,n,-1)}function MT(t,e,n){let r=t.childNodes.length;if(r&&n.top<n.bottom)for(let i=Math.max(0,Math.min(r-1,Math.floor(r*(e.top-n.top)/(n.bottom-n.top))-2)),o=i;;){let s=t.childNodes[o];if(s.nodeType==1){let a=s.getClientRects();for(let c=0;c<a.length;c++){let f=a[c];if(Gy(e,f))return MT(s,e,f)}}if((o=(o+1)%r)==i)break}return t}function tj(t,e){let n=t.dom.ownerDocument,r,i=0,o=VB(n,e.left,e.top);o&&({node:r,offset:i}=o);let s=(t.root.elementFromPoint?t.root:n).elementFromPoint(e.left,e.top),a;if(!s||!t.dom.contains(s.nodeType!=1?s.parentNode:s)){let f=t.dom.getBoundingClientRect();if(!Gy(e,f)||(s=MT(t.dom,e,f),!s))return null}if(en)for(let f=s;r&&f;f=Zl(f))f.draggable&&(r=void 0);if(s=QB(s,e),r){if(Fr&&r.nodeType==1&&(i=Math.min(i,r.childNodes.length),i<r.childNodes.length)){let d=r.childNodes[i],p;d.nodeName=="IMG"&&(p=d.getBoundingClientRect()).right<=e.left&&p.bottom>e.top&&i++}let f;Gu&&i&&r.nodeType==1&&(f=r.childNodes[i-1]).nodeType==1&&f.contentEditable=="false"&&f.getBoundingClientRect().top>=e.top&&i--,r==t.dom&&i==r.childNodes.length-1&&r.lastChild.nodeType==1&&e.top>r.lastChild.getBoundingClientRect().bottom?a=t.state.doc.content.size:(i==0||r.nodeType!=1||r.childNodes[i-1].nodeName!="BR")&&(a=ej(t,r,i,e))}a==null&&(a=ZB(t,s,e));let c=t.docView.nearestDesc(s,!0);return{pos:a,inside:c?c.posAtStart-c.border:-1}}function $S(t){return t.top<t.bottom||t.left<t.right}function yo(t,e){let n=t.getClientRects();if(n.length){let r=n[e<0?0:n.length-1];if($S(r))return r}return Array.prototype.find.call(n,$S)||t.getBoundingClientRect()}const nj=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function _T(t,e,n){let{node:r,offset:i,atom:o}=t.docView.domFromPos(e,n<0?-1:1),s=Gu||Fr;if(r.nodeType==3)if(s&&(nj.test(r.nodeValue)||(n<0?!i:i==r.nodeValue.length))){let c=yo($i(r,i,i),n);if(Fr&&i&&/\s/.test(r.nodeValue[i-1])&&i<r.nodeValue.length){let f=yo($i(r,i-1,i-1),-1);if(f.top==c.top){let d=yo($i(r,i,i+1),-1);if(d.top!=c.top)return La(d,d.left<f.left)}}return c}else{let c=i,f=i,d=n<0?1:-1;return n<0&&!i?(f++,d=-1):n>=0&&i==r.nodeValue.length?(c--,d=1):n<0?c--:f++,La(yo($i(r,c,f),d),d<0)}if(!t.state.doc.resolve(e-(o||0)).parent.inlineContent){if(o==null&&i&&(n<0||i==zr(r))){let c=r.childNodes[i-1];if(c.nodeType==1)return Km(c.getBoundingClientRect(),!1)}if(o==null&&i<zr(r)){let c=r.childNodes[i];if(c.nodeType==1)return Km(c.getBoundingClientRect(),!0)}return Km(r.getBoundingClientRect(),n>=0)}if(o==null&&i&&(n<0||i==zr(r))){let c=r.childNodes[i-1],f=c.nodeType==3?$i(c,zr(c)-(s?0:1)):c.nodeType==1&&(c.nodeName!="BR"||!c.nextSibling)?c:null;if(f)return La(yo(f,1),!1)}if(o==null&&i<zr(r)){let c=r.childNodes[i];for(;c.pmViewDesc&&c.pmViewDesc.ignoreForCoords;)c=c.nextSibling;let f=c?c.nodeType==3?$i(c,0,s?0:1):c.nodeType==1?c:null:null;if(f)return La(yo(f,-1),!0)}return La(yo(r.nodeType==3?$i(r):r,-n),n>=0)}function La(t,e){if(t.width==0)return t;let n=e?t.left:t.right;return{top:t.top,bottom:t.bottom,left:n,right:n}}function Km(t,e){if(t.height==0)return t;let n=e?t.top:t.bottom;return{top:n,bottom:n,left:t.left,right:t.right}}function NT(t,e,n){let r=t.state,i=t.root.activeElement;r!=e&&t.updateState(e),i!=t.dom&&t.focus();try{return n()}finally{r!=e&&t.updateState(r),i!=t.dom&&i&&i.focus()}}function rj(t,e,n){let r=e.selection,i=n=="up"?r.$from:r.$to;return NT(t,e,()=>{let{node:o}=t.docView.domFromPos(i.pos,n=="up"?-1:1);for(;;){let a=t.docView.nearestDesc(o,!0);if(!a)break;if(a.node.isBlock){o=a.contentDOM||a.dom;break}o=a.dom.parentNode}let s=_T(t,i.pos,1);for(let a=o.firstChild;a;a=a.nextSibling){let c;if(a.nodeType==1)c=a.getClientRects();else if(a.nodeType==3)c=$i(a,0,a.nodeValue.length).getClientRects();else continue;for(let f=0;f<c.length;f++){let d=c[f];if(d.bottom>d.top+1&&(n=="up"?s.top-d.top>(d.bottom-s.top)*2:d.bottom-s.bottom>(s.bottom-d.top)*2))return!1}}return!0})}const ij=/[\u0590-\u08ac]/;function oj(t,e,n){let{$head:r}=e.selection;if(!r.parent.isTextblock)return!1;let i=r.parentOffset,o=!i,s=i==r.parent.content.size,a=t.domSelection();return a?!ij.test(r.parent.textContent)||!a.modify?n=="left"||n=="backward"?o:s:NT(t,e,()=>{let{focusNode:c,focusOffset:f,anchorNode:d,anchorOffset:p}=t.domSelectionRange(),m=a.caretBidiLevel;a.modify("move",n,"character");let g=r.depth?t.docView.domAfterPos(r.before()):t.dom,{focusNode:v,focusOffset:k}=t.domSelectionRange(),b=v&&!g.contains(v.nodeType==1?v:v.parentNode)||c==v&&f==k;try{a.collapse(d,p),c&&(c!=d||f!=p)&&a.extend&&a.extend(c,f)}catch{}return m!=null&&(a.caretBidiLevel=m),b}):r.pos==r.start()||r.pos==r.end()}let HS=null,US=null,VS=!1;function sj(t,e,n){return HS==e&&US==n?VS:(HS=e,US=n,VS=n=="up"||n=="down"?rj(t,e,n):oj(t,e,n))}const $r=0,WS=1,ks=2,bi=3;class Xu{constructor(e,n,r,i){this.parent=e,this.children=n,this.dom=r,this.contentDOM=i,this.dirty=$r,r.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,n,r){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let n=0;n<this.children.length;n++)e+=this.children[n].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let n=0,r=this.posAtStart;;n++){let i=this.children[n];if(i==e)return r;r+=i.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,n,r){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(r<0){let o,s;if(e==this.contentDOM)o=e.childNodes[n-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;o=e.previousSibling}for(;o&&!((s=o.pmViewDesc)&&s.parent==this);)o=o.previousSibling;return o?this.posBeforeChild(s)+s.size:this.posAtStart}else{let o,s;if(e==this.contentDOM)o=e.childNodes[n];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;o=e.nextSibling}for(;o&&!((s=o.pmViewDesc)&&s.parent==this);)o=o.nextSibling;return o?this.posBeforeChild(s):this.posAtEnd}let i;if(e==this.dom&&this.contentDOM)i=n>Jt(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))i=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(n==0)for(let o=e;;o=o.parentNode){if(o==this.dom){i=!1;break}if(o.previousSibling)break}if(i==null&&n==e.childNodes.length)for(let o=e;;o=o.parentNode){if(o==this.dom){i=!0;break}if(o.nextSibling)break}}return i??r>0?this.posAtEnd:this.posAtStart}nearestDesc(e,n=!1){for(let r=!0,i=e;i;i=i.parentNode){let o=this.getDesc(i),s;if(o&&(!n||o.node))if(r&&(s=o.nodeDOM)&&!(s.nodeType==1?s.contains(e.nodeType==1?e:e.parentNode):s==e))r=!1;else return o}}getDesc(e){let n=e.pmViewDesc;for(let r=n;r;r=r.parent)if(r==this)return n}posFromDOM(e,n,r){for(let i=e;i;i=i.parentNode){let o=this.getDesc(i);if(o)return o.localPosFromDOM(e,n,r)}return-1}descAt(e){for(let n=0,r=0;n<this.children.length;n++){let i=this.children[n],o=r+i.size;if(r==e&&o!=r){for(;!i.border&&i.children.length;)for(let s=0;s<i.children.length;s++){let a=i.children[s];if(a.size){i=a;break}}return i}if(e<o)return i.descAt(e-r-i.border);r=o}}domFromPos(e,n){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let r=0,i=0;for(let o=0;r<this.children.length;r++){let s=this.children[r],a=o+s.size;if(a>e||s instanceof AT){i=e-o;break}o=a}if(i)return this.children[r].domFromPos(i-this.children[r].border,n);for(let o;r&&!(o=this.children[r-1]).size&&o instanceof OT&&o.side>=0;r--);if(n<=0){let o,s=!0;for(;o=r?this.children[r-1]:null,!(!o||o.dom.parentNode==this.contentDOM);r--,s=!1);return o&&n&&s&&!o.border&&!o.domAtom?o.domFromPos(o.size,n):{node:this.contentDOM,offset:o?Jt(o.dom)+1:0}}else{let o,s=!0;for(;o=r<this.children.length?this.children[r]:null,!(!o||o.dom.parentNode==this.contentDOM);r++,s=!1);return o&&s&&!o.border&&!o.domAtom?o.domFromPos(0,n):{node:this.contentDOM,offset:o?Jt(o.dom):this.contentDOM.childNodes.length}}}parseRange(e,n,r=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:n,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let i=-1,o=-1;for(let s=r,a=0;;a++){let c=this.children[a],f=s+c.size;if(i==-1&&e<=f){let d=s+c.border;if(e>=d&&n<=f-c.border&&c.node&&c.contentDOM&&this.contentDOM.contains(c.contentDOM))return c.parseRange(e,n,d);e=s;for(let p=a;p>0;p--){let m=this.children[p-1];if(m.size&&m.dom.parentNode==this.contentDOM&&!m.emptyChildAt(1)){i=Jt(m.dom)+1;break}e-=m.size}i==-1&&(i=0)}if(i>-1&&(f>n||a==this.children.length-1)){n=f;for(let d=a+1;d<this.children.length;d++){let p=this.children[d];if(p.size&&p.dom.parentNode==this.contentDOM&&!p.emptyChildAt(-1)){o=Jt(p.dom);break}n+=p.size}o==-1&&(o=this.contentDOM.childNodes.length);break}s=f}return{node:this.contentDOM,from:e,to:n,fromOffset:i,toOffset:o}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let n=this.children[e<0?0:this.children.length-1];return n.size==0||n.emptyChildAt(e)}domAfterPos(e){let{node:n,offset:r}=this.domFromPos(e,0);if(n.nodeType!=1||r==n.childNodes.length)throw new RangeError("No node after pos "+e);return n.childNodes[r]}setSelection(e,n,r,i=!1){let o=Math.min(e,n),s=Math.max(e,n);for(let g=0,v=0;g<this.children.length;g++){let k=this.children[g],b=v+k.size;if(o>v&&s<b)return k.setSelection(e-v-k.border,n-v-k.border,r,i);v=b}let a=this.domFromPos(e,e?-1:1),c=n==e?a:this.domFromPos(n,n?-1:1),f=r.root.getSelection(),d=r.domSelectionRange(),p=!1;if((Fr||en)&&e==n){let{node:g,offset:v}=a;if(g.nodeType==3){if(p=!!(v&&g.nodeValue[v-1]==`
`),p&&v==g.nodeValue.length)for(let k=g,b;k;k=k.parentNode){if(b=k.nextSibling){b.nodeName=="BR"&&(a=c={node:b.parentNode,offset:Jt(b)+1});break}let x=k.pmViewDesc;if(x&&x.node&&x.node.isBlock)break}}else{let k=g.childNodes[v-1];p=k&&(k.nodeName=="BR"||k.contentEditable=="false")}}if(Fr&&d.focusNode&&d.focusNode!=c.node&&d.focusNode.nodeType==1){let g=d.focusNode.childNodes[d.focusOffset];g&&g.contentEditable=="false"&&(i=!0)}if(!(i||p&&en)&&Fs(a.node,a.offset,d.anchorNode,d.anchorOffset)&&Fs(c.node,c.offset,d.focusNode,d.focusOffset))return;let m=!1;if((f.extend||e==n)&&!(p&&Fr)){f.collapse(a.node,a.offset);try{e!=n&&f.extend(c.node,c.offset),m=!0}catch{}}if(!m){if(e>n){let v=a;a=c,c=v}let g=document.createRange();g.setEnd(c.node,c.offset),g.setStart(a.node,a.offset),f.removeAllRanges(),f.addRange(g)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,n){for(let r=0,i=0;i<this.children.length;i++){let o=this.children[i],s=r+o.size;if(r==s?e<=s&&n>=r:e<s&&n>r){let a=r+o.border,c=s-o.border;if(e>=a&&n<=c){this.dirty=e==r||n==s?ks:WS,e==a&&n==c&&(o.contentLost||o.dom.parentNode!=this.contentDOM)?o.dirty=bi:o.markDirty(e-a,n-a);return}else o.dirty=o.dom==o.contentDOM&&o.dom.parentNode==this.contentDOM&&!o.children.length?ks:bi}r=s}this.dirty=ks}markParentsDirty(){let e=1;for(let n=this.parent;n;n=n.parent,e++){let r=e==1?ks:WS;n.dirty<r&&(n.dirty=r)}}get domAtom(){return!1}get ignoreForCoords(){return!1}get ignoreForSelection(){return!1}isText(e){return!1}}class OT extends Xu{constructor(e,n,r,i){let o,s=n.type.toDOM;if(typeof s=="function"&&(s=s(r,()=>{if(!o)return i;if(o.parent)return o.parent.posBeforeChild(o)})),!n.type.spec.raw){if(s.nodeType!=1){let a=document.createElement("span");a.appendChild(s),s=a}s.contentEditable="false",s.classList.add("ProseMirror-widget")}super(e,[],s,null),this.widget=n,this.widget=n,o=this}matchesWidget(e){return this.dirty==$r&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let n=this.widget.spec.stopEvent;return n?n(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get ignoreForSelection(){return!!this.widget.type.spec.relaxedSide}get side(){return this.widget.type.side}}class lj extends Xu{constructor(e,n,r,i){super(e,[],n,null),this.textDOM=r,this.text=i}get size(){return this.text.length}localPosFromDOM(e,n){return e!=this.textDOM?this.posAtStart+(n?this.size:0):this.posAtStart+n}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class $s extends Xu{constructor(e,n,r,i,o){super(e,[],r,i),this.mark=n,this.spec=o}static create(e,n,r,i){let o=i.nodeViews[n.type.name],s=o&&o(n,i,r);return(!s||!s.dom)&&(s=Ks.renderSpec(document,n.type.spec.toDOM(n,r),null,n.attrs)),new $s(e,n,s.dom,s.contentDOM||s.dom,s)}parseRule(){return this.dirty&bi||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=bi&&this.mark.eq(e)}markDirty(e,n){if(super.markDirty(e,n),this.dirty!=$r){let r=this.parent;for(;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=$r}}slice(e,n,r){let i=$s.create(this.parent,this.mark,!0,r),o=this.children,s=this.size;n<s&&(o=v0(o,n,s,r)),e>0&&(o=v0(o,0,e,r));for(let a=0;a<o.length;a++)o[a].parent=i;return i.children=o,i}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class Vo extends Xu{constructor(e,n,r,i,o,s,a,c,f){super(e,[],o,s),this.node=n,this.outerDeco=r,this.innerDeco=i,this.nodeDOM=a}static create(e,n,r,i,o,s){let a=o.nodeViews[n.type.name],c,f=a&&a(n,o,()=>{if(!c)return s;if(c.parent)return c.parent.posBeforeChild(c)},r,i),d=f&&f.dom,p=f&&f.contentDOM;if(n.isText){if(!d)d=document.createTextNode(n.text);else if(d.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else d||({dom:d,contentDOM:p}=Ks.renderSpec(document,n.type.spec.toDOM(n),null,n.attrs));!p&&!n.isText&&d.nodeName!="BR"&&(d.hasAttribute("contenteditable")||(d.contentEditable="false"),n.type.spec.draggable&&(d.draggable=!0));let m=d;return d=DT(d,r,n),f?c=new aj(e,n,r,i,d,p||null,m,f,o,s+1):n.isText?new Ah(e,n,r,i,d,m,o):new Vo(e,n,r,i,d,p||null,m,o,s+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let n=this.children.length-1;n>=0;n--){let r=this.children[n];if(this.dom.contains(r.dom.parentNode)){e.contentElement=r.dom.parentNode;break}}e.contentElement||(e.getContent=()=>q.empty)}return e}matchesNode(e,n,r){return this.dirty==$r&&e.eq(this.node)&&vd(n,this.outerDeco)&&r.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,n){let r=this.node.inlineContent,i=n,o=e.composing?this.localCompositionInfo(e,n):null,s=o&&o.pos>-1?o:null,a=o&&o.pos<0,c=new cj(this,s&&s.node,e);hj(this.node,this.innerDeco,(f,d,p)=>{f.spec.marks?c.syncToMarks(f.spec.marks,r,e,d):f.type.side>=0&&!p&&c.syncToMarks(d==this.node.childCount?qe.none:this.node.child(d).marks,r,e,d),c.placeWidget(f,e,i)},(f,d,p,m)=>{c.syncToMarks(f.marks,r,e,m);let g;c.findNodeMatch(f,d,p,m)||a&&e.state.selection.from>i&&e.state.selection.to<i+f.nodeSize&&(g=c.findIndexWithChild(o.node))>-1&&c.updateNodeAt(f,d,p,g,e)||c.updateNextNode(f,d,p,e,m,i)||c.addNode(f,d,p,e,i),i+=f.nodeSize}),c.syncToMarks([],r,e,0),this.node.isTextblock&&c.addTextblockHacks(),c.destroyRest(),(c.changed||this.dirty==ks)&&(s&&this.protectLocalComposition(e,s),PT(this.contentDOM,this.children,e),ea&&pj(this.dom))}localCompositionInfo(e,n){let{from:r,to:i}=e.state.selection;if(!(e.state.selection instanceof ve)||r<n||i>n+this.node.content.size)return null;let o=e.input.compositionNode;if(!o||!this.dom.contains(o.parentNode))return null;if(this.node.inlineContent){let s=o.nodeValue,a=mj(this.node.content,s,r-n,i-n);return a<0?null:{node:o,pos:a,text:s}}else return{node:o,pos:-1,text:""}}protectLocalComposition(e,{node:n,pos:r,text:i}){if(this.getDesc(n))return;let o=n;for(;o.parentNode!=this.contentDOM;o=o.parentNode){for(;o.previousSibling;)o.parentNode.removeChild(o.previousSibling);for(;o.nextSibling;)o.parentNode.removeChild(o.nextSibling);o.pmViewDesc&&(o.pmViewDesc=void 0)}let s=new lj(this,o,n,i);e.input.compositionNodes.push(s),this.children=v0(this.children,r,r+i.length,e,s)}update(e,n,r,i){return this.dirty==bi||!e.sameMarkup(this.node)?!1:(this.updateInner(e,n,r,i),!0)}updateInner(e,n,r,i){this.updateOuterDeco(n),this.node=e,this.innerDeco=r,this.contentDOM&&this.updateChildren(i,this.posAtStart),this.dirty=$r}updateOuterDeco(e){if(vd(e,this.outerDeco))return;let n=this.nodeDOM.nodeType!=1,r=this.dom;this.dom=RT(this.dom,this.nodeDOM,y0(this.outerDeco,this.node,n),y0(e,this.node,n)),this.dom!=r&&(r.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.nodeDOM.draggable=!0))}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.nodeDOM.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function KS(t,e,n,r,i){DT(r,e,t);let o=new Vo(void 0,t,e,n,r,r,r,i,0);return o.contentDOM&&o.updateChildren(i,0),o}class Ah extends Vo{constructor(e,n,r,i,o,s,a){super(e,n,r,i,o,null,s,a,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,n,r,i){return this.dirty==bi||this.dirty!=$r&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(n),(this.dirty!=$r||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,i.trackWrites==this.nodeDOM&&(i.trackWrites=null)),this.node=e,this.dirty=$r,!0)}inParent(){let e=this.parent.contentDOM;for(let n=this.nodeDOM;n;n=n.parentNode)if(n==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,n,r){return e==this.nodeDOM?this.posAtStart+Math.min(n,this.node.text.length):super.localPosFromDOM(e,n,r)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,n,r){let i=this.node.cut(e,n),o=document.createTextNode(i.text);return new Ah(this.parent,i,this.outerDeco,this.innerDeco,o,o,r)}markDirty(e,n){super.markDirty(e,n),this.dom!=this.nodeDOM&&(e==0||n==this.nodeDOM.nodeValue.length)&&(this.dirty=bi)}get domAtom(){return!1}isText(e){return this.node.text==e}}class AT extends Xu{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==$r&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class aj extends Vo{constructor(e,n,r,i,o,s,a,c,f,d){super(e,n,r,i,o,s,a,f,d),this.spec=c}update(e,n,r,i){if(this.dirty==bi)return!1;if(this.spec.update&&(this.node.type==e.type||this.spec.multiType)){let o=this.spec.update(e,n,r);return o&&this.updateInner(e,n,r,i),o}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,n,r,i)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,n,r,i){this.spec.setSelection?this.spec.setSelection(e,n,r.root):super.setSelection(e,n,r,i)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function PT(t,e,n){let r=t.firstChild,i=!1;for(let o=0;o<e.length;o++){let s=e[o],a=s.dom;if(a.parentNode==t){for(;a!=r;)r=qS(r),i=!0;r=r.nextSibling}else i=!0,t.insertBefore(a,r);if(s instanceof $s){let c=r?r.previousSibling:t.lastChild;PT(s.contentDOM,s.children,n),r=c?c.nextSibling:t.firstChild}}for(;r;)r=qS(r),i=!0;i&&n.trackWrites==t&&(n.trackWrites=null)}const su=function(t){t&&(this.nodeName=t)};su.prototype=Object.create(null);const bs=[new su];function y0(t,e,n){if(t.length==0)return bs;let r=n?bs[0]:new su,i=[r];for(let o=0;o<t.length;o++){let s=t[o].type.attrs;if(s){s.nodeName&&i.push(r=new su(s.nodeName));for(let a in s){let c=s[a];c!=null&&(n&&i.length==1&&i.push(r=new su(e.isInline?"span":"div")),a=="class"?r.class=(r.class?r.class+" ":"")+c:a=="style"?r.style=(r.style?r.style+";":"")+c:a!="nodeName"&&(r[a]=c))}}}return i}function RT(t,e,n,r){if(n==bs&&r==bs)return e;let i=e;for(let o=0;o<r.length;o++){let s=r[o],a=n[o];if(o){let c;a&&a.nodeName==s.nodeName&&i!=t&&(c=i.parentNode)&&c.nodeName.toLowerCase()==s.nodeName||(c=document.createElement(s.nodeName),c.pmIsDeco=!0,c.appendChild(i),a=bs[0]),i=c}uj(i,a||bs[0],s)}return i}function uj(t,e,n){for(let r in e)r!="class"&&r!="style"&&r!="nodeName"&&!(r in n)&&t.removeAttribute(r);for(let r in n)r!="class"&&r!="style"&&r!="nodeName"&&n[r]!=e[r]&&t.setAttribute(r,n[r]);if(e.class!=n.class){let r=e.class?e.class.split(" ").filter(Boolean):[],i=n.class?n.class.split(" ").filter(Boolean):[];for(let o=0;o<r.length;o++)i.indexOf(r[o])==-1&&t.classList.remove(r[o]);for(let o=0;o<i.length;o++)r.indexOf(i[o])==-1&&t.classList.add(i[o]);t.classList.length==0&&t.removeAttribute("class")}if(e.style!=n.style){if(e.style){let r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,i;for(;i=r.exec(e.style);)t.style.removeProperty(i[1])}n.style&&(t.style.cssText+=n.style)}}function DT(t,e,n){return RT(t,t,bs,y0(e,n,t.nodeType!=1))}function vd(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].type.eq(e[n].type))return!1;return!0}function qS(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class cj{constructor(e,n,r){this.lock=n,this.view=r,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=fj(e.node.content,e)}destroyBetween(e,n){if(e!=n){for(let r=e;r<n;r++)this.top.children[r].destroy();this.top.children.splice(e,n-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,n,r,i){let o=0,s=this.stack.length>>1,a=Math.min(s,e.length);for(;o<a&&(o==s-1?this.top:this.stack[o+1<<1]).matchesMark(e[o])&&e[o].type.spec.spanning!==!1;)o++;for(;o<s;)this.destroyRest(),this.top.dirty=$r,this.index=this.stack.pop(),this.top=this.stack.pop(),s--;for(;s<e.length;){this.stack.push(this.top,this.index+1);let c=-1,f=this.top.children.length;i<this.preMatch.index&&(f=Math.min(this.index+3,f));for(let d=this.index;d<f;d++){let p=this.top.children[d];if(p.matchesMark(e[s])&&!this.isLocked(p.dom)){c=d;break}}if(c>-1)c>this.index&&(this.changed=!0,this.destroyBetween(this.index,c)),this.top=this.top.children[this.index];else{let d=$s.create(this.top,e[s],n,r);this.top.children.splice(this.index,0,d),this.top=d,this.changed=!0}this.index=0,s++}}findNodeMatch(e,n,r,i){let o=-1,s;if(i>=this.preMatch.index&&(s=this.preMatch.matches[i-this.preMatch.index]).parent==this.top&&s.matchesNode(e,n,r))o=this.top.children.indexOf(s,this.index);else for(let a=this.index,c=Math.min(this.top.children.length,a+5);a<c;a++){let f=this.top.children[a];if(f.matchesNode(e,n,r)&&!this.preMatch.matched.has(f)){o=a;break}}return o<0?!1:(this.destroyBetween(this.index,o),this.index++,!0)}updateNodeAt(e,n,r,i,o){let s=this.top.children[i];return s.dirty==bi&&s.dom==s.contentDOM&&(s.dirty=ks),s.update(e,n,r,o)?(this.destroyBetween(this.index,i),this.index++,!0):!1}findIndexWithChild(e){for(;;){let n=e.parentNode;if(!n)return-1;if(n==this.top.contentDOM){let r=e.pmViewDesc;if(r){for(let i=this.index;i<this.top.children.length;i++)if(this.top.children[i]==r)return i}return-1}e=n}}updateNextNode(e,n,r,i,o,s){for(let a=this.index;a<this.top.children.length;a++){let c=this.top.children[a];if(c instanceof Vo){let f=this.preMatch.matched.get(c);if(f!=null&&f!=o)return!1;let d=c.dom,p,m=this.isLocked(d)&&!(e.isText&&c.node&&c.node.isText&&c.nodeDOM.nodeValue==e.text&&c.dirty!=bi&&vd(n,c.outerDeco));if(!m&&c.update(e,n,r,i))return this.destroyBetween(this.index,a),c.dom!=d&&(this.changed=!0),this.index++,!0;if(!m&&(p=this.recreateWrapper(c,e,n,r,i,s)))return this.destroyBetween(this.index,a),this.top.children[this.index]=p,p.contentDOM&&(p.dirty=ks,p.updateChildren(i,s+1),p.dirty=$r),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,n,r,i,o,s){if(e.dirty||n.isAtom||!e.children.length||!e.node.content.eq(n.content)||!vd(r,e.outerDeco)||!i.eq(e.innerDeco))return null;let a=Vo.create(this.top,n,r,i,o,s);if(a.contentDOM){a.children=e.children,e.children=[];for(let c of a.children)c.parent=a}return e.destroy(),a}addNode(e,n,r,i,o){let s=Vo.create(this.top,e,n,r,i,o);s.contentDOM&&s.updateChildren(i,o+1),this.top.children.splice(this.index++,0,s),this.changed=!0}placeWidget(e,n,r){let i=this.index<this.top.children.length?this.top.children[this.index]:null;if(i&&i.matchesWidget(e)&&(e==i.widget||!i.widget.type.toDOM.parentNode))this.index++;else{let o=new OT(this.top,e,n,r);this.top.children.splice(this.index++,0,o),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],n=this.top;for(;e instanceof $s;)n=e,e=n.children[n.children.length-1];(!e||!(e instanceof Ah)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((en||Ft)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",n),this.addHackNode("BR",this.top))}addHackNode(e,n){if(n==this.top&&this.index<n.children.length&&n.children[this.index].matchesHack(e))this.index++;else{let r=document.createElement(e);e=="IMG"&&(r.className="ProseMirror-separator",r.alt=""),e=="BR"&&(r.className="ProseMirror-trailingBreak");let i=new AT(this.top,[],r,null);n!=this.top?n.children.push(i):n.children.splice(this.index++,0,i),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function fj(t,e){let n=e,r=n.children.length,i=t.childCount,o=new Map,s=[];e:for(;i>0;){let a;for(;;)if(r){let f=n.children[r-1];if(f instanceof $s)n=f,r=f.children.length;else{a=f,r--;break}}else{if(n==e)break e;r=n.parent.children.indexOf(n),n=n.parent}let c=a.node;if(c){if(c!=t.child(i-1))break;--i,o.set(a,i),s.push(a)}}return{index:i,matched:o,matches:s.reverse()}}function dj(t,e){return t.type.side-e.type.side}function hj(t,e,n,r){let i=e.locals(t),o=0;if(i.length==0){for(let f=0;f<t.childCount;f++){let d=t.child(f);r(d,i,e.forChild(o,d),f),o+=d.nodeSize}return}let s=0,a=[],c=null;for(let f=0;;){let d,p;for(;s<i.length&&i[s].to==o;){let b=i[s++];b.widget&&(d?(p||(p=[d])).push(b):d=b)}if(d)if(p){p.sort(dj);for(let b=0;b<p.length;b++)n(p[b],f,!!c)}else n(d,f,!!c);let m,g;if(c)g=-1,m=c,c=null;else if(f<t.childCount)g=f,m=t.child(f++);else break;for(let b=0;b<a.length;b++)a[b].to<=o&&a.splice(b--,1);for(;s<i.length&&i[s].from<=o&&i[s].to>o;)a.push(i[s++]);let v=o+m.nodeSize;if(m.isText){let b=v;s<i.length&&i[s].from<b&&(b=i[s].from);for(let x=0;x<a.length;x++)a[x].to<b&&(b=a[x].to);b<v&&(c=m.cut(b-o),m=m.cut(0,b-o),v=b,g=-1)}else for(;s<i.length&&i[s].to<v;)s++;let k=m.isInline&&!m.isLeaf?a.filter(b=>!b.inline):a.slice();r(m,k,e.forChild(o,m),g),o=v}}function pj(t){if(t.nodeName=="UL"||t.nodeName=="OL"){let e=t.style.cssText;t.style.cssText=e+"; list-style: square !important",window.getComputedStyle(t).listStyle,t.style.cssText=e}}function mj(t,e,n,r){for(let i=0,o=0;i<t.childCount&&o<=r;){let s=t.child(i++),a=o;if(o+=s.nodeSize,!s.isText)continue;let c=s.text;for(;i<t.childCount;){let f=t.child(i++);if(o+=f.nodeSize,!f.isText)break;c+=f.text}if(o>=n){if(o>=r&&c.slice(r-e.length-a,r-a)==e)return r-e.length;let f=a<r?c.lastIndexOf(e,r-a-1):-1;if(f>=0&&f+e.length+a>=n)return a+f;if(n==r&&c.length>=r+e.length-a&&c.slice(r-a,r-a+e.length)==e)return r}}return-1}function v0(t,e,n,r,i){let o=[];for(let s=0,a=0;s<t.length;s++){let c=t[s],f=a,d=a+=c.size;f>=n||d<=e?o.push(c):(f<e&&o.push(c.slice(0,e-f,r)),i&&(o.push(i),i=void 0),d>n&&o.push(c.slice(n-f,c.size,r)))}return o}function Xy(t,e=null){let n=t.domSelectionRange(),r=t.state.doc;if(!n.focusNode)return null;let i=t.docView.nearestDesc(n.focusNode),o=i&&i.size==0,s=t.docView.posFromDOM(n.focusNode,n.focusOffset,1);if(s<0)return null;let a=r.resolve(s),c,f;if(Oh(n)){for(c=s;i&&!i.node;)i=i.parent;let p=i.node;if(i&&p.isAtom&&ce.isSelectable(p)&&i.parent&&!(p.isInline&&HB(n.focusNode,n.focusOffset,i.dom))){let m=i.posBefore;f=new ce(s==m?a:r.resolve(m))}}else{if(n instanceof t.dom.ownerDocument.defaultView.Selection&&n.rangeCount>1){let p=s,m=s;for(let g=0;g<n.rangeCount;g++){let v=n.getRangeAt(g);p=Math.min(p,t.docView.posFromDOM(v.startContainer,v.startOffset,1)),m=Math.max(m,t.docView.posFromDOM(v.endContainer,v.endOffset,-1))}if(p<0)return null;[c,s]=m==t.state.selection.anchor?[m,p]:[p,m],a=r.resolve(s)}else c=t.docView.posFromDOM(n.anchorNode,n.anchorOffset,1);if(c<0)return null}let d=r.resolve(c);if(!f){let p=e=="pointer"||t.state.selection.head<a.pos&&!o?1:-1;f=Jy(t,d,a,p)}return f}function IT(t){return t.editable?t.hasFocus():zT(t)&&document.activeElement&&document.activeElement.contains(t.dom)}function Gi(t,e=!1){let n=t.state.selection;if(LT(t,n),!!IT(t)){if(!e&&t.input.mouseDown&&t.input.mouseDown.allowDefault&&Ft){let r=t.domSelectionRange(),i=t.domObserver.currentSelection;if(r.anchorNode&&i.anchorNode&&Fs(r.anchorNode,r.anchorOffset,i.anchorNode,i.anchorOffset)){t.input.mouseDown.delayedSelectionSync=!0,t.domObserver.setCurSelection();return}}if(t.domObserver.disconnectSelection(),t.cursorWrapper)yj(t);else{let{anchor:r,head:i}=n,o,s;GS&&!(n instanceof ve)&&(n.$from.parent.inlineContent||(o=XS(t,n.from)),!n.empty&&!n.$from.parent.inlineContent&&(s=XS(t,n.to))),t.docView.setSelection(r,i,t,e),GS&&(o&&JS(o),s&&JS(s)),n.visible?t.dom.classList.remove("ProseMirror-hideselection"):(t.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&gj(t))}t.domObserver.setCurSelection(),t.domObserver.connectSelection()}}const GS=en||Ft&&kT<63;function XS(t,e){let{node:n,offset:r}=t.docView.domFromPos(e,0),i=r<n.childNodes.length?n.childNodes[r]:null,o=r?n.childNodes[r-1]:null;if(en&&i&&i.contentEditable=="false")return qm(i);if((!i||i.contentEditable=="false")&&(!o||o.contentEditable=="false")){if(i)return qm(i);if(o)return qm(o)}}function qm(t){return t.contentEditable="true",en&&t.draggable&&(t.draggable=!1,t.wasDraggable=!0),t}function JS(t){t.contentEditable="false",t.wasDraggable&&(t.draggable=!0,t.wasDraggable=null)}function gj(t){let e=t.dom.ownerDocument;e.removeEventListener("selectionchange",t.input.hideSelectionGuard);let n=t.domSelectionRange(),r=n.anchorNode,i=n.anchorOffset;e.addEventListener("selectionchange",t.input.hideSelectionGuard=()=>{(n.anchorNode!=r||n.anchorOffset!=i)&&(e.removeEventListener("selectionchange",t.input.hideSelectionGuard),setTimeout(()=>{(!IT(t)||t.state.selection.visible)&&t.dom.classList.remove("ProseMirror-hideselection")},20))})}function yj(t){let e=t.domSelection();if(!e)return;let n=t.cursorWrapper.dom,r=n.nodeName=="IMG";r?e.collapse(n.parentNode,Jt(n)+1):e.collapse(n,0),!r&&!t.state.selection.visible&&Xn&&Uo<=11&&(n.disabled=!0,n.disabled=!1)}function LT(t,e){if(e instanceof ce){let n=t.docView.descAt(e.from);n!=t.lastSelectedViewDesc&&(YS(t),n&&n.selectNode(),t.lastSelectedViewDesc=n)}else YS(t)}function YS(t){t.lastSelectedViewDesc&&(t.lastSelectedViewDesc.parent&&t.lastSelectedViewDesc.deselectNode(),t.lastSelectedViewDesc=void 0)}function Jy(t,e,n,r){return t.someProp("createSelectionBetween",i=>i(t,e,n))||ve.between(e,n,r)}function QS(t){return t.editable&&!t.hasFocus()?!1:zT(t)}function zT(t){let e=t.domSelectionRange();if(!e.anchorNode)return!1;try{return t.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(t.editable||t.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function vj(t){let e=t.docView.domFromPos(t.state.selection.anchor,0),n=t.domSelectionRange();return Fs(e.node,e.offset,n.anchorNode,n.anchorOffset)}function x0(t,e){let{$anchor:n,$head:r}=t.selection,i=e>0?n.max(r):n.min(r),o=i.parent.inlineContent?i.depth?t.doc.resolve(e>0?i.after():i.before()):null:i;return o&&Te.findFrom(o,e)}function wo(t,e){return t.dispatch(t.state.tr.setSelection(e).scrollIntoView()),!0}function ZS(t,e,n){let r=t.state.selection;if(r instanceof ve)if(n.indexOf("s")>-1){let{$head:i}=r,o=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter;if(!o||o.isText||!o.isLeaf)return!1;let s=t.state.doc.resolve(i.pos+o.nodeSize*(e<0?-1:1));return wo(t,new ve(r.$anchor,s))}else if(r.empty){if(t.endOfTextblock(e>0?"forward":"backward")){let i=x0(t.state,e);return i&&i instanceof ce?wo(t,i):!1}else if(!(Dr&&n.indexOf("m")>-1)){let i=r.$head,o=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter,s;if(!o||o.isText)return!1;let a=e<0?i.pos-o.nodeSize:i.pos;return o.isAtom||(s=t.docView.descAt(a))&&!s.contentDOM?ce.isSelectable(o)?wo(t,new ce(e<0?t.state.doc.resolve(i.pos-o.nodeSize):i)):Gu?wo(t,new ve(t.state.doc.resolve(e<0?a:a+o.nodeSize))):!1:!1}}else return!1;else{if(r instanceof ce&&r.node.isInline)return wo(t,new ve(e>0?r.$to:r.$from));{let i=x0(t.state,e);return i?wo(t,i):!1}}}function xd(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function lu(t,e){let n=t.pmViewDesc;return n&&n.size==0&&(e<0||t.nextSibling||t.nodeName!="BR")}function ml(t,e){return e<0?xj(t):wj(t)}function xj(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let i,o,s=!1;for(Fr&&n.nodeType==1&&r<xd(n)&&lu(n.childNodes[r],-1)&&(s=!0);;)if(r>0){if(n.nodeType!=1)break;{let a=n.childNodes[r-1];if(lu(a,-1))i=n,o=--r;else if(a.nodeType==3)n=a,r=n.nodeValue.length;else break}}else{if(BT(n))break;{let a=n.previousSibling;for(;a&&lu(a,-1);)i=n.parentNode,o=Jt(a),a=a.previousSibling;if(a)n=a,r=xd(n);else{if(n=n.parentNode,n==t.dom)break;r=0}}}s?w0(t,n,r):i&&w0(t,i,o)}function wj(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let i=xd(n),o,s;for(;;)if(r<i){if(n.nodeType!=1)break;let a=n.childNodes[r];if(lu(a,1))o=n,s=++r;else break}else{if(BT(n))break;{let a=n.nextSibling;for(;a&&lu(a,1);)o=a.parentNode,s=Jt(a)+1,a=a.nextSibling;if(a)n=a,r=0,i=xd(n);else{if(n=n.parentNode,n==t.dom)break;r=i=0}}}o&&w0(t,o,s)}function BT(t){let e=t.pmViewDesc;return e&&e.node&&e.node.isBlock}function Sj(t,e){for(;t&&e==t.childNodes.length&&!qu(t);)e=Jt(t)+1,t=t.parentNode;for(;t&&e<t.childNodes.length;){let n=t.childNodes[e];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=0}}function kj(t,e){for(;t&&!e&&!qu(t);)e=Jt(t),t=t.parentNode;for(;t&&e;){let n=t.childNodes[e-1];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=t.childNodes.length}}function w0(t,e,n){if(e.nodeType!=3){let o,s;(s=Sj(e,n))?(e=s,n=0):(o=kj(e,n))&&(e=o,n=o.nodeValue.length)}let r=t.domSelection();if(!r)return;if(Oh(r)){let o=document.createRange();o.setEnd(e,n),o.setStart(e,n),r.removeAllRanges(),r.addRange(o)}else r.extend&&r.extend(e,n);t.domObserver.setCurSelection();let{state:i}=t;setTimeout(()=>{t.state==i&&Gi(t)},50)}function ek(t,e){let n=t.state.doc.resolve(e);if(!(Ft||bT)&&n.parent.inlineContent){let i=t.coordsAtPos(e);if(e>n.start()){let o=t.coordsAtPos(e-1),s=(o.top+o.bottom)/2;if(s>i.top&&s<i.bottom&&Math.abs(o.left-i.left)>1)return o.left<i.left?"ltr":"rtl"}if(e<n.end()){let o=t.coordsAtPos(e+1),s=(o.top+o.bottom)/2;if(s>i.top&&s<i.bottom&&Math.abs(o.left-i.left)>1)return o.left>i.left?"ltr":"rtl"}}return getComputedStyle(t.dom).direction=="rtl"?"rtl":"ltr"}function tk(t,e,n){let r=t.state.selection;if(r instanceof ve&&!r.empty||n.indexOf("s")>-1||Dr&&n.indexOf("m")>-1)return!1;let{$from:i,$to:o}=r;if(!i.parent.inlineContent||t.endOfTextblock(e<0?"up":"down")){let s=x0(t.state,e);if(s&&s instanceof ce)return wo(t,s)}if(!i.parent.inlineContent){let s=e<0?i:o,a=r instanceof pr?Te.near(s,e):Te.findFrom(s,e);return a?wo(t,a):!1}return!1}function nk(t,e){if(!(t.state.selection instanceof ve))return!0;let{$head:n,$anchor:r,empty:i}=t.state.selection;if(!n.sameParent(r))return!0;if(!i)return!1;if(t.endOfTextblock(e>0?"forward":"backward"))return!0;let o=!n.textOffset&&(e<0?n.nodeBefore:n.nodeAfter);if(o&&!o.isText){let s=t.state.tr;return e<0?s.delete(n.pos-o.nodeSize,n.pos):s.delete(n.pos,n.pos+o.nodeSize),t.dispatch(s),!0}return!1}function rk(t,e,n){t.domObserver.stop(),e.contentEditable=n,t.domObserver.start()}function bj(t){if(!en||t.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:n}=t.domSelectionRange();if(e&&e.nodeType==1&&n==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let r=e.firstChild;rk(t,r,"true"),setTimeout(()=>rk(t,r,"false"),20)}return!1}function Cj(t){let e="";return t.ctrlKey&&(e+="c"),t.metaKey&&(e+="m"),t.altKey&&(e+="a"),t.shiftKey&&(e+="s"),e}function Ej(t,e){let n=e.keyCode,r=Cj(e);if(n==8||Dr&&n==72&&r=="c")return nk(t,-1)||ml(t,-1);if(n==46&&!e.shiftKey||Dr&&n==68&&r=="c")return nk(t,1)||ml(t,1);if(n==13||n==27)return!0;if(n==37||Dr&&n==66&&r=="c"){let i=n==37?ek(t,t.state.selection.from)=="ltr"?-1:1:-1;return ZS(t,i,r)||ml(t,i)}else if(n==39||Dr&&n==70&&r=="c"){let i=n==39?ek(t,t.state.selection.from)=="ltr"?1:-1:1;return ZS(t,i,r)||ml(t,i)}else{if(n==38||Dr&&n==80&&r=="c")return tk(t,-1,r)||ml(t,-1);if(n==40||Dr&&n==78&&r=="c")return bj(t)||tk(t,1,r)||ml(t,1);if(r==(Dr?"m":"c")&&(n==66||n==73||n==89||n==90))return!0}return!1}function Yy(t,e){t.someProp("transformCopied",g=>{e=g(e,t)});let n=[],{content:r,openStart:i,openEnd:o}=e;for(;i>1&&o>1&&r.childCount==1&&r.firstChild.childCount==1;){i--,o--;let g=r.firstChild;n.push(g.type.name,g.attrs!=g.type.defaultAttrs?g.attrs:null),r=g.content}let s=t.someProp("clipboardSerializer")||Ks.fromSchema(t.state.schema),a=VT(),c=a.createElement("div");c.appendChild(s.serializeFragment(r,{document:a}));let f=c.firstChild,d,p=0;for(;f&&f.nodeType==1&&(d=UT[f.nodeName.toLowerCase()]);){for(let g=d.length-1;g>=0;g--){let v=a.createElement(d[g]);for(;c.firstChild;)v.appendChild(c.firstChild);c.appendChild(v),p++}f=c.firstChild}f&&f.nodeType==1&&f.setAttribute("data-pm-slice",`${i} ${o}${p?` -${p}`:""} ${JSON.stringify(n)}`);let m=t.someProp("clipboardTextSerializer",g=>g(e,t))||e.content.textBetween(0,e.content.size,`

`);return{dom:c,text:m,slice:e}}function jT(t,e,n,r,i){let o=i.parent.type.spec.code,s,a;if(!n&&!e)return null;let c=!!e&&(r||o||!n);if(c){if(t.someProp("transformPastedText",m=>{e=m(e,o||r,t)}),o)return a=new te(q.from(t.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0),t.someProp("transformPasted",m=>{a=m(a,t,!0)}),a;let p=t.someProp("clipboardTextParser",m=>m(e,i,r,t));if(p)a=p;else{let m=i.marks(),{schema:g}=t.state,v=Ks.fromSchema(g);s=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(k=>{let b=s.appendChild(document.createElement("p"));k&&b.appendChild(v.serializeNode(g.text(k,m)))})}}else t.someProp("transformPastedHTML",p=>{n=p(n,t)}),s=Nj(n),Gu&&Oj(s);let f=s&&s.querySelector("[data-pm-slice]"),d=f&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(f.getAttribute("data-pm-slice")||"");if(d&&d[3])for(let p=+d[3];p>0;p--){let m=s.firstChild;for(;m&&m.nodeType!=1;)m=m.nextSibling;if(!m)break;s=m}if(a||(a=(t.someProp("clipboardParser")||t.someProp("domParser")||Ho.fromSchema(t.state.schema)).parseSlice(s,{preserveWhitespace:!!(c||d),context:i,ruleFromNode(m){return m.nodeName=="BR"&&!m.nextSibling&&m.parentNode&&!Tj.test(m.parentNode.nodeName)?{ignore:!0}:null}})),d)a=Aj(ik(a,+d[1],+d[2]),d[4]);else if(a=te.maxOpen(Mj(a.content,i),!0),a.openStart||a.openEnd){let p=0,m=0;for(let g=a.content.firstChild;p<a.openStart&&!g.type.spec.isolating;p++,g=g.firstChild);for(let g=a.content.lastChild;m<a.openEnd&&!g.type.spec.isolating;m++,g=g.lastChild);a=ik(a,p,m)}return t.someProp("transformPasted",p=>{a=p(a,t,c)}),a}const Tj=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function Mj(t,e){if(t.childCount<2)return t;for(let n=e.depth;n>=0;n--){let i=e.node(n).contentMatchAt(e.index(n)),o,s=[];if(t.forEach(a=>{if(!s)return;let c=i.findWrapping(a.type),f;if(!c)return s=null;if(f=s.length&&o.length&&$T(c,o,a,s[s.length-1],0))s[s.length-1]=f;else{s.length&&(s[s.length-1]=HT(s[s.length-1],o.length));let d=FT(a,c);s.push(d),i=i.matchType(d.type),o=c}}),s)return q.from(s)}return t}function FT(t,e,n=0){for(let r=e.length-1;r>=n;r--)t=e[r].create(null,q.from(t));return t}function $T(t,e,n,r,i){if(i<t.length&&i<e.length&&t[i]==e[i]){let o=$T(t,e,n,r.lastChild,i+1);if(o)return r.copy(r.content.replaceChild(r.childCount-1,o));if(r.contentMatchAt(r.childCount).matchType(i==t.length-1?n.type:t[i+1]))return r.copy(r.content.append(q.from(FT(n,t,i+1))))}}function HT(t,e){if(e==0)return t;let n=t.content.replaceChild(t.childCount-1,HT(t.lastChild,e-1)),r=t.contentMatchAt(t.childCount).fillBefore(q.empty,!0);return t.copy(n.append(r))}function S0(t,e,n,r,i,o){let s=e<0?t.firstChild:t.lastChild,a=s.content;return t.childCount>1&&(o=0),i<r-1&&(a=S0(a,e,n,r,i+1,o)),i>=n&&(a=e<0?s.contentMatchAt(0).fillBefore(a,o<=i).append(a):a.append(s.contentMatchAt(s.childCount).fillBefore(q.empty,!0))),t.replaceChild(e<0?0:t.childCount-1,s.copy(a))}function ik(t,e,n){return e<t.openStart&&(t=new te(S0(t.content,-1,e,t.openStart,0,t.openEnd),e,t.openEnd)),n<t.openEnd&&(t=new te(S0(t.content,1,n,t.openEnd,0,0),t.openStart,n)),t}const UT={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let ok=null;function VT(){return ok||(ok=document.implementation.createHTMLDocument("title"))}let Gm=null;function _j(t){let e=window.trustedTypes;return e?(Gm||(Gm=e.defaultPolicy||e.createPolicy("ProseMirrorClipboard",{createHTML:n=>n})),Gm.createHTML(t)):t}function Nj(t){let e=/^(\s*<meta [^>]*>)*/.exec(t);e&&(t=t.slice(e[0].length));let n=VT().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(t),i;if((i=r&&UT[r[1].toLowerCase()])&&(t=i.map(o=>"<"+o+">").join("")+t+i.map(o=>"</"+o+">").reverse().join("")),n.innerHTML=_j(t),i)for(let o=0;o<i.length;o++)n=n.querySelector(i[o])||n;return n}function Oj(t){let e=t.querySelectorAll(Ft?"span:not([class]):not([style])":"span.Apple-converted-space");for(let n=0;n<e.length;n++){let r=e[n];r.childNodes.length==1&&r.textContent==""&&r.parentNode&&r.parentNode.replaceChild(t.ownerDocument.createTextNode(" "),r)}}function Aj(t,e){if(!t.size)return t;let n=t.content.firstChild.type.schema,r;try{r=JSON.parse(e)}catch{return t}let{content:i,openStart:o,openEnd:s}=t;for(let a=r.length-2;a>=0;a-=2){let c=n.nodes[r[a]];if(!c||c.hasRequiredAttrs())break;i=q.from(c.create(r[a+1],i)),o++,s++}return new te(i,o,s)}const Mn={},_n={},Pj={touchstart:!0,touchmove:!0};class Rj{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:"",button:0},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.badSafariComposition=!1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function Dj(t){for(let e in Mn){let n=Mn[e];t.dom.addEventListener(e,t.input.eventHandlers[e]=r=>{Lj(t,r)&&!Qy(t,r)&&(t.editable||!(r.type in _n))&&n(t,r)},Pj[e]?{passive:!0}:void 0)}en&&t.dom.addEventListener("input",()=>null),k0(t)}function Po(t,e){t.input.lastSelectionOrigin=e,t.input.lastSelectionTime=Date.now()}function Ij(t){t.domObserver.stop();for(let e in t.input.eventHandlers)t.dom.removeEventListener(e,t.input.eventHandlers[e]);clearTimeout(t.input.composingTimeout),clearTimeout(t.input.lastIOSEnterFallbackTimeout)}function k0(t){t.someProp("handleDOMEvents",e=>{for(let n in e)t.input.eventHandlers[n]||t.dom.addEventListener(n,t.input.eventHandlers[n]=r=>Qy(t,r))})}function Qy(t,e){return t.someProp("handleDOMEvents",n=>{let r=n[e.type];return r?r(t,e)||e.defaultPrevented:!1})}function Lj(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n=e.target;n!=t.dom;n=n.parentNode)if(!n||n.nodeType==11||n.pmViewDesc&&n.pmViewDesc.stopEvent(e))return!1;return!0}function zj(t,e){!Qy(t,e)&&Mn[e.type]&&(t.editable||!(e.type in _n))&&Mn[e.type](t,e)}_n.keydown=(t,e)=>{let n=e;if(t.input.shiftKey=n.keyCode==16||n.shiftKey,!KT(t,n)&&(t.input.lastKeyCode=n.keyCode,t.input.lastKeyCodeTime=Date.now(),!(Wi&&Ft&&n.keyCode==13)))if(n.keyCode!=229&&t.domObserver.forceFlush(),ea&&n.keyCode==13&&!n.ctrlKey&&!n.altKey&&!n.metaKey){let r=Date.now();t.input.lastIOSEnter=r,t.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{t.input.lastIOSEnter==r&&(t.someProp("handleKeyDown",i=>i(t,vs(13,"Enter"))),t.input.lastIOSEnter=0)},200)}else t.someProp("handleKeyDown",r=>r(t,n))||Ej(t,n)?n.preventDefault():Po(t,"key")};_n.keyup=(t,e)=>{e.keyCode==16&&(t.input.shiftKey=!1)};_n.keypress=(t,e)=>{let n=e;if(KT(t,n)||!n.charCode||n.ctrlKey&&!n.altKey||Dr&&n.metaKey)return;if(t.someProp("handleKeyPress",i=>i(t,n))){n.preventDefault();return}let r=t.state.selection;if(!(r instanceof ve)||!r.$from.sameParent(r.$to)){let i=String.fromCharCode(n.charCode),o=()=>t.state.tr.insertText(i).scrollIntoView();!/[\r\n]/.test(i)&&!t.someProp("handleTextInput",s=>s(t,r.$from.pos,r.$to.pos,i,o))&&t.dispatch(o()),n.preventDefault()}};function Ph(t){return{left:t.clientX,top:t.clientY}}function Bj(t,e){let n=e.x-t.clientX,r=e.y-t.clientY;return n*n+r*r<100}function Zy(t,e,n,r,i){if(r==-1)return!1;let o=t.state.doc.resolve(r);for(let s=o.depth+1;s>0;s--)if(t.someProp(e,a=>s>o.depth?a(t,n,o.nodeAfter,o.before(s),i,!0):a(t,n,o.node(s),o.before(s),i,!1)))return!0;return!1}function Hl(t,e,n){if(t.focused||t.focus(),t.state.selection.eq(e))return;let r=t.state.tr.setSelection(e);r.setMeta("pointer",!0),t.dispatch(r)}function jj(t,e){if(e==-1)return!1;let n=t.state.doc.resolve(e),r=n.nodeAfter;return r&&r.isAtom&&ce.isSelectable(r)?(Hl(t,new ce(n)),!0):!1}function Fj(t,e){if(e==-1)return!1;let n=t.state.selection,r,i;n instanceof ce&&(r=n.node);let o=t.state.doc.resolve(e);for(let s=o.depth+1;s>0;s--){let a=s>o.depth?o.nodeAfter:o.node(s);if(ce.isSelectable(a)){r&&n.$from.depth>0&&s>=n.$from.depth&&o.before(n.$from.depth+1)==n.$from.pos?i=o.before(n.$from.depth):i=o.before(s);break}}return i!=null?(Hl(t,ce.create(t.state.doc,i)),!0):!1}function $j(t,e,n,r,i){return Zy(t,"handleClickOn",e,n,r)||t.someProp("handleClick",o=>o(t,e,r))||(i?Fj(t,n):jj(t,n))}function Hj(t,e,n,r){return Zy(t,"handleDoubleClickOn",e,n,r)||t.someProp("handleDoubleClick",i=>i(t,e,r))}function Uj(t,e,n,r){return Zy(t,"handleTripleClickOn",e,n,r)||t.someProp("handleTripleClick",i=>i(t,e,r))||Vj(t,n,r)}function Vj(t,e,n){if(n.button!=0)return!1;let r=t.state.doc;if(e==-1)return r.inlineContent?(Hl(t,ve.create(r,0,r.content.size)),!0):!1;let i=r.resolve(e);for(let o=i.depth+1;o>0;o--){let s=o>i.depth?i.nodeAfter:i.node(o),a=i.before(o);if(s.inlineContent)Hl(t,ve.create(r,a+1,a+1+s.content.size));else if(ce.isSelectable(s))Hl(t,ce.create(r,a));else continue;return!0}}function ev(t){return wd(t)}const WT=Dr?"metaKey":"ctrlKey";Mn.mousedown=(t,e)=>{let n=e;t.input.shiftKey=n.shiftKey;let r=ev(t),i=Date.now(),o="singleClick";i-t.input.lastClick.time<500&&Bj(n,t.input.lastClick)&&!n[WT]&&t.input.lastClick.button==n.button&&(t.input.lastClick.type=="singleClick"?o="doubleClick":t.input.lastClick.type=="doubleClick"&&(o="tripleClick")),t.input.lastClick={time:i,x:n.clientX,y:n.clientY,type:o,button:n.button};let s=t.posAtCoords(Ph(n));s&&(o=="singleClick"?(t.input.mouseDown&&t.input.mouseDown.done(),t.input.mouseDown=new Wj(t,s,n,!!r)):(o=="doubleClick"?Hj:Uj)(t,s.pos,s.inside,n)?n.preventDefault():Po(t,"pointer"))};class Wj{constructor(e,n,r,i){this.view=e,this.pos=n,this.event=r,this.flushed=i,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!r[WT],this.allowDefault=r.shiftKey;let o,s;if(n.inside>-1)o=e.state.doc.nodeAt(n.inside),s=n.inside;else{let d=e.state.doc.resolve(n.pos);o=d.parent,s=d.depth?d.before():0}const a=i?null:r.target,c=a?e.docView.nearestDesc(a,!0):null;this.target=c&&c.nodeDOM.nodeType==1?c.nodeDOM:null;let{selection:f}=e.state;(r.button==0&&o.type.spec.draggable&&o.type.spec.selectable!==!1||f instanceof ce&&f.from<=s&&f.to>s)&&(this.mightDrag={node:o,pos:s,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&Fr&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),Po(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>Gi(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let n=this.pos;this.view.state.doc!=this.startDoc&&(n=this.view.posAtCoords(Ph(e))),this.updateAllowDefault(e),this.allowDefault||!n?Po(this.view,"pointer"):$j(this.view,n.pos,n.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||en&&this.mightDrag&&!this.mightDrag.node.isAtom||Ft&&!this.view.state.selection.visible&&Math.min(Math.abs(n.pos-this.view.state.selection.from),Math.abs(n.pos-this.view.state.selection.to))<=2)?(Hl(this.view,Te.near(this.view.state.doc.resolve(n.pos))),e.preventDefault()):Po(this.view,"pointer")}move(e){this.updateAllowDefault(e),Po(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}Mn.touchstart=t=>{t.input.lastTouch=Date.now(),ev(t),Po(t,"pointer")};Mn.touchmove=t=>{t.input.lastTouch=Date.now(),Po(t,"pointer")};Mn.contextmenu=t=>ev(t);function KT(t,e){return t.composing?!0:en&&Math.abs(e.timeStamp-t.input.compositionEndedAt)<500?(t.input.compositionEndedAt=-2e8,!0):!1}const Kj=Wi?5e3:-1;_n.compositionstart=_n.compositionupdate=t=>{if(!t.composing){t.domObserver.flush();let{state:e}=t,n=e.selection.$to;if(e.selection instanceof ve&&(e.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some(r=>r.type.spec.inclusive===!1)||Ft&&bT&&qj(t)))t.markCursor=t.state.storedMarks||n.marks(),wd(t,!0),t.markCursor=null;else if(wd(t,!e.selection.empty),Fr&&e.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length){let r=t.domSelectionRange();for(let i=r.focusNode,o=r.focusOffset;i&&i.nodeType==1&&o!=0;){let s=o<0?i.lastChild:i.childNodes[o-1];if(!s)break;if(s.nodeType==3){let a=t.domSelection();a&&a.collapse(s,s.nodeValue.length);break}else i=s,o=-1}}t.input.composing=!0}qT(t,Kj)};function qj(t){let{focusNode:e,focusOffset:n}=t.domSelectionRange();if(!e||e.nodeType!=1||n>=e.childNodes.length)return!1;let r=e.childNodes[n];return r.nodeType==1&&r.contentEditable=="false"}_n.compositionend=(t,e)=>{t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=e.timeStamp,t.input.compositionPendingChanges=t.domObserver.pendingRecords().length?t.input.compositionID:0,t.input.compositionNode=null,t.input.badSafariComposition?t.domObserver.forceFlush():t.input.compositionPendingChanges&&Promise.resolve().then(()=>t.domObserver.flush()),t.input.compositionID++,qT(t,20))};function qT(t,e){clearTimeout(t.input.composingTimeout),e>-1&&(t.input.composingTimeout=setTimeout(()=>wd(t),e))}function GT(t){for(t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=Xj());t.input.compositionNodes.length>0;)t.input.compositionNodes.pop().markParentsDirty()}function Gj(t){let e=t.domSelectionRange();if(!e.focusNode)return null;let n=FB(e.focusNode,e.focusOffset),r=$B(e.focusNode,e.focusOffset);if(n&&r&&n!=r){let i=r.pmViewDesc,o=t.domObserver.lastChangedTextNode;if(n==o||r==o)return o;if(!i||!i.isText(r.nodeValue))return r;if(t.input.compositionNode==r){let s=n.pmViewDesc;if(!(!s||!s.isText(n.nodeValue)))return r}}return n||r}function Xj(){let t=document.createEvent("Event");return t.initEvent("event",!0,!0),t.timeStamp}function wd(t,e=!1){if(!(Wi&&t.domObserver.flushingSoon>=0)){if(t.domObserver.forceFlush(),GT(t),e||t.docView&&t.docView.dirty){let n=Xy(t),r=t.state.selection;return n&&!n.eq(r)?t.dispatch(t.state.tr.setSelection(n)):(t.markCursor||e)&&!r.$from.node(r.$from.sharedDepth(r.to)).inlineContent?t.dispatch(t.state.tr.deleteSelection()):t.updateState(t.state),!0}return!1}}function Jj(t,e){if(!t.dom.parentNode)return;let n=t.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(e),n.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),i=document.createRange();i.selectNodeContents(e),t.dom.blur(),r.removeAllRanges(),r.addRange(i),setTimeout(()=>{n.parentNode&&n.parentNode.removeChild(n),t.focus()},50)}const Iu=Xn&&Uo<15||ea&&WB<604;Mn.copy=_n.cut=(t,e)=>{let n=e,r=t.state.selection,i=n.type=="cut";if(r.empty)return;let o=Iu?null:n.clipboardData,s=r.content(),{dom:a,text:c}=Yy(t,s);o?(n.preventDefault(),o.clearData(),o.setData("text/html",a.innerHTML),o.setData("text/plain",c)):Jj(t,a),i&&t.dispatch(t.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function Yj(t){return t.openStart==0&&t.openEnd==0&&t.content.childCount==1?t.content.firstChild:null}function Qj(t,e){if(!t.dom.parentNode)return;let n=t.input.shiftKey||t.state.selection.$from.parent.type.spec.code,r=t.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let i=t.input.shiftKey&&t.input.lastKeyCode!=45;setTimeout(()=>{t.focus(),r.parentNode&&r.parentNode.removeChild(r),n?Lu(t,r.value,null,i,e):Lu(t,r.textContent,r.innerHTML,i,e)},50)}function Lu(t,e,n,r,i){let o=jT(t,e,n,r,t.state.selection.$from);if(t.someProp("handlePaste",c=>c(t,i,o||te.empty)))return!0;if(!o)return!1;let s=Yj(o),a=s?t.state.tr.replaceSelectionWith(s,r):t.state.tr.replaceSelection(o);return t.dispatch(a.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function XT(t){let e=t.getData("text/plain")||t.getData("Text");if(e)return e;let n=t.getData("text/uri-list");return n?n.replace(/\r?\n/g," "):""}_n.paste=(t,e)=>{let n=e;if(t.composing&&!Wi)return;let r=Iu?null:n.clipboardData,i=t.input.shiftKey&&t.input.lastKeyCode!=45;r&&Lu(t,XT(r),r.getData("text/html"),i,n)?n.preventDefault():Qj(t,n)};class JT{constructor(e,n,r){this.slice=e,this.move=n,this.node=r}}const Zj=Dr?"altKey":"ctrlKey";function YT(t,e){let n=t.someProp("dragCopies",r=>!r(e));return n??!e[Zj]}Mn.dragstart=(t,e)=>{let n=e,r=t.input.mouseDown;if(r&&r.done(),!n.dataTransfer)return;let i=t.state.selection,o=i.empty?null:t.posAtCoords(Ph(n)),s;if(!(o&&o.pos>=i.from&&o.pos<=(i instanceof ce?i.to-1:i.to))){if(r&&r.mightDrag)s=ce.create(t.state.doc,r.mightDrag.pos);else if(n.target&&n.target.nodeType==1){let p=t.docView.nearestDesc(n.target,!0);p&&p.node.type.spec.draggable&&p!=t.docView&&(s=ce.create(t.state.doc,p.posBefore))}}let a=(s||t.state.selection).content(),{dom:c,text:f,slice:d}=Yy(t,a);(!n.dataTransfer.files.length||!Ft||kT>120)&&n.dataTransfer.clearData(),n.dataTransfer.setData(Iu?"Text":"text/html",c.innerHTML),n.dataTransfer.effectAllowed="copyMove",Iu||n.dataTransfer.setData("text/plain",f),t.dragging=new JT(d,YT(t,n),s)};Mn.dragend=t=>{let e=t.dragging;window.setTimeout(()=>{t.dragging==e&&(t.dragging=null)},50)};_n.dragover=_n.dragenter=(t,e)=>e.preventDefault();_n.drop=(t,e)=>{try{e5(t,e,t.dragging)}finally{t.dragging=null}};function e5(t,e,n){if(!e.dataTransfer)return;let r=t.posAtCoords(Ph(e));if(!r)return;let i=t.state.doc.resolve(r.pos),o=n&&n.slice;o?t.someProp("transformPasted",g=>{o=g(o,t,!1)}):o=jT(t,XT(e.dataTransfer),Iu?null:e.dataTransfer.getData("text/html"),!1,i);let s=!!(n&&YT(t,e));if(t.someProp("handleDrop",g=>g(t,e,o||te.empty,s))){e.preventDefault();return}if(!o)return;e.preventDefault();let a=o?tT(t.state.doc,i.pos,o):i.pos;a==null&&(a=i.pos);let c=t.state.tr;if(s){let{node:g}=n;g?g.replace(c):c.deleteSelection()}let f=c.mapping.map(a),d=o.openStart==0&&o.openEnd==0&&o.content.childCount==1,p=c.doc;if(d?c.replaceRangeWith(f,f,o.content.firstChild):c.replaceRange(f,f,o),c.doc.eq(p))return;let m=c.doc.resolve(f);if(d&&ce.isSelectable(o.content.firstChild)&&m.nodeAfter&&m.nodeAfter.sameMarkup(o.content.firstChild))c.setSelection(new ce(m));else{let g=c.mapping.map(a);c.mapping.maps[c.mapping.maps.length-1].forEach((v,k,b,x)=>g=x),c.setSelection(Jy(t,m,c.doc.resolve(g)))}t.focus(),t.dispatch(c.setMeta("uiEvent","drop"))}Mn.focus=t=>{t.input.lastFocus=Date.now(),t.focused||(t.domObserver.stop(),t.dom.classList.add("ProseMirror-focused"),t.domObserver.start(),t.focused=!0,setTimeout(()=>{t.docView&&t.hasFocus()&&!t.domObserver.currentSelection.eq(t.domSelectionRange())&&Gi(t)},20))};Mn.blur=(t,e)=>{let n=e;t.focused&&(t.domObserver.stop(),t.dom.classList.remove("ProseMirror-focused"),t.domObserver.start(),n.relatedTarget&&t.dom.contains(n.relatedTarget)&&t.domObserver.currentSelection.clear(),t.focused=!1)};Mn.beforeinput=(t,e)=>{if(Ft&&Wi&&e.inputType=="deleteContentBackward"){t.domObserver.flushSoon();let{domChangeCount:r}=t.input;setTimeout(()=>{if(t.input.domChangeCount!=r||(t.dom.blur(),t.focus(),t.someProp("handleKeyDown",o=>o(t,vs(8,"Backspace")))))return;let{$cursor:i}=t.state.selection;i&&i.pos>0&&t.dispatch(t.state.tr.delete(i.pos-1,i.pos).scrollIntoView())},50)}};for(let t in _n)Mn[t]=_n[t];function zu(t,e){if(t==e)return!0;for(let n in t)if(t[n]!==e[n])return!1;for(let n in e)if(!(n in t))return!1;return!0}class Sd{constructor(e,n){this.toDOM=e,this.spec=n||Os,this.side=this.spec.side||0}map(e,n,r,i){let{pos:o,deleted:s}=e.mapResult(n.from+i,this.side<0?-1:1);return s?null:new En(o-r,o-r,this)}valid(){return!0}eq(e){return this==e||e instanceof Sd&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&zu(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class Wo{constructor(e,n){this.attrs=e,this.spec=n||Os}map(e,n,r,i){let o=e.map(n.from+i,this.spec.inclusiveStart?-1:1)-r,s=e.map(n.to+i,this.spec.inclusiveEnd?1:-1)-r;return o>=s?null:new En(o,s,this)}valid(e,n){return n.from<n.to}eq(e){return this==e||e instanceof Wo&&zu(this.attrs,e.attrs)&&zu(this.spec,e.spec)}static is(e){return e.type instanceof Wo}destroy(){}}class tv{constructor(e,n){this.attrs=e,this.spec=n||Os}map(e,n,r,i){let o=e.mapResult(n.from+i,1);if(o.deleted)return null;let s=e.mapResult(n.to+i,-1);return s.deleted||s.pos<=o.pos?null:new En(o.pos-r,s.pos-r,this)}valid(e,n){let{index:r,offset:i}=e.content.findIndex(n.from),o;return i==n.from&&!(o=e.child(r)).isText&&i+o.nodeSize==n.to}eq(e){return this==e||e instanceof tv&&zu(this.attrs,e.attrs)&&zu(this.spec,e.spec)}destroy(){}}class En{constructor(e,n,r){this.from=e,this.to=n,this.type=r}copy(e,n){return new En(e,n,this.type)}eq(e,n=0){return this.type.eq(e.type)&&this.from+n==e.from&&this.to+n==e.to}map(e,n,r){return this.type.map(e,this,n,r)}static widget(e,n,r){return new En(e,e,new Sd(n,r))}static inline(e,n,r,i){return new En(e,n,new Wo(r,i))}static node(e,n,r,i){return new En(e,n,new tv(r,i))}get spec(){return this.type.spec}get inline(){return this.type instanceof Wo}get widget(){return this.type instanceof Sd}}const vl=[],Os={};class lt{constructor(e,n){this.local=e.length?e:vl,this.children=n.length?n:vl}static create(e,n){return n.length?kd(n,e,0,Os):un}find(e,n,r){let i=[];return this.findInner(e??0,n??1e9,i,0,r),i}findInner(e,n,r,i,o){for(let s=0;s<this.local.length;s++){let a=this.local[s];a.from<=n&&a.to>=e&&(!o||o(a.spec))&&r.push(a.copy(a.from+i,a.to+i))}for(let s=0;s<this.children.length;s+=3)if(this.children[s]<n&&this.children[s+1]>e){let a=this.children[s]+1;this.children[s+2].findInner(e-a,n-a,r,i+a,o)}}map(e,n,r){return this==un||e.maps.length==0?this:this.mapInner(e,n,0,0,r||Os)}mapInner(e,n,r,i,o){let s;for(let a=0;a<this.local.length;a++){let c=this.local[a].map(e,r,i);c&&c.type.valid(n,c)?(s||(s=[])).push(c):o.onRemove&&o.onRemove(this.local[a].spec)}return this.children.length?t5(this.children,s||[],e,n,r,i,o):s?new lt(s.sort(As),vl):un}add(e,n){return n.length?this==un?lt.create(e,n):this.addInner(e,n,0):this}addInner(e,n,r){let i,o=0;e.forEach((a,c)=>{let f=c+r,d;if(d=ZT(n,a,f)){for(i||(i=this.children.slice());o<i.length&&i[o]<c;)o+=3;i[o]==c?i[o+2]=i[o+2].addInner(a,d,f+1):i.splice(o,0,c,c+a.nodeSize,kd(d,a,f+1,Os)),o+=3}});let s=QT(o?eM(n):n,-r);for(let a=0;a<s.length;a++)s[a].type.valid(e,s[a])||s.splice(a--,1);return new lt(s.length?this.local.concat(s).sort(As):this.local,i||this.children)}remove(e){return e.length==0||this==un?this:this.removeInner(e,0)}removeInner(e,n){let r=this.children,i=this.local;for(let o=0;o<r.length;o+=3){let s,a=r[o]+n,c=r[o+1]+n;for(let d=0,p;d<e.length;d++)(p=e[d])&&p.from>a&&p.to<c&&(e[d]=null,(s||(s=[])).push(p));if(!s)continue;r==this.children&&(r=this.children.slice());let f=r[o+2].removeInner(s,a+1);f!=un?r[o+2]=f:(r.splice(o,3),o-=3)}if(i.length){for(let o=0,s;o<e.length;o++)if(s=e[o])for(let a=0;a<i.length;a++)i[a].eq(s,n)&&(i==this.local&&(i=this.local.slice()),i.splice(a--,1))}return r==this.children&&i==this.local?this:i.length||r.length?new lt(i,r):un}forChild(e,n){if(this==un)return this;if(n.isLeaf)return lt.empty;let r,i;for(let a=0;a<this.children.length;a+=3)if(this.children[a]>=e){this.children[a]==e&&(r=this.children[a+2]);break}let o=e+1,s=o+n.content.size;for(let a=0;a<this.local.length;a++){let c=this.local[a];if(c.from<s&&c.to>o&&c.type instanceof Wo){let f=Math.max(o,c.from)-o,d=Math.min(s,c.to)-o;f<d&&(i||(i=[])).push(c.copy(f,d))}}if(i){let a=new lt(i.sort(As),vl);return r?new Eo([a,r]):a}return r||un}eq(e){if(this==e)return!0;if(!(e instanceof lt)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let n=0;n<this.local.length;n++)if(!this.local[n].eq(e.local[n]))return!1;for(let n=0;n<this.children.length;n+=3)if(this.children[n]!=e.children[n]||this.children[n+1]!=e.children[n+1]||!this.children[n+2].eq(e.children[n+2]))return!1;return!0}locals(e){return nv(this.localsInner(e))}localsInner(e){if(this==un)return vl;if(e.inlineContent||!this.local.some(Wo.is))return this.local;let n=[];for(let r=0;r<this.local.length;r++)this.local[r].type instanceof Wo||n.push(this.local[r]);return n}forEachSet(e){e(this)}}lt.empty=new lt([],[]);lt.removeOverlap=nv;const un=lt.empty;class Eo{constructor(e){this.members=e}map(e,n){const r=this.members.map(i=>i.map(e,n,Os));return Eo.from(r)}forChild(e,n){if(n.isLeaf)return lt.empty;let r=[];for(let i=0;i<this.members.length;i++){let o=this.members[i].forChild(e,n);o!=un&&(o instanceof Eo?r=r.concat(o.members):r.push(o))}return Eo.from(r)}eq(e){if(!(e instanceof Eo)||e.members.length!=this.members.length)return!1;for(let n=0;n<this.members.length;n++)if(!this.members[n].eq(e.members[n]))return!1;return!0}locals(e){let n,r=!0;for(let i=0;i<this.members.length;i++){let o=this.members[i].localsInner(e);if(o.length)if(!n)n=o;else{r&&(n=n.slice(),r=!1);for(let s=0;s<o.length;s++)n.push(o[s])}}return n?nv(r?n:n.sort(As)):vl}static from(e){switch(e.length){case 0:return un;case 1:return e[0];default:return new Eo(e.every(n=>n instanceof lt)?e:e.reduce((n,r)=>n.concat(r instanceof lt?r:r.members),[]))}}forEachSet(e){for(let n=0;n<this.members.length;n++)this.members[n].forEachSet(e)}}function t5(t,e,n,r,i,o,s){let a=t.slice();for(let f=0,d=o;f<n.maps.length;f++){let p=0;n.maps[f].forEach((m,g,v,k)=>{let b=k-v-(g-m);for(let x=0;x<a.length;x+=3){let w=a[x+1];if(w<0||m>w+d-p)continue;let E=a[x]+d-p;g>=E?a[x+1]=m<=E?-2:-1:m>=d&&b&&(a[x]+=b,a[x+1]+=b)}p+=b}),d=n.maps[f].map(d,-1)}let c=!1;for(let f=0;f<a.length;f+=3)if(a[f+1]<0){if(a[f+1]==-2){c=!0,a[f+1]=-1;continue}let d=n.map(t[f]+o),p=d-i;if(p<0||p>=r.content.size){c=!0;continue}let m=n.map(t[f+1]+o,-1),g=m-i,{index:v,offset:k}=r.content.findIndex(p),b=r.maybeChild(v);if(b&&k==p&&k+b.nodeSize==g){let x=a[f+2].mapInner(n,b,d+1,t[f]+o+1,s);x!=un?(a[f]=p,a[f+1]=g,a[f+2]=x):(a[f+1]=-2,c=!0)}else c=!0}if(c){let f=n5(a,t,e,n,i,o,s),d=kd(f,r,0,s);e=d.local;for(let p=0;p<a.length;p+=3)a[p+1]<0&&(a.splice(p,3),p-=3);for(let p=0,m=0;p<d.children.length;p+=3){let g=d.children[p];for(;m<a.length&&a[m]<g;)m+=3;a.splice(m,0,d.children[p],d.children[p+1],d.children[p+2])}}return new lt(e.sort(As),a)}function QT(t,e){if(!e||!t.length)return t;let n=[];for(let r=0;r<t.length;r++){let i=t[r];n.push(new En(i.from+e,i.to+e,i.type))}return n}function n5(t,e,n,r,i,o,s){function a(c,f){for(let d=0;d<c.local.length;d++){let p=c.local[d].map(r,i,f);p?n.push(p):s.onRemove&&s.onRemove(c.local[d].spec)}for(let d=0;d<c.children.length;d+=3)a(c.children[d+2],c.children[d]+f+1)}for(let c=0;c<t.length;c+=3)t[c+1]==-1&&a(t[c+2],e[c]+o+1);return n}function ZT(t,e,n){if(e.isLeaf)return null;let r=n+e.nodeSize,i=null;for(let o=0,s;o<t.length;o++)(s=t[o])&&s.from>n&&s.to<r&&((i||(i=[])).push(s),t[o]=null);return i}function eM(t){let e=[];for(let n=0;n<t.length;n++)t[n]!=null&&e.push(t[n]);return e}function kd(t,e,n,r){let i=[],o=!1;e.forEach((a,c)=>{let f=ZT(t,a,c+n);if(f){o=!0;let d=kd(f,a,n+c+1,r);d!=un&&i.push(c,c+a.nodeSize,d)}});let s=QT(o?eM(t):t,-n).sort(As);for(let a=0;a<s.length;a++)s[a].type.valid(e,s[a])||(r.onRemove&&r.onRemove(s[a].spec),s.splice(a--,1));return s.length||i.length?new lt(s,i):un}function As(t,e){return t.from-e.from||t.to-e.to}function nv(t){let e=t;for(let n=0;n<e.length-1;n++){let r=e[n];if(r.from!=r.to)for(let i=n+1;i<e.length;i++){let o=e[i];if(o.from==r.from){o.to!=r.to&&(e==t&&(e=t.slice()),e[i]=o.copy(o.from,r.to),sk(e,i+1,o.copy(r.to,o.to)));continue}else{o.from<r.to&&(e==t&&(e=t.slice()),e[n]=r.copy(r.from,o.from),sk(e,i,r.copy(o.from,r.to)));break}}}return e}function sk(t,e,n){for(;e<t.length&&As(n,t[e])>0;)e++;t.splice(e,0,n)}function Xm(t){let e=[];return t.someProp("decorations",n=>{let r=n(t.state);r&&r!=un&&e.push(r)}),t.cursorWrapper&&e.push(lt.create(t.state.doc,[t.cursorWrapper.deco])),Eo.from(e)}const r5={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},i5=Xn&&Uo<=11;class o5{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class s5{constructor(e,n){this.view=e,this.handleDOMChange=n,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new o5,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(r=>{for(let i=0;i<r.length;i++)this.queue.push(r[i]);Xn&&Uo<=11&&r.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():en&&e.composing&&r.some(i=>i.type=="childList"&&i.target.nodeName=="TR")?(e.input.badSafariComposition=!0,this.flushSoon()):this.flush()}),i5&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,r5)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let n=0;n<e.length;n++)this.queue.push(e[n]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(QS(this.view)){if(this.suppressingSelectionUpdates)return Gi(this.view);if(Xn&&Uo<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&Fs(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let n=new Set,r;for(let o=e.focusNode;o;o=Zl(o))n.add(o);for(let o=e.anchorNode;o;o=Zl(o))if(n.has(o)){r=o;break}let i=r&&this.view.docView.nearestDesc(r);if(i&&i.ignoreMutation({type:"selection",target:r.nodeType==3?r.parentNode:r}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let n=this.pendingRecords();n.length&&(this.queue=[]);let r=e.domSelectionRange(),i=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(r)&&QS(e)&&!this.ignoreSelectionChange(r),o=-1,s=-1,a=!1,c=[];if(e.editable)for(let d=0;d<n.length;d++){let p=this.registerMutation(n[d],c);p&&(o=o<0?p.from:Math.min(p.from,o),s=s<0?p.to:Math.max(p.to,s),p.typeOver&&(a=!0))}if(Fr&&c.length){let d=c.filter(p=>p.nodeName=="BR");if(d.length==2){let[p,m]=d;p.parentNode&&p.parentNode.parentNode==m.parentNode?m.remove():p.remove()}else{let{focusNode:p}=this.currentSelection;for(let m of d){let g=m.parentNode;g&&g.nodeName=="LI"&&(!p||u5(e,p)!=g)&&m.remove()}}}else if((Ft||en)&&c.some(d=>d.nodeName=="BR")&&(e.input.lastKeyCode==8||e.input.lastKeyCode==46)){for(let d of c)if(d.nodeName=="BR"&&d.parentNode){let p=d.nextSibling;p&&p.nodeType==1&&p.contentEditable=="false"&&d.parentNode.removeChild(d)}}let f=null;o<0&&i&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&Oh(r)&&(f=Xy(e))&&f.eq(Te.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,Gi(e),this.currentSelection.set(r),e.scrollToSelection()):(o>-1||i)&&(o>-1&&(e.docView.markDirty(o,s),l5(e)),e.input.badSafariComposition&&(e.input.badSafariComposition=!1,c5(e,c)),this.handleDOMChange(o,s,a,c),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(r)||Gi(e),this.currentSelection.set(r))}registerMutation(e,n){if(n.indexOf(e.target)>-1)return null;let r=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(r==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!r||r.ignoreMutation(e))return null;if(e.type=="childList"){for(let d=0;d<e.addedNodes.length;d++){let p=e.addedNodes[d];n.push(p),p.nodeType==3&&(this.lastChangedTextNode=p)}if(r.contentDOM&&r.contentDOM!=r.dom&&!r.contentDOM.contains(e.target))return{from:r.posBefore,to:r.posAfter};let i=e.previousSibling,o=e.nextSibling;if(Xn&&Uo<=11&&e.addedNodes.length)for(let d=0;d<e.addedNodes.length;d++){let{previousSibling:p,nextSibling:m}=e.addedNodes[d];(!p||Array.prototype.indexOf.call(e.addedNodes,p)<0)&&(i=p),(!m||Array.prototype.indexOf.call(e.addedNodes,m)<0)&&(o=m)}let s=i&&i.parentNode==e.target?Jt(i)+1:0,a=r.localPosFromDOM(e.target,s,-1),c=o&&o.parentNode==e.target?Jt(o):e.target.childNodes.length,f=r.localPosFromDOM(e.target,c,1);return{from:a,to:f}}else return e.type=="attributes"?{from:r.posAtStart-r.border,to:r.posAtEnd+r.border}:(this.lastChangedTextNode=e.target,{from:r.posAtStart,to:r.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}}let lk=new WeakMap,ak=!1;function l5(t){if(!lk.has(t)&&(lk.set(t,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(t.dom).whiteSpace)!==-1)){if(t.requiresGeckoHackNode=Fr,ak)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),ak=!0}}function uk(t,e){let n=e.startContainer,r=e.startOffset,i=e.endContainer,o=e.endOffset,s=t.domAtPos(t.state.selection.anchor);return Fs(s.node,s.offset,i,o)&&([n,r,i,o]=[i,o,n,r]),{anchorNode:n,anchorOffset:r,focusNode:i,focusOffset:o}}function a5(t,e){if(e.getComposedRanges){let i=e.getComposedRanges(t.root)[0];if(i)return uk(t,i)}let n;function r(i){i.preventDefault(),i.stopImmediatePropagation(),n=i.getTargetRanges()[0]}return t.dom.addEventListener("beforeinput",r,!0),document.execCommand("indent"),t.dom.removeEventListener("beforeinput",r,!0),n?uk(t,n):null}function u5(t,e){for(let n=e.parentNode;n&&n!=t.dom;n=n.parentNode){let r=t.docView.nearestDesc(n,!0);if(r&&r.node.isBlock)return n}return null}function c5(t,e){var n;let{focusNode:r,focusOffset:i}=t.domSelectionRange();for(let o of e)if(((n=o.parentNode)===null||n===void 0?void 0:n.nodeName)=="TR"){let s=o.nextSibling;for(;s&&s.nodeName!="TD"&&s.nodeName!="TH";)s=s.nextSibling;if(s){let a=s;for(;;){let c=a.firstChild;if(!c||c.nodeType!=1||c.contentEditable=="false"||/^(BR|IMG)$/.test(c.nodeName))break;a=c}a.insertBefore(o,a.firstChild),r==o&&t.domSelection().collapse(o,i)}else o.parentNode.removeChild(o)}}function f5(t,e,n){let{node:r,fromOffset:i,toOffset:o,from:s,to:a}=t.docView.parseRange(e,n),c=t.domSelectionRange(),f,d=c.anchorNode;if(d&&t.dom.contains(d.nodeType==1?d:d.parentNode)&&(f=[{node:d,offset:c.anchorOffset}],Oh(c)||f.push({node:c.focusNode,offset:c.focusOffset})),Ft&&t.input.lastKeyCode===8)for(let b=o;b>i;b--){let x=r.childNodes[b-1],w=x.pmViewDesc;if(x.nodeName=="BR"&&!w){o=b;break}if(!w||w.size)break}let p=t.state.doc,m=t.someProp("domParser")||Ho.fromSchema(t.state.schema),g=p.resolve(s),v=null,k=m.parse(r,{topNode:g.parent,topMatch:g.parent.contentMatchAt(g.index()),topOpen:!0,from:i,to:o,preserveWhitespace:g.parent.type.whitespace=="pre"?"full":!0,findPositions:f,ruleFromNode:d5,context:g});if(f&&f[0].pos!=null){let b=f[0].pos,x=f[1]&&f[1].pos;x==null&&(x=b),v={anchor:b+s,head:x+s}}return{doc:k,sel:v,from:s,to:a}}function d5(t){let e=t.pmViewDesc;if(e)return e.parseRule();if(t.nodeName=="BR"&&t.parentNode){if(en&&/^(ul|ol)$/i.test(t.parentNode.nodeName)){let n=document.createElement("div");return n.appendChild(document.createElement("li")),{skip:n}}else if(t.parentNode.lastChild==t||en&&/^(tr|table)$/i.test(t.parentNode.nodeName))return{ignore:!0}}else if(t.nodeName=="IMG"&&t.getAttribute("mark-placeholder"))return{ignore:!0};return null}const h5=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|img|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function p5(t,e,n,r,i){let o=t.input.compositionPendingChanges||(t.composing?t.input.compositionID:0);if(t.input.compositionPendingChanges=0,e<0){let O=t.input.lastSelectionTime>Date.now()-50?t.input.lastSelectionOrigin:null,D=Xy(t,O);if(D&&!t.state.selection.eq(D)){if(Ft&&Wi&&t.input.lastKeyCode===13&&Date.now()-100<t.input.lastKeyCodeTime&&t.someProp("handleKeyDown",j=>j(t,vs(13,"Enter"))))return;let z=t.state.tr.setSelection(D);O=="pointer"?z.setMeta("pointer",!0):O=="key"&&z.scrollIntoView(),o&&z.setMeta("composition",o),t.dispatch(z)}return}let s=t.state.doc.resolve(e),a=s.sharedDepth(n);e=s.before(a+1),n=t.state.doc.resolve(n).after(a+1);let c=t.state.selection,f=f5(t,e,n),d=t.state.doc,p=d.slice(f.from,f.to),m,g;t.input.lastKeyCode===8&&Date.now()-100<t.input.lastKeyCodeTime?(m=t.state.selection.to,g="end"):(m=t.state.selection.from,g="start"),t.input.lastKeyCode=null;let v=y5(p.content,f.doc.content,f.from,m,g);if(v&&t.input.domChangeCount++,(ea&&t.input.lastIOSEnter>Date.now()-225||Wi)&&i.some(O=>O.nodeType==1&&!h5.test(O.nodeName))&&(!v||v.endA>=v.endB)&&t.someProp("handleKeyDown",O=>O(t,vs(13,"Enter")))){t.input.lastIOSEnter=0;return}if(!v)if(r&&c instanceof ve&&!c.empty&&c.$head.sameParent(c.$anchor)&&!t.composing&&!(f.sel&&f.sel.anchor!=f.sel.head))v={start:c.from,endA:c.to,endB:c.to};else{if(f.sel){let O=ck(t,t.state.doc,f.sel);if(O&&!O.eq(t.state.selection)){let D=t.state.tr.setSelection(O);o&&D.setMeta("composition",o),t.dispatch(D)}}return}t.state.selection.from<t.state.selection.to&&v.start==v.endB&&t.state.selection instanceof ve&&(v.start>t.state.selection.from&&v.start<=t.state.selection.from+2&&t.state.selection.from>=f.from?v.start=t.state.selection.from:v.endA<t.state.selection.to&&v.endA>=t.state.selection.to-2&&t.state.selection.to<=f.to&&(v.endB+=t.state.selection.to-v.endA,v.endA=t.state.selection.to)),Xn&&Uo<=11&&v.endB==v.start+1&&v.endA==v.start&&v.start>f.from&&f.doc.textBetween(v.start-f.from-1,v.start-f.from+1)==" "&&(v.start--,v.endA--,v.endB--);let k=f.doc.resolveNoCache(v.start-f.from),b=f.doc.resolveNoCache(v.endB-f.from),x=d.resolve(v.start),w=k.sameParent(b)&&k.parent.inlineContent&&x.end()>=v.endA;if((ea&&t.input.lastIOSEnter>Date.now()-225&&(!w||i.some(O=>O.nodeName=="DIV"||O.nodeName=="P"))||!w&&k.pos<f.doc.content.size&&(!k.sameParent(b)||!k.parent.inlineContent)&&k.pos<b.pos&&!/\S/.test(f.doc.textBetween(k.pos,b.pos,"","")))&&t.someProp("handleKeyDown",O=>O(t,vs(13,"Enter")))){t.input.lastIOSEnter=0;return}if(t.state.selection.anchor>v.start&&g5(d,v.start,v.endA,k,b)&&t.someProp("handleKeyDown",O=>O(t,vs(8,"Backspace")))){Wi&&Ft&&t.domObserver.suppressSelectionUpdates();return}Ft&&v.endB==v.start&&(t.input.lastChromeDelete=Date.now()),Wi&&!w&&k.start()!=b.start()&&b.parentOffset==0&&k.depth==b.depth&&f.sel&&f.sel.anchor==f.sel.head&&f.sel.head==v.endA&&(v.endB-=2,b=f.doc.resolveNoCache(v.endB-f.from),setTimeout(()=>{t.someProp("handleKeyDown",function(O){return O(t,vs(13,"Enter"))})},20));let E=v.start,_=v.endA,M=O=>{let D=O||t.state.tr.replace(E,_,f.doc.slice(v.start-f.from,v.endB-f.from));if(f.sel){let z=ck(t,D.doc,f.sel);z&&!(Ft&&t.composing&&z.empty&&(v.start!=v.endB||t.input.lastChromeDelete<Date.now()-100)&&(z.head==E||z.head==D.mapping.map(_)-1)||Xn&&z.empty&&z.head==E)&&D.setSelection(z)}return o&&D.setMeta("composition",o),D.scrollIntoView()},P;if(w)if(k.pos==b.pos){Xn&&Uo<=11&&k.parentOffset==0&&(t.domObserver.suppressSelectionUpdates(),setTimeout(()=>Gi(t),20));let O=M(t.state.tr.delete(E,_)),D=d.resolve(v.start).marksAcross(d.resolve(v.endA));D&&O.ensureMarks(D),t.dispatch(O)}else if(v.endA==v.endB&&(P=m5(k.parent.content.cut(k.parentOffset,b.parentOffset),x.parent.content.cut(x.parentOffset,v.endA-x.start())))){let O=M(t.state.tr);P.type=="add"?O.addMark(E,_,P.mark):O.removeMark(E,_,P.mark),t.dispatch(O)}else if(k.parent.child(k.index()).isText&&k.index()==b.index()-(b.textOffset?0:1)){let O=k.parent.textBetween(k.parentOffset,b.parentOffset),D=()=>M(t.state.tr.insertText(O,E,_));t.someProp("handleTextInput",z=>z(t,E,_,O,D))||t.dispatch(D())}else t.dispatch(M());else t.dispatch(M())}function ck(t,e,n){return Math.max(n.anchor,n.head)>e.content.size?null:Jy(t,e.resolve(n.anchor),e.resolve(n.head))}function m5(t,e){let n=t.firstChild.marks,r=e.firstChild.marks,i=n,o=r,s,a,c;for(let d=0;d<r.length;d++)i=r[d].removeFromSet(i);for(let d=0;d<n.length;d++)o=n[d].removeFromSet(o);if(i.length==1&&o.length==0)a=i[0],s="add",c=d=>d.mark(a.addToSet(d.marks));else if(i.length==0&&o.length==1)a=o[0],s="remove",c=d=>d.mark(a.removeFromSet(d.marks));else return null;let f=[];for(let d=0;d<e.childCount;d++)f.push(c(e.child(d)));if(q.from(f).eq(t))return{mark:a,type:s}}function g5(t,e,n,r,i){if(n-e<=i.pos-r.pos||Jm(r,!0,!1)<i.pos)return!1;let o=t.resolve(e);if(!r.parent.isTextblock){let a=o.nodeAfter;return a!=null&&n==e+a.nodeSize}if(o.parentOffset<o.parent.content.size||!o.parent.isTextblock)return!1;let s=t.resolve(Jm(o,!0,!0));return!s.parent.isTextblock||s.pos>n||Jm(s,!0,!1)<n?!1:r.parent.content.cut(r.parentOffset).eq(s.parent.content)}function Jm(t,e,n){let r=t.depth,i=e?t.end():t.pos;for(;r>0&&(e||t.indexAfter(r)==t.node(r).childCount);)r--,i++,e=!1;if(n){let o=t.node(r).maybeChild(t.indexAfter(r));for(;o&&!o.isLeaf;)o=o.firstChild,i++}return i}function y5(t,e,n,r,i){let o=t.findDiffStart(e,n);if(o==null)return null;let{a:s,b:a}=t.findDiffEnd(e,n+t.size,n+e.size);if(i=="end"){let c=Math.max(0,o-Math.min(s,a));r-=s+c-o}if(s<o&&t.size<e.size){let c=r<=o&&r>=s?o-r:0;o-=c,o&&o<e.size&&fk(e.textBetween(o-1,o+1))&&(o+=c?1:-1),a=o+(a-s),s=o}else if(a<o){let c=r<=o&&r>=a?o-r:0;o-=c,o&&o<t.size&&fk(t.textBetween(o-1,o+1))&&(o+=c?1:-1),s=o+(s-a),a=o}return{start:o,endA:s,endB:a}}function fk(t){if(t.length!=2)return!1;let e=t.charCodeAt(0),n=t.charCodeAt(1);return e>=56320&&e<=57343&&n>=55296&&n<=56319}class tM{constructor(e,n){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new Rj,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=n,this.state=n.state,this.directPlugins=n.plugins||[],this.directPlugins.forEach(gk),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=pk(this),hk(this),this.nodeViews=mk(this),this.docView=KS(this.state.doc,dk(this),Xm(this),this.dom,this),this.domObserver=new s5(this,(r,i,o,s)=>p5(this,r,i,o,s)),this.domObserver.start(),Dj(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let n in e)this._props[n]=e[n];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&k0(this);let n=this._props;this._props=e,e.plugins&&(e.plugins.forEach(gk),this.directPlugins=e.plugins),this.updateStateInner(e.state,n)}setProps(e){let n={};for(let r in this._props)n[r]=this._props[r];n.state=this.state;for(let r in e)n[r]=e[r];this.update(n)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,n){var r;let i=this.state,o=!1,s=!1;e.storedMarks&&this.composing&&(GT(this),s=!0),this.state=e;let a=i.plugins!=e.plugins||this._props.plugins!=n.plugins;if(a||this._props.plugins!=n.plugins||this._props.nodeViews!=n.nodeViews){let g=mk(this);x5(g,this.nodeViews)&&(this.nodeViews=g,o=!0)}(a||n.handleDOMEvents!=this._props.handleDOMEvents)&&k0(this),this.editable=pk(this),hk(this);let c=Xm(this),f=dk(this),d=i.plugins!=e.plugins&&!i.doc.eq(e.doc)?"reset":e.scrollToSelection>i.scrollToSelection?"to selection":"preserve",p=o||!this.docView.matchesNode(e.doc,f,c);(p||!e.selection.eq(i.selection))&&(s=!0);let m=d=="preserve"&&s&&this.dom.style.overflowAnchor==null&&GB(this);if(s){this.domObserver.stop();let g=p&&(Xn||Ft)&&!this.composing&&!i.selection.empty&&!e.selection.empty&&v5(i.selection,e.selection);if(p){let v=Ft?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=Gj(this)),(o||!this.docView.update(e.doc,f,c,this))&&(this.docView.updateOuterDeco(f),this.docView.destroy(),this.docView=KS(e.doc,f,c,this.dom,this)),v&&(!this.trackWrites||!this.dom.contains(this.trackWrites))&&(g=!0)}g||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&vj(this))?Gi(this,g):(LT(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(i),!((r=this.dragging)===null||r===void 0)&&r.node&&!i.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,i),d=="reset"?this.dom.scrollTop=0:d=="to selection"?this.scrollToSelection():m&&XB(m)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!(!e||!this.dom.contains(e.nodeType==1?e:e.parentNode))){if(!this.someProp("handleScrollToSelection",n=>n(this)))if(this.state.selection instanceof ce){let n=this.docView.domAfterPos(this.state.selection.from);n.nodeType==1&&FS(this,n.getBoundingClientRect(),e)}else FS(this,this.coordsAtPos(this.state.selection.head,1),e)}}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let n=0;n<this.directPlugins.length;n++){let r=this.directPlugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}for(let n=0;n<this.state.plugins.length;n++){let r=this.state.plugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}}else for(let n=0;n<this.pluginViews.length;n++){let r=this.pluginViews[n];r.update&&r.update(this,e)}}updateDraggedNode(e,n){let r=e.node,i=-1;if(this.state.doc.nodeAt(r.from)==r.node)i=r.from;else{let o=r.from+(this.state.doc.content.size-n.doc.content.size);(o>0&&this.state.doc.nodeAt(o))==r.node&&(i=o)}this.dragging=new JT(e.slice,e.move,i<0?void 0:ce.create(this.state.doc,i))}someProp(e,n){let r=this._props&&this._props[e],i;if(r!=null&&(i=n?n(r):r))return i;for(let s=0;s<this.directPlugins.length;s++){let a=this.directPlugins[s].props[e];if(a!=null&&(i=n?n(a):a))return i}let o=this.state.plugins;if(o)for(let s=0;s<o.length;s++){let a=o[s].props[e];if(a!=null&&(i=n?n(a):a))return i}}hasFocus(){if(Xn){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&JB(this.dom),Gi(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let n=this.dom.parentNode;n;n=n.parentNode)if(n.nodeType==9||n.nodeType==11&&n.host)return n.getSelection||(Object.getPrototypeOf(n).getSelection=()=>n.ownerDocument.getSelection()),this._root=n}return e||document}updateRoot(){this._root=null}posAtCoords(e){return tj(this,e)}coordsAtPos(e,n=1){return _T(this,e,n)}domAtPos(e,n=0){return this.docView.domFromPos(e,n)}nodeDOM(e){let n=this.docView.descAt(e);return n?n.nodeDOM:null}posAtDOM(e,n,r=-1){let i=this.docView.posFromDOM(e,n,r);if(i==null)throw new RangeError("DOM position not inside the editor");return i}endOfTextblock(e,n){return sj(this,n||this.state,e)}pasteHTML(e,n){return Lu(this,"",e,!1,n||new ClipboardEvent("paste"))}pasteText(e,n){return Lu(this,e,null,!0,n||new ClipboardEvent("paste"))}serializeForClipboard(e){return Yy(this,e)}destroy(){this.docView&&(Ij(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],Xm(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,BB())}get isDestroyed(){return this.docView==null}dispatchEvent(e){return zj(this,e)}domSelectionRange(){let e=this.domSelection();return e?en&&this.root.nodeType===11&&UB(this.dom.ownerDocument)==this.dom&&a5(this,e)||e:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}tM.prototype.dispatch=function(t){let e=this._props.dispatchTransaction;e?e.call(this,t):this.updateState(this.state.apply(t))};function dk(t){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(t.editable),t.someProp("attributes",n=>{if(typeof n=="function"&&(n=n(t.state)),n)for(let r in n)r=="class"?e.class+=" "+n[r]:r=="style"?e.style=(e.style?e.style+";":"")+n[r]:!e[r]&&r!="contenteditable"&&r!="nodeName"&&(e[r]=String(n[r]))}),e.translate||(e.translate="no"),[En.node(0,t.state.doc.content.size,e)]}function hk(t){if(t.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),t.cursorWrapper={dom:e,deco:En.widget(t.state.selection.from,e,{raw:!0,marks:t.markCursor})}}else t.cursorWrapper=null}function pk(t){return!t.someProp("editable",e=>e(t.state)===!1)}function v5(t,e){let n=Math.min(t.$anchor.sharedDepth(t.head),e.$anchor.sharedDepth(e.head));return t.$anchor.start(n)!=e.$anchor.start(n)}function mk(t){let e=Object.create(null);function n(r){for(let i in r)Object.prototype.hasOwnProperty.call(e,i)||(e[i]=r[i])}return t.someProp("nodeViews",n),t.someProp("markViews",n),e}function x5(t,e){let n=0,r=0;for(let i in t){if(t[i]!=e[i])return!0;n++}for(let i in e)r++;return n!=r}function gk(t){if(t.spec.state||t.spec.filterTransaction||t.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var Xo={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},bd={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},w5=typeof navigator<"u"&&/Mac/.test(navigator.platform),S5=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var Yt=0;Yt<10;Yt++)Xo[48+Yt]=Xo[96+Yt]=String(Yt);for(var Yt=1;Yt<=24;Yt++)Xo[Yt+111]="F"+Yt;for(var Yt=65;Yt<=90;Yt++)Xo[Yt]=String.fromCharCode(Yt+32),bd[Yt]=String.fromCharCode(Yt);for(var Ym in Xo)bd.hasOwnProperty(Ym)||(bd[Ym]=Xo[Ym]);function k5(t){var e=w5&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||S5&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",n=!e&&t.key||(t.shiftKey?bd:Xo)[t.keyCode]||t.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}const b5=typeof navigator<"u"&&/Mac|iP(hone|[oa]d)/.test(navigator.platform),C5=typeof navigator<"u"&&/Win/.test(navigator.platform);function E5(t){let e=t.split(/-(?!$)/),n=e[e.length-1];n=="Space"&&(n=" ");let r,i,o,s;for(let a=0;a<e.length-1;a++){let c=e[a];if(/^(cmd|meta|m)$/i.test(c))s=!0;else if(/^a(lt)?$/i.test(c))r=!0;else if(/^(c|ctrl|control)$/i.test(c))i=!0;else if(/^s(hift)?$/i.test(c))o=!0;else if(/^mod$/i.test(c))b5?s=!0:i=!0;else throw new Error("Unrecognized modifier name: "+c)}return r&&(n="Alt-"+n),i&&(n="Ctrl-"+n),s&&(n="Meta-"+n),o&&(n="Shift-"+n),n}function T5(t){let e=Object.create(null);for(let n in t)e[E5(n)]=t[n];return e}function Qm(t,e,n=!0){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),n&&e.shiftKey&&(t="Shift-"+t),t}function M5(t){return new ct({props:{handleKeyDown:nM(t)}})}function nM(t){let e=T5(t);return function(n,r){let i=k5(r),o,s=e[Qm(i,r)];if(s&&s(n.state,n.dispatch,n))return!0;if(i.length==1&&i!=" "){if(r.shiftKey){let a=e[Qm(i,r,!1)];if(a&&a(n.state,n.dispatch,n))return!0}if((r.altKey||r.metaKey||r.ctrlKey)&&!(C5&&r.ctrlKey&&r.altKey)&&(o=Xo[r.keyCode])&&o!=i){let a=e[Qm(o,r)];if(a&&a(n.state,n.dispatch,n))return!0}}return!1}}var _5=Object.defineProperty,rv=(t,e)=>{for(var n in e)_5(t,n,{get:e[n],enumerable:!0})};function Rh(t){const{state:e,transaction:n}=t;let{selection:r}=n,{doc:i}=n,{storedMarks:o}=n;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return o},get selection(){return r},get doc(){return i},get tr(){return r=n.selection,i=n.doc,o=n.storedMarks,n}}}var Dh=class{constructor(t){this.editor=t.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=t.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:t,editor:e,state:n}=this,{view:r}=e,{tr:i}=n,o=this.buildProps(i);return Object.fromEntries(Object.entries(t).map(([s,a])=>[s,(...f)=>{const d=a(...f)(o);return!i.getMeta("preventDispatch")&&!this.hasCustomState&&r.dispatch(i),d}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(t,e=!0){const{rawCommands:n,editor:r,state:i}=this,{view:o}=r,s=[],a=!!t,c=t||i.tr,f=()=>(!a&&e&&!c.getMeta("preventDispatch")&&!this.hasCustomState&&o.dispatch(c),s.every(p=>p===!0)),d={...Object.fromEntries(Object.entries(n).map(([p,m])=>[p,(...v)=>{const k=this.buildProps(c,e),b=m(...v)(k);return s.push(b),d}])),run:f};return d}createCan(t){const{rawCommands:e,state:n}=this,r=!1,i=t||n.tr,o=this.buildProps(i,r);return{...Object.fromEntries(Object.entries(e).map(([a,c])=>[a,(...f)=>c(...f)({...o,dispatch:void 0})])),chain:()=>this.createChain(i,r)}}buildProps(t,e=!0){const{rawCommands:n,editor:r,state:i}=this,{view:o}=r,s={tr:t,editor:r,view:o,state:Rh({state:i,transaction:t}),dispatch:e?()=>{}:void 0,chain:()=>this.createChain(t,e),can:()=>this.createCan(t),get commands(){return Object.fromEntries(Object.entries(n).map(([a,c])=>[a,(...f)=>c(...f)(s)]))}};return s}},rM={};rv(rM,{blur:()=>N5,clearContent:()=>O5,clearNodes:()=>A5,command:()=>P5,createParagraphNear:()=>R5,cut:()=>D5,deleteCurrentNode:()=>I5,deleteNode:()=>L5,deleteRange:()=>z5,deleteSelection:()=>B5,enter:()=>j5,exitCode:()=>F5,extendMarkRange:()=>$5,first:()=>H5,focus:()=>V5,forEach:()=>W5,insertContent:()=>K5,insertContentAt:()=>X5,joinBackward:()=>Q5,joinDown:()=>Y5,joinForward:()=>Z5,joinItemBackward:()=>eF,joinItemForward:()=>tF,joinTextblockBackward:()=>nF,joinTextblockForward:()=>rF,joinUp:()=>J5,keyboardShortcut:()=>oF,lift:()=>sF,liftEmptyBlock:()=>lF,liftListItem:()=>aF,newlineInCode:()=>uF,resetAttributes:()=>cF,scrollIntoView:()=>fF,selectAll:()=>dF,selectNodeBackward:()=>hF,selectNodeForward:()=>pF,selectParentNode:()=>mF,selectTextblockEnd:()=>gF,selectTextblockStart:()=>yF,setContent:()=>vF,setMark:()=>BF,setMeta:()=>jF,setNode:()=>FF,setNodeSelection:()=>$F,setTextDirection:()=>HF,setTextSelection:()=>UF,sinkListItem:()=>VF,splitBlock:()=>WF,splitListItem:()=>KF,toggleList:()=>qF,toggleMark:()=>GF,toggleNode:()=>XF,toggleWrap:()=>JF,undoInputRule:()=>YF,unsetAllMarks:()=>QF,unsetMark:()=>ZF,unsetTextDirection:()=>e6,updateAttributes:()=>t6,wrapIn:()=>n6,wrapInList:()=>r6});var N5=()=>({editor:t,view:e})=>(requestAnimationFrame(()=>{var n;t.isDestroyed||(e.dom.blur(),(n=window==null?void 0:window.getSelection())==null||n.removeAllRanges())}),!0),O5=(t=!0)=>({commands:e})=>e.setContent("",{emitUpdate:t}),A5=()=>({state:t,tr:e,dispatch:n})=>{const{selection:r}=e,{ranges:i}=r;return n&&i.forEach(({$from:o,$to:s})=>{t.doc.nodesBetween(o.pos,s.pos,(a,c)=>{if(a.type.isText)return;const{doc:f,mapping:d}=e,p=f.resolve(d.map(c)),m=f.resolve(d.map(c+a.nodeSize)),g=p.blockRange(m);if(!g)return;const v=la(g);if(a.type.isTextblock){const{defaultType:k}=p.parent.contentMatchAt(p.index());e.setNodeMarkup(g.start,k)}(v||v===0)&&e.lift(g,v)})}),!0},P5=t=>e=>t(e),R5=()=>({state:t,dispatch:e})=>yT(t,e),D5=(t,e)=>({editor:n,tr:r})=>{const{state:i}=n,o=i.doc.slice(t.from,t.to);r.deleteRange(t.from,t.to);const s=r.mapping.map(e);return r.insert(s,o.content),r.setSelection(new ve(r.doc.resolve(Math.max(s-1,0)))),!0},I5=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,r=n.$anchor.node();if(r.content.size>0)return!1;const i=t.selection.$anchor;for(let o=i.depth;o>0;o-=1)if(i.node(o).type===r.type){if(e){const a=i.before(o),c=i.after(o);t.delete(a,c).scrollIntoView()}return!0}return!1};function Nt(t,e){if(typeof t=="string"){if(!e.nodes[t])throw Error(`There is no node type named '${t}'. Maybe you forgot to add the extension?`);return e.nodes[t]}return t}var L5=t=>({tr:e,state:n,dispatch:r})=>{const i=Nt(t,n.schema),o=e.selection.$anchor;for(let s=o.depth;s>0;s-=1)if(o.node(s).type===i){if(r){const c=o.before(s),f=o.after(s);e.delete(c,f).scrollIntoView()}return!0}return!1},z5=t=>({tr:e,dispatch:n})=>{const{from:r,to:i}=t;return n&&e.delete(r,i),!0},B5=()=>({state:t,dispatch:e})=>Uy(t,e),j5=()=>({commands:t})=>t.keyboardShortcut("Enter"),F5=()=>({state:t,dispatch:e})=>bB(t,e);function iv(t){return Object.prototype.toString.call(t)==="[object RegExp]"}function Cd(t,e,n={strict:!0}){const r=Object.keys(e);return r.length?r.every(i=>n.strict?e[i]===t[i]:iv(e[i])?e[i].test(t[i]):e[i]===t[i]):!0}function iM(t,e,n={}){return t.find(r=>r.type===e&&Cd(Object.fromEntries(Object.keys(n).map(i=>[i,r.attrs[i]])),n))}function yk(t,e,n={}){return!!iM(t,e,n)}function ov(t,e,n){var r;if(!t||!e)return;let i=t.parent.childAfter(t.parentOffset);if((!i.node||!i.node.marks.some(d=>d.type===e))&&(i=t.parent.childBefore(t.parentOffset)),!i.node||!i.node.marks.some(d=>d.type===e)||(n=n||((r=i.node.marks[0])==null?void 0:r.attrs),!iM([...i.node.marks],e,n)))return;let s=i.index,a=t.start()+i.offset,c=s+1,f=a+i.node.nodeSize;for(;s>0&&yk([...t.parent.child(s-1).marks],e,n);)s-=1,a-=t.parent.child(s).nodeSize;for(;c<t.parent.childCount&&yk([...t.parent.child(c).marks],e,n);)f+=t.parent.child(c).nodeSize,c+=1;return{from:a,to:f}}function eo(t,e){if(typeof t=="string"){if(!e.marks[t])throw Error(`There is no mark type named '${t}'. Maybe you forgot to add the extension?`);return e.marks[t]}return t}var $5=(t,e={})=>({tr:n,state:r,dispatch:i})=>{const o=eo(t,r.schema),{doc:s,selection:a}=n,{$from:c,from:f,to:d}=a;if(i){const p=ov(c,o,e);if(p&&p.from<=f&&p.to>=d){const m=ve.create(s,p.from,p.to);n.setSelection(m)}}return!0},H5=t=>e=>{const n=typeof t=="function"?t(e):t;for(let r=0;r<n.length;r+=1)if(n[r](e))return!0;return!1};function oM(t){return t instanceof ve}function Cs(t=0,e=0,n=0){return Math.min(Math.max(t,e),n)}function sM(t,e=null){if(!e)return null;const n=Te.atStart(t),r=Te.atEnd(t);if(e==="start"||e===!0)return n;if(e==="end")return r;const i=n.from,o=r.to;return e==="all"?ve.create(t,Cs(0,i,o),Cs(t.content.size,i,o)):ve.create(t,Cs(e,i,o),Cs(e,i,o))}function vk(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}function Ed(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}function U5(){return typeof navigator<"u"?/^((?!chrome|android).)*safari/i.test(navigator.userAgent):!1}var V5=(t=null,e={})=>({editor:n,view:r,tr:i,dispatch:o})=>{e={scrollIntoView:!0,...e};const s=()=>{(Ed()||vk())&&r.dom.focus(),U5()&&!Ed()&&!vk()&&r.dom.focus({preventScroll:!0}),requestAnimationFrame(()=>{n.isDestroyed||(r.focus(),e!=null&&e.scrollIntoView&&n.commands.scrollIntoView())})};if(r.hasFocus()&&t===null||t===!1)return!0;if(o&&t===null&&!oM(n.state.selection))return s(),!0;const a=sM(i.doc,t)||n.state.selection,c=n.state.selection.eq(a);return o&&(c||i.setSelection(a),c&&i.storedMarks&&i.setStoredMarks(i.storedMarks),s()),!0},W5=(t,e)=>n=>t.every((r,i)=>e(r,{...n,index:i})),K5=(t,e)=>({tr:n,commands:r})=>r.insertContentAt({from:n.selection.from,to:n.selection.to},t,e),lM=t=>{const e=t.childNodes;for(let n=e.length-1;n>=0;n-=1){const r=e[n];r.nodeType===3&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?t.removeChild(r):r.nodeType===1&&lM(r)}return t};function hf(t){if(typeof window>"u")throw new Error("[tiptap error]: there is no window object available, so this function cannot be used");const e=`<body>${t}</body>`,n=new window.DOMParser().parseFromString(e,"text/html").body;return lM(n)}function Bu(t,e,n){if(t instanceof si||t instanceof q)return t;n={slice:!0,parseOptions:{},...n};const r=typeof t=="object"&&t!==null,i=typeof t=="string";if(r)try{if(Array.isArray(t)&&t.length>0)return q.fromArray(t.map(a=>e.nodeFromJSON(a)));const s=e.nodeFromJSON(t);return n.errorOnInvalidContent&&s.check(),s}catch(o){if(n.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:o});return console.warn("[tiptap warn]: Invalid content.","Passed value:",t,"Error:",o),Bu("",e,n)}if(i){if(n.errorOnInvalidContent){let s=!1,a="";const c=new VE({topNode:e.spec.topNode,marks:e.spec.marks,nodes:e.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:f=>(s=!0,a=typeof f=="string"?f:f.outerHTML,null)}]}})});if(n.slice?Ho.fromSchema(c).parseSlice(hf(t),n.parseOptions):Ho.fromSchema(c).parse(hf(t),n.parseOptions),n.errorOnInvalidContent&&s)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${a}`)})}const o=Ho.fromSchema(e);return n.slice?o.parseSlice(hf(t),n.parseOptions).content:o.parse(hf(t),n.parseOptions)}return Bu("",e,n)}function q5(t,e,n){const r=t.steps.length-1;if(r<e)return;const i=t.steps[r];if(!(i instanceof jt||i instanceof Ht))return;const o=t.mapping.maps[r];let s=0;o.forEach((a,c,f,d)=>{s===0&&(s=d)}),t.setSelection(Te.near(t.doc.resolve(s),n))}var G5=t=>!("type"in t),X5=(t,e,n)=>({tr:r,dispatch:i,editor:o})=>{var s;if(i){n={parseOptions:o.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...n};let a;const c=b=>{o.emit("contentError",{editor:o,error:b,disableCollaboration:()=>{"collaboration"in o.storage&&typeof o.storage.collaboration=="object"&&o.storage.collaboration&&(o.storage.collaboration.isDisabled=!0)}})},f={preserveWhitespace:"full",...n.parseOptions};if(!n.errorOnInvalidContent&&!o.options.enableContentCheck&&o.options.emitContentError)try{Bu(e,o.schema,{parseOptions:f,errorOnInvalidContent:!0})}catch(b){c(b)}try{a=Bu(e,o.schema,{parseOptions:f,errorOnInvalidContent:(s=n.errorOnInvalidContent)!=null?s:o.options.enableContentCheck})}catch(b){return c(b),!1}let{from:d,to:p}=typeof t=="number"?{from:t,to:t}:{from:t.from,to:t.to},m=!0,g=!0;if((G5(a)?a:[a]).forEach(b=>{b.check(),m=m?b.isText&&b.marks.length===0:!1,g=g?b.isBlock:!1}),d===p&&g){const{parent:b}=r.doc.resolve(d);b.isTextblock&&!b.type.spec.code&&!b.childCount&&(d-=1,p+=1)}let k;if(m){if(Array.isArray(e))k=e.map(b=>b.text||"").join("");else if(e instanceof q){let b="";e.forEach(x=>{x.text&&(b+=x.text)}),k=b}else typeof e=="object"&&e&&e.text?k=e.text:k=e;r.insertText(k,d,p)}else{k=a;const b=r.doc.resolve(d),x=b.node(),w=b.parentOffset===0,E=x.isText||x.isTextblock,_=x.content.size>0;w&&E&&_&&(d=Math.max(0,d-1)),r.replaceWith(d,p,k)}n.updateSelection&&q5(r,r.steps.length-1,-1),n.applyInputRules&&r.setMeta("applyInputRules",{from:d,text:k}),n.applyPasteRules&&r.setMeta("applyPasteRules",{from:d,text:k})}return!0},J5=()=>({state:t,dispatch:e})=>wB(t,e),Y5=()=>({state:t,dispatch:e})=>SB(t,e),Q5=()=>({state:t,dispatch:e})=>cT(t,e),Z5=()=>({state:t,dispatch:e})=>pT(t,e),eF=()=>({state:t,dispatch:e,tr:n})=>{try{const r=Mh(t.doc,t.selection.$from.pos,-1);return r==null?!1:(n.join(r,2),e&&e(n),!0)}catch{return!1}},tF=()=>({state:t,dispatch:e,tr:n})=>{try{const r=Mh(t.doc,t.selection.$from.pos,1);return r==null?!1:(n.join(r,2),e&&e(n),!0)}catch{return!1}},nF=()=>({state:t,dispatch:e})=>vB(t,e),rF=()=>({state:t,dispatch:e})=>xB(t,e);function aM(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function iF(t){const e=t.split(/-(?!$)/);let n=e[e.length-1];n==="Space"&&(n=" ");let r,i,o,s;for(let a=0;a<e.length-1;a+=1){const c=e[a];if(/^(cmd|meta|m)$/i.test(c))s=!0;else if(/^a(lt)?$/i.test(c))r=!0;else if(/^(c|ctrl|control)$/i.test(c))i=!0;else if(/^s(hift)?$/i.test(c))o=!0;else if(/^mod$/i.test(c))Ed()||aM()?s=!0:i=!0;else throw new Error(`Unrecognized modifier name: ${c}`)}return r&&(n=`Alt-${n}`),i&&(n=`Ctrl-${n}`),s&&(n=`Meta-${n}`),o&&(n=`Shift-${n}`),n}var oF=t=>({editor:e,view:n,tr:r,dispatch:i})=>{const o=iF(t).split(/-(?!$)/),s=o.find(f=>!["Alt","Ctrl","Meta","Shift"].includes(f)),a=new KeyboardEvent("keydown",{key:s==="Space"?" ":s,altKey:o.includes("Alt"),ctrlKey:o.includes("Ctrl"),metaKey:o.includes("Meta"),shiftKey:o.includes("Shift"),bubbles:!0,cancelable:!0}),c=e.captureTransaction(()=>{n.someProp("handleKeyDown",f=>f(n,a))});return c==null||c.steps.forEach(f=>{const d=f.map(r.mapping);d&&i&&r.maybeStep(d)}),!0};function Jo(t,e,n={}){const{from:r,to:i,empty:o}=t.selection,s=e?Nt(e,t.schema):null,a=[];t.doc.nodesBetween(r,i,(p,m)=>{if(p.isText)return;const g=Math.max(r,m),v=Math.min(i,m+p.nodeSize);a.push({node:p,from:g,to:v})});const c=i-r,f=a.filter(p=>s?s.name===p.node.type.name:!0).filter(p=>Cd(p.node.attrs,n,{strict:!1}));return o?!!f.length:f.reduce((p,m)=>p+m.to-m.from,0)>=c}var sF=(t,e={})=>({state:n,dispatch:r})=>{const i=Nt(t,n.schema);return Jo(n,i,e)?kB(n,r):!1},lF=()=>({state:t,dispatch:e})=>vT(t,e),aF=t=>({state:e,dispatch:n})=>{const r=Nt(t,e.schema);return DB(r)(e,n)},uF=()=>({state:t,dispatch:e})=>gT(t,e);function Ih(t,e){return e.nodes[t]?"node":e.marks[t]?"mark":null}function xk(t,e){const n=typeof e=="string"?[e]:e;return Object.keys(t).reduce((r,i)=>(n.includes(i)||(r[i]=t[i]),r),{})}var cF=(t,e)=>({tr:n,state:r,dispatch:i})=>{let o=null,s=null;const a=Ih(typeof t=="string"?t:t.name,r.schema);if(!a)return!1;a==="node"&&(o=Nt(t,r.schema)),a==="mark"&&(s=eo(t,r.schema));let c=!1;return n.selection.ranges.forEach(f=>{r.doc.nodesBetween(f.$from.pos,f.$to.pos,(d,p)=>{o&&o===d.type&&(c=!0,i&&n.setNodeMarkup(p,void 0,xk(d.attrs,e))),s&&d.marks.length&&d.marks.forEach(m=>{s===m.type&&(c=!0,i&&n.addMark(p,p+d.nodeSize,s.create(xk(m.attrs,e))))})})}),c},fF=()=>({tr:t,dispatch:e})=>(e&&t.scrollIntoView(),!0),dF=()=>({tr:t,dispatch:e})=>{if(e){const n=new pr(t.doc);t.setSelection(n)}return!0},hF=()=>({state:t,dispatch:e})=>dT(t,e),pF=()=>({state:t,dispatch:e})=>mT(t,e),mF=()=>({state:t,dispatch:e})=>TB(t,e),gF=()=>({state:t,dispatch:e})=>NB(t,e),yF=()=>({state:t,dispatch:e})=>_B(t,e);function b0(t,e,n={},r={}){return Bu(t,e,{slice:!1,parseOptions:n,errorOnInvalidContent:r.errorOnInvalidContent})}var vF=(t,{errorOnInvalidContent:e,emitUpdate:n=!0,parseOptions:r={}}={})=>({editor:i,tr:o,dispatch:s,commands:a})=>{const{doc:c}=o;if(r.preserveWhitespace!=="full"){const f=b0(t,i.schema,r,{errorOnInvalidContent:e??i.options.enableContentCheck});return s&&o.replaceWith(0,c.content.size,f).setMeta("preventUpdate",!n),!0}return s&&o.setMeta("preventUpdate",!n),a.insertContentAt({from:0,to:c.content.size},t,{parseOptions:r,errorOnInvalidContent:e??i.options.enableContentCheck})};function uM(t,e){const n=eo(e,t.schema),{from:r,to:i,empty:o}=t.selection,s=[];o?(t.storedMarks&&s.push(...t.storedMarks),s.push(...t.selection.$head.marks())):t.doc.nodesBetween(r,i,c=>{s.push(...c.marks)});const a=s.find(c=>c.type.name===n.name);return a?{...a.attrs}:{}}function cM(t,e){const n=new sT(t);return e.forEach(r=>{r.steps.forEach(i=>{n.step(i)})}),n}function xF(t){for(let e=0;e<t.edgeCount;e+=1){const{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}function wF(t,e,n){const r=[];return t.nodesBetween(e.from,e.to,(i,o)=>{n(i)&&r.push({node:i,pos:o})}),r}function SF(t,e){for(let n=t.depth;n>0;n-=1){const r=t.node(n);if(e(r))return{pos:n>0?t.before(n):0,start:t.start(n),depth:n,node:r}}}function Lh(t){return e=>SF(e.$from,t)}function ue(t,e,n){return t.config[e]===void 0&&t.parent?ue(t.parent,e,n):typeof t.config[e]=="function"?t.config[e].bind({...n,parent:t.parent?ue(t.parent,e,n):null}):t.config[e]}function sv(t){return t.map(e=>{const n={name:e.name,options:e.options,storage:e.storage},r=ue(e,"addExtensions",n);return r?[e,...sv(r())]:e}).flat(10)}function lv(t,e){const n=Ks.fromSchema(e).serializeFragment(t),i=document.implementation.createHTMLDocument().createElement("div");return i.appendChild(n),i.innerHTML}function fM(t){return typeof t=="function"}function Ve(t,e=void 0,...n){return fM(t)?e?t.bind(e)(...n):t(...n):t}function kF(t={}){return Object.keys(t).length===0&&t.constructor===Object}function ta(t){const e=t.filter(i=>i.type==="extension"),n=t.filter(i=>i.type==="node"),r=t.filter(i=>i.type==="mark");return{baseExtensions:e,nodeExtensions:n,markExtensions:r}}function dM(t){const e=[],{nodeExtensions:n,markExtensions:r}=ta(t),i=[...n,...r],o={default:null,validate:void 0,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return t.forEach(s=>{const a={name:s.name,options:s.options,storage:s.storage,extensions:i},c=ue(s,"addGlobalAttributes",a);if(!c)return;c().forEach(d=>{d.types.forEach(p=>{Object.entries(d.attributes).forEach(([m,g])=>{e.push({type:p,name:m,attribute:{...o,...g}})})})})}),i.forEach(s=>{const a={name:s.name,options:s.options,storage:s.storage},c=ue(s,"addAttributes",a);if(!c)return;const f=c();Object.entries(f).forEach(([d,p])=>{const m={...o,...p};typeof(m==null?void 0:m.default)=="function"&&(m.default=m.default()),m!=null&&m.isRequired&&(m==null?void 0:m.default)===void 0&&delete m.default,e.push({type:s.name,name:d,attribute:m})})}),e}function Ot(...t){return t.filter(e=>!!e).reduce((e,n)=>{const r={...e};return Object.entries(n).forEach(([i,o])=>{if(!r[i]){r[i]=o;return}if(i==="class"){const a=o?String(o).split(" "):[],c=r[i]?r[i].split(" "):[],f=a.filter(d=>!c.includes(d));r[i]=[...c,...f].join(" ")}else if(i==="style"){const a=o?o.split(";").map(d=>d.trim()).filter(Boolean):[],c=r[i]?r[i].split(";").map(d=>d.trim()).filter(Boolean):[],f=new Map;c.forEach(d=>{const[p,m]=d.split(":").map(g=>g.trim());f.set(p,m)}),a.forEach(d=>{const[p,m]=d.split(":").map(g=>g.trim());f.set(p,m)}),r[i]=Array.from(f.entries()).map(([d,p])=>`${d}: ${p}`).join("; ")}else r[i]=o}),r},{})}function ju(t,e){return e.filter(n=>n.type===t.type.name).filter(n=>n.attribute.rendered).map(n=>n.attribute.renderHTML?n.attribute.renderHTML(t.attrs)||{}:{[n.name]:t.attrs[n.name]}).reduce((n,r)=>Ot(n,r),{})}function bF(t){return typeof t!="string"?t:t.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(t):t==="true"?!0:t==="false"?!1:t}function wk(t,e){return"style"in t?t:{...t,getAttrs:n=>{const r=t.getAttrs?t.getAttrs(n):t.attrs;if(r===!1)return!1;const i=e.reduce((o,s)=>{const a=s.attribute.parseHTML?s.attribute.parseHTML(n):bF(n.getAttribute(s.name));return a==null?o:{...o,[s.name]:a}},{});return{...r,...i}}}}function Sk(t){return Object.fromEntries(Object.entries(t).filter(([e,n])=>e==="attrs"&&kF(n)?!1:n!=null))}function kk(t){var e,n;const r={};return!((e=t==null?void 0:t.attribute)!=null&&e.isRequired)&&"default"in((t==null?void 0:t.attribute)||{})&&(r.default=t.attribute.default),((n=t==null?void 0:t.attribute)==null?void 0:n.validate)!==void 0&&(r.validate=t.attribute.validate),[t.name,r]}function CF(t,e){var n;const r=dM(t),{nodeExtensions:i,markExtensions:o}=ta(t),s=(n=i.find(f=>ue(f,"topNode")))==null?void 0:n.name,a=Object.fromEntries(i.map(f=>{const d=r.filter(x=>x.type===f.name),p={name:f.name,options:f.options,storage:f.storage,editor:e},m=t.reduce((x,w)=>{const E=ue(w,"extendNodeSchema",p);return{...x,...E?E(f):{}}},{}),g=Sk({...m,content:Ve(ue(f,"content",p)),marks:Ve(ue(f,"marks",p)),group:Ve(ue(f,"group",p)),inline:Ve(ue(f,"inline",p)),atom:Ve(ue(f,"atom",p)),selectable:Ve(ue(f,"selectable",p)),draggable:Ve(ue(f,"draggable",p)),code:Ve(ue(f,"code",p)),whitespace:Ve(ue(f,"whitespace",p)),linebreakReplacement:Ve(ue(f,"linebreakReplacement",p)),defining:Ve(ue(f,"defining",p)),isolating:Ve(ue(f,"isolating",p)),attrs:Object.fromEntries(d.map(kk))}),v=Ve(ue(f,"parseHTML",p));v&&(g.parseDOM=v.map(x=>wk(x,d)));const k=ue(f,"renderHTML",p);k&&(g.toDOM=x=>k({node:x,HTMLAttributes:ju(x,d)}));const b=ue(f,"renderText",p);return b&&(g.toText=b),[f.name,g]})),c=Object.fromEntries(o.map(f=>{const d=r.filter(b=>b.type===f.name),p={name:f.name,options:f.options,storage:f.storage,editor:e},m=t.reduce((b,x)=>{const w=ue(x,"extendMarkSchema",p);return{...b,...w?w(f):{}}},{}),g=Sk({...m,inclusive:Ve(ue(f,"inclusive",p)),excludes:Ve(ue(f,"excludes",p)),group:Ve(ue(f,"group",p)),spanning:Ve(ue(f,"spanning",p)),code:Ve(ue(f,"code",p)),attrs:Object.fromEntries(d.map(kk))}),v=Ve(ue(f,"parseHTML",p));v&&(g.parseDOM=v.map(b=>wk(b,d)));const k=ue(f,"renderHTML",p);return k&&(g.toDOM=b=>k({mark:b,HTMLAttributes:ju(b,d)})),[f.name,g]}));return new VE({topNode:s,nodes:a,marks:c})}function EF(t){const e=t.filter((n,r)=>t.indexOf(n)!==r);return Array.from(new Set(e))}function Td(t){return t.sort((n,r)=>{const i=ue(n,"priority")||100,o=ue(r,"priority")||100;return i>o?-1:i<o?1:0})}function hM(t){const e=Td(sv(t)),n=EF(e.map(r=>r.name));return n.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${n.map(r=>`'${r}'`).join(", ")}]. This can lead to issues.`),e}function pM(t,e,n){const{from:r,to:i}=e,{blockSeparator:o=`

`,textSerializers:s={}}=n||{};let a="";return t.nodesBetween(r,i,(c,f,d,p)=>{var m;c.isBlock&&f>r&&(a+=o);const g=s==null?void 0:s[c.type.name];if(g)return d&&(a+=g({node:c,pos:f,parent:d,index:p,range:e})),!1;c.isText&&(a+=(m=c==null?void 0:c.text)==null?void 0:m.slice(Math.max(r,f)-f,i-f))}),a}function TF(t,e){const n={from:0,to:t.content.size};return pM(t,n,e)}function mM(t){return Object.fromEntries(Object.entries(t.nodes).filter(([,e])=>e.spec.toText).map(([e,n])=>[e,n.spec.toText]))}function MF(t,e){const n=Nt(e,t.schema),{from:r,to:i}=t.selection,o=[];t.doc.nodesBetween(r,i,a=>{o.push(a)});const s=o.reverse().find(a=>a.type.name===n.name);return s?{...s.attrs}:{}}function gM(t,e){const n=Ih(typeof e=="string"?e:e.name,t.schema);return n==="node"?MF(t,e):n==="mark"?uM(t,e):{}}function _F(t,e=JSON.stringify){const n={};return t.filter(r=>{const i=e(r);return Object.prototype.hasOwnProperty.call(n,i)?!1:n[i]=!0})}function NF(t){const e=_F(t);return e.length===1?e:e.filter((n,r)=>!e.filter((o,s)=>s!==r).some(o=>n.oldRange.from>=o.oldRange.from&&n.oldRange.to<=o.oldRange.to&&n.newRange.from>=o.newRange.from&&n.newRange.to<=o.newRange.to))}function yM(t){const{mapping:e,steps:n}=t,r=[];return e.maps.forEach((i,o)=>{const s=[];if(i.ranges.length)i.forEach((a,c)=>{s.push({from:a,to:c})});else{const{from:a,to:c}=n[o];if(a===void 0||c===void 0)return;s.push({from:a,to:c})}s.forEach(({from:a,to:c})=>{const f=e.slice(o).map(a,-1),d=e.slice(o).map(c),p=e.invert().map(f,-1),m=e.invert().map(d);r.push({oldRange:{from:p,to:m},newRange:{from:f,to:d}})})}),NF(r)}function av(t,e,n){const r=[];return t===e?n.resolve(t).marks().forEach(i=>{const o=n.resolve(t),s=ov(o,i.type);s&&r.push({mark:i,...s})}):n.nodesBetween(t,e,(i,o)=>{!i||(i==null?void 0:i.nodeSize)===void 0||r.push(...i.marks.map(s=>({from:o,to:o+i.nodeSize,mark:s})))}),r}var OF=(t,e,n,r=20)=>{const i=t.doc.resolve(n);let o=r,s=null;for(;o>0&&s===null;){const a=i.node(o);(a==null?void 0:a.type.name)===e?s=a:o-=1}return[s,o]};function pf(t,e){return e.nodes[t]||e.marks[t]||null}function Bf(t,e,n){return Object.fromEntries(Object.entries(n).filter(([r])=>{const i=t.find(o=>o.type===e&&o.name===r);return i?i.attribute.keepOnSplit:!1}))}var AF=(t,e=500)=>{let n="";const r=t.parentOffset;return t.parent.nodesBetween(Math.max(0,r-e),r,(i,o,s,a)=>{var c,f;const d=((f=(c=i.type.spec).toText)==null?void 0:f.call(c,{node:i,pos:o,parent:s,index:a}))||i.textContent||"%leaf%";n+=i.isAtom&&!i.isText?d:d.slice(0,Math.max(0,r-o))}),n};function C0(t,e,n={}){const{empty:r,ranges:i}=t.selection,o=e?eo(e,t.schema):null;if(r)return!!(t.storedMarks||t.selection.$from.marks()).filter(p=>o?o.name===p.type.name:!0).find(p=>Cd(p.attrs,n,{strict:!1}));let s=0;const a=[];if(i.forEach(({$from:p,$to:m})=>{const g=p.pos,v=m.pos;t.doc.nodesBetween(g,v,(k,b)=>{if(!k.isText&&!k.marks.length)return;const x=Math.max(g,b),w=Math.min(v,b+k.nodeSize),E=w-x;s+=E,a.push(...k.marks.map(_=>({mark:_,from:x,to:w})))})}),s===0)return!1;const c=a.filter(p=>o?o.name===p.mark.type.name:!0).filter(p=>Cd(p.mark.attrs,n,{strict:!1})).reduce((p,m)=>p+m.to-m.from,0),f=a.filter(p=>o?p.mark.type!==o&&p.mark.type.excludes(o):!0).reduce((p,m)=>p+m.to-m.from,0);return(c>0?c+f:c)>=s}function PF(t,e,n={}){if(!e)return Jo(t,null,n)||C0(t,null,n);const r=Ih(e,t.schema);return r==="node"?Jo(t,e,n):r==="mark"?C0(t,e,n):!1}var RF=(t,e)=>{const{$from:n,$to:r,$anchor:i}=t.selection;if(e){const o=Lh(a=>a.type.name===e)(t.selection);if(!o)return!1;const s=t.doc.resolve(o.pos+1);return i.pos+1===s.end()}return!(r.parentOffset<r.parent.nodeSize-2||n.pos!==r.pos)},DF=t=>{const{$from:e,$to:n}=t.selection;return!(e.parentOffset>0||e.pos!==n.pos)};function bk(t,e){return Array.isArray(e)?e.some(n=>(typeof n=="string"?n:n.name)===t.name):e}function Ck(t,e){const{nodeExtensions:n}=ta(e),r=n.find(s=>s.name===t);if(!r)return!1;const i={name:r.name,options:r.options,storage:r.storage},o=Ve(ue(r,"group",i));return typeof o!="string"?!1:o.split(" ").includes("list")}function zh(t,{checkChildren:e=!0,ignoreWhitespace:n=!1}={}){var r;if(n){if(t.type.name==="hardBreak")return!0;if(t.isText)return/^\s*$/m.test((r=t.text)!=null?r:"")}if(t.isText)return!t.text;if(t.isAtom||t.isLeaf)return!1;if(t.content.childCount===0)return!0;if(e){let i=!0;return t.content.forEach(o=>{i!==!1&&(zh(o,{ignoreWhitespace:n,checkChildren:e})||(i=!1))}),i}return!1}function vM(t){return t instanceof ce}var xM=class wM{constructor(e){this.position=e}static fromJSON(e){return new wM(e.position)}toJSON(){return{position:this.position}}};function IF(t,e){const n=e.mapping.mapResult(t.position);return{position:new xM(n.pos),mapResult:n}}function LF(t){return new xM(t)}function zF(t,e,n){var r;const{selection:i}=e;let o=null;if(oM(i)&&(o=i.$cursor),o){const a=(r=t.storedMarks)!=null?r:o.marks();return o.parent.type.allowsMarkType(n)&&(!!n.isInSet(a)||!a.some(f=>f.type.excludes(n)))}const{ranges:s}=i;return s.some(({$from:a,$to:c})=>{let f=a.depth===0?t.doc.inlineContent&&t.doc.type.allowsMarkType(n):!1;return t.doc.nodesBetween(a.pos,c.pos,(d,p,m)=>{if(f)return!1;if(d.isInline){const g=!m||m.type.allowsMarkType(n),v=!!n.isInSet(d.marks)||!d.marks.some(k=>k.type.excludes(n));f=g&&v}return!f}),f})}var BF=(t,e={})=>({tr:n,state:r,dispatch:i})=>{const{selection:o}=n,{empty:s,ranges:a}=o,c=eo(t,r.schema);if(i)if(s){const f=uM(r,c);n.addStoredMark(c.create({...f,...e}))}else a.forEach(f=>{const d=f.$from.pos,p=f.$to.pos;r.doc.nodesBetween(d,p,(m,g)=>{const v=Math.max(g,d),k=Math.min(g+m.nodeSize,p);m.marks.find(x=>x.type===c)?m.marks.forEach(x=>{c===x.type&&n.addMark(v,k,c.create({...x.attrs,...e}))}):n.addMark(v,k,c.create(e))})});return zF(r,n,c)},jF=(t,e)=>({tr:n})=>(n.setMeta(t,e),!0),FF=(t,e={})=>({state:n,dispatch:r,chain:i})=>{const o=Nt(t,n.schema);let s;return n.selection.$anchor.sameParent(n.selection.$head)&&(s=n.selection.$anchor.parent.attrs),o.isTextblock?i().command(({commands:a})=>zS(o,{...s,...e})(n)?!0:a.clearNodes()).command(({state:a})=>zS(o,{...s,...e})(a,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},$F=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,i=Cs(t,0,r.content.size),o=ce.create(r,i);e.setSelection(o)}return!0},HF=(t,e)=>({tr:n,state:r,dispatch:i})=>{const{selection:o}=r;let s,a;return typeof e=="number"?(s=e,a=e):e&&"from"in e&&"to"in e?(s=e.from,a=e.to):(s=o.from,a=o.to),i&&n.doc.nodesBetween(s,a,(c,f)=>{c.isText||n.setNodeMarkup(f,void 0,{...c.attrs,dir:t})}),!0},UF=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,{from:i,to:o}=typeof t=="number"?{from:t,to:t}:t,s=ve.atStart(r).from,a=ve.atEnd(r).to,c=Cs(i,s,a),f=Cs(o,s,a),d=ve.create(r,c,f);e.setSelection(d)}return!0},VF=t=>({state:e,dispatch:n})=>{const r=Nt(t,e.schema);return zB(r)(e,n)};function Ek(t,e){const n=t.storedMarks||t.selection.$to.parentOffset&&t.selection.$from.marks();if(n){const r=n.filter(i=>e==null?void 0:e.includes(i.type.name));t.tr.ensureMarks(r)}}var WF=({keepMarks:t=!0}={})=>({tr:e,state:n,dispatch:r,editor:i})=>{const{selection:o,doc:s}=e,{$from:a,$to:c}=o,f=i.extensionManager.attributes,d=Bf(f,a.node().type.name,a.node().attrs);if(o instanceof ce&&o.node.isBlock)return!a.parentOffset||!qi(s,a.pos)?!1:(r&&(t&&Ek(n,i.extensionManager.splittableMarks),e.split(a.pos).scrollIntoView()),!0);if(!a.parent.isBlock)return!1;const p=c.parentOffset===c.parent.content.size,m=a.depth===0?void 0:xF(a.node(-1).contentMatchAt(a.indexAfter(-1)));let g=p&&m?[{type:m,attrs:d}]:void 0,v=qi(e.doc,e.mapping.map(a.pos),1,g);if(!g&&!v&&qi(e.doc,e.mapping.map(a.pos),1,m?[{type:m}]:void 0)&&(v=!0,g=m?[{type:m,attrs:d}]:void 0),r){if(v&&(o instanceof ve&&e.deleteSelection(),e.split(e.mapping.map(a.pos),1,g),m&&!p&&!a.parentOffset&&a.parent.type!==m)){const k=e.mapping.map(a.before()),b=e.doc.resolve(k);a.node(-1).canReplaceWith(b.index(),b.index()+1,m)&&e.setNodeMarkup(e.mapping.map(a.before()),m)}t&&Ek(n,i.extensionManager.splittableMarks),e.scrollIntoView()}return v},KF=(t,e={})=>({tr:n,state:r,dispatch:i,editor:o})=>{var s;const a=Nt(t,r.schema),{$from:c,$to:f}=r.selection,d=r.selection.node;if(d&&d.isBlock||c.depth<2||!c.sameParent(f))return!1;const p=c.node(-1);if(p.type!==a)return!1;const m=o.extensionManager.attributes;if(c.parent.content.size===0&&c.node(-1).childCount===c.indexAfter(-1)){if(c.depth===2||c.node(-3).type!==a||c.index(-2)!==c.node(-2).childCount-1)return!1;if(i){let x=q.empty;const w=c.index(-1)?1:c.index(-2)?2:3;for(let D=c.depth-w;D>=c.depth-3;D-=1)x=q.from(c.node(D).copy(x));const E=c.indexAfter(-1)<c.node(-2).childCount?1:c.indexAfter(-2)<c.node(-3).childCount?2:3,_={...Bf(m,c.node().type.name,c.node().attrs),...e},M=((s=a.contentMatch.defaultType)==null?void 0:s.createAndFill(_))||void 0;x=x.append(q.from(a.createAndFill(null,M)||void 0));const P=c.before(c.depth-(w-1));n.replace(P,c.after(-E),new te(x,4-w,0));let O=-1;n.doc.nodesBetween(P,n.doc.content.size,(D,z)=>{if(O>-1)return!1;D.isTextblock&&D.content.size===0&&(O=z+1)}),O>-1&&n.setSelection(ve.near(n.doc.resolve(O))),n.scrollIntoView()}return!0}const g=f.pos===c.end()?p.contentMatchAt(0).defaultType:null,v={...Bf(m,p.type.name,p.attrs),...e},k={...Bf(m,c.node().type.name,c.node().attrs),...e};n.delete(c.pos,f.pos);const b=g?[{type:a,attrs:v},{type:g,attrs:k}]:[{type:a,attrs:v}];if(!qi(n.doc,c.pos,2))return!1;if(i){const{selection:x,storedMarks:w}=r,{splittableMarks:E}=o.extensionManager,_=w||x.$to.parentOffset&&x.$from.marks();if(n.split(c.pos,2,b).scrollIntoView(),!_||!i)return!0;const M=_.filter(P=>E.includes(P.type.name));n.ensureMarks(M)}return!0},Zm=(t,e)=>{const n=Lh(s=>s.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(Math.max(0,n.pos-1)).before(n.depth);if(r===void 0)return!0;const i=t.doc.nodeAt(r);return n.node.type===(i==null?void 0:i.type)&&es(t.doc,n.pos)&&t.join(n.pos),!0},eg=(t,e)=>{const n=Lh(s=>s.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(n.start).after(n.depth);if(r===void 0)return!0;const i=t.doc.nodeAt(r);return n.node.type===(i==null?void 0:i.type)&&es(t.doc,r)&&t.join(r),!0},qF=(t,e,n,r={})=>({editor:i,tr:o,state:s,dispatch:a,chain:c,commands:f,can:d})=>{const{extensions:p,splittableMarks:m}=i.extensionManager,g=Nt(t,s.schema),v=Nt(e,s.schema),{selection:k,storedMarks:b}=s,{$from:x,$to:w}=k,E=x.blockRange(w),_=b||k.$to.parentOffset&&k.$from.marks();if(!E)return!1;const M=Lh(P=>Ck(P.type.name,p))(k);if(E.depth>=1&&M&&E.depth-M.depth<=1){if(M.node.type===g)return f.liftListItem(v);if(Ck(M.node.type.name,p)&&g.validContent(M.node.content)&&a)return c().command(()=>(o.setNodeMarkup(M.pos,g),!0)).command(()=>Zm(o,g)).command(()=>eg(o,g)).run()}return!n||!_||!a?c().command(()=>d().wrapInList(g,r)?!0:f.clearNodes()).wrapInList(g,r).command(()=>Zm(o,g)).command(()=>eg(o,g)).run():c().command(()=>{const P=d().wrapInList(g,r),O=_.filter(D=>m.includes(D.type.name));return o.ensureMarks(O),P?!0:f.clearNodes()}).wrapInList(g,r).command(()=>Zm(o,g)).command(()=>eg(o,g)).run()},GF=(t,e={},n={})=>({state:r,commands:i})=>{const{extendEmptyMarkRange:o=!1}=n,s=eo(t,r.schema);return C0(r,s,e)?i.unsetMark(s,{extendEmptyMarkRange:o}):i.setMark(s,e)},XF=(t,e,n={})=>({state:r,commands:i})=>{const o=Nt(t,r.schema),s=Nt(e,r.schema),a=Jo(r,o,n);let c;return r.selection.$anchor.sameParent(r.selection.$head)&&(c=r.selection.$anchor.parent.attrs),a?i.setNode(s,c):i.setNode(o,{...c,...n})},JF=(t,e={})=>({state:n,commands:r})=>{const i=Nt(t,n.schema);return Jo(n,i,e)?r.lift(i):r.wrapIn(i,e)},YF=()=>({state:t,dispatch:e})=>{const n=t.plugins;for(let r=0;r<n.length;r+=1){const i=n[r];let o;if(i.spec.isInputRules&&(o=i.getState(t))){if(e){const s=t.tr,a=o.transform;for(let c=a.steps.length-1;c>=0;c-=1)s.step(a.steps[c].invert(a.docs[c]));if(o.text){const c=s.doc.resolve(o.from).marks();s.replaceWith(o.from,o.to,t.schema.text(o.text,c))}else s.delete(o.from,o.to)}return!0}}return!1},QF=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,{empty:r,ranges:i}=n;return r||e&&i.forEach(o=>{t.removeMark(o.$from.pos,o.$to.pos)}),!0},ZF=(t,e={})=>({tr:n,state:r,dispatch:i})=>{var o;const{extendEmptyMarkRange:s=!1}=e,{selection:a}=n,c=eo(t,r.schema),{$from:f,empty:d,ranges:p}=a;if(!i)return!0;if(d&&s){let{from:m,to:g}=a;const v=(o=f.marks().find(b=>b.type===c))==null?void 0:o.attrs,k=ov(f,c,v);k&&(m=k.from,g=k.to),n.removeMark(m,g,c)}else p.forEach(m=>{n.removeMark(m.$from.pos,m.$to.pos,c)});return n.removeStoredMark(c),!0},e6=t=>({tr:e,state:n,dispatch:r})=>{const{selection:i}=n;let o,s;return typeof t=="number"?(o=t,s=t):t&&"from"in t&&"to"in t?(o=t.from,s=t.to):(o=i.from,s=i.to),r&&e.doc.nodesBetween(o,s,(a,c)=>{if(a.isText)return;const f={...a.attrs};delete f.dir,e.setNodeMarkup(c,void 0,f)}),!0},t6=(t,e={})=>({tr:n,state:r,dispatch:i})=>{let o=null,s=null;const a=Ih(typeof t=="string"?t:t.name,r.schema);if(!a)return!1;a==="node"&&(o=Nt(t,r.schema)),a==="mark"&&(s=eo(t,r.schema));let c=!1;return n.selection.ranges.forEach(f=>{const d=f.$from.pos,p=f.$to.pos;let m,g,v,k;n.selection.empty?r.doc.nodesBetween(d,p,(b,x)=>{o&&o===b.type&&(c=!0,v=Math.max(x,d),k=Math.min(x+b.nodeSize,p),m=x,g=b)}):r.doc.nodesBetween(d,p,(b,x)=>{x<d&&o&&o===b.type&&(c=!0,v=Math.max(x,d),k=Math.min(x+b.nodeSize,p),m=x,g=b),x>=d&&x<=p&&(o&&o===b.type&&(c=!0,i&&n.setNodeMarkup(x,void 0,{...b.attrs,...e})),s&&b.marks.length&&b.marks.forEach(w=>{if(s===w.type&&(c=!0,i)){const E=Math.max(x,d),_=Math.min(x+b.nodeSize,p);n.addMark(E,_,s.create({...w.attrs,...e}))}}))}),g&&(m!==void 0&&i&&n.setNodeMarkup(m,void 0,{...g.attrs,...e}),s&&g.marks.length&&g.marks.forEach(b=>{s===b.type&&i&&n.addMark(v,k,s.create({...b.attrs,...e}))}))}),c},n6=(t,e={})=>({state:n,dispatch:r})=>{const i=Nt(t,n.schema);return OB(i,e)(n,r)},r6=(t,e={})=>({state:n,dispatch:r})=>{const i=Nt(t,n.schema);return AB(i,e)(n,r)},i6=class{constructor(){this.callbacks={}}on(t,e){return this.callbacks[t]||(this.callbacks[t]=[]),this.callbacks[t].push(e),this}emit(t,...e){const n=this.callbacks[t];return n&&n.forEach(r=>r.apply(this,e)),this}off(t,e){const n=this.callbacks[t];return n&&(e?this.callbacks[t]=n.filter(r=>r!==e):delete this.callbacks[t]),this}once(t,e){const n=(...r)=>{this.off(t,n),e.apply(this,r)};return this.on(t,n)}removeAllListeners(){this.callbacks={}}},Bh=class{constructor(t){var e;this.find=t.find,this.handler=t.handler,this.undoable=(e=t.undoable)!=null?e:!0}},o6=(t,e)=>{if(iv(e))return e.exec(t);const n=e(t);if(!n)return null;const r=[n.text];return r.index=n.index,r.input=t,r.data=n.data,n.replaceWith&&(n.text.includes(n.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),r.push(n.replaceWith)),r};function mf(t){var e;const{editor:n,from:r,to:i,text:o,rules:s,plugin:a}=t,{view:c}=n;if(c.composing)return!1;const f=c.state.doc.resolve(r);if(f.parent.type.spec.code||(e=f.nodeBefore||f.nodeAfter)!=null&&e.marks.find(m=>m.type.spec.code))return!1;let d=!1;const p=AF(f)+o;return s.forEach(m=>{if(d)return;const g=o6(p,m.find);if(!g)return;const v=c.state.tr,k=Rh({state:c.state,transaction:v}),b={from:r-(g[0].length-o.length),to:i},{commands:x,chain:w,can:E}=new Dh({editor:n,state:k});m.handler({state:k,range:b,match:g,commands:x,chain:w,can:E})===null||!v.steps.length||(m.undoable&&v.setMeta(a,{transform:v,from:r,to:i,text:o}),c.dispatch(v),d=!0)}),d}function s6(t){const{editor:e,rules:n}=t,r=new ct({state:{init(){return null},apply(i,o,s){const a=i.getMeta(r);if(a)return a;const c=i.getMeta("applyInputRules");return!!c&&setTimeout(()=>{let{text:d}=c;typeof d=="string"?d=d:d=lv(q.from(d),s.schema);const{from:p}=c,m=p+d.length;mf({editor:e,from:p,to:m,text:d,rules:n,plugin:r})}),i.selectionSet||i.docChanged?null:o}},props:{handleTextInput(i,o,s,a){return mf({editor:e,from:o,to:s,text:a,rules:n,plugin:r})},handleDOMEvents:{compositionend:i=>(setTimeout(()=>{const{$cursor:o}=i.state.selection;o&&mf({editor:e,from:o.pos,to:o.pos,text:"",rules:n,plugin:r})}),!1)},handleKeyDown(i,o){if(o.key!=="Enter")return!1;const{$cursor:s}=i.state.selection;return s?mf({editor:e,from:s.pos,to:s.pos,text:`
`,rules:n,plugin:r}):!1}},isInputRules:!0});return r}function l6(t){return Object.prototype.toString.call(t).slice(8,-1)}function gf(t){return l6(t)!=="Object"?!1:t.constructor===Object&&Object.getPrototypeOf(t)===Object.prototype}function SM(t,e){const n={...t};return gf(t)&&gf(e)&&Object.keys(e).forEach(r=>{gf(e[r])&&gf(t[r])?n[r]=SM(t[r],e[r]):n[r]=e[r]}),n}var uv=class{constructor(t={}){this.type="extendable",this.parent=null,this.child=null,this.name="",this.config={name:this.name},this.config={...this.config,...t},this.name=this.config.name}get options(){return{...Ve(ue(this,"addOptions",{name:this.name}))||{}}}get storage(){return{...Ve(ue(this,"addStorage",{name:this.name,options:this.options}))||{}}}configure(t={}){const e=this.extend({...this.config,addOptions:()=>SM(this.options,t)});return e.name=this.name,e.parent=this.parent,e}extend(t={}){const e=new this.constructor({...this.config,...t});return e.parent=this,this.child=e,e.name="name"in t?t.name:e.parent.name,e}},qs=class kM extends uv{constructor(){super(...arguments),this.type="mark"}static create(e={}){const n=typeof e=="function"?e():e;return new kM(n)}static handleExit({editor:e,mark:n}){const{tr:r}=e.state,i=e.state.selection.$from;if(i.pos===i.end()){const s=i.marks();if(!!!s.find(f=>(f==null?void 0:f.type.name)===n.name))return!1;const c=s.find(f=>(f==null?void 0:f.type.name)===n.name);return c&&r.removeStoredMark(c),r.insertText(" ",i.pos),e.view.dispatch(r),!0}return!1}configure(e){return super.configure(e)}extend(e){const n=typeof e=="function"?e():e;return super.extend(n)}};function a6(t){return typeof t=="number"}var u6=class{constructor(t){this.find=t.find,this.handler=t.handler}},c6=(t,e,n)=>{if(iv(e))return[...t.matchAll(e)];const r=e(t,n);return r?r.map(i=>{const o=[i.text];return o.index=i.index,o.input=t,o.data=i.data,i.replaceWith&&(i.text.includes(i.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),o.push(i.replaceWith)),o}):[]};function f6(t){const{editor:e,state:n,from:r,to:i,rule:o,pasteEvent:s,dropEvent:a}=t,{commands:c,chain:f,can:d}=new Dh({editor:e,state:n}),p=[];return n.doc.nodesBetween(r,i,(g,v)=>{var k,b,x,w,E;if((b=(k=g.type)==null?void 0:k.spec)!=null&&b.code||!(g.isText||g.isTextblock||g.isInline))return;const _=(E=(w=(x=g.content)==null?void 0:x.size)!=null?w:g.nodeSize)!=null?E:0,M=Math.max(r,v),P=Math.min(i,v+_);if(M>=P)return;const O=g.isText?g.text||"":g.textBetween(M-v,P-v,void 0,"");c6(O,o.find,s).forEach(z=>{if(z.index===void 0)return;const j=M+z.index+1,ee=j+z[0].length,oe={from:n.tr.mapping.map(j),to:n.tr.mapping.map(ee)},he=o.handler({state:n,range:oe,match:z,commands:c,chain:f,can:d,pasteEvent:s,dropEvent:a});p.push(he)})}),p.every(g=>g!==null)}var yf=null,d6=t=>{var e;const n=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(e=n.clipboardData)==null||e.setData("text/html",t),n};function h6(t){const{editor:e,rules:n}=t;let r=null,i=!1,o=!1,s=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,a;try{a=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{a=null}const c=({state:d,from:p,to:m,rule:g,pasteEvt:v})=>{const k=d.tr,b=Rh({state:d,transaction:k});if(!(!f6({editor:e,state:b,from:Math.max(p-1,0),to:m.b-1,rule:g,pasteEvent:v,dropEvent:a})||!k.steps.length)){try{a=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{a=null}return s=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,k}};return n.map(d=>new ct({view(p){const m=v=>{var k;r=(k=p.dom.parentElement)!=null&&k.contains(v.target)?p.dom.parentElement:null,r&&(yf=e)},g=()=>{yf&&(yf=null)};return window.addEventListener("dragstart",m),window.addEventListener("dragend",g),{destroy(){window.removeEventListener("dragstart",m),window.removeEventListener("dragend",g)}}},props:{handleDOMEvents:{drop:(p,m)=>{if(o=r===p.dom.parentElement,a=m,!o){const g=yf;g!=null&&g.isEditable&&setTimeout(()=>{const v=g.state.selection;v&&g.commands.deleteRange({from:v.from,to:v.to})},10)}return!1},paste:(p,m)=>{var g;const v=(g=m.clipboardData)==null?void 0:g.getData("text/html");return s=m,i=!!(v!=null&&v.includes("data-pm-slice")),!1}}},appendTransaction:(p,m,g)=>{const v=p[0],k=v.getMeta("uiEvent")==="paste"&&!i,b=v.getMeta("uiEvent")==="drop"&&!o,x=v.getMeta("applyPasteRules"),w=!!x;if(!k&&!b&&!w)return;if(w){let{text:M}=x;typeof M=="string"?M=M:M=lv(q.from(M),g.schema);const{from:P}=x,O=P+M.length,D=d6(M);return c({rule:d,state:g,from:P,to:{b:O},pasteEvt:D})}const E=m.doc.content.findDiffStart(g.doc.content),_=m.doc.content.findDiffEnd(g.doc.content);if(!(!a6(E)||!_||E===_.b))return c({rule:d,state:g,from:E,to:_,pasteEvt:s})}}))}var jh=class{constructor(t,e){this.splittableMarks=[],this.editor=e,this.baseExtensions=t,this.extensions=hM(t),this.schema=CF(this.extensions,e),this.setupExtensions()}get commands(){return this.extensions.reduce((t,e)=>{const n={name:e.name,options:e.options,storage:this.editor.extensionStorage[e.name],editor:this.editor,type:pf(e.name,this.schema)},r=ue(e,"addCommands",n);return r?{...t,...r()}:t},{})}get plugins(){const{editor:t}=this;return Td([...this.extensions].reverse()).flatMap(r=>{const i={name:r.name,options:r.options,storage:this.editor.extensionStorage[r.name],editor:t,type:pf(r.name,this.schema)},o=[],s=ue(r,"addKeyboardShortcuts",i);let a={};if(r.type==="mark"&&ue(r,"exitable",i)&&(a.ArrowRight=()=>qs.handleExit({editor:t,mark:r})),s){const m=Object.fromEntries(Object.entries(s()).map(([g,v])=>[g,()=>v({editor:t})]));a={...a,...m}}const c=M5(a);o.push(c);const f=ue(r,"addInputRules",i);if(bk(r,t.options.enableInputRules)&&f){const m=f();if(m&&m.length){const g=s6({editor:t,rules:m}),v=Array.isArray(g)?g:[g];o.push(...v)}}const d=ue(r,"addPasteRules",i);if(bk(r,t.options.enablePasteRules)&&d){const m=d();if(m&&m.length){const g=h6({editor:t,rules:m});o.push(...g)}}const p=ue(r,"addProseMirrorPlugins",i);if(p){const m=p();o.push(...m)}return o})}get attributes(){return dM(this.extensions)}get nodeViews(){const{editor:t}=this,{nodeExtensions:e}=ta(this.extensions);return Object.fromEntries(e.filter(n=>!!ue(n,"addNodeView")).map(n=>{const r=this.attributes.filter(c=>c.type===n.name),i={name:n.name,options:n.options,storage:this.editor.extensionStorage[n.name],editor:t,type:Nt(n.name,this.schema)},o=ue(n,"addNodeView",i);if(!o)return[];const s=o();if(!s)return[];const a=(c,f,d,p,m)=>{const g=ju(c,r);return s({node:c,view:f,getPos:d,decorations:p,innerDecorations:m,editor:t,extension:n,HTMLAttributes:g})};return[n.name,a]}))}dispatchTransaction(t){const{editor:e}=this;return Td([...this.extensions].reverse()).reduceRight((r,i)=>{const o={name:i.name,options:i.options,storage:this.editor.extensionStorage[i.name],editor:e,type:pf(i.name,this.schema)},s=ue(i,"dispatchTransaction",o);return s?a=>{s.call(o,{transaction:a,next:r})}:r},t)}get markViews(){const{editor:t}=this,{markExtensions:e}=ta(this.extensions);return Object.fromEntries(e.filter(n=>!!ue(n,"addMarkView")).map(n=>{const r=this.attributes.filter(a=>a.type===n.name),i={name:n.name,options:n.options,storage:this.editor.extensionStorage[n.name],editor:t,type:eo(n.name,this.schema)},o=ue(n,"addMarkView",i);if(!o)return[];const s=(a,c,f)=>{const d=ju(a,r);return o()({mark:a,view:c,inline:f,editor:t,extension:n,HTMLAttributes:d,updateAttributes:p=>{M6(a,t,p)}})};return[n.name,s]}))}setupExtensions(){const t=this.extensions;this.editor.extensionStorage=Object.fromEntries(t.map(e=>[e.name,e.storage])),t.forEach(e=>{var n;const r={name:e.name,options:e.options,storage:this.editor.extensionStorage[e.name],editor:this.editor,type:pf(e.name,this.schema)};e.type==="mark"&&((n=Ve(ue(e,"keepOnSplit",r)))==null||n)&&this.splittableMarks.push(e.name);const i=ue(e,"onBeforeCreate",r),o=ue(e,"onCreate",r),s=ue(e,"onUpdate",r),a=ue(e,"onSelectionUpdate",r),c=ue(e,"onTransaction",r),f=ue(e,"onFocus",r),d=ue(e,"onBlur",r),p=ue(e,"onDestroy",r);i&&this.editor.on("beforeCreate",i),o&&this.editor.on("create",o),s&&this.editor.on("update",s),a&&this.editor.on("selectionUpdate",a),c&&this.editor.on("transaction",c),f&&this.editor.on("focus",f),d&&this.editor.on("blur",d),p&&this.editor.on("destroy",p)})}};jh.resolve=hM;jh.sort=Td;jh.flatten=sv;var p6={};rv(p6,{ClipboardTextSerializer:()=>CM,Commands:()=>EM,Delete:()=>TM,Drop:()=>MM,Editable:()=>_M,FocusEvents:()=>OM,Keymap:()=>AM,Paste:()=>PM,Tabindex:()=>RM,TextDirection:()=>DM,focusEventsPluginKey:()=>NM});var Ct=class bM extends uv{constructor(){super(...arguments),this.type="extension"}static create(e={}){const n=typeof e=="function"?e():e;return new bM(n)}configure(e){return super.configure(e)}extend(e){const n=typeof e=="function"?e():e;return super.extend(n)}},CM=Ct.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new ct({key:new It("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:t}=this,{state:e,schema:n}=t,{doc:r,selection:i}=e,{ranges:o}=i,s=Math.min(...o.map(d=>d.$from.pos)),a=Math.max(...o.map(d=>d.$to.pos)),c=mM(n);return pM(r,{from:s,to:a},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:c})}}})]}}),EM=Ct.create({name:"commands",addCommands(){return{...rM}}}),TM=Ct.create({name:"delete",onUpdate({transaction:t,appendedTransactions:e}){var n,r,i;const o=()=>{var s,a,c,f;if((f=(c=(a=(s=this.editor.options.coreExtensionOptions)==null?void 0:s.delete)==null?void 0:a.filterTransaction)==null?void 0:c.call(a,t))!=null?f:t.getMeta("y-sync$"))return;const d=cM(t.before,[t,...e]);yM(d).forEach(g=>{d.mapping.mapResult(g.oldRange.from).deletedAfter&&d.mapping.mapResult(g.oldRange.to).deletedBefore&&d.before.nodesBetween(g.oldRange.from,g.oldRange.to,(v,k)=>{const b=k+v.nodeSize-2,x=g.oldRange.from<=k&&b<=g.oldRange.to;this.editor.emit("delete",{type:"node",node:v,from:k,to:b,newFrom:d.mapping.map(k),newTo:d.mapping.map(b),deletedRange:g.oldRange,newRange:g.newRange,partial:!x,editor:this.editor,transaction:t,combinedTransform:d})})});const m=d.mapping;d.steps.forEach((g,v)=>{var k,b;if(g instanceof ri){const x=m.slice(v).map(g.from,-1),w=m.slice(v).map(g.to),E=m.invert().map(x,-1),_=m.invert().map(w),M=(k=d.doc.nodeAt(x-1))==null?void 0:k.marks.some(O=>O.eq(g.mark)),P=(b=d.doc.nodeAt(w))==null?void 0:b.marks.some(O=>O.eq(g.mark));this.editor.emit("delete",{type:"mark",mark:g.mark,from:g.from,to:g.to,deletedRange:{from:E,to:_},newRange:{from:x,to:w},partial:!!(P||M),editor:this.editor,transaction:t,combinedTransform:d})}})};(i=(r=(n=this.editor.options.coreExtensionOptions)==null?void 0:n.delete)==null?void 0:r.async)==null||i?setTimeout(o,0):o()}}),MM=Ct.create({name:"drop",addProseMirrorPlugins(){return[new ct({key:new It("tiptapDrop"),props:{handleDrop:(t,e,n,r)=>{this.editor.emit("drop",{editor:this.editor,event:e,slice:n,moved:r})}}})]}}),_M=Ct.create({name:"editable",addProseMirrorPlugins(){return[new ct({key:new It("editable"),props:{editable:()=>this.editor.options.editable}})]}}),NM=new It("focusEvents"),OM=Ct.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:t}=this;return[new ct({key:NM,props:{handleDOMEvents:{focus:(e,n)=>{t.isFocused=!0;const r=t.state.tr.setMeta("focus",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1},blur:(e,n)=>{t.isFocused=!1;const r=t.state.tr.setMeta("blur",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1}}}})]}}),AM=Ct.create({name:"keymap",addKeyboardShortcuts(){const t=()=>this.editor.commands.first(({commands:s})=>[()=>s.undoInputRule(),()=>s.command(({tr:a})=>{const{selection:c,doc:f}=a,{empty:d,$anchor:p}=c,{pos:m,parent:g}=p,v=p.parent.isTextblock&&m>0?a.doc.resolve(m-1):p,k=v.parent.type.spec.isolating,b=p.pos-p.parentOffset,x=k&&v.parent.childCount===1?b===p.pos:Te.atStart(f).from===m;return!d||!g.type.isTextblock||g.textContent.length||!x||x&&p.parent.type.name==="paragraph"?!1:s.clearNodes()}),()=>s.deleteSelection(),()=>s.joinBackward(),()=>s.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:s})=>[()=>s.deleteSelection(),()=>s.deleteCurrentNode(),()=>s.joinForward(),()=>s.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:s})=>[()=>s.newlineInCode(),()=>s.createParagraphNear(),()=>s.liftEmptyBlock(),()=>s.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:t,"Mod-Backspace":t,"Shift-Backspace":t,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},i={...r},o={...r,"Ctrl-h":t,"Alt-Backspace":t,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return Ed()||aM()?o:i},addProseMirrorPlugins(){return[new ct({key:new It("clearDocument"),appendTransaction:(t,e,n)=>{if(t.some(k=>k.getMeta("composition")))return;const r=t.some(k=>k.docChanged)&&!e.doc.eq(n.doc),i=t.some(k=>k.getMeta("preventClearDocument"));if(!r||i)return;const{empty:o,from:s,to:a}=e.selection,c=Te.atStart(e.doc).from,f=Te.atEnd(e.doc).to;if(o||!(s===c&&a===f)||!zh(n.doc))return;const m=n.tr,g=Rh({state:n,transaction:m}),{commands:v}=new Dh({editor:this.editor,state:g});if(v.clearNodes(),!!m.steps.length)return m}})]}}),PM=Ct.create({name:"paste",addProseMirrorPlugins(){return[new ct({key:new It("tiptapPaste"),props:{handlePaste:(t,e,n)=>{this.editor.emit("paste",{editor:this.editor,event:e,slice:n})}}})]}}),RM=Ct.create({name:"tabindex",addProseMirrorPlugins(){return[new ct({key:new It("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}}),DM=Ct.create({name:"textDirection",addOptions(){return{direction:void 0}},addGlobalAttributes(){if(!this.options.direction)return[];const{nodeExtensions:t}=ta(this.extensions);return[{types:t.filter(e=>e.name!=="text").map(e=>e.name),attributes:{dir:{default:this.options.direction,parseHTML:e=>{const n=e.getAttribute("dir");return n&&(n==="ltr"||n==="rtl"||n==="auto")?n:this.options.direction},renderHTML:e=>e.dir?{dir:e.dir}:{}}}}]},addProseMirrorPlugins(){return[new ct({key:new It("textDirection"),props:{attributes:()=>{const t=this.options.direction;return t?{dir:t}:{}}}})]}}),m6=class xl{constructor(e,n,r=!1,i=null){this.currentNode=null,this.actualDepth=null,this.isBlock=r,this.resolvedPos=e,this.editor=n,this.currentNode=i}get name(){return this.node.type.name}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var e;return(e=this.actualDepth)!=null?e:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(e){let n=this.from,r=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You cant set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}n=this.from+1,r=this.to-1}this.editor.commands.insertContentAt({from:n,to:r},e)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const e=this.resolvedPos.start(this.resolvedPos.depth-1),n=this.resolvedPos.doc.resolve(e);return new xl(n,this.editor)}get before(){let e=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.from-3)),new xl(e,this.editor)}get after(){let e=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.to+3)),new xl(e,this.editor)}get children(){const e=[];return this.node.content.forEach((n,r)=>{const i=n.isBlock&&!n.isTextblock,o=n.isAtom&&!n.isText,s=this.pos+r+(o?0:1);if(s<0||s>this.resolvedPos.doc.nodeSize-2)return;const a=this.resolvedPos.doc.resolve(s);if(!i&&a.depth<=this.depth)return;const c=new xl(a,this.editor,i,i?n:null);i&&(c.actualDepth=this.depth+1),e.push(new xl(a,this.editor,i,i?n:null))}),e}get firstChild(){return this.children[0]||null}get lastChild(){const e=this.children;return e[e.length-1]||null}closest(e,n={}){let r=null,i=this.parent;for(;i&&!r;){if(i.node.type.name===e)if(Object.keys(n).length>0){const o=i.node.attrs,s=Object.keys(n);for(let a=0;a<s.length;a+=1){const c=s[a];if(o[c]!==n[c])break}}else r=i;i=i.parent}return r}querySelector(e,n={}){return this.querySelectorAll(e,n,!0)[0]||null}querySelectorAll(e,n={},r=!1){let i=[];if(!this.children||this.children.length===0)return i;const o=Object.keys(n);return this.children.forEach(s=>{r&&i.length>0||(s.node.type.name===e&&o.every(c=>n[c]===s.node.attrs[c])&&i.push(s),!(r&&i.length>0)&&(i=i.concat(s.querySelectorAll(e,n,r))))}),i}setAttribute(e){const{tr:n}=this.editor.state;n.setNodeMarkup(this.from,void 0,{...this.node.attrs,...e}),this.editor.view.dispatch(n)}},g6=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}`;function y6(t,e,n){const r=document.querySelector("style[data-tiptap-style]");if(r!==null)return r;const i=document.createElement("style");return e&&i.setAttribute("nonce",e),i.setAttribute("data-tiptap-style",""),i.innerHTML=t,document.getElementsByTagName("head")[0].appendChild(i),i}var v6=class extends i6{constructor(t={}){super(),this.css=null,this.className="tiptap",this.editorView=null,this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.instanceId=Math.random().toString(36).slice(2,9),this.options={element:typeof document<"u"?document.createElement("div"):null,content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,textDirection:void 0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,emitContentError:!1,onBeforeCreate:()=>null,onCreate:()=>null,onMount:()=>null,onUnmount:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:r})=>{throw r},onPaste:()=>null,onDrop:()=>null,onDelete:()=>null,enableExtensionDispatchTransaction:!0},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.utils={getUpdatedPosition:IF,createMappablePosition:LF},this.setOptions(t),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("mount",this.options.onMount),this.on("unmount",this.options.onUnmount),this.on("contentError",this.options.onContentError),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:r,slice:i,moved:o})=>this.options.onDrop(r,i,o)),this.on("paste",({event:r,slice:i})=>this.options.onPaste(r,i)),this.on("delete",this.options.onDelete);const e=this.createDoc(),n=sM(e,this.options.autofocus);this.editorState=Dl.create({doc:e,schema:this.schema,selection:n||void 0}),this.options.element&&this.mount(this.options.element)}mount(t){if(typeof document>"u")throw new Error("[tiptap error]: The editor cannot be mounted because there is no 'document' defined in this environment.");this.createView(t),this.emit("mount",{editor:this}),this.css&&!document.head.contains(this.css)&&document.head.appendChild(this.css),window.setTimeout(()=>{this.isDestroyed||(this.options.autofocus!==!1&&this.options.autofocus!==null&&this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}unmount(){if(this.editorView){const t=this.editorView.dom;t!=null&&t.editor&&delete t.editor,this.editorView.destroy()}if(this.editorView=null,this.isInitialized=!1,this.css&&!document.querySelectorAll(`.${this.className}`).length)try{typeof this.css.remove=="function"?this.css.remove():this.css.parentNode&&this.css.parentNode.removeChild(this.css)}catch(t){console.warn("Failed to remove CSS element:",t)}this.css=null,this.emit("unmount",{editor:this})}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&typeof document<"u"&&(this.css=y6(g6,this.options.injectNonce))}setOptions(t={}){this.options={...this.options,...t},!(!this.editorView||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(t,e=!0){this.setOptions({editable:t}),e&&this.emit("update",{editor:this,transaction:this.state.tr,appendedTransactions:[]})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get view(){return this.editorView?this.editorView:new Proxy({state:this.editorState,updateState:t=>{this.editorState=t},dispatch:t=>{this.dispatchTransaction(t)},composing:!1,dragging:null,editable:!0,isDestroyed:!1},{get:(t,e)=>{if(this.editorView)return this.editorView[e];if(e==="state")return this.editorState;if(e in t)return Reflect.get(t,e);throw new Error(`[tiptap error]: The editor view is not available. Cannot access view['${e}']. The editor may not be mounted yet.`)}})}get state(){return this.editorView&&(this.editorState=this.view.state),this.editorState}registerPlugin(t,e){const n=fM(e)?e(t,[...this.state.plugins]):[...this.state.plugins,t],r=this.state.reconfigure({plugins:n});return this.view.updateState(r),r}unregisterPlugin(t){if(this.isDestroyed)return;const e=this.state.plugins;let n=e;if([].concat(t).forEach(i=>{const o=typeof i=="string"?`${i}$`:i.key;n=n.filter(s=>!s.key.startsWith(o))}),e.length===n.length)return;const r=this.state.reconfigure({plugins:n});return this.view.updateState(r),r}createExtensionManager(){var t,e;const r=[...this.options.enableCoreExtensions?[_M,CM.configure({blockSeparator:(e=(t=this.options.coreExtensionOptions)==null?void 0:t.clipboardTextSerializer)==null?void 0:e.blockSeparator}),EM,OM,AM,RM,MM,PM,TM,DM.configure({direction:this.options.textDirection})].filter(i=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[i.name]!==!1:!0):[],...this.options.extensions].filter(i=>["extension","node","mark"].includes(i==null?void 0:i.type));this.extensionManager=new jh(r,this)}createCommandManager(){this.commandManager=new Dh({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createDoc(){let t;try{t=b0(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(e){if(!(e instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(e.message))throw e;this.emit("contentError",{editor:this,error:e,disableCollaboration:()=>{"collaboration"in this.storage&&typeof this.storage.collaboration=="object"&&this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(n=>n.name!=="collaboration"),this.createExtensionManager()}}),t=b0(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}return t}createView(t){const{editorProps:e,enableExtensionDispatchTransaction:n}=this.options,r=e.dispatchTransaction||this.dispatchTransaction.bind(this),i=n?this.extensionManager.dispatchTransaction(r):r;this.editorView=new tM(t,{...e,attributes:{role:"textbox",...e==null?void 0:e.attributes},dispatchTransaction:i,state:this.editorState,markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews});const o=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(o),this.prependClass(),this.injectCSS();const s=this.view.dom;s.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`${this.className} ${this.view.dom.className}`}captureTransaction(t){this.isCapturingTransaction=!0,t(),this.isCapturingTransaction=!1;const e=this.capturedTransaction;return this.capturedTransaction=null,e}dispatchTransaction(t){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=t;return}t.steps.forEach(f=>{var d;return(d=this.capturedTransaction)==null?void 0:d.step(f)});return}const{state:e,transactions:n}=this.state.applyTransaction(t),r=!this.state.selection.eq(e.selection),i=n.includes(t),o=this.state;if(this.emit("beforeTransaction",{editor:this,transaction:t,nextState:e}),!i)return;this.view.updateState(e),this.emit("transaction",{editor:this,transaction:t,appendedTransactions:n.slice(1)}),r&&this.emit("selectionUpdate",{editor:this,transaction:t});const s=n.findLast(f=>f.getMeta("focus")||f.getMeta("blur")),a=s==null?void 0:s.getMeta("focus"),c=s==null?void 0:s.getMeta("blur");a&&this.emit("focus",{editor:this,event:a.event,transaction:s}),c&&this.emit("blur",{editor:this,event:c.event,transaction:s}),!(t.getMeta("preventUpdate")||!n.some(f=>f.docChanged)||o.doc.eq(e.doc))&&this.emit("update",{editor:this,transaction:t,appendedTransactions:n.slice(1)})}getAttributes(t){return gM(this.state,t)}isActive(t,e){const n=typeof t=="string"?t:null,r=typeof t=="string"?e:t;return PF(this.state,n,r)}getJSON(){return this.state.doc.toJSON()}getHTML(){return lv(this.state.doc.content,this.schema)}getText(t){const{blockSeparator:e=`

`,textSerializers:n={}}=t||{};return TF(this.state.doc,{blockSeparator:e,textSerializers:{...mM(this.schema),...n}})}get isEmpty(){return zh(this.state.doc)}destroy(){this.emit("destroy"),this.unmount(),this.removeAllListeners()}get isDestroyed(){var t,e;return(e=(t=this.editorView)==null?void 0:t.isDestroyed)!=null?e:!0}$node(t,e){var n;return((n=this.$doc)==null?void 0:n.querySelector(t,e))||null}$nodes(t,e){var n;return((n=this.$doc)==null?void 0:n.querySelectorAll(t,e))||null}$pos(t){const e=this.state.doc.resolve(t);return new m6(e,this)}get $doc(){return this.$pos(0)}};function na(t){return new Bh({find:t.find,handler:({state:e,range:n,match:r})=>{const i=Ve(t.getAttributes,void 0,r);if(i===!1||i===null)return null;const{tr:o}=e,s=r[r.length-1],a=r[0];if(s){const c=a.search(/\S/),f=n.from+a.indexOf(s),d=f+s.length;if(av(n.from,n.to,e.doc).filter(g=>g.mark.type.excluded.find(k=>k===t.type&&k!==g.mark.type)).filter(g=>g.to>f).length)return null;d<n.to&&o.delete(d,n.to),f>n.from&&o.delete(n.from+c,f);const m=n.from+c+s.length;o.addMark(n.from+c,m,t.type.create(i||{})),o.removeStoredMark(t.type)}},undoable:t.undoable})}function x6(t){return new Bh({find:t.find,handler:({state:e,range:n,match:r})=>{const i=Ve(t.getAttributes,void 0,r)||{},{tr:o}=e,s=n.from;let a=n.to;const c=t.type.create(i);if(r[1]){const f=r[0].lastIndexOf(r[1]);let d=s+f;d>a?d=a:a=d+r[1].length;const p=r[0][r[0].length-1];o.insertText(p,s+r[0].length-1),o.replaceWith(d,a,c)}else if(r[0]){const f=t.type.isInline?s:s-1;o.insert(f,t.type.create(i)).delete(o.mapping.map(s),o.mapping.map(a))}o.scrollIntoView()},undoable:t.undoable})}function E0(t){return new Bh({find:t.find,handler:({state:e,range:n,match:r})=>{const i=e.doc.resolve(n.from),o=Ve(t.getAttributes,void 0,r)||{};if(!i.node(-1).canReplaceWith(i.index(-1),i.indexAfter(-1),t.type))return null;e.tr.delete(n.from,n.to).setBlockType(n.from,n.from,t.type,o)},undoable:t.undoable})}function ra(t){return new Bh({find:t.find,handler:({state:e,range:n,match:r,chain:i})=>{const o=Ve(t.getAttributes,void 0,r)||{},s=e.tr.delete(n.from,n.to),c=s.doc.resolve(n.from).blockRange(),f=c&&$y(c,t.type,o);if(!f)return null;if(s.wrap(c,f),t.keepMarks&&t.editor){const{selection:p,storedMarks:m}=e,{splittableMarks:g}=t.editor.extensionManager,v=m||p.$to.parentOffset&&p.$from.marks();if(v){const k=v.filter(b=>g.includes(b.type.name));s.ensureMarks(k)}}if(t.keepAttributes){const p=t.type.name==="bulletList"||t.type.name==="orderedList"?"listItem":"taskList";i().updateAttributes(p,o).run()}const d=s.doc.resolve(n.from-1).nodeBefore;d&&d.type===t.type&&es(s.doc,n.from-1)&&(!t.joinPredicate||t.joinPredicate(r,d))&&s.join(n.from-1)},undoable:t.undoable})}function w6(t,e){const{selection:n}=t,{$from:r}=n;if(n instanceof ce){const o=r.index();return r.parent.canReplaceWith(o,o+1,e)}let i=r.depth;for(;i>=0;){const o=r.index(i);if(r.node(i).contentMatchAt(o).matchType(e))return!0;i-=1}return!1}var S6={};rv(S6,{createAtomBlockMarkdownSpec:()=>k6,createBlockMarkdownSpec:()=>b6,createInlineMarkdownSpec:()=>T6,parseAttributes:()=>cv,parseIndentedBlocks:()=>T0,renderNestedMarkdownContent:()=>dv,serializeAttributes:()=>fv});function cv(t){if(!(t!=null&&t.trim()))return{};const e={},n=[],r=t.replace(/["']([^"']*)["']/g,f=>(n.push(f),`__QUOTED_${n.length-1}__`)),i=r.match(/(?:^|\s)\.([a-zA-Z][\w-]*)/g);if(i){const f=i.map(d=>d.trim().slice(1));e.class=f.join(" ")}const o=r.match(/(?:^|\s)#([a-zA-Z][\w-]*)/);o&&(e.id=o[1]);const s=/([a-zA-Z][\w-]*)\s*=\s*(__QUOTED_\d+__)/g;Array.from(r.matchAll(s)).forEach(([,f,d])=>{var p;const m=parseInt(((p=d.match(/__QUOTED_(\d+)__/))==null?void 0:p[1])||"0",10),g=n[m];g&&(e[f]=g.slice(1,-1))});const c=r.replace(/(?:^|\s)\.([a-zA-Z][\w-]*)/g,"").replace(/(?:^|\s)#([a-zA-Z][\w-]*)/g,"").replace(/([a-zA-Z][\w-]*)\s*=\s*__QUOTED_\d+__/g,"").trim();return c&&c.split(/\s+/).filter(Boolean).forEach(d=>{d.match(/^[a-zA-Z][\w-]*$/)&&(e[d]=!0)}),e}function fv(t){if(!t||Object.keys(t).length===0)return"";const e=[];return t.class&&String(t.class).split(/\s+/).filter(Boolean).forEach(r=>e.push(`.${r}`)),t.id&&e.push(`#${t.id}`),Object.entries(t).forEach(([n,r])=>{n==="class"||n==="id"||(r===!0?e.push(n):r!==!1&&r!=null&&e.push(`${n}="${String(r)}"`))}),e.join(" ")}function k6(t){const{nodeName:e,name:n,parseAttributes:r=cv,serializeAttributes:i=fv,defaultAttributes:o={},requiredAttributes:s=[],allowedAttributes:a}=t,c=n||e,f=d=>{if(!a)return d;const p={};return a.forEach(m=>{m in d&&(p[m]=d[m])}),p};return{parseMarkdown:(d,p)=>{const m={...o,...d.attributes};return p.createNode(e,m,[])},markdownTokenizer:{name:e,level:"block",start(d){var p;const m=new RegExp(`^:::${c}(?:\\s|$)`,"m"),g=(p=d.match(m))==null?void 0:p.index;return g!==void 0?g:-1},tokenize(d,p,m){const g=new RegExp(`^:::${c}(?:\\s+\\{([^}]*)\\})?\\s*:::(?:\\n|$)`),v=d.match(g);if(!v)return;const k=v[1]||"",b=r(k);if(!s.find(w=>!(w in b)))return{type:e,raw:v[0],attributes:b}}},renderMarkdown:d=>{const p=f(d.attrs||{}),m=i(p),g=m?` {${m}}`:"";return`:::${c}${g} :::`}}}function b6(t){const{nodeName:e,name:n,getContent:r,parseAttributes:i=cv,serializeAttributes:o=fv,defaultAttributes:s={},content:a="block",allowedAttributes:c}=t,f=n||e,d=p=>{if(!c)return p;const m={};return c.forEach(g=>{g in p&&(m[g]=p[g])}),m};return{parseMarkdown:(p,m)=>{let g;if(r){const k=r(p);g=typeof k=="string"?[{type:"text",text:k}]:k}else a==="block"?g=m.parseChildren(p.tokens||[]):g=m.parseInline(p.tokens||[]);const v={...s,...p.attributes};return m.createNode(e,v,g)},markdownTokenizer:{name:e,level:"block",start(p){var m;const g=new RegExp(`^:::${f}`,"m"),v=(m=p.match(g))==null?void 0:m.index;return v!==void 0?v:-1},tokenize(p,m,g){var v;const k=new RegExp(`^:::${f}(?:\\s+\\{([^}]*)\\})?\\s*\\n`),b=p.match(k);if(!b)return;const[x,w=""]=b,E=i(w);let _=1;const M=x.length;let P="";const O=/^:::([\w-]*)(\s.*)?/gm,D=p.slice(M);for(O.lastIndex=0;;){const z=O.exec(D);if(z===null)break;const j=z.index,ee=z[1];if(!((v=z[2])!=null&&v.endsWith(":::"))){if(ee)_+=1;else if(_-=1,_===0){const oe=D.slice(0,j);P=oe.trim();const he=p.slice(0,M+j+z[0].length);let _e=[];if(P)if(a==="block")for(_e=g.blockTokens(oe),_e.forEach(xe=>{xe.text&&(!xe.tokens||xe.tokens.length===0)&&(xe.tokens=g.inlineTokens(xe.text))});_e.length>0;){const xe=_e[_e.length-1];if(xe.type==="paragraph"&&(!xe.text||xe.text.trim()===""))_e.pop();else break}else _e=g.inlineTokens(P);return{type:e,raw:he,attributes:E,content:P,tokens:_e}}}}}},renderMarkdown:(p,m)=>{const g=d(p.attrs||{}),v=o(g),k=v?` {${v}}`:"",b=m.renderChildren(p.content||[],`

`);return`:::${f}${k}

${b}

:::`}}}function C6(t){if(!t.trim())return{};const e={},n=/(\w+)=(?:"([^"]*)"|'([^']*)')/g;let r=n.exec(t);for(;r!==null;){const[,i,o,s]=r;e[i]=o||s,r=n.exec(t)}return e}function E6(t){return Object.entries(t).filter(([,e])=>e!=null).map(([e,n])=>`${e}="${n}"`).join(" ")}function T6(t){const{nodeName:e,name:n,getContent:r,parseAttributes:i=C6,serializeAttributes:o=E6,defaultAttributes:s={},selfClosing:a=!1,allowedAttributes:c}=t,f=n||e,d=m=>{if(!c)return m;const g={};return c.forEach(v=>{const k=typeof v=="string"?v:v.name,b=typeof v=="string"?void 0:v.skipIfDefault;if(k in m){const x=m[k];if(b!==void 0&&x===b)return;g[k]=x}}),g},p=f.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");return{parseMarkdown:(m,g)=>{const v={...s,...m.attributes};if(a)return g.createNode(e,v);const k=r?r(m):m.content||"";return k?g.createNode(e,v,[g.createTextNode(k)]):g.createNode(e,v,[])},markdownTokenizer:{name:e,level:"inline",start(m){const g=a?new RegExp(`\\[${p}\\s*[^\\]]*\\]`):new RegExp(`\\[${p}\\s*[^\\]]*\\][\\s\\S]*?\\[\\/${p}\\]`),v=m.match(g),k=v==null?void 0:v.index;return k!==void 0?k:-1},tokenize(m,g,v){const k=a?new RegExp(`^\\[${p}\\s*([^\\]]*)\\]`):new RegExp(`^\\[${p}\\s*([^\\]]*)\\]([\\s\\S]*?)\\[\\/${p}\\]`),b=m.match(k);if(!b)return;let x="",w="";if(a){const[,_]=b;w=_}else{const[,_,M]=b;w=_,x=M||""}const E=i(w.trim());return{type:e,raw:b[0],content:x.trim(),attributes:E}}},renderMarkdown:m=>{let g="";r?g=r(m):m.content&&m.content.length>0&&(g=m.content.filter(x=>x.type==="text").map(x=>x.text).join(""));const v=d(m.attrs||{}),k=o(v),b=k?` ${k}`:"";return a?`[${f}${b}]`:`[${f}${b}]${g}[/${f}]`}}}function T0(t,e,n){var r,i,o,s;const a=t.split(`
`),c=[];let f="",d=0;const p=e.baseIndentSize||2;for(;d<a.length;){const m=a[d],g=m.match(e.itemPattern);if(!g){if(c.length>0)break;if(m.trim()===""){d+=1,f=`${f}${m}
`;continue}else return}const v=e.extractItemData(g),{indentLevel:k,mainContent:b}=v;f=`${f}${m}
`;const x=[b];for(d+=1;d<a.length;){const M=a[d];if(M.trim()===""){const O=a.slice(d+1).findIndex(j=>j.trim()!=="");if(O===-1)break;if((((i=(r=a[d+1+O].match(/^(\s*)/))==null?void 0:r[1])==null?void 0:i.length)||0)>k){x.push(M),f=`${f}${M}
`,d+=1;continue}else break}if((((s=(o=M.match(/^(\s*)/))==null?void 0:o[1])==null?void 0:s.length)||0)>k)x.push(M),f=`${f}${M}
`,d+=1;else break}let w;const E=x.slice(1);if(E.length>0){const M=E.map(P=>P.slice(k+p)).join(`
`);M.trim()&&(e.customNestedParser?w=e.customNestedParser(M):w=n.blockTokens(M))}const _=e.createToken(v,w);c.push(_)}if(c.length!==0)return{items:c,raw:f}}function dv(t,e,n,r){if(!t||!Array.isArray(t.content))return"";const i=typeof n=="function"?n(r):n,[o,...s]=t.content,a=e.renderChildren([o]),c=[`${i}${a}`];return s&&s.length>0&&s.forEach(f=>{const d=e.renderChildren([f]);if(d){const p=d.split(`
`).map(m=>m?e.indent(m):"").join(`
`);c.push(p)}}),c.join(`
`)}function M6(t,e,n={}){const{state:r}=e,{doc:i,tr:o}=r,s=t;i.descendants((a,c)=>{const f=o.mapping.map(c),d=o.mapping.map(c)+a.nodeSize;let p=null;if(a.marks.forEach(g=>{if(g!==s)return!1;p=g}),!p)return;let m=!1;if(Object.keys(n).forEach(g=>{n[g]!==p.attrs[g]&&(m=!0)}),m){const g=t.type.create({...t.attrs,...n});o.removeMark(f,d,t.type),o.addMark(f,d,g)}}),o.docChanged&&e.view.dispatch(o)}var vr=class IM extends uv{constructor(){super(...arguments),this.type="node"}static create(e={}){const n=typeof e=="function"?e():e;return new IM(n)}configure(e){return super.configure(e)}extend(e){const n=typeof e=="function"?e():e;return super.extend(n)}};function Hs(t){return new u6({find:t.find,handler:({state:e,range:n,match:r,pasteEvent:i})=>{const o=Ve(t.getAttributes,void 0,r,i);if(o===!1||o===null)return null;const{tr:s}=e,a=r[r.length-1],c=r[0];let f=n.to;if(a){const d=c.search(/\S/),p=n.from+c.indexOf(a),m=p+a.length;if(av(n.from,n.to,e.doc).filter(v=>v.mark.type.excluded.find(b=>b===t.type&&b!==v.mark.type)).filter(v=>v.to>p).length)return null;m<n.to&&s.delete(m,n.to),p>n.from&&s.delete(n.from+d,p),f=n.from+d+a.length,s.addMark(n.from+d,f,t.type.create(o||{})),s.removeStoredMark(t.type)}}})}const{getOwnPropertyNames:_6,getOwnPropertySymbols:N6}=Object,{hasOwnProperty:O6}=Object.prototype;function tg(t,e){return function(r,i,o){return t(r,i,o)&&e(r,i,o)}}function vf(t){return function(n,r,i){if(!n||!r||typeof n!="object"||typeof r!="object")return t(n,r,i);const{cache:o}=i,s=o.get(n),a=o.get(r);if(s&&a)return s===r&&a===n;o.set(n,r),o.set(r,n);const c=t(n,r,i);return o.delete(n),o.delete(r),c}}function A6(t){return t!=null?t[Symbol.toStringTag]:void 0}function Tk(t){return _6(t).concat(N6(t))}const P6=Object.hasOwn||((t,e)=>O6.call(t,e));function Gs(t,e){return t===e||!t&&!e&&t!==t&&e!==e}const R6="__v",D6="__o",I6="_owner",{getOwnPropertyDescriptor:Mk,keys:_k}=Object;function L6(t,e){return t.byteLength===e.byteLength&&Md(new Uint8Array(t),new Uint8Array(e))}function z6(t,e,n){let r=t.length;if(e.length!==r)return!1;for(;r-- >0;)if(!n.equals(t[r],e[r],r,r,t,e,n))return!1;return!0}function B6(t,e){return t.byteLength===e.byteLength&&Md(new Uint8Array(t.buffer,t.byteOffset,t.byteLength),new Uint8Array(e.buffer,e.byteOffset,e.byteLength))}function j6(t,e){return Gs(t.getTime(),e.getTime())}function F6(t,e){return t.name===e.name&&t.message===e.message&&t.cause===e.cause&&t.stack===e.stack}function $6(t,e){return t===e}function Nk(t,e,n){const r=t.size;if(r!==e.size)return!1;if(!r)return!0;const i=new Array(r),o=t.entries();let s,a,c=0;for(;(s=o.next())&&!s.done;){const f=e.entries();let d=!1,p=0;for(;(a=f.next())&&!a.done;){if(i[p]){p++;continue}const m=s.value,g=a.value;if(n.equals(m[0],g[0],c,p,t,e,n)&&n.equals(m[1],g[1],m[0],g[0],t,e,n)){d=i[p]=!0;break}p++}if(!d)return!1;c++}return!0}const H6=Gs;function U6(t,e,n){const r=_k(t);let i=r.length;if(_k(e).length!==i)return!1;for(;i-- >0;)if(!LM(t,e,n,r[i]))return!1;return!0}function za(t,e,n){const r=Tk(t);let i=r.length;if(Tk(e).length!==i)return!1;let o,s,a;for(;i-- >0;)if(o=r[i],!LM(t,e,n,o)||(s=Mk(t,o),a=Mk(e,o),(s||a)&&(!s||!a||s.configurable!==a.configurable||s.enumerable!==a.enumerable||s.writable!==a.writable)))return!1;return!0}function V6(t,e){return Gs(t.valueOf(),e.valueOf())}function W6(t,e){return t.source===e.source&&t.flags===e.flags}function Ok(t,e,n){const r=t.size;if(r!==e.size)return!1;if(!r)return!0;const i=new Array(r),o=t.values();let s,a;for(;(s=o.next())&&!s.done;){const c=e.values();let f=!1,d=0;for(;(a=c.next())&&!a.done;){if(!i[d]&&n.equals(s.value,a.value,s.value,a.value,t,e,n)){f=i[d]=!0;break}d++}if(!f)return!1}return!0}function Md(t,e){let n=t.byteLength;if(e.byteLength!==n||t.byteOffset!==e.byteOffset)return!1;for(;n-- >0;)if(t[n]!==e[n])return!1;return!0}function K6(t,e){return t.hostname===e.hostname&&t.pathname===e.pathname&&t.protocol===e.protocol&&t.port===e.port&&t.hash===e.hash&&t.username===e.username&&t.password===e.password}function LM(t,e,n,r){return(r===I6||r===D6||r===R6)&&(t.$$typeof||e.$$typeof)?!0:P6(e,r)&&n.equals(t[r],e[r],r,r,t,e,n)}const q6="[object ArrayBuffer]",G6="[object Arguments]",X6="[object Boolean]",J6="[object DataView]",Y6="[object Date]",Q6="[object Error]",Z6="[object Map]",e$="[object Number]",t$="[object Object]",n$="[object RegExp]",r$="[object Set]",i$="[object String]",o$={"[object Int8Array]":!0,"[object Uint8Array]":!0,"[object Uint8ClampedArray]":!0,"[object Int16Array]":!0,"[object Uint16Array]":!0,"[object Int32Array]":!0,"[object Uint32Array]":!0,"[object Float16Array]":!0,"[object Float32Array]":!0,"[object Float64Array]":!0,"[object BigInt64Array]":!0,"[object BigUint64Array]":!0},s$="[object URL]",l$=Object.prototype.toString;function a$({areArrayBuffersEqual:t,areArraysEqual:e,areDataViewsEqual:n,areDatesEqual:r,areErrorsEqual:i,areFunctionsEqual:o,areMapsEqual:s,areNumbersEqual:a,areObjectsEqual:c,arePrimitiveWrappersEqual:f,areRegExpsEqual:d,areSetsEqual:p,areTypedArraysEqual:m,areUrlsEqual:g,unknownTagComparators:v}){return function(b,x,w){if(b===x)return!0;if(b==null||x==null)return!1;const E=typeof b;if(E!==typeof x)return!1;if(E!=="object")return E==="number"?a(b,x,w):E==="function"?o(b,x,w):!1;const _=b.constructor;if(_!==x.constructor)return!1;if(_===Object)return c(b,x,w);if(Array.isArray(b))return e(b,x,w);if(_===Date)return r(b,x,w);if(_===RegExp)return d(b,x,w);if(_===Map)return s(b,x,w);if(_===Set)return p(b,x,w);const M=l$.call(b);if(M===Y6)return r(b,x,w);if(M===n$)return d(b,x,w);if(M===Z6)return s(b,x,w);if(M===r$)return p(b,x,w);if(M===t$)return typeof b.then!="function"&&typeof x.then!="function"&&c(b,x,w);if(M===s$)return g(b,x,w);if(M===Q6)return i(b,x,w);if(M===G6)return c(b,x,w);if(o$[M])return m(b,x,w);if(M===q6)return t(b,x,w);if(M===J6)return n(b,x,w);if(M===X6||M===e$||M===i$)return f(b,x,w);if(v){let P=v[M];if(!P){const O=A6(b);O&&(P=v[O])}if(P)return P(b,x,w)}return!1}}function u$({circular:t,createCustomConfig:e,strict:n}){let r={areArrayBuffersEqual:L6,areArraysEqual:n?za:z6,areDataViewsEqual:B6,areDatesEqual:j6,areErrorsEqual:F6,areFunctionsEqual:$6,areMapsEqual:n?tg(Nk,za):Nk,areNumbersEqual:H6,areObjectsEqual:n?za:U6,arePrimitiveWrappersEqual:V6,areRegExpsEqual:W6,areSetsEqual:n?tg(Ok,za):Ok,areTypedArraysEqual:n?tg(Md,za):Md,areUrlsEqual:K6,unknownTagComparators:void 0};if(e&&(r=Object.assign({},r,e(r))),t){const i=vf(r.areArraysEqual),o=vf(r.areMapsEqual),s=vf(r.areObjectsEqual),a=vf(r.areSetsEqual);r=Object.assign({},r,{areArraysEqual:i,areMapsEqual:o,areObjectsEqual:s,areSetsEqual:a})}return r}function c$(t){return function(e,n,r,i,o,s,a){return t(e,n,a)}}function f$({circular:t,comparator:e,createState:n,equals:r,strict:i}){if(n)return function(a,c){const{cache:f=t?new WeakMap:void 0,meta:d}=n();return e(a,c,{cache:f,equals:r,meta:d,strict:i})};if(t)return function(a,c){return e(a,c,{cache:new WeakMap,equals:r,meta:void 0,strict:i})};const o={cache:void 0,equals:r,meta:void 0,strict:i};return function(a,c){return e(a,c,o)}}const d$=ns();ns({strict:!0});ns({circular:!0});ns({circular:!0,strict:!0});ns({createInternalComparator:()=>Gs});ns({strict:!0,createInternalComparator:()=>Gs});ns({circular:!0,createInternalComparator:()=>Gs});ns({circular:!0,createInternalComparator:()=>Gs,strict:!0});function ns(t={}){const{circular:e=!1,createInternalComparator:n,createState:r,strict:i=!1}=t,o=u$(t),s=a$(o),a=n?n(s):c$(s);return f$({circular:e,comparator:s,createState:r,equals:a,strict:i})}var zM={exports:{}},BM={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fh=se,h$=By;function p$(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var m$=typeof Object.is=="function"?Object.is:p$,g$=h$.useSyncExternalStore,y$=Fh.useRef,v$=Fh.useEffect,x$=Fh.useMemo,w$=Fh.useDebugValue;BM.useSyncExternalStoreWithSelector=function(t,e,n,r,i){var o=y$(null);if(o.current===null){var s={hasValue:!1,value:null};o.current=s}else s=o.current;o=x$(function(){function c(g){if(!f){if(f=!0,d=g,g=r(g),i!==void 0&&s.hasValue){var v=s.value;if(i(v,g))return p=v}return p=g}if(v=p,m$(d,g))return v;var k=r(g);return i!==void 0&&i(v,k)?(d=g,v):(d=g,p=k)}var f=!1,d,p,m=n===void 0?null:n;return[function(){return c(e())},m===null?void 0:function(){return c(m())}]},[e,n,r,i]);var a=g$(t,o[0],o[1]);return v$(function(){s.hasValue=!0,s.value=a},[a]),w$(a),a};zM.exports=BM;var S$=zM.exports,k$=(...t)=>e=>{t.forEach(n=>{typeof n=="function"?n(e):n&&(n.current=e)})},b$=({contentComponent:t})=>{const e=By.useSyncExternalStore(t.subscribe,t.getSnapshot,t.getServerSnapshot);return A.jsx(A.Fragment,{children:Object.values(e)})};function C$(){const t=new Set;let e={};return{subscribe(n){return t.add(n),()=>{t.delete(n)}},getSnapshot(){return e},getServerSnapshot(){return e},setRenderer(n,r){e={...e,[n]:BL.createPortal(r.reactElement,r.element,n)},t.forEach(i=>i())},removeRenderer(n){const r={...e};delete r[n],e=r,t.forEach(i=>i())}}}var E$=class extends Ko.Component{constructor(t){var e;super(t),this.editorContentRef=Ko.createRef(),this.initialized=!1,this.state={hasContentComponentInitialized:!!((e=t.editor)!=null&&e.contentComponent)}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){var t;const e=this.props.editor;if(e&&!e.isDestroyed&&((t=e.view.dom)!=null&&t.parentNode)){if(e.contentComponent)return;const n=this.editorContentRef.current;n.append(...e.view.dom.parentNode.childNodes),e.setOptions({element:n}),e.contentComponent=C$(),this.state.hasContentComponentInitialized||(this.unsubscribeToContentComponent=e.contentComponent.subscribe(()=>{this.setState(r=>r.hasContentComponentInitialized?r:{hasContentComponentInitialized:!0}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent()})),e.createNodeViews(),this.initialized=!0}}componentWillUnmount(){var t;const e=this.props.editor;if(e){this.initialized=!1,e.isDestroyed||e.view.setProps({nodeViews:{}}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent(),e.contentComponent=null;try{if(!((t=e.view.dom)!=null&&t.parentNode))return;const n=document.createElement("div");n.append(...e.view.dom.parentNode.childNodes),e.setOptions({element:n})}catch{}}}render(){const{editor:t,innerRef:e,...n}=this.props;return A.jsxs(A.Fragment,{children:[A.jsx("div",{ref:k$(e,this.editorContentRef),...n}),(t==null?void 0:t.contentComponent)&&A.jsx(b$,{contentComponent:t.contentComponent})]})}},T$=se.forwardRef((t,e)=>{const n=Ko.useMemo(()=>Math.floor(Math.random()*4294967295).toString(),[t.editor]);return Ko.createElement(E$,{key:n,innerRef:e,...t})}),M$=Ko.memo(T$),_$=typeof window<"u"?se.useLayoutEffect:se.useEffect,N$=class{constructor(t){this.transactionNumber=0,this.lastTransactionNumber=0,this.subscribers=new Set,this.editor=t,this.lastSnapshot={editor:t,transactionNumber:0},this.getSnapshot=this.getSnapshot.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.watch=this.watch.bind(this),this.subscribe=this.subscribe.bind(this)}getSnapshot(){return this.transactionNumber===this.lastTransactionNumber?this.lastSnapshot:(this.lastTransactionNumber=this.transactionNumber,this.lastSnapshot={editor:this.editor,transactionNumber:this.transactionNumber},this.lastSnapshot)}getServerSnapshot(){return{editor:null,transactionNumber:0}}subscribe(t){return this.subscribers.add(t),()=>{this.subscribers.delete(t)}}watch(t){if(this.editor=t,this.editor){const e=()=>{this.transactionNumber+=1,this.subscribers.forEach(r=>r())},n=this.editor;return n.on("transaction",e),()=>{n.off("transaction",e)}}}};function O$(t){var e;const[n]=se.useState(()=>new N$(t.editor)),r=S$.useSyncExternalStoreWithSelector(n.subscribe,n.getSnapshot,n.getServerSnapshot,t.selector,(e=t.equalityFn)!=null?e:d$);return _$(()=>n.watch(t.editor),[t.editor,n]),se.useDebugValue(r),r}var A$=!1,M0=typeof window>"u",P$=M0||!!(typeof window<"u"&&window.next),R$=class jM{constructor(e){this.editor=null,this.subscriptions=new Set,this.isComponentMounted=!1,this.previousDeps=null,this.instanceId="",this.options=e,this.subscriptions=new Set,this.setEditor(this.getInitialEditor()),this.scheduleDestroy(),this.getEditor=this.getEditor.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.subscribe=this.subscribe.bind(this),this.refreshEditorInstance=this.refreshEditorInstance.bind(this),this.scheduleDestroy=this.scheduleDestroy.bind(this),this.onRender=this.onRender.bind(this),this.createEditor=this.createEditor.bind(this)}setEditor(e){this.editor=e,this.instanceId=Math.random().toString(36).slice(2,9),this.subscriptions.forEach(n=>n())}getInitialEditor(){return this.options.current.immediatelyRender===void 0?M0||P$?null:this.createEditor():(this.options.current.immediatelyRender,this.options.current.immediatelyRender?this.createEditor():null)}createEditor(){const e={...this.options.current,onBeforeCreate:(...r)=>{var i,o;return(o=(i=this.options.current).onBeforeCreate)==null?void 0:o.call(i,...r)},onBlur:(...r)=>{var i,o;return(o=(i=this.options.current).onBlur)==null?void 0:o.call(i,...r)},onCreate:(...r)=>{var i,o;return(o=(i=this.options.current).onCreate)==null?void 0:o.call(i,...r)},onDestroy:(...r)=>{var i,o;return(o=(i=this.options.current).onDestroy)==null?void 0:o.call(i,...r)},onFocus:(...r)=>{var i,o;return(o=(i=this.options.current).onFocus)==null?void 0:o.call(i,...r)},onSelectionUpdate:(...r)=>{var i,o;return(o=(i=this.options.current).onSelectionUpdate)==null?void 0:o.call(i,...r)},onTransaction:(...r)=>{var i,o;return(o=(i=this.options.current).onTransaction)==null?void 0:o.call(i,...r)},onUpdate:(...r)=>{var i,o;return(o=(i=this.options.current).onUpdate)==null?void 0:o.call(i,...r)},onContentError:(...r)=>{var i,o;return(o=(i=this.options.current).onContentError)==null?void 0:o.call(i,...r)},onDrop:(...r)=>{var i,o;return(o=(i=this.options.current).onDrop)==null?void 0:o.call(i,...r)},onPaste:(...r)=>{var i,o;return(o=(i=this.options.current).onPaste)==null?void 0:o.call(i,...r)},onDelete:(...r)=>{var i,o;return(o=(i=this.options.current).onDelete)==null?void 0:o.call(i,...r)}};return new v6(e)}getEditor(){return this.editor}getServerSnapshot(){return null}subscribe(e){return this.subscriptions.add(e),()=>{this.subscriptions.delete(e)}}static compareOptions(e,n){return Object.keys(e).every(r=>["onCreate","onBeforeCreate","onDestroy","onUpdate","onTransaction","onFocus","onBlur","onSelectionUpdate","onContentError","onDrop","onPaste"].includes(r)?!0:r==="extensions"&&e.extensions&&n.extensions?e.extensions.length!==n.extensions.length?!1:e.extensions.every((i,o)=>{var s;return i===((s=n.extensions)==null?void 0:s[o])}):e[r]===n[r])}onRender(e){return()=>(this.isComponentMounted=!0,clearTimeout(this.scheduledDestructionTimeout),this.editor&&!this.editor.isDestroyed&&e.length===0?jM.compareOptions(this.options.current,this.editor.options)||this.editor.setOptions({...this.options.current,editable:this.editor.isEditable}):this.refreshEditorInstance(e),()=>{this.isComponentMounted=!1,this.scheduleDestroy()})}refreshEditorInstance(e){if(this.editor&&!this.editor.isDestroyed){if(this.previousDeps===null){this.previousDeps=e;return}if(this.previousDeps.length===e.length&&this.previousDeps.every((r,i)=>r===e[i]))return}this.editor&&!this.editor.isDestroyed&&this.editor.destroy(),this.setEditor(this.createEditor()),this.previousDeps=e}scheduleDestroy(){const e=this.instanceId,n=this.editor;this.scheduledDestructionTimeout=setTimeout(()=>{if(this.isComponentMounted&&this.instanceId===e){n&&n.setOptions(this.options.current);return}n&&!n.isDestroyed&&(n.destroy(),this.instanceId===e&&this.setEditor(null))},1)}};function D$(t={},e=[]){const n=se.useRef(t);n.current=t;const[r]=se.useState(()=>new R$(n)),i=By.useSyncExternalStore(r.subscribe,r.getEditor,r.getServerSnapshot);return se.useDebugValue(i),se.useEffect(r.onRender(e)),O$({editor:i,selector:({transactionNumber:o})=>t.shouldRerenderOnTransaction===!1||t.shouldRerenderOnTransaction===void 0?null:t.immediatelyRender&&o===0?0:o+1}),i}var I$=se.createContext({editor:null});I$.Consumer;var L$=se.createContext({onDragStart:()=>{},nodeViewContentChildren:void 0,nodeViewContentRef:()=>{}}),z$=()=>se.useContext(L$);Ko.forwardRef((t,e)=>{const{onDragStart:n}=z$(),r=t.as||"div";return A.jsx(r,{...t,ref:e,"data-node-view-wrapper":"",onDragStart:n,style:{whiteSpace:"normal",...t.style}})});Ko.createContext({markViewContentRef:()=>{}});var _d=(t,e)=>{if(t==="slot")return 0;if(t instanceof Function)return t(e);const{children:n,...r}=e??{};if(t==="svg")throw new Error("SVG elements are not supported in the JSX syntax, use the array syntax instead");return[t,r,n]},B$=/^\s*>\s$/,j$=vr.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:t}){return _d("blockquote",{...Ot(this.options.HTMLAttributes,t),children:_d("slot",{})})},parseMarkdown:(t,e)=>e.createNode("blockquote",void 0,e.parseChildren(t.tokens||[])),renderMarkdown:(t,e)=>{if(!t.content)return"";const n=">",r=[];return t.content.forEach(i=>{const a=e.renderChildren([i]).split(`
`).map(c=>c.trim()===""?n:`${n} ${c}`);r.push(a.join(`
`))}),r.join(`
${n}
`)},addCommands(){return{setBlockquote:()=>({commands:t})=>t.wrapIn(this.name),toggleBlockquote:()=>({commands:t})=>t.toggleWrap(this.name),unsetBlockquote:()=>({commands:t})=>t.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[ra({find:B$,type:this.type})]}}),F$=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,$$=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,H$=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,U$=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,V$=qs.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:t=>t.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:t=>t.type.name===this.name},{style:"font-weight",getAttrs:t=>/^(bold(er)?|[5-9]\d{2,})$/.test(t)&&null}]},renderHTML({HTMLAttributes:t}){return _d("strong",{...Ot(this.options.HTMLAttributes,t),children:_d("slot",{})})},markdownTokenName:"strong",parseMarkdown:(t,e)=>e.applyMark("bold",e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>`**${e.renderChildren(t)}**`,addCommands(){return{setBold:()=>({commands:t})=>t.setMark(this.name),toggleBold:()=>({commands:t})=>t.toggleMark(this.name),unsetBold:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[na({find:F$,type:this.type}),na({find:H$,type:this.type})]},addPasteRules(){return[Hs({find:$$,type:this.type}),Hs({find:U$,type:this.type})]}}),W$=/(^|[^`])`([^`]+)`(?!`)$/,K$=/(^|[^`])`([^`]+)`(?!`)/g,q$=qs.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:t}){return["code",Ot(this.options.HTMLAttributes,t),0]},markdownTokenName:"codespan",parseMarkdown:(t,e)=>e.applyMark("code",[{type:"text",text:t.text||""}]),renderMarkdown:(t,e)=>t.content?`\`${e.renderChildren(t.content)}\``:"",addCommands(){return{setCode:()=>({commands:t})=>t.setMark(this.name),toggleCode:()=>({commands:t})=>t.toggleMark(this.name),unsetCode:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[na({find:W$,type:this.type})]},addPasteRules(){return[Hs({find:K$,type:this.type})]}}),ng=4,G$=/^```([a-z]+)?[\s\n]$/,X$=/^~~~([a-z]+)?[\s\n]$/,J$=vr.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,enableTabIndentation:!1,tabSize:ng,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:t=>{var e;const{languageClassPrefix:n}=this.options;if(!n)return null;const o=[...((e=t.firstElementChild)==null?void 0:e.classList)||[]].filter(s=>s.startsWith(n)).map(s=>s.replace(n,""))[0];return o||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:t,HTMLAttributes:e}){return["pre",Ot(this.options.HTMLAttributes,e),["code",{class:t.attrs.language?this.options.languageClassPrefix+t.attrs.language:null},0]]},markdownTokenName:"code",parseMarkdown:(t,e)=>{var n;return((n=t.raw)==null?void 0:n.startsWith("```"))===!1&&t.codeBlockStyle!=="indented"?[]:e.createNode("codeBlock",{language:t.lang||null},t.text?[e.createTextNode(t.text)]:[])},renderMarkdown:(t,e)=>{var n;let r="";const i=((n=t.attrs)==null?void 0:n.language)||"";return t.content?r=[`\`\`\`${i}`,e.renderChildren(t.content),"```"].join(`
`):r=`\`\`\`${i}

\`\`\``,r},addCommands(){return{setCodeBlock:t=>({commands:e})=>e.setNode(this.name,t),toggleCodeBlock:t=>({commands:e})=>e.toggleNode(this.name,"paragraph",t)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:t,$anchor:e}=this.editor.state.selection,n=e.pos===1;return!t||e.parent.type.name!==this.name?!1:n||!e.parent.textContent.length?this.editor.commands.clearNodes():!1},Tab:({editor:t})=>{var e;if(!this.options.enableTabIndentation)return!1;const n=(e=this.options.tabSize)!=null?e:ng,{state:r}=t,{selection:i}=r,{$from:o,empty:s}=i;if(o.parent.type!==this.type)return!1;const a=" ".repeat(n);return s?t.commands.insertContent(a):t.commands.command(({tr:c})=>{const{from:f,to:d}=i,g=r.doc.textBetween(f,d,`
`,`
`).split(`
`).map(v=>a+v).join(`
`);return c.replaceWith(f,d,r.schema.text(g)),!0})},"Shift-Tab":({editor:t})=>{var e;if(!this.options.enableTabIndentation)return!1;const n=(e=this.options.tabSize)!=null?e:ng,{state:r}=t,{selection:i}=r,{$from:o,empty:s}=i;return o.parent.type!==this.type?!1:s?t.commands.command(({tr:a})=>{var c;const{pos:f}=o,d=o.start(),p=o.end(),g=r.doc.textBetween(d,p,`
`,`
`).split(`
`);let v=0,k=0;const b=f-d;for(let P=0;P<g.length;P+=1){if(k+g[P].length>=b){v=P;break}k+=g[P].length+1}const w=((c=g[v].match(/^ */))==null?void 0:c[0])||"",E=Math.min(w.length,n);if(E===0)return!0;let _=d;for(let P=0;P<v;P+=1)_+=g[P].length+1;return a.delete(_,_+E),f-_<=E&&a.setSelection(ve.create(a.doc,_)),!0}):t.commands.command(({tr:a})=>{const{from:c,to:f}=i,m=r.doc.textBetween(c,f,`
`,`
`).split(`
`).map(g=>{var v;const k=((v=g.match(/^ */))==null?void 0:v[0])||"",b=Math.min(k.length,n);return g.slice(b)}).join(`
`);return a.replaceWith(c,f,r.schema.text(m)),!0})},Enter:({editor:t})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:e}=t,{selection:n}=e,{$from:r,empty:i}=n;if(!i||r.parent.type!==this.type)return!1;const o=r.parentOffset===r.parent.nodeSize-2,s=r.parent.textContent.endsWith(`

`);return!o||!s?!1:t.chain().command(({tr:a})=>(a.delete(r.pos-2,r.pos),!0)).exitCode().run()},ArrowDown:({editor:t})=>{if(!this.options.exitOnArrowDown)return!1;const{state:e}=t,{selection:n,doc:r}=e,{$from:i,empty:o}=n;if(!o||i.parent.type!==this.type||!(i.parentOffset===i.parent.nodeSize-2))return!1;const a=i.after();return a===void 0?!1:r.nodeAt(a)?t.commands.command(({tr:f})=>(f.setSelection(Te.near(r.resolve(a))),!0)):t.commands.exitCode()}}},addInputRules(){return[E0({find:G$,type:this.type,getAttributes:t=>({language:t[1]})}),E0({find:X$,type:this.type,getAttributes:t=>({language:t[1]})})]},addProseMirrorPlugins(){return[new ct({key:new It("codeBlockVSCodeHandler"),props:{handlePaste:(t,e)=>{if(!e.clipboardData||this.editor.isActive(this.type.name))return!1;const n=e.clipboardData.getData("text/plain"),r=e.clipboardData.getData("vscode-editor-data"),i=r?JSON.parse(r):void 0,o=i==null?void 0:i.mode;if(!n||!o)return!1;const{tr:s,schema:a}=t.state,c=a.text(n.replace(/\r\n?/g,`
`));return s.replaceSelectionWith(this.type.create({language:o},c)),s.selection.$from.parent.type!==this.type&&s.setSelection(ve.near(s.doc.resolve(Math.max(0,s.selection.from-2)))),s.setMeta("paste",!0),t.dispatch(s),!0}}})]}}),Y$=vr.create({name:"doc",topNode:!0,content:"block+",renderMarkdown:(t,e)=>t.content?e.renderChildren(t.content,`

`):""}),Q$=vr.create({name:"hardBreak",markdownTokenName:"br",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:t}){return["br",Ot(this.options.HTMLAttributes,t)]},renderText(){return`
`},renderMarkdown:()=>`  
`,parseMarkdown:()=>({type:"hardBreak"}),addCommands(){return{setHardBreak:()=>({commands:t,chain:e,state:n,editor:r})=>t.first([()=>t.exitCode(),()=>t.command(()=>{const{selection:i,storedMarks:o}=n;if(i.$from.parent.type.spec.isolating)return!1;const{keepMarks:s}=this.options,{splittableMarks:a}=r.extensionManager,c=o||i.$to.parentOffset&&i.$from.marks();return e().insertContent({type:this.name}).command(({tr:f,dispatch:d})=>{if(d&&c&&s){const p=c.filter(m=>a.includes(m.type.name));f.ensureMarks(p)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),Z$=vr.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(t=>({tag:`h${t}`,attrs:{level:t}}))},renderHTML({node:t,HTMLAttributes:e}){return[`h${this.options.levels.includes(t.attrs.level)?t.attrs.level:this.options.levels[0]}`,Ot(this.options.HTMLAttributes,e),0]},parseMarkdown:(t,e)=>e.createNode("heading",{level:t.depth||1},e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>{var n;const r=(n=t.attrs)!=null&&n.level?parseInt(t.attrs.level,10):1,i="#".repeat(r);return t.content?`${i} ${e.renderChildren(t.content)}`:""},addCommands(){return{setHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.setNode(this.name,t):!1,toggleHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.toggleNode(this.name,"paragraph",t):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((t,e)=>({...t,[`Mod-Alt-${e}`]:()=>this.editor.commands.toggleHeading({level:e})}),{})},addInputRules(){return this.options.levels.map(t=>E0({find:new RegExp(`^(#{${Math.min(...this.options.levels)},${t}})\\s$`),type:this.type,getAttributes:{level:t}}))}}),e8=vr.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{},nextNodeType:"paragraph"}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:t}){return["hr",Ot(this.options.HTMLAttributes,t)]},markdownTokenName:"hr",parseMarkdown:(t,e)=>e.createNode("horizontalRule"),renderMarkdown:()=>"---",addCommands(){return{setHorizontalRule:()=>({chain:t,state:e})=>{if(!w6(e,e.schema.nodes[this.name]))return!1;const{selection:n}=e,{$to:r}=n,i=t();return vM(n)?i.insertContentAt(r.pos,{type:this.name}):i.insertContent({type:this.name}),i.command(({state:o,tr:s,dispatch:a})=>{if(a){const{$to:c}=s.selection,f=c.end();if(c.nodeAfter)c.nodeAfter.isTextblock?s.setSelection(ve.create(s.doc,c.pos+1)):c.nodeAfter.isBlock?s.setSelection(ce.create(s.doc,c.pos)):s.setSelection(ve.create(s.doc,c.pos));else{const d=o.schema.nodes[this.options.nextNodeType]||c.parent.type.contentMatch.defaultType,p=d==null?void 0:d.create();p&&(s.insert(f,p),s.setSelection(ve.create(s.doc,f+1)))}s.scrollIntoView()}return!0}).run()}}},addInputRules(){return[x6({find:/^(?:---|-|___\s|\*\*\*\s)$/,type:this.type})]}}),t8=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,n8=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,r8=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,i8=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,o8=qs.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:t=>t.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:t=>t.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:t}){return["em",Ot(this.options.HTMLAttributes,t),0]},addCommands(){return{setItalic:()=>({commands:t})=>t.setMark(this.name),toggleItalic:()=>({commands:t})=>t.toggleMark(this.name),unsetItalic:()=>({commands:t})=>t.unsetMark(this.name)}},markdownTokenName:"em",parseMarkdown:(t,e)=>e.applyMark("italic",e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>`*${e.renderChildren(t)}*`,addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[na({find:t8,type:this.type}),na({find:r8,type:this.type})]},addPasteRules(){return[Hs({find:n8,type:this.type}),Hs({find:i8,type:this.type})]}});const s8="aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4w0s2x0a2z0ure5ba0by2idu3namex4d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dad1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3nd0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0axi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp3ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mgensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2",l8="121342632165322333335355455655552435435422463632574574330355524444661154543332344423364211133222221212112052232222232212222223222241112222224322321222",_0="numeric",N0="ascii",O0="alpha",au="asciinumeric",Ga="alphanumeric",A0="domain",FM="emoji",a8="scheme",u8="slashscheme",rg="whitespace";function c8(t,e){return t in e||(e[t]=[]),e[t]}function Es(t,e,n){e[_0]&&(e[au]=!0,e[Ga]=!0),e[N0]&&(e[au]=!0,e[O0]=!0),e[au]&&(e[Ga]=!0),e[O0]&&(e[Ga]=!0),e[Ga]&&(e[A0]=!0),e[FM]&&(e[A0]=!0);for(const r in e){const i=c8(r,n);i.indexOf(t)<0&&i.push(t)}}function f8(t,e){const n={};for(const r in e)e[r].indexOf(t)>=0&&(n[r]=!0);return n}function Un(t=null){this.j={},this.jr=[],this.jd=null,this.t=t}Un.groups={};Un.prototype={accepts(){return!!this.t},go(t){const e=this,n=e.j[t];if(n)return n;for(let r=0;r<e.jr.length;r++){const i=e.jr[r][0],o=e.jr[r][1];if(o&&i.test(t))return o}return e.jd},has(t,e=!1){return e?t in this.j:!!this.go(t)},ta(t,e,n,r){for(let i=0;i<t.length;i++)this.tt(t[i],e,n,r)},tr(t,e,n,r){r=r||Un.groups;let i;return e&&e.j?i=e:(i=new Un(e),n&&r&&Es(e,n,r)),this.jr.push([t,i]),i},ts(t,e,n,r){let i=this;const o=t.length;if(!o)return i;for(let s=0;s<o-1;s++)i=i.tt(t[s]);return i.tt(t[o-1],e,n,r)},tt(t,e,n,r){r=r||Un.groups;const i=this;if(e&&e.j)return i.j[t]=e,e;const o=e;let s,a=i.go(t);if(a?(s=new Un,Object.assign(s.j,a.j),s.jr.push.apply(s.jr,a.jr),s.jd=a.jd,s.t=a.t):s=new Un,o){if(r)if(s.t&&typeof s.t=="string"){const c=Object.assign(f8(s.t,r),n);Es(o,c,r)}else n&&Es(o,n,r);s.t=o}return i.j[t]=s,s}};const Ee=(t,e,n,r,i)=>t.ta(e,n,r,i),mt=(t,e,n,r,i)=>t.tr(e,n,r,i),Ak=(t,e,n,r,i)=>t.ts(e,n,r,i),X=(t,e,n,r,i)=>t.tt(e,n,r,i),ji="WORD",P0="UWORD",$M="ASCIINUMERICAL",HM="ALPHANUMERICAL",Fu="LOCALHOST",R0="TLD",D0="UTLD",jf="SCHEME",wl="SLASH_SCHEME",hv="NUM",I0="WS",pv="NL",uu="OPENBRACE",cu="CLOSEBRACE",Nd="OPENBRACKET",Od="CLOSEBRACKET",Ad="OPENPAREN",Pd="CLOSEPAREN",Rd="OPENANGLEBRACKET",Dd="CLOSEANGLEBRACKET",Id="FULLWIDTHLEFTPAREN",Ld="FULLWIDTHRIGHTPAREN",zd="LEFTCORNERBRACKET",Bd="RIGHTCORNERBRACKET",jd="LEFTWHITECORNERBRACKET",Fd="RIGHTWHITECORNERBRACKET",$d="FULLWIDTHLESSTHAN",Hd="FULLWIDTHGREATERTHAN",Ud="AMPERSAND",Vd="APOSTROPHE",Wd="ASTERISK",So="AT",Kd="BACKSLASH",qd="BACKTICK",Gd="CARET",To="COLON",mv="COMMA",Xd="DOLLAR",gi="DOT",Jd="EQUALS",gv="EXCLAMATION",Rr="HYPHEN",fu="PERCENT",Yd="PIPE",Qd="PLUS",Zd="POUND",du="QUERY",yv="QUOTE",UM="FULLWIDTHMIDDLEDOT",vv="SEMI",yi="SLASH",hu="TILDE",eh="UNDERSCORE",VM="EMOJI",th="SYM";var WM=Object.freeze({__proto__:null,ALPHANUMERICAL:HM,AMPERSAND:Ud,APOSTROPHE:Vd,ASCIINUMERICAL:$M,ASTERISK:Wd,AT:So,BACKSLASH:Kd,BACKTICK:qd,CARET:Gd,CLOSEANGLEBRACKET:Dd,CLOSEBRACE:cu,CLOSEBRACKET:Od,CLOSEPAREN:Pd,COLON:To,COMMA:mv,DOLLAR:Xd,DOT:gi,EMOJI:VM,EQUALS:Jd,EXCLAMATION:gv,FULLWIDTHGREATERTHAN:Hd,FULLWIDTHLEFTPAREN:Id,FULLWIDTHLESSTHAN:$d,FULLWIDTHMIDDLEDOT:UM,FULLWIDTHRIGHTPAREN:Ld,HYPHEN:Rr,LEFTCORNERBRACKET:zd,LEFTWHITECORNERBRACKET:jd,LOCALHOST:Fu,NL:pv,NUM:hv,OPENANGLEBRACKET:Rd,OPENBRACE:uu,OPENBRACKET:Nd,OPENPAREN:Ad,PERCENT:fu,PIPE:Yd,PLUS:Qd,POUND:Zd,QUERY:du,QUOTE:yv,RIGHTCORNERBRACKET:Bd,RIGHTWHITECORNERBRACKET:Fd,SCHEME:jf,SEMI:vv,SLASH:yi,SLASH_SCHEME:wl,SYM:th,TILDE:hu,TLD:R0,UNDERSCORE:eh,UTLD:D0,UWORD:P0,WORD:ji,WS:I0});const zi=/[a-z]/,Ba=new RegExp("\\p{L}","u"),ig=new RegExp("\\p{Emoji}","u"),Bi=/\d/,og=/\s/,Pk="\r",sg=`
`,d8="",h8="",lg="";let xf=null,wf=null;function p8(t=[]){const e={};Un.groups=e;const n=new Un;xf==null&&(xf=Rk(s8)),wf==null&&(wf=Rk(l8)),X(n,"'",Vd),X(n,"{",uu),X(n,"}",cu),X(n,"[",Nd),X(n,"]",Od),X(n,"(",Ad),X(n,")",Pd),X(n,"<",Rd),X(n,">",Dd),X(n,"",Id),X(n,"",Ld),X(n,"",zd),X(n,"",Bd),X(n,"",jd),X(n,"",Fd),X(n,"",$d),X(n,"",Hd),X(n,"&",Ud),X(n,"*",Wd),X(n,"@",So),X(n,"`",qd),X(n,"^",Gd),X(n,":",To),X(n,",",mv),X(n,"$",Xd),X(n,".",gi),X(n,"=",Jd),X(n,"!",gv),X(n,"-",Rr),X(n,"%",fu),X(n,"|",Yd),X(n,"+",Qd),X(n,"#",Zd),X(n,"?",du),X(n,'"',yv),X(n,"/",yi),X(n,";",vv),X(n,"~",hu),X(n,"_",eh),X(n,"\\",Kd),X(n,"",UM);const r=mt(n,Bi,hv,{[_0]:!0});mt(r,Bi,r);const i=mt(r,zi,$M,{[au]:!0}),o=mt(r,Ba,HM,{[Ga]:!0}),s=mt(n,zi,ji,{[N0]:!0});mt(s,Bi,i),mt(s,zi,s),mt(i,Bi,i),mt(i,zi,i);const a=mt(n,Ba,P0,{[O0]:!0});mt(a,zi),mt(a,Bi,o),mt(a,Ba,a),mt(o,Bi,o),mt(o,zi),mt(o,Ba,o);const c=X(n,sg,pv,{[rg]:!0}),f=X(n,Pk,I0,{[rg]:!0}),d=mt(n,og,I0,{[rg]:!0});X(n,lg,d),X(f,sg,c),X(f,lg,d),mt(f,og,d),X(d,Pk),X(d,sg),mt(d,og,d),X(d,lg,d);const p=mt(n,ig,VM,{[FM]:!0});X(p,"#"),mt(p,ig,p),X(p,d8,p);const m=X(p,h8);X(m,"#"),mt(m,ig,p);const g=[[zi,s],[Bi,i]],v=[[zi,null],[Ba,a],[Bi,o]];for(let k=0;k<xf.length;k++)go(n,xf[k],R0,ji,g);for(let k=0;k<wf.length;k++)go(n,wf[k],D0,P0,v);Es(R0,{tld:!0,ascii:!0},e),Es(D0,{utld:!0,alpha:!0},e),go(n,"file",jf,ji,g),go(n,"mailto",jf,ji,g),go(n,"http",wl,ji,g),go(n,"https",wl,ji,g),go(n,"ftp",wl,ji,g),go(n,"ftps",wl,ji,g),Es(jf,{scheme:!0,ascii:!0},e),Es(wl,{slashscheme:!0,ascii:!0},e),t=t.sort((k,b)=>k[0]>b[0]?1:-1);for(let k=0;k<t.length;k++){const b=t[k][0],w=t[k][1]?{[a8]:!0}:{[u8]:!0};b.indexOf("-")>=0?w[A0]=!0:zi.test(b)?Bi.test(b)?w[au]=!0:w[N0]=!0:w[_0]=!0,Ak(n,b,b,w)}return Ak(n,"localhost",Fu,{ascii:!0}),n.jd=new Un(th),{start:n,tokens:Object.assign({groups:e},WM)}}function KM(t,e){const n=m8(e.replace(/[A-Z]/g,a=>a.toLowerCase())),r=n.length,i=[];let o=0,s=0;for(;s<r;){let a=t,c=null,f=0,d=null,p=-1,m=-1;for(;s<r&&(c=a.go(n[s]));)a=c,a.accepts()?(p=0,m=0,d=a):p>=0&&(p+=n[s].length,m++),f+=n[s].length,o+=n[s].length,s++;o-=p,s-=m,f-=p,i.push({t:d.t,v:e.slice(o-f,o),s:o-f,e:o})}return i}function m8(t){const e=[],n=t.length;let r=0;for(;r<n;){let i=t.charCodeAt(r),o,s=i<55296||i>56319||r+1===n||(o=t.charCodeAt(r+1))<56320||o>57343?t[r]:t.slice(r,r+2);e.push(s),r+=s.length}return e}function go(t,e,n,r,i){let o;const s=e.length;for(let a=0;a<s-1;a++){const c=e[a];t.j[c]?o=t.j[c]:(o=new Un(r),o.jr=i.slice(),t.j[c]=o),t=o}return o=new Un(n),o.jr=i.slice(),t.j[e[s-1]]=o,o}function Rk(t){const e=[],n=[];let r=0,i="0123456789";for(;r<t.length;){let o=0;for(;i.indexOf(t[r+o])>=0;)o++;if(o>0){e.push(n.join(""));for(let s=parseInt(t.substring(r,r+o),10);s>0;s--)n.pop();r+=o}else n.push(t[r]),r++}return e}const $u={defaultProtocol:"http",events:null,format:Dk,formatHref:Dk,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function xv(t,e=null){let n=Object.assign({},$u);t&&(n=Object.assign(n,t instanceof xv?t.o:t));const r=n.ignoreTags,i=[];for(let o=0;o<r.length;o++)i.push(r[o].toUpperCase());this.o=n,e&&(this.defaultRender=e),this.ignoreTags=i}xv.prototype={o:$u,ignoreTags:[],defaultRender(t){return t},check(t){return this.get("validate",t.toString(),t)},get(t,e,n){const r=e!=null;let i=this.o[t];return i&&(typeof i=="object"?(i=n.t in i?i[n.t]:$u[t],typeof i=="function"&&r&&(i=i(e,n))):typeof i=="function"&&r&&(i=i(e,n.t,n)),i)},getObj(t,e,n){let r=this.o[t];return typeof r=="function"&&e!=null&&(r=r(e,n.t,n)),r},render(t){const e=t.render(this);return(this.get("render",null,t)||this.defaultRender)(e,t.t,t)}};function Dk(t){return t}function qM(t,e){this.t="token",this.v=t,this.tk=e}qM.prototype={isLink:!1,toString(){return this.v},toHref(t){return this.toString()},toFormattedString(t){const e=this.toString(),n=t.get("truncate",e,this),r=t.get("format",e,this);return n&&r.length>n?r.substring(0,n)+"":r},toFormattedHref(t){return t.get("formatHref",this.toHref(t.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(t=$u.defaultProtocol){return{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(t),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(t){return{type:this.t,value:this.toFormattedString(t),isLink:this.isLink,href:this.toFormattedHref(t),start:this.startIndex(),end:this.endIndex()}},validate(t){return t.get("validate",this.toString(),this)},render(t){const e=this,n=this.toHref(t.get("defaultProtocol")),r=t.get("formatHref",n,this),i=t.get("tagName",n,e),o=this.toFormattedString(t),s={},a=t.get("className",n,e),c=t.get("target",n,e),f=t.get("rel",n,e),d=t.getObj("attributes",n,e),p=t.getObj("events",n,e);return s.href=r,a&&(s.class=a),c&&(s.target=c),f&&(s.rel=f),d&&Object.assign(s,d),{tagName:i,attributes:s,content:o,eventListeners:p}}};function $h(t,e){class n extends qM{constructor(i,o){super(i,o),this.t=t}}for(const r in e)n.prototype[r]=e[r];return n.t=t,n}const Ik=$h("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),Lk=$h("text"),g8=$h("nl"),Sf=$h("url",{isLink:!0,toHref(t=$u.defaultProtocol){return this.hasProtocol()?this.v:`${t}://${this.v}`},hasProtocol(){const t=this.tk;return t.length>=2&&t[0].t!==Fu&&t[1].t===To}}),Pr=t=>new Un(t);function y8({groups:t}){const e=t.domain.concat([Ud,Wd,So,Kd,qd,Gd,Xd,Jd,Rr,hv,fu,Yd,Qd,Zd,yi,th,hu,eh]),n=[Vd,To,mv,gi,gv,fu,du,yv,vv,Rd,Dd,uu,cu,Od,Nd,Ad,Pd,Id,Ld,zd,Bd,jd,Fd,$d,Hd],r=[Ud,Vd,Wd,Kd,qd,Gd,Xd,Jd,Rr,uu,cu,fu,Yd,Qd,Zd,du,yi,th,hu,eh],i=Pr(),o=X(i,hu);Ee(o,r,o),Ee(o,t.domain,o);const s=Pr(),a=Pr(),c=Pr();Ee(i,t.domain,s),Ee(i,t.scheme,a),Ee(i,t.slashscheme,c),Ee(s,r,o),Ee(s,t.domain,s);const f=X(s,So);X(o,So,f),X(a,So,f),X(c,So,f);const d=X(o,gi);Ee(d,r,o),Ee(d,t.domain,o);const p=Pr();Ee(f,t.domain,p),Ee(p,t.domain,p);const m=X(p,gi);Ee(m,t.domain,p);const g=Pr(Ik);Ee(m,t.tld,g),Ee(m,t.utld,g),X(f,Fu,g);const v=X(p,Rr);X(v,Rr,v),Ee(v,t.domain,p),Ee(g,t.domain,p),X(g,gi,m),X(g,Rr,v);const k=X(g,To);Ee(k,t.numeric,Ik);const b=X(s,Rr),x=X(s,gi);X(b,Rr,b),Ee(b,t.domain,s),Ee(x,r,o),Ee(x,t.domain,s);const w=Pr(Sf);Ee(x,t.tld,w),Ee(x,t.utld,w),Ee(w,t.domain,s),Ee(w,r,o),X(w,gi,x),X(w,Rr,b),X(w,So,f);const E=X(w,To),_=Pr(Sf);Ee(E,t.numeric,_);const M=Pr(Sf),P=Pr();Ee(M,e,M),Ee(M,n,P),Ee(P,e,M),Ee(P,n,P),X(w,yi,M),X(_,yi,M);const O=X(a,To),D=X(c,To),z=X(D,yi),j=X(z,yi);Ee(a,t.domain,s),X(a,gi,x),X(a,Rr,b),Ee(c,t.domain,s),X(c,gi,x),X(c,Rr,b),Ee(O,t.domain,M),X(O,yi,M),X(O,du,M),Ee(j,t.domain,M),Ee(j,e,M),X(j,yi,M);const ee=[[uu,cu],[Nd,Od],[Ad,Pd],[Rd,Dd],[Id,Ld],[zd,Bd],[jd,Fd],[$d,Hd]];for(let oe=0;oe<ee.length;oe++){const[he,_e]=ee[oe],xe=X(M,he);X(P,he,xe),X(xe,_e,M);const $e=Pr(Sf);Ee(xe,e,$e);const Re=Pr();Ee(xe,n),Ee($e,e,$e),Ee($e,n,Re),Ee(Re,e,$e),Ee(Re,n,Re),X($e,_e,M),X(Re,_e,M)}return X(i,Fu,w),X(i,pv,g8),{start:i,tokens:WM}}function v8(t,e,n){let r=n.length,i=0,o=[],s=[];for(;i<r;){let a=t,c=null,f=null,d=0,p=null,m=-1;for(;i<r&&!(c=a.go(n[i].t));)s.push(n[i++]);for(;i<r&&(f=c||a.go(n[i].t));)c=null,a=f,a.accepts()?(m=0,p=a):m>=0&&m++,i++,d++;if(m<0)i-=d,i<r&&(s.push(n[i]),i++);else{s.length>0&&(o.push(ag(Lk,e,s)),s=[]),i-=m,d-=m;const g=p.t,v=n.slice(i-d,i);o.push(ag(g,e,v))}}return s.length>0&&o.push(ag(Lk,e,s)),o}function ag(t,e,n){const r=n[0].s,i=n[n.length-1].e,o=e.slice(r,i);return new t(o,n)}const x8=typeof console<"u"&&console&&console.warn||(()=>{}),w8="until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.",et={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function S8(){return Un.groups={},et.scanner=null,et.parser=null,et.tokenQueue=[],et.pluginQueue=[],et.customSchemes=[],et.initialized=!1,et}function zk(t,e=!1){if(et.initialized&&x8(`linkifyjs: already initialized - will not register custom scheme "${t}" ${w8}`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(t))throw new Error(`linkifyjs: incorrect scheme format.
1. Must only contain digits, lowercase ASCII letters or "-"
2. Cannot start or end with "-"
3. "-" cannot repeat`);et.customSchemes.push([t,e])}function k8(){et.scanner=p8(et.customSchemes);for(let t=0;t<et.tokenQueue.length;t++)et.tokenQueue[t][1]({scanner:et.scanner});et.parser=y8(et.scanner.tokens);for(let t=0;t<et.pluginQueue.length;t++)et.pluginQueue[t][1]({scanner:et.scanner,parser:et.parser});return et.initialized=!0,et}function wv(t){return et.initialized||k8(),v8(et.parser.start,t,KM(et.scanner.start,t))}wv.scan=KM;function GM(t,e=null,n=null){if(e&&typeof e=="object"){if(n)throw Error(`linkifyjs: Invalid link type ${e}; must be a string`);n=e,e=null}const r=new xv(n),i=wv(t),o=[];for(let s=0;s<i.length;s++){const a=i[s];a.isLink&&(!e||a.t===e)&&r.check(a)&&o.push(a.toFormattedObject(r))}return o}var Sv="[\0- -\u2029]",b8=new RegExp(Sv),C8=new RegExp(`${Sv}$`),E8=new RegExp(Sv,"g");function T8(t){return t.length===1?t[0].isLink:t.length===3&&t[1].isLink?["()","[]"].includes(t[0].value+t[2].value):!1}function M8(t){return new ct({key:new It("autolink"),appendTransaction:(e,n,r)=>{const i=e.some(f=>f.docChanged)&&!n.doc.eq(r.doc),o=e.some(f=>f.getMeta("preventAutolink"));if(!i||o)return;const{tr:s}=r,a=cM(n.doc,[...e]);if(yM(a).forEach(({newRange:f})=>{const d=wF(r.doc,f,g=>g.isTextblock);let p,m;if(d.length>1)p=d[0],m=r.doc.textBetween(p.pos,p.pos+p.node.nodeSize,void 0," ");else if(d.length){const g=r.doc.textBetween(f.from,f.to," "," ");if(!C8.test(g))return;p=d[0],m=r.doc.textBetween(p.pos,f.to,void 0," ")}if(p&&m){const g=m.split(b8).filter(Boolean);if(g.length<=0)return!1;const v=g[g.length-1],k=p.pos+m.lastIndexOf(v);if(!v)return!1;const b=wv(v).map(x=>x.toObject(t.defaultProtocol));if(!T8(b))return!1;b.filter(x=>x.isLink).map(x=>({...x,from:k+x.start+1,to:k+x.end+1})).filter(x=>r.schema.marks.code?!r.doc.rangeHasMark(x.from,x.to,r.schema.marks.code):!0).filter(x=>t.validate(x.value)).filter(x=>t.shouldAutoLink(x.value)).forEach(x=>{av(x.from,x.to,r.doc).some(w=>w.mark.type===t.type)||s.addMark(x.from,x.to,t.type.create({href:x.href}))})}}),!!s.steps.length)return s}})}function _8(t){return new ct({key:new It("handleClickLink"),props:{handleClick:(e,n,r)=>{var i,o;if(r.button!==0||!e.editable)return!1;let s=!1;if(t.enableClickSelection&&(s=t.editor.commands.extendMarkRange(t.type.name)),t.openOnClick){let a=null;if(r.target instanceof HTMLAnchorElement)a=r.target;else{let p=r.target;const m=[];for(;p.nodeName!=="DIV";)m.push(p),p=p.parentNode;a=m.find(g=>g.nodeName==="A")}if(!a)return s;const c=gM(e.state,t.type.name),f=(i=a==null?void 0:a.href)!=null?i:c.href,d=(o=a==null?void 0:a.target)!=null?o:c.target;a&&f&&(window.open(f,d),s=!0)}return s}}})}function N8(t){return new ct({key:new It("handlePasteLink"),props:{handlePaste:(e,n,r)=>{const{shouldAutoLink:i}=t,{state:o}=e,{selection:s}=o,{empty:a}=s;if(a)return!1;let c="";r.content.forEach(d=>{c+=d.textContent});const f=GM(c,{defaultProtocol:t.defaultProtocol}).find(d=>d.isLink&&d.value===c);return!c||!f||i!==void 0&&!i(f.value)?!1:t.editor.commands.setMark(t.type,{href:f.href})}}})}function ms(t,e){const n=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"];return e&&e.forEach(r=>{const i=typeof r=="string"?r:r.scheme;i&&n.push(i)}),!t||t.replace(E8,"").match(new RegExp(`^(?:(?:${n.join("|")}):|[^a-z]|[a-z0-9+.-]+(?:[^a-z+.-:]|$))`,"i"))}var O8=qs.create({name:"link",priority:1e3,keepOnSplit:!1,exitable:!0,onCreate(){this.options.validate&&!this.options.shouldAutoLink&&(this.options.shouldAutoLink=this.options.validate,console.warn("The `validate` option is deprecated. Rename to the `shouldAutoLink` option instead.")),this.options.protocols.forEach(t=>{if(typeof t=="string"){zk(t);return}zk(t.scheme,t.optionalSlashes)})},onDestroy(){S8()},inclusive(){return this.options.autolink},addOptions(){return{openOnClick:!0,enableClickSelection:!1,linkOnPaste:!0,autolink:!0,protocols:[],defaultProtocol:"http",HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},isAllowedUri:(t,e)=>!!ms(t,e.protocols),validate:t=>!!t,shouldAutoLink:t=>{const e=/^[a-z][a-z0-9+.-]*:\/\//i.test(t),n=/^[a-z][a-z0-9+.-]*:/i.test(t);if(e||n&&!t.includes("@"))return!0;const i=(t.includes("@")?t.split("@").pop():t).split(/[/?#:]/)[0];return!(/^\d{1,3}(\.\d{1,3}){3}$/.test(i)||!/\./.test(i))}}},addAttributes(){return{href:{default:null,parseHTML(t){return t.getAttribute("href")}},target:{default:this.options.HTMLAttributes.target},rel:{default:this.options.HTMLAttributes.rel},class:{default:this.options.HTMLAttributes.class}}},parseHTML(){return[{tag:"a[href]",getAttrs:t=>{const e=t.getAttribute("href");return!e||!this.options.isAllowedUri(e,{defaultValidate:n=>!!ms(n,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:null}}]},renderHTML({HTMLAttributes:t}){return this.options.isAllowedUri(t.href,{defaultValidate:e=>!!ms(e,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?["a",Ot(this.options.HTMLAttributes,t),0]:["a",Ot(this.options.HTMLAttributes,{...t,href:""}),0]},markdownTokenName:"link",parseMarkdown:(t,e)=>e.applyMark("link",e.parseInline(t.tokens||[]),{href:t.href,title:t.title||null}),renderMarkdown:(t,e)=>{var n;const r=((n=t.attrs)==null?void 0:n.href)||"";return`[${e.renderChildren(t)}](${r})`},addCommands(){return{setLink:t=>({chain:e})=>{const{href:n}=t;return this.options.isAllowedUri(n,{defaultValidate:r=>!!ms(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?e().setMark(this.name,t).setMeta("preventAutolink",!0).run():!1},toggleLink:t=>({chain:e})=>{const{href:n}=t||{};return n&&!this.options.isAllowedUri(n,{defaultValidate:r=>!!ms(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:e().toggleMark(this.name,t,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()},unsetLink:()=>({chain:t})=>t().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[Hs({find:t=>{const e=[];if(t){const{protocols:n,defaultProtocol:r}=this.options,i=GM(t).filter(o=>o.isLink&&this.options.isAllowedUri(o.value,{defaultValidate:s=>!!ms(s,n),protocols:n,defaultProtocol:r}));i.length&&i.forEach(o=>{this.options.shouldAutoLink(o.value)&&e.push({text:o.value,data:{href:o.href},index:o.start})})}return e},type:this.type,getAttributes:t=>{var e;return{href:(e=t.data)==null?void 0:e.href}}})]},addProseMirrorPlugins(){const t=[],{protocols:e,defaultProtocol:n}=this.options;return this.options.autolink&&t.push(M8({type:this.type,defaultProtocol:this.options.defaultProtocol,validate:r=>this.options.isAllowedUri(r,{defaultValidate:i=>!!ms(i,e),protocols:e,defaultProtocol:n}),shouldAutoLink:this.options.shouldAutoLink})),t.push(_8({type:this.type,editor:this.editor,openOnClick:this.options.openOnClick==="whenNotEditable"?!0:this.options.openOnClick,enableClickSelection:this.options.enableClickSelection})),this.options.linkOnPaste&&t.push(N8({editor:this.editor,defaultProtocol:this.options.defaultProtocol,type:this.type,shouldAutoLink:this.options.shouldAutoLink})),t}}),A8=Object.defineProperty,P8=(t,e)=>{for(var n in e)A8(t,n,{get:e[n],enumerable:!0})},R8="listItem",Bk="textStyle",jk=/^\s*([-+*])\s$/,XM=vr.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:t}){return["ul",Ot(this.options.HTMLAttributes,t),0]},markdownTokenName:"list",parseMarkdown:(t,e)=>t.type!=="list"||t.ordered?[]:{type:"bulletList",content:t.items?e.parseChildren(t.items):[]},renderMarkdown:(t,e)=>t.content?e.renderChildren(t.content,`
`):"",markdownOptions:{indentsContent:!0},addCommands(){return{toggleBulletList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(R8,this.editor.getAttributes(Bk)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let t=ra({find:jk,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(t=ra({find:jk,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(Bk),editor:this.editor})),[t]}}),JM=vr.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:t}){return["li",Ot(this.options.HTMLAttributes,t),0]},markdownTokenName:"list_item",parseMarkdown:(t,e)=>{if(t.type!=="list_item")return[];let n=[];if(t.tokens&&t.tokens.length>0)if(t.tokens.some(i=>i.type==="paragraph"))n=e.parseChildren(t.tokens);else{const i=t.tokens[0];if(i&&i.type==="text"&&i.tokens&&i.tokens.length>0){if(n=[{type:"paragraph",content:e.parseInline(i.tokens)}],t.tokens.length>1){const s=t.tokens.slice(1),a=e.parseChildren(s);n.push(...a)}}else n=e.parseChildren(t.tokens)}return n.length===0&&(n=[{type:"paragraph",content:[]}]),{type:"listItem",content:n}},renderMarkdown:(t,e,n)=>dv(t,e,r=>r.parentType==="bulletList"?"- ":r.parentType==="orderedList"?`${r.index+1}. `:"- ",n),addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),D8={};P8(D8,{findListItemPos:()=>Ju,getNextListDepth:()=>kv,handleBackspace:()=>L0,handleDelete:()=>z0,hasListBefore:()=>YM,hasListItemAfter:()=>I8,hasListItemBefore:()=>QM,listItemHasSubList:()=>ZM,nextListIsDeeper:()=>e2,nextListIsHigher:()=>t2});var Ju=(t,e)=>{const{$from:n}=e.selection,r=Nt(t,e.schema);let i=null,o=n.depth,s=n.pos,a=null;for(;o>0&&a===null;)i=n.node(o),i.type===r?a=o:(o-=1,s-=1);return a===null?null:{$pos:e.doc.resolve(s),depth:a}},kv=(t,e)=>{const n=Ju(t,e);if(!n)return!1;const[,r]=OF(e,t,n.$pos.pos+4);return r},YM=(t,e,n)=>{const{$anchor:r}=t.selection,i=Math.max(0,r.pos-2),o=t.doc.resolve(i).node();return!(!o||!n.includes(o.type.name))},QM=(t,e)=>{var n;const{$anchor:r}=e.selection,i=e.doc.resolve(r.pos-2);return!(i.index()===0||((n=i.nodeBefore)==null?void 0:n.type.name)!==t)},ZM=(t,e,n)=>{if(!n)return!1;const r=Nt(t,e.schema);let i=!1;return n.descendants(o=>{o.type===r&&(i=!0)}),i},L0=(t,e,n)=>{if(t.commands.undoInputRule())return!0;if(t.state.selection.from!==t.state.selection.to)return!1;if(!Jo(t.state,e)&&YM(t.state,e,n)){const{$anchor:a}=t.state.selection,c=t.state.doc.resolve(a.before()-1),f=[];c.node().descendants((m,g)=>{m.type.name===e&&f.push({node:m,pos:g})});const d=f.at(-1);if(!d)return!1;const p=t.state.doc.resolve(c.start()+d.pos+1);return t.chain().cut({from:a.start()-1,to:a.end()+1},p.end()).joinForward().run()}if(!Jo(t.state,e)||!DF(t.state))return!1;const r=Ju(e,t.state);if(!r)return!1;const o=t.state.doc.resolve(r.$pos.pos-2).node(r.depth),s=ZM(e,t.state,o);return QM(e,t.state)&&!s?t.commands.joinItemBackward():t.chain().liftListItem(e).run()},e2=(t,e)=>{const n=kv(t,e),r=Ju(t,e);return!r||!n?!1:n>r.depth},t2=(t,e)=>{const n=kv(t,e),r=Ju(t,e);return!r||!n?!1:n<r.depth},z0=(t,e)=>{if(!Jo(t.state,e)||!RF(t.state,e))return!1;const{selection:n}=t.state,{$from:r,$to:i}=n;return!n.empty&&r.sameParent(i)?!1:e2(e,t.state)?t.chain().focus(t.state.selection.from+4).lift(e).joinBackward().run():t2(e,t.state)?t.chain().joinForward().joinBackward().run():t.commands.joinItemForward()},I8=(t,e)=>{var n;const{$anchor:r}=e.selection,i=e.doc.resolve(r.pos-r.parentOffset-2);return!(i.index()===i.parent.childCount-1||((n=i.nodeAfter)==null?void 0:n.type.name)!==t)},n2=Ct.create({name:"listKeymap",addOptions(){return{listTypes:[{itemName:"listItem",wrapperNames:["bulletList","orderedList"]},{itemName:"taskItem",wrapperNames:["taskList"]}]}},addKeyboardShortcuts(){return{Delete:({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:n})=>{t.state.schema.nodes[n]!==void 0&&z0(t,n)&&(e=!0)}),e},"Mod-Delete":({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:n})=>{t.state.schema.nodes[n]!==void 0&&z0(t,n)&&(e=!0)}),e},Backspace:({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:n,wrapperNames:r})=>{t.state.schema.nodes[n]!==void 0&&L0(t,n,r)&&(e=!0)}),e},"Mod-Backspace":({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:n,wrapperNames:r})=>{t.state.schema.nodes[n]!==void 0&&L0(t,n,r)&&(e=!0)}),e}}}}),Fk=/^(\s*)(\d+)\.\s+(.*)$/,L8=/^\s/;function z8(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n],o=i.match(Fk);if(!o)break;const[,s,a,c]=o,f=s.length;let d=c,p=n+1;const m=[i];for(;p<t.length;){const g=t[p];if(g.match(Fk))break;if(g.trim()==="")m.push(g),d+=`
`,p+=1;else if(g.match(L8))m.push(g),d+=`
${g.slice(f+2)}`,p+=1;else break}e.push({indent:f,number:parseInt(a,10),content:d.trim(),raw:m.join(`
`)}),r=p,n=p}return[e,r]}function r2(t,e,n){var r;const i=[];let o=0;for(;o<t.length;){const s=t[o];if(s.indent===e){const a=s.content.split(`
`),c=((r=a[0])==null?void 0:r.trim())||"",f=[];c&&f.push({type:"paragraph",raw:c,tokens:n.inlineTokens(c)});const d=a.slice(1).join(`
`).trim();if(d){const g=n.blockTokens(d);f.push(...g)}let p=o+1;const m=[];for(;p<t.length&&t[p].indent>e;)m.push(t[p]),p+=1;if(m.length>0){const g=Math.min(...m.map(k=>k.indent)),v=r2(m,g,n);f.push({type:"list",ordered:!0,start:m[0].number,items:v,raw:m.map(k=>k.raw).join(`
`)})}i.push({type:"list_item",raw:s.raw,tokens:f}),o=p}else o+=1}return i}function B8(t,e){return t.map(n=>{if(n.type!=="list_item")return e.parseChildren([n])[0];const r=[];return n.tokens&&n.tokens.length>0&&n.tokens.forEach(i=>{if(i.type==="paragraph"||i.type==="list"||i.type==="blockquote"||i.type==="code")r.push(...e.parseChildren([i]));else if(i.type==="text"&&i.tokens){const o=e.parseChildren([i]);r.push({type:"paragraph",content:o})}else{const o=e.parseChildren([i]);o.length>0&&r.push(...o)}}),{type:"listItem",content:r}})}var j8="listItem",$k="textStyle",Hk=/^(\d+)\.\s$/,i2=vr.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:t=>t.hasAttribute("start")?parseInt(t.getAttribute("start")||"",10):1},type:{default:null,parseHTML:t=>t.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:t}){const{start:e,...n}=t;return e===1?["ol",Ot(this.options.HTMLAttributes,n),0]:["ol",Ot(this.options.HTMLAttributes,t),0]},markdownTokenName:"list",parseMarkdown:(t,e)=>{if(t.type!=="list"||!t.ordered)return[];const n=t.start||1,r=t.items?B8(t.items,e):[];return n!==1?{type:"orderedList",attrs:{start:n},content:r}:{type:"orderedList",content:r}},renderMarkdown:(t,e)=>t.content?e.renderChildren(t.content,`
`):"",markdownTokenizer:{name:"orderedList",level:"block",start:t=>{const e=t.match(/^(\s*)(\d+)\.\s+/),n=e==null?void 0:e.index;return n!==void 0?n:-1},tokenize:(t,e,n)=>{var r;const i=t.split(`
`),[o,s]=z8(i);if(o.length===0)return;const a=r2(o,0,n);return a.length===0?void 0:{type:"list",ordered:!0,start:((r=o[0])==null?void 0:r.number)||1,items:a,raw:i.slice(0,s).join(`
`)}}},markdownOptions:{indentsContent:!0},addCommands(){return{toggleOrderedList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(j8,this.editor.getAttributes($k)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let t=ra({find:Hk,type:this.type,getAttributes:e=>({start:+e[1]}),joinPredicate:(e,n)=>n.childCount+n.attrs.start===+e[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(t=ra({find:Hk,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:e=>({start:+e[1],...this.editor.getAttributes($k)}),joinPredicate:(e,n)=>n.childCount+n.attrs.start===+e[1],editor:this.editor})),[t]}}),F8=/^\s*(\[([( |x])?\])\s$/,$8=vr.create({name:"taskItem",addOptions(){return{nested:!1,HTMLAttributes:{},taskListTypeName:"taskList",a11y:void 0}},content(){return this.options.nested?"paragraph block*":"paragraph+"},defining:!0,addAttributes(){return{checked:{default:!1,keepOnSplit:!1,parseHTML:t=>{const e=t.getAttribute("data-checked");return e===""||e==="true"},renderHTML:t=>({"data-checked":t.checked})}}},parseHTML(){return[{tag:`li[data-type="${this.name}"]`,priority:51}]},renderHTML({node:t,HTMLAttributes:e}){return["li",Ot(this.options.HTMLAttributes,e,{"data-type":this.name}),["label",["input",{type:"checkbox",checked:t.attrs.checked?"checked":null}],["span"]],["div",0]]},parseMarkdown:(t,e)=>{const n=[];if(t.tokens&&t.tokens.length>0?n.push(e.createNode("paragraph",{},e.parseInline(t.tokens))):t.text?n.push(e.createNode("paragraph",{},[e.createNode("text",{text:t.text})])):n.push(e.createNode("paragraph",{},[])),t.nestedTokens&&t.nestedTokens.length>0){const r=e.parseChildren(t.nestedTokens);n.push(...r)}return e.createNode("taskItem",{checked:t.checked||!1},n)},renderMarkdown:(t,e)=>{var n;const i=`- [${(n=t.attrs)!=null&&n.checked?"x":" "}] `;return dv(t,e,i)},addKeyboardShortcuts(){const t={Enter:()=>this.editor.commands.splitListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)};return this.options.nested?{...t,Tab:()=>this.editor.commands.sinkListItem(this.name)}:t},addNodeView(){return({node:t,HTMLAttributes:e,getPos:n,editor:r})=>{const i=document.createElement("li"),o=document.createElement("label"),s=document.createElement("span"),a=document.createElement("input"),c=document.createElement("div"),f=p=>{var m,g;a.ariaLabel=((g=(m=this.options.a11y)==null?void 0:m.checkboxLabel)==null?void 0:g.call(m,p,a.checked))||`Task item checkbox for ${p.textContent||"empty task item"}`};f(t),o.contentEditable="false",a.type="checkbox",a.addEventListener("mousedown",p=>p.preventDefault()),a.addEventListener("change",p=>{if(!r.isEditable&&!this.options.onReadOnlyChecked){a.checked=!a.checked;return}const{checked:m}=p.target;r.isEditable&&typeof n=="function"&&r.chain().focus(void 0,{scrollIntoView:!1}).command(({tr:g})=>{const v=n();if(typeof v!="number")return!1;const k=g.doc.nodeAt(v);return g.setNodeMarkup(v,void 0,{...k==null?void 0:k.attrs,checked:m}),!0}).run(),!r.isEditable&&this.options.onReadOnlyChecked&&(this.options.onReadOnlyChecked(t,m)||(a.checked=!a.checked))}),Object.entries(this.options.HTMLAttributes).forEach(([p,m])=>{i.setAttribute(p,m)}),i.dataset.checked=t.attrs.checked,a.checked=t.attrs.checked,o.append(a,s),i.append(o,c),Object.entries(e).forEach(([p,m])=>{i.setAttribute(p,m)});let d=new Set(Object.keys(e));return{dom:i,contentDOM:c,update:p=>{if(p.type!==this.type)return!1;i.dataset.checked=p.attrs.checked,a.checked=p.attrs.checked,f(p);const m=r.extensionManager.attributes,g=ju(p,m),v=new Set(Object.keys(g)),k=this.options.HTMLAttributes;return d.forEach(b=>{v.has(b)||(b in k?i.setAttribute(b,k[b]):i.removeAttribute(b))}),Object.entries(g).forEach(([b,x])=>{x==null?b in k?i.setAttribute(b,k[b]):i.removeAttribute(b):i.setAttribute(b,x)}),d=v,!0}}}},addInputRules(){return[ra({find:F8,type:this.type,getAttributes:t=>({checked:t[t.length-1]==="x"})})]}}),H8=vr.create({name:"taskList",addOptions(){return{itemTypeName:"taskItem",HTMLAttributes:{}}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:`ul[data-type="${this.name}"]`,priority:51}]},renderHTML({HTMLAttributes:t}){return["ul",Ot(this.options.HTMLAttributes,t,{"data-type":this.name}),0]},parseMarkdown:(t,e)=>e.createNode("taskList",{},e.parseChildren(t.items||[])),renderMarkdown:(t,e)=>t.content?e.renderChildren(t.content,`
`):"",markdownTokenizer:{name:"taskList",level:"block",start(t){var e;const n=(e=t.match(/^\s*[-+*]\s+\[([ xX])\]\s+/))==null?void 0:e.index;return n!==void 0?n:-1},tokenize(t,e,n){const r=o=>{const s=T0(o,{itemPattern:/^(\s*)([-+*])\s+\[([ xX])\]\s+(.*)$/,extractItemData:a=>({indentLevel:a[1].length,mainContent:a[4],checked:a[3].toLowerCase()==="x"}),createToken:(a,c)=>({type:"taskItem",raw:"",mainContent:a.mainContent,indentLevel:a.indentLevel,checked:a.checked,text:a.mainContent,tokens:n.inlineTokens(a.mainContent),nestedTokens:c}),customNestedParser:r},n);return s?[{type:"taskList",raw:s.raw,items:s.items}]:n.blockTokens(o)},i=T0(t,{itemPattern:/^(\s*)([-+*])\s+\[([ xX])\]\s+(.*)$/,extractItemData:o=>({indentLevel:o[1].length,mainContent:o[4],checked:o[3].toLowerCase()==="x"}),createToken:(o,s)=>({type:"taskItem",raw:"",mainContent:o.mainContent,indentLevel:o.indentLevel,checked:o.checked,text:o.mainContent,tokens:n.inlineTokens(o.mainContent),nestedTokens:s}),customNestedParser:r},n);if(i)return{type:"taskList",raw:i.raw,items:i.items}}},markdownOptions:{indentsContent:!0},addCommands(){return{toggleTaskList:()=>({commands:t})=>t.toggleList(this.name,this.options.itemTypeName)}},addKeyboardShortcuts(){return{"Mod-Shift-9":()=>this.editor.commands.toggleTaskList()}}});Ct.create({name:"listKit",addExtensions(){const t=[];return this.options.bulletList!==!1&&t.push(XM.configure(this.options.bulletList)),this.options.listItem!==!1&&t.push(JM.configure(this.options.listItem)),this.options.listKeymap!==!1&&t.push(n2.configure(this.options.listKeymap)),this.options.orderedList!==!1&&t.push(i2.configure(this.options.orderedList)),this.options.taskItem!==!1&&t.push($8.configure(this.options.taskItem)),this.options.taskList!==!1&&t.push(H8.configure(this.options.taskList)),t}});var U8=vr.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:t}){return["p",Ot(this.options.HTMLAttributes,t),0]},parseMarkdown:(t,e)=>{const n=t.tokens||[];return n.length===1&&n[0].type==="image"?e.parseChildren([n[0]]):e.createNode("paragraph",void 0,e.parseInline(n))},renderMarkdown:(t,e)=>!t||!Array.isArray(t.content)?"":e.renderChildren(t.content),addCommands(){return{setParagraph:()=>({commands:t})=>t.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),V8=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,W8=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,K8=qs.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["s",Ot(this.options.HTMLAttributes,t),0]},markdownTokenName:"del",parseMarkdown:(t,e)=>e.applyMark("strike",e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>`~~${e.renderChildren(t)}~~`,addCommands(){return{setStrike:()=>({commands:t})=>t.setMark(this.name),toggleStrike:()=>({commands:t})=>t.toggleMark(this.name),unsetStrike:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[na({find:V8,type:this.type})]},addPasteRules(){return[Hs({find:W8,type:this.type})]}}),q8=vr.create({name:"text",group:"inline",parseMarkdown:t=>({type:"text",text:t.text||""}),renderMarkdown:t=>t.text||""}),G8=qs.create({name:"underline",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("underline")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["u",Ot(this.options.HTMLAttributes,t),0]},parseMarkdown(t,e){return e.applyMark(this.name||"underline",e.parseInline(t.tokens||[]))},renderMarkdown(t,e){return`++${e.renderChildren(t)}++`},markdownTokenizer:{name:"underline",level:"inline",start(t){return t.indexOf("++")},tokenize(t,e,n){const i=/^(\+\+)([\s\S]+?)(\+\+)/.exec(t);if(!i)return;const o=i[2].trim();return{type:"underline",raw:i[0],text:o,tokens:n.inlineTokens(o)}}},addCommands(){return{setUnderline:()=>({commands:t})=>t.setMark(this.name),toggleUnderline:()=>({commands:t})=>t.toggleMark(this.name),unsetUnderline:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-u":()=>this.editor.commands.toggleUnderline(),"Mod-U":()=>this.editor.commands.toggleUnderline()}}});function X8(t={}){return new ct({view(e){return new J8(e,t)}})}class J8{constructor(e,n){var r;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(r=n.width)!==null&&r!==void 0?r:1,this.color=n.color===!1?void 0:n.color||"black",this.class=n.class,this.handlers=["dragover","dragend","drop","dragleave"].map(i=>{let o=s=>{this[i](s)};return e.dom.addEventListener(i,o),{name:i,handler:o}})}destroy(){this.handlers.forEach(({name:e,handler:n})=>this.editorView.dom.removeEventListener(e,n))}update(e,n){this.cursorPos!=null&&n.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),n=!e.parent.inlineContent,r,i=this.editorView.dom,o=i.getBoundingClientRect(),s=o.width/i.offsetWidth,a=o.height/i.offsetHeight;if(n){let p=e.nodeBefore,m=e.nodeAfter;if(p||m){let g=this.editorView.nodeDOM(this.cursorPos-(p?p.nodeSize:0));if(g){let v=g.getBoundingClientRect(),k=p?v.bottom:v.top;p&&m&&(k=(k+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2);let b=this.width/2*a;r={left:v.left,right:v.right,top:k-b,bottom:k+b}}}}if(!r){let p=this.editorView.coordsAtPos(this.cursorPos),m=this.width/2*s;r={left:p.left-m,right:p.left+m,top:p.top,bottom:p.bottom}}let c=this.editorView.dom.offsetParent;this.element||(this.element=c.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",n),this.element.classList.toggle("prosemirror-dropcursor-inline",!n);let f,d;if(!c||c==document.body&&getComputedStyle(c).position=="static")f=-pageXOffset,d=-pageYOffset;else{let p=c.getBoundingClientRect(),m=p.width/c.offsetWidth,g=p.height/c.offsetHeight;f=p.left-c.scrollLeft*m,d=p.top-c.scrollTop*g}this.element.style.left=(r.left-f)/s+"px",this.element.style.top=(r.top-d)/a+"px",this.element.style.width=(r.right-r.left)/s+"px",this.element.style.height=(r.bottom-r.top)/a+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let n=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),r=n&&n.inside>=0&&this.editorView.state.doc.nodeAt(n.inside),i=r&&r.type.spec.disableDropCursor,o=typeof i=="function"?i(this.editorView,n,e):i;if(n&&!o){let s=n.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let a=tT(this.editorView.state.doc,s,this.editorView.dragging.slice);a!=null&&(s=a)}this.setCursor(s),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){this.editorView.dom.contains(e.relatedTarget)||this.setCursor(null)}}class yt extends Te{constructor(e){super(e,e)}map(e,n){let r=e.resolve(n.map(this.head));return yt.valid(r)?new yt(r):Te.near(r)}content(){return te.empty}eq(e){return e instanceof yt&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new yt(e.resolve(n.pos))}getBookmark(){return new bv(this.anchor)}static valid(e){let n=e.parent;if(n.isTextblock||!Y8(e)||!Q8(e))return!1;let r=n.type.spec.allowGapCursor;if(r!=null)return r;let i=n.contentMatchAt(e.index()).defaultType;return i&&i.isTextblock}static findGapCursorFrom(e,n,r=!1){e:for(;;){if(!r&&yt.valid(e))return e;let i=e.pos,o=null;for(let s=e.depth;;s--){let a=e.node(s);if(n>0?e.indexAfter(s)<a.childCount:e.index(s)>0){o=a.child(n>0?e.indexAfter(s):e.index(s)-1);break}else if(s==0)return null;i+=n;let c=e.doc.resolve(i);if(yt.valid(c))return c}for(;;){let s=n>0?o.firstChild:o.lastChild;if(!s){if(o.isAtom&&!o.isText&&!ce.isSelectable(o)){e=e.doc.resolve(i+o.nodeSize*n),r=!1;continue e}break}o=s,i+=n;let a=e.doc.resolve(i);if(yt.valid(a))return a}return null}}}yt.prototype.visible=!1;yt.findFrom=yt.findGapCursorFrom;Te.jsonID("gapcursor",yt);class bv{constructor(e){this.pos=e}map(e){return new bv(e.map(this.pos))}resolve(e){let n=e.resolve(this.pos);return yt.valid(n)?new yt(n):Te.near(n)}}function o2(t){return t.isAtom||t.spec.isolating||t.spec.createGapCursor}function Y8(t){for(let e=t.depth;e>=0;e--){let n=t.index(e),r=t.node(e);if(n==0){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(n-1);;i=i.lastChild){if(i.childCount==0&&!i.inlineContent||o2(i.type))return!0;if(i.inlineContent)return!1}}return!0}function Q8(t){for(let e=t.depth;e>=0;e--){let n=t.indexAfter(e),r=t.node(e);if(n==r.childCount){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(n);;i=i.firstChild){if(i.childCount==0&&!i.inlineContent||o2(i.type))return!0;if(i.inlineContent)return!1}}return!0}function Z8(){return new ct({props:{decorations:rH,createSelectionBetween(t,e,n){return e.pos==n.pos&&yt.valid(n)?new yt(n):null},handleClick:tH,handleKeyDown:eH,handleDOMEvents:{beforeinput:nH}}})}const eH=nM({ArrowLeft:kf("horiz",-1),ArrowRight:kf("horiz",1),ArrowUp:kf("vert",-1),ArrowDown:kf("vert",1)});function kf(t,e){const n=t=="vert"?e>0?"down":"up":e>0?"right":"left";return function(r,i,o){let s=r.selection,a=e>0?s.$to:s.$from,c=s.empty;if(s instanceof ve){if(!o.endOfTextblock(n)||a.depth==0)return!1;c=!1,a=r.doc.resolve(e>0?a.after():a.before())}let f=yt.findGapCursorFrom(a,e,c);return f?(i&&i(r.tr.setSelection(new yt(f))),!0):!1}}function tH(t,e,n){if(!t||!t.editable)return!1;let r=t.state.doc.resolve(e);if(!yt.valid(r))return!1;let i=t.posAtCoords({left:n.clientX,top:n.clientY});return i&&i.inside>-1&&ce.isSelectable(t.state.doc.nodeAt(i.inside))?!1:(t.dispatch(t.state.tr.setSelection(new yt(r))),!0)}function nH(t,e){if(e.inputType!="insertCompositionText"||!(t.state.selection instanceof yt))return!1;let{$from:n}=t.state.selection,r=n.parent.contentMatchAt(n.index()).findWrapping(t.state.schema.nodes.text);if(!r)return!1;let i=q.empty;for(let s=r.length-1;s>=0;s--)i=q.from(r[s].createAndFill(null,i));let o=t.state.tr.replace(n.pos,n.pos,new te(i,0,0));return o.setSelection(ve.near(o.doc.resolve(n.pos+1))),t.dispatch(o),!1}function rH(t){if(!(t.selection instanceof yt))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",lt.create(t.doc,[En.widget(t.selection.head,e,{key:"gapcursor"})])}var nh=200,Ut=function(){};Ut.prototype.append=function(e){return e.length?(e=Ut.from(e),!this.length&&e||e.length<nh&&this.leafAppend(e)||this.length<nh&&e.leafPrepend(this)||this.appendInner(e)):this};Ut.prototype.prepend=function(e){return e.length?Ut.from(e).append(this):this};Ut.prototype.appendInner=function(e){return new iH(this,e)};Ut.prototype.slice=function(e,n){return e===void 0&&(e=0),n===void 0&&(n=this.length),e>=n?Ut.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,n))};Ut.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};Ut.prototype.forEach=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length),n<=r?this.forEachInner(e,n,r,0):this.forEachInvertedInner(e,n,r,0)};Ut.prototype.map=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length);var i=[];return this.forEach(function(o,s){return i.push(e(o,s))},n,r),i};Ut.from=function(e){return e instanceof Ut?e:e&&e.length?new s2(e):Ut.empty};var s2=function(t){function e(r){t.call(this),this.values=r}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(i,o){return i==0&&o==this.length?this:new e(this.values.slice(i,o))},e.prototype.getInner=function(i){return this.values[i]},e.prototype.forEachInner=function(i,o,s,a){for(var c=o;c<s;c++)if(i(this.values[c],a+c)===!1)return!1},e.prototype.forEachInvertedInner=function(i,o,s,a){for(var c=o-1;c>=s;c--)if(i(this.values[c],a+c)===!1)return!1},e.prototype.leafAppend=function(i){if(this.length+i.length<=nh)return new e(this.values.concat(i.flatten()))},e.prototype.leafPrepend=function(i){if(this.length+i.length<=nh)return new e(i.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(e.prototype,n),e}(Ut);Ut.empty=new s2([]);var iH=function(t){function e(n,r){t.call(this),this.left=n,this.right=r,this.length=n.length+r.length,this.depth=Math.max(n.depth,r.depth)+1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(r){return r<this.left.length?this.left.get(r):this.right.get(r-this.left.length)},e.prototype.forEachInner=function(r,i,o,s){var a=this.left.length;if(i<a&&this.left.forEachInner(r,i,Math.min(o,a),s)===!1||o>a&&this.right.forEachInner(r,Math.max(i-a,0),Math.min(this.length,o)-a,s+a)===!1)return!1},e.prototype.forEachInvertedInner=function(r,i,o,s){var a=this.left.length;if(i>a&&this.right.forEachInvertedInner(r,i-a,Math.max(o,a)-a,s+a)===!1||o<a&&this.left.forEachInvertedInner(r,Math.min(i,a),o,s)===!1)return!1},e.prototype.sliceInner=function(r,i){if(r==0&&i==this.length)return this;var o=this.left.length;return i<=o?this.left.slice(r,i):r>=o?this.right.slice(r-o,i-o):this.left.slice(r,o).append(this.right.slice(0,i-o))},e.prototype.leafAppend=function(r){var i=this.right.leafAppend(r);if(i)return new e(this.left,i)},e.prototype.leafPrepend=function(r){var i=this.left.leafPrepend(r);if(i)return new e(i,this.right)},e.prototype.appendInner=function(r){return this.left.depth>=Math.max(this.right.depth,r.depth)+1?new e(this.left,new e(this.right,r)):new e(this,r)},e}(Ut);const oH=500;class ni{constructor(e,n){this.items=e,this.eventCount=n}popEvent(e,n){if(this.eventCount==0)return null;let r=this.items.length;for(;;r--)if(this.items.get(r-1).selection){--r;break}let i,o;n&&(i=this.remapping(r,this.items.length),o=i.maps.length);let s=e.tr,a,c,f=[],d=[];return this.items.forEach((p,m)=>{if(!p.step){i||(i=this.remapping(r,m+1),o=i.maps.length),o--,d.push(p);return}if(i){d.push(new vi(p.map));let g=p.step.map(i.slice(o)),v;g&&s.maybeStep(g).doc&&(v=s.mapping.maps[s.mapping.maps.length-1],f.push(new vi(v,void 0,void 0,f.length+d.length))),o--,v&&i.appendMap(v,o)}else s.maybeStep(p.step);if(p.selection)return a=i?p.selection.map(i.slice(o)):p.selection,c=new ni(this.items.slice(0,r).append(d.reverse().concat(f)),this.eventCount-1),!1},this.items.length,0),{remaining:c,transform:s,selection:a}}addTransform(e,n,r,i){let o=[],s=this.eventCount,a=this.items,c=!i&&a.length?a.get(a.length-1):null;for(let d=0;d<e.steps.length;d++){let p=e.steps[d].invert(e.docs[d]),m=new vi(e.mapping.maps[d],p,n),g;(g=c&&c.merge(m))&&(m=g,d?o.pop():a=a.slice(0,a.length-1)),o.push(m),n&&(s++,n=void 0),i||(c=m)}let f=s-r.depth;return f>lH&&(a=sH(a,f),s-=f),new ni(a.append(o),s)}remapping(e,n){let r=new Ru;return this.items.forEach((i,o)=>{let s=i.mirrorOffset!=null&&o-i.mirrorOffset>=e?r.maps.length-i.mirrorOffset:void 0;r.appendMap(i.map,s)},e,n),r}addMaps(e){return this.eventCount==0?this:new ni(this.items.append(e.map(n=>new vi(n))),this.eventCount)}rebased(e,n){if(!this.eventCount)return this;let r=[],i=Math.max(0,this.items.length-n),o=e.mapping,s=e.steps.length,a=this.eventCount;this.items.forEach(m=>{m.selection&&a--},i);let c=n;this.items.forEach(m=>{let g=o.getMirror(--c);if(g==null)return;s=Math.min(s,g);let v=o.maps[g];if(m.step){let k=e.steps[g].invert(e.docs[g]),b=m.selection&&m.selection.map(o.slice(c+1,g));b&&a++,r.push(new vi(v,k,b))}else r.push(new vi(v))},i);let f=[];for(let m=n;m<s;m++)f.push(new vi(o.maps[m]));let d=this.items.slice(0,i).append(f).append(r),p=new ni(d,a);return p.emptyItemCount()>oH&&(p=p.compress(this.items.length-r.length)),p}emptyItemCount(){let e=0;return this.items.forEach(n=>{n.step||e++}),e}compress(e=this.items.length){let n=this.remapping(0,e),r=n.maps.length,i=[],o=0;return this.items.forEach((s,a)=>{if(a>=e)i.push(s),s.selection&&o++;else if(s.step){let c=s.step.map(n.slice(r)),f=c&&c.getMap();if(r--,f&&n.appendMap(f,r),c){let d=s.selection&&s.selection.map(n.slice(r));d&&o++;let p=new vi(f.invert(),c,d),m,g=i.length-1;(m=i.length&&i[g].merge(p))?i[g]=m:i.push(p)}}else s.map&&r--},this.items.length,0),new ni(Ut.from(i.reverse()),o)}}ni.empty=new ni(Ut.empty,0);function sH(t,e){let n;return t.forEach((r,i)=>{if(r.selection&&e--==0)return n=i,!1}),t.slice(n)}class vi{constructor(e,n,r,i){this.map=e,this.step=n,this.selection=r,this.mirrorOffset=i}merge(e){if(this.step&&e.step&&!e.selection){let n=e.step.merge(this.step);if(n)return new vi(n.getMap().invert(),n,this.selection)}}}class ko{constructor(e,n,r,i,o){this.done=e,this.undone=n,this.prevRanges=r,this.prevTime=i,this.prevComposition=o}}const lH=20;function aH(t,e,n,r){let i=n.getMeta(Ps),o;if(i)return i.historyState;n.getMeta(fH)&&(t=new ko(t.done,t.undone,null,0,-1));let s=n.getMeta("appendedTransaction");if(n.steps.length==0)return t;if(s&&s.getMeta(Ps))return s.getMeta(Ps).redo?new ko(t.done.addTransform(n,void 0,r,Ff(e)),t.undone,Uk(n.mapping.maps),t.prevTime,t.prevComposition):new ko(t.done,t.undone.addTransform(n,void 0,r,Ff(e)),null,t.prevTime,t.prevComposition);if(n.getMeta("addToHistory")!==!1&&!(s&&s.getMeta("addToHistory")===!1)){let a=n.getMeta("composition"),c=t.prevTime==0||!s&&t.prevComposition!=a&&(t.prevTime<(n.time||0)-r.newGroupDelay||!uH(n,t.prevRanges)),f=s?ug(t.prevRanges,n.mapping):Uk(n.mapping.maps);return new ko(t.done.addTransform(n,c?e.selection.getBookmark():void 0,r,Ff(e)),ni.empty,f,n.time,a??t.prevComposition)}else return(o=n.getMeta("rebased"))?new ko(t.done.rebased(n,o),t.undone.rebased(n,o),ug(t.prevRanges,n.mapping),t.prevTime,t.prevComposition):new ko(t.done.addMaps(n.mapping.maps),t.undone.addMaps(n.mapping.maps),ug(t.prevRanges,n.mapping),t.prevTime,t.prevComposition)}function uH(t,e){if(!e)return!1;if(!t.docChanged)return!0;let n=!1;return t.mapping.maps[0].forEach((r,i)=>{for(let o=0;o<e.length;o+=2)r<=e[o+1]&&i>=e[o]&&(n=!0)}),n}function Uk(t){let e=[];for(let n=t.length-1;n>=0&&e.length==0;n--)t[n].forEach((r,i,o,s)=>e.push(o,s));return e}function ug(t,e){if(!t)return null;let n=[];for(let r=0;r<t.length;r+=2){let i=e.map(t[r],1),o=e.map(t[r+1],-1);i<=o&&n.push(i,o)}return n}function cH(t,e,n){let r=Ff(e),i=Ps.get(e).spec.config,o=(n?t.undone:t.done).popEvent(e,r);if(!o)return null;let s=o.selection.resolve(o.transform.doc),a=(n?t.done:t.undone).addTransform(o.transform,e.selection.getBookmark(),i,r),c=new ko(n?a:o.remaining,n?o.remaining:a,null,0,-1);return o.transform.setSelection(s).setMeta(Ps,{redo:n,historyState:c})}let cg=!1,Vk=null;function Ff(t){let e=t.plugins;if(Vk!=e){cg=!1,Vk=e;for(let n=0;n<e.length;n++)if(e[n].spec.historyPreserveItems){cg=!0;break}}return cg}const Ps=new It("history"),fH=new It("closeHistory");function dH(t={}){return t={depth:t.depth||100,newGroupDelay:t.newGroupDelay||500},new ct({key:Ps,state:{init(){return new ko(ni.empty,ni.empty,null,0,-1)},apply(e,n,r){return aH(n,r,e,t)}},config:t,props:{handleDOMEvents:{beforeinput(e,n){let r=n.inputType,i=r=="historyUndo"?a2:r=="historyRedo"?u2:null;return!i||!e.editable?!1:(n.preventDefault(),i(e.state,e.dispatch))}}}})}function l2(t,e){return(n,r)=>{let i=Ps.getState(n);if(!i||(t?i.undone:i.done).eventCount==0)return!1;if(r){let o=cH(i,n,t);o&&r(e?o.scrollIntoView():o)}return!0}}const a2=l2(!1,!0),u2=l2(!0,!0);Ct.create({name:"characterCount",addOptions(){return{limit:null,mode:"textSize",textCounter:t=>t.length,wordCounter:t=>t.split(" ").filter(e=>e!=="").length}},addStorage(){return{characters:()=>0,words:()=>0}},onBeforeCreate(){this.storage.characters=t=>{const e=(t==null?void 0:t.node)||this.editor.state.doc;if(((t==null?void 0:t.mode)||this.options.mode)==="textSize"){const r=e.textBetween(0,e.content.size,void 0," ");return this.options.textCounter(r)}return e.nodeSize},this.storage.words=t=>{const e=(t==null?void 0:t.node)||this.editor.state.doc,n=e.textBetween(0,e.content.size," "," ");return this.options.wordCounter(n)}},addProseMirrorPlugins(){let t=!1;return[new ct({key:new It("characterCount"),appendTransaction:(e,n,r)=>{if(t)return;const i=this.options.limit;if(i==null||i===0){t=!0;return}const o=this.storage.characters({node:r.doc});if(o>i){const s=o-i,a=0,c=s;console.warn(`[CharacterCount] Initial content exceeded limit of ${i} characters. Content was automatically trimmed.`);const f=r.tr.deleteRange(a,c);return t=!0,f}t=!0},filterTransaction:(e,n)=>{const r=this.options.limit;if(!e.docChanged||r===0||r===null||r===void 0)return!0;const i=this.storage.characters({node:n.doc}),o=this.storage.characters({node:e.doc});if(o<=r||i>r&&o>r&&o<=i)return!0;if(i>r&&o>r&&o>i||!e.getMeta("paste"))return!1;const a=e.selection.$head.pos,c=o-r,f=a-c,d=a;return e.deleteRange(f,d),!(this.storage.characters({node:e.doc})>r)}})]}});var hH=Ct.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[X8(this.options)]}});Ct.create({name:"focus",addOptions(){return{className:"has-focus",mode:"all"}},addProseMirrorPlugins(){return[new ct({key:new It("focus"),props:{decorations:({doc:t,selection:e})=>{const{isEditable:n,isFocused:r}=this.editor,{anchor:i}=e,o=[];if(!n||!r)return lt.create(t,[]);let s=0;this.options.mode==="deepest"&&t.descendants((c,f)=>{if(c.isText)return;if(!(i>=f&&i<=f+c.nodeSize-1))return!1;s+=1});let a=0;return t.descendants((c,f)=>{if(c.isText||!(i>=f&&i<=f+c.nodeSize-1))return!1;if(a+=1,this.options.mode==="deepest"&&s-a>0||this.options.mode==="shallowest"&&a>1)return this.options.mode==="deepest";o.push(En.node(f,f+c.nodeSize,{class:this.options.className}))}),lt.create(t,o)}}})]}});var pH=Ct.create({name:"gapCursor",addProseMirrorPlugins(){return[Z8()]},extendNodeSchema(t){var e;const n={name:t.name,options:t.options,storage:t.storage};return{allowGapCursor:(e=Ve(ue(t,"allowGapCursor",n)))!=null?e:null}}}),mH=Ct.create({name:"placeholder",addOptions(){return{emptyEditorClass:"is-editor-empty",emptyNodeClass:"is-empty",placeholder:"Write something ",showOnlyWhenEditable:!0,showOnlyCurrent:!0,includeChildren:!1}},addProseMirrorPlugins(){return[new ct({key:new It("placeholder"),props:{decorations:({doc:t,selection:e})=>{const n=this.editor.isEditable||!this.options.showOnlyWhenEditable,{anchor:r}=e,i=[];if(!n)return null;const o=this.editor.isEmpty;return t.descendants((s,a)=>{const c=r>=a&&r<=a+s.nodeSize,f=!s.isLeaf&&zh(s);if((c||!this.options.showOnlyCurrent)&&f){const d=[this.options.emptyNodeClass];o&&d.push(this.options.emptyEditorClass);const p=En.node(a,a+s.nodeSize,{class:d.join(" "),"data-placeholder":typeof this.options.placeholder=="function"?this.options.placeholder({editor:this.editor,node:s,pos:a,hasAnchor:c}):this.options.placeholder});i.push(p)}return this.options.includeChildren}),lt.create(t,i)}}})]}});Ct.create({name:"selection",addOptions(){return{className:"selection"}},addProseMirrorPlugins(){const{editor:t,options:e}=this;return[new ct({key:new It("selection"),props:{decorations(n){return n.selection.empty||t.isFocused||!t.isEditable||vM(n.selection)||t.view.dragging?null:lt.create(n.doc,[En.inline(n.selection.from,n.selection.to,{class:e.className})])}}})]}});function Wk({types:t,node:e}){return e&&Array.isArray(t)&&t.includes(e.type)||(e==null?void 0:e.type)===t}var gH=Ct.create({name:"trailingNode",addOptions(){return{node:void 0,notAfter:[]}},addProseMirrorPlugins(){var t;const e=new It(this.name),n=this.options.node||((t=this.editor.schema.topNodeType.contentMatch.defaultType)==null?void 0:t.name)||"paragraph",r=Object.entries(this.editor.schema.nodes).map(([,i])=>i).filter(i=>(this.options.notAfter||[]).concat(n).includes(i.name));return[new ct({key:e,appendTransaction:(i,o,s)=>{const{doc:a,tr:c,schema:f}=s,d=e.getState(s),p=a.content.size,m=f.nodes[n];if(d)return c.insert(p,m.create())},state:{init:(i,o)=>{const s=o.tr.doc.lastChild;return!Wk({node:s,types:r})},apply:(i,o)=>{if(!i.docChanged||i.getMeta("__uniqueIDTransaction"))return o;const s=i.doc.lastChild;return!Wk({node:s,types:r})}}})]}}),yH=Ct.create({name:"undoRedo",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:t,dispatch:e})=>a2(t,e),redo:()=>({state:t,dispatch:e})=>u2(t,e)}},addProseMirrorPlugins(){return[dH(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-":()=>this.editor.commands.undo(),"Shift-Mod-":()=>this.editor.commands.redo()}}}),vH=Ct.create({name:"starterKit",addExtensions(){var t,e,n,r;const i=[];return this.options.bold!==!1&&i.push(V$.configure(this.options.bold)),this.options.blockquote!==!1&&i.push(j$.configure(this.options.blockquote)),this.options.bulletList!==!1&&i.push(XM.configure(this.options.bulletList)),this.options.code!==!1&&i.push(q$.configure(this.options.code)),this.options.codeBlock!==!1&&i.push(J$.configure(this.options.codeBlock)),this.options.document!==!1&&i.push(Y$.configure(this.options.document)),this.options.dropcursor!==!1&&i.push(hH.configure(this.options.dropcursor)),this.options.gapcursor!==!1&&i.push(pH.configure(this.options.gapcursor)),this.options.hardBreak!==!1&&i.push(Q$.configure(this.options.hardBreak)),this.options.heading!==!1&&i.push(Z$.configure(this.options.heading)),this.options.undoRedo!==!1&&i.push(yH.configure(this.options.undoRedo)),this.options.horizontalRule!==!1&&i.push(e8.configure(this.options.horizontalRule)),this.options.italic!==!1&&i.push(o8.configure(this.options.italic)),this.options.listItem!==!1&&i.push(JM.configure(this.options.listItem)),this.options.listKeymap!==!1&&i.push(n2.configure((t=this.options)==null?void 0:t.listKeymap)),this.options.link!==!1&&i.push(O8.configure((e=this.options)==null?void 0:e.link)),this.options.orderedList!==!1&&i.push(i2.configure(this.options.orderedList)),this.options.paragraph!==!1&&i.push(U8.configure(this.options.paragraph)),this.options.strike!==!1&&i.push(K8.configure(this.options.strike)),this.options.text!==!1&&i.push(q8.configure(this.options.text)),this.options.underline!==!1&&i.push(G8.configure((n=this.options)==null?void 0:n.underline)),this.options.trailingNode!==!1&&i.push(gH.configure((r=this.options)==null?void 0:r.trailingNode)),i}}),xH=vH,wH=mH;const fg=[{id:"blank",name:"",content:""},{id:"gdd",name:"GDD ",content:`
      <h1> (Project Name)</h1>
      <h2>1. </h2>
      <p><strong></strong></p>
      <p><strong></strong>RPG / FPS / RTS...</p>
      <p><strong></strong>...</p>
      <h2>2. </h2>
      <h3></h3>
      <p></p>
      <h3></h3>
      <p>/</p>
      <h2>3. </h2>
      <p></p>
      <h2>4. </h2>
      <p></p>
    `},{id:"level",name:"",content:`
      <h1>: [Level 1]</h1>
      <h2>1. </h2>
      <p></p>
      <h2>2. </h2>
      <p></p>
      <h2>3. </h2>
      <ul>
        <li>: 3</li>
        <li>: 1</li>
      </ul>
      <h2>4. </h2>
      <p></p>
    `},{id:"char",name:"",content:`
      <h1>: [Name]</h1>
      <h2>1. </h2>
      <ul>
        <li><strong>:</strong> 18</li>
        <li><strong>:</strong> </li>
        <li><strong>:</strong> </li>
      </ul>
      <h2>2. </h2>
      <p>...</p>
      <h2>3. </h2>
      <ul>
        <li><strong>Q:</strong> ...</li>
        <li><strong>E:</strong> ...</li>
        <li><strong>R:</strong> ...</li>
      </ul>
    `}];function SH({initialDocs:t,onUpdate:e}){const[n,r]=se.useState(t),[i,o]=se.useState(null),[s,a]=se.useState([]),c=se.useRef(null),[f,d]=se.useState(!1),[p,m]=se.useState(null);se.useEffect(()=>{t.length===0?b("gdd",null):!i&&t.length>0&&o(t[0].id)},[]);const g=(O,D)=>{const z=n.map(j=>j.id===O?{...j,content:D}:j);r(z),e(z)},v=(O,D)=>{const z=n.map(j=>j.id===O?{...j,title:D}:j);r(z),e(z)},k=O=>{m(O),d(!0)},b=(O,D)=>{const z=fg.find(oe=>oe.id===O)||fg[0],j={id:No(),title:z.id==="blank"?"":z.name,content:z.content,parentId:D,expanded:!0};let ee=[...n,j];D&&(ee=ee.map(oe=>oe.id===D?{...oe,expanded:!0}:oe)),r(ee),e(ee),o(j.id),d(!1)},x=(O,D)=>{if(O.stopPropagation(),!confirm(""))return;const z=new Set,j=oe=>{z.add(oe),n.filter(he=>he.parentId===oe).forEach(he=>j(he.id))};j(D);const ee=n.filter(oe=>!z.has(oe.id));r(ee),e(ee),i&&z.has(i)&&o(null)},w=(O,D)=>{O.stopPropagation(),r(n.map(z=>z.id===D?{...z,expanded:!z.expanded}:z))},E=O=>{if(!c.current)return;const D=c.current;D.commands.setTextSelection(O);const z=D.view.nodeDOM(O);if(z&&z instanceof HTMLElement)z.scrollIntoView({behavior:"smooth",block:"start"});else{const j=D.view.domAtPos(O+1);j.node&&j.node instanceof HTMLElement?j.node.scrollIntoView({behavior:"smooth",block:"start"}):j.node.parentElement&&j.node.parentElement.scrollIntoView({behavior:"smooth",block:"start"})}},_=()=>{const O=n.find(oe=>oe.id===i);if(!O)return;const D=`
      <!DOCTYPE html>
      <html>
      <head>
        <meta charset="utf-8">
        <title>${O.title}</title>
        <style>
          body { font-family: system-ui, -apple-system, sans-serif; line-height: 1.6; max-width: 800px; margin: 0 auto; padding: 40px; color: #333; }
          h1 { border-bottom: 2px solid #eee; padding-bottom: 10px; }
          h2 { margin-top: 30px; border-left: 4px solid #10b981; padding-left: 10px; }
          blockquote { border-left: 4px solid #ccc; margin: 0; padding-left: 16px; color: #666; }
          pre { background: #f4f4f5; padding: 16px; border-radius: 8px; overflow-x: auto; }
          img { max-width: 100%; border-radius: 8px; }
        </style>
      </head>
      <body>
        <h1>${O.title}</h1>
        ${O.content}
      </body>
      </html>
    `,z=new Blob([D],{type:"text/html"}),j=URL.createObjectURL(z),ee=document.createElement("a");ee.href=j,ee.download=`${O.title}.html`,document.body.appendChild(ee),ee.click(),document.body.removeChild(ee),URL.revokeObjectURL(j)},M=(O,D=0)=>{const z=n.filter(j=>j.parentId===O);return z.length===0?null:z.map(j=>{const ee=n.some(he=>he.parentId===j.id),oe=i===j.id;return A.jsxs("div",{children:[A.jsxs("div",{className:`flex items-center gap-2 py-1 px-2 rounded cursor-pointer group select-none ${oe?"bg-emerald-600/20 text-emerald-400":"text-slate-400 hover:bg-slate-800 hover:text-slate-200"}`,style:{paddingLeft:`${D*12+8}px`},onClick:()=>o(j.id),children:[A.jsx("span",{className:`p-0.5 rounded hover:bg-slate-700/50 ${ee?"opacity-100":"opacity-0"}`,onClick:he=>ee&&w(he,j.id),children:j.expanded?A.jsx(Iz,{size:14}):A.jsx(zz,{size:14})}),ee?A.jsx(Xz,{size:16,className:"text-yellow-500/80"}):A.jsx(qz,{size:16,className:"text-blue-400/80"}),A.jsx("span",{className:"flex-1 truncate text-sm",children:j.title}),A.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100",children:[A.jsx("button",{onClick:he=>{he.stopPropagation(),k(j.id)},className:"p-1 hover:bg-slate-700 rounded text-slate-400 hover:text-white",title:"",children:A.jsx(yS,{size:12})}),A.jsx("button",{onClick:he=>x(he,j.id),className:"p-1 hover:bg-red-900/50 rounded text-slate-400 hover:text-red-400",title:"",children:A.jsx(s4,{size:12})})]})]}),oe&&s.length>0&&A.jsx("div",{className:"flex flex-col mb-1 animate-in slide-in-from-left-2 duration-200 border-l border-slate-700/50 ml-4 my-1",children:s.map((he,_e)=>A.jsxs("div",{onClick:xe=>{xe.stopPropagation(),E(he.pos)},className:"flex items-center gap-2 py-1 pr-2 rounded cursor-pointer hover:bg-slate-800 text-slate-500 hover:text-emerald-300 text-xs transition-colors",style:{paddingLeft:`${D*12+24+(he.level-1)*8}px`},children:[A.jsx(Yz,{size:10,className:"opacity-50 shrink-0"}),A.jsx("span",{className:"truncate",children:he.text})]},_e))}),ee&&j.expanded&&M(j.id,D+1)]},j.id)})},P=n.find(O=>O.id===i);return A.jsxs("div",{className:"flex h-full w-full bg-slate-900 overflow-hidden relative",children:[A.jsxs("div",{className:"w-64 bg-slate-800/50 border-r border-slate-700 flex flex-col shrink-0",children:[A.jsxs("div",{className:"p-4 border-b border-slate-700 flex justify-between items-center",children:[A.jsx("span",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider",children:"Documents"}),A.jsx("button",{onClick:()=>k(null),className:"p-1 hover:bg-emerald-600/20 rounded text-slate-400 hover:text-emerald-400",children:A.jsx(yS,{size:16})})]}),A.jsx("div",{className:"flex-1 overflow-y-auto p-2 scrollbar-thin",children:M(null)})]}),A.jsx("div",{className:"flex-1 flex flex-col bg-slate-900 min-w-0",children:P?A.jsxs("div",{className:"flex-1 flex flex-col max-w-4xl mx-auto w-full h-full relative",children:[A.jsxs("div",{className:"flex items-center justify-between px-8 pt-8 pb-4 mx-8 border-b border-slate-800",children:[A.jsx("input",{value:P.title,onChange:O=>v(P.id,O.target.value),className:"bg-transparent text-4xl font-bold text-white outline-none flex-1 mr-4 placeholder-slate-700",placeholder:""}),A.jsxs("button",{onClick:_,className:"flex items-center gap-2 px-3 py-1.5 bg-slate-800 hover:bg-emerald-600 hover:text-white text-slate-400 rounded transition-colors text-sm font-medium",children:[A.jsx($z,{size:16}),A.jsx("span",{children:""})]})]}),A.jsx("div",{className:"flex-1 overflow-y-auto px-16 py-8",children:A.jsx(kH,{initialContent:P.content,onChange:O=>g(P.id,O),onHeadingsUpdate:a,setEditorRef:O=>c.current=O},P.id)})]}):A.jsx("div",{className:"flex-1 flex items-center justify-center text-slate-600",children:A.jsxs("div",{className:"text-center",children:[A.jsx(Wz,{size:48,className:"mx-auto mb-4 opacity-20"}),A.jsx("p",{children:" + "})]})})}),f&&A.jsx("div",{className:"fixed inset-0 bg-black/70 z-[9999] flex items-center justify-center backdrop-blur-sm",onClick:()=>d(!1),children:A.jsxs("div",{className:"bg-slate-800 border border-slate-700 p-6 rounded-xl w-[500px] shadow-2xl animate-in zoom-in-95 duration-200",onClick:O=>O.stopPropagation(),children:[A.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:""}),A.jsx("div",{className:"grid grid-cols-2 gap-4",children:fg.map(O=>A.jsxs("div",{onClick:()=>b(O.id,p),className:"bg-slate-700/50 hover:bg-emerald-600/20 border border-slate-600 hover:border-emerald-500/50 p-4 rounded-lg cursor-pointer transition-all group",children:[A.jsx("div",{className:"font-bold text-slate-200 group-hover:text-emerald-400 mb-1",children:O.name}),A.jsx("div",{className:"text-xs text-slate-500 group-hover:text-slate-400",children:""})]},O.id))}),A.jsx("button",{onClick:()=>d(!1),className:"mt-6 w-full py-2 text-slate-500 hover:text-slate-300 text-sm",children:""})]})})]})}function kH({initialContent:t,onChange:e,onHeadingsUpdate:n,setEditorRef:r}){const i=D$({extensions:[xH,wH.configure({placeholder:" # ..."})],content:t,onUpdate:({editor:s})=>{e(s.getHTML()),o(s)},onCreate:({editor:s})=>{r(s),setTimeout(()=>o(s),100)},editorProps:{attributes:{class:"prose prose-invert prose-lg max-w-none focus:outline-none min-h-[500px]"}}}),o=s=>{const a=[];s.state.doc.descendants((c,f)=>{c.type.name==="heading"&&a.push({level:c.attrs.level,text:c.textContent,id:`heading-${f}`,pos:f})}),n(a)};return A.jsx(M$,{editor:i})}function bH(){const[t,e]=se.useState(null),[n,r]=se.useState(null),[i,o]=se.useState("saved"),s=c=>{e(c),r(VL(c.id))},a=()=>{t&&n&&_m(t.id,n),e(null),r(null)};return se.useEffect(()=>{if(!t||!n)return;o("unsaved");const c=setTimeout(()=>{o("saving"),_m(t.id,n),setTimeout(()=>o("saved"),500)},2e3);return()=>clearTimeout(c)},[n]),se.useEffect(()=>{const c=f=>{(f.ctrlKey||f.metaKey)&&f.key==="s"&&(f.preventDefault(),t&&n&&(o("saving"),_m(t.id,n),setTimeout(()=>o("saved"),500)))};return window.addEventListener("keydown",c),()=>window.removeEventListener("keydown",c)},[t,n]),t?n?A.jsx("div",{className:"flex h-screen w-screen bg-slate-900 text-slate-200 overflow-hidden",children:A.jsx(CH,{project:t,content:n,setContent:r,onBack:a,saveStatus:i})}):A.jsx("div",{className:"h-screen w-screen bg-slate-900 text-white flex items-center justify-center",children:"..."}):A.jsx(WL,{onOpenProject:s})}function CH({project:t,content:e,setContent:n,onBack:r,saveStatus:i}){const[o,s]=se.useState("brainstorm"),a=(p,m)=>{n(g=>g?{...g,brainstorm:{items:p,connections:m}}:null)},c=p=>{n(m=>m?{...m,members:p}:null)},f=p=>{n(m=>m?{...m,todos:p}:null)},d=p=>{n(m=>m?{...m,docs:p}:null)};return A.jsxs(A.Fragment,{children:[A.jsxs("aside",{className:"w-64 shrink-0 flex flex-col bg-slate-800 border-r border-slate-700 z-50",children:[A.jsxs("div",{className:"h-14 flex items-center px-4 border-b border-slate-700 gap-3",children:[A.jsx("button",{onClick:r,className:"p-2 hover:bg-slate-700 rounded text-slate-400 hover:text-white transition-colors",children:""}),A.jsx("div",{className:"font-bold text-white truncate flex-1",children:t.name})]}),A.jsxs("nav",{className:"flex-1 p-4 space-y-2",children:[A.jsx(bf,{label:" ",isActive:o==="brainstorm",onClick:()=>s("brainstorm")}),A.jsx(bf,{label:" ",isActive:o==="team",onClick:()=>s("team")}),A.jsx(bf,{label:" ",isActive:o==="docs",onClick:()=>s("docs")}),A.jsx(bf,{label:" UI ",isActive:o==="ui-designer",onClick:()=>s("ui-designer")})]}),A.jsx("div",{className:"p-4 text-xs border-t border-slate-700 text-center",children:i==="saving"?" ...":" "})]}),A.jsxs("main",{className:"flex-1 relative overflow-hidden bg-slate-900",children:[o==="brainstorm"&&A.jsx(f4,{initialItems:e.brainstorm.items||[],initialConnections:e.brainstorm.connections||[],onDataChange:a},t.id+"-brainstorm"),o==="team"&&A.jsx(h4,{members:e.members||[],todos:e.todos||[],onUpdateMembers:c,onUpdateTodos:f}),o==="docs"&&A.jsx(SH,{initialDocs:e.docs||[],onUpdate:d}),o==="ui-designer"&&A.jsx("div",{className:"flex items-center justify-center h-full text-slate-500",children:"[ UI  ]"})]})]})}function bf({label:t,isActive:e,onClick:n}){return A.jsx("button",{onClick:n,className:`w-full text-left px-4 py-3 rounded-md transition-all ${e?"bg-emerald-600 text-white shadow-md":"hover:bg-slate-700 text-slate-400 hover:text-slate-200"}`,children:t})}dg.createRoot(document.getElementById("root")).render(A.jsx(Ko.StrictMode,{children:A.jsx(bH,{})}));window.ipcRenderer.on("main-process-message",(t,e)=>{console.log(e)});
