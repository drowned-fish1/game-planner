(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var gl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function sh(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var XS={exports:{}},oh={},JS={exports:{}},Re={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hu=Symbol.for("react.element"),ND=Symbol.for("react.portal"),MD=Symbol.for("react.fragment"),_D=Symbol.for("react.strict_mode"),OD=Symbol.for("react.profiler"),AD=Symbol.for("react.provider"),PD=Symbol.for("react.context"),RD=Symbol.for("react.forward_ref"),DD=Symbol.for("react.suspense"),ID=Symbol.for("react.memo"),LD=Symbol.for("react.lazy"),G1=Symbol.iterator;function jD(t){return t===null||typeof t!="object"?null:(t=G1&&t[G1]||t["@@iterator"],typeof t=="function"?t:null)}var YS={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},QS=Object.assign,ZS={};function ia(t,e,n){this.props=t,this.context=e,this.refs=ZS,this.updater=n||YS}ia.prototype.isReactComponent={};ia.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};ia.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function ek(){}ek.prototype=ia.prototype;function F0(t,e,n){this.props=t,this.context=e,this.refs=ZS,this.updater=n||YS}var $0=F0.prototype=new ek;$0.constructor=F0;QS($0,ia.prototype);$0.isPureReactComponent=!0;var X1=Array.isArray,tk=Object.prototype.hasOwnProperty,H0={current:null},nk={key:!0,ref:!0,__self:!0,__source:!0};function rk(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)tk.call(e,r)&&!nk.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var c=Array(a),f=0;f<a;f++)c[f]=arguments[f+2];i.children=c}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:Hu,type:t,key:s,ref:o,props:i,_owner:H0.current}}function zD(t,e){return{$$typeof:Hu,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function U0(t){return typeof t=="object"&&t!==null&&t.$$typeof===Hu}function BD(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var J1=/\/+/g;function rm(t,e){return typeof t=="object"&&t!==null&&t.key!=null?BD(""+t.key):e.toString(36)}function Cf(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Hu:case ND:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+rm(o,0):r,X1(i)?(n="",t!=null&&(n=t.replace(J1,"$&/")+"/"),Cf(i,e,n,"",function(f){return f})):i!=null&&(U0(i)&&(i=zD(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(J1,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",X1(t))for(var a=0;a<t.length;a++){s=t[a];var c=r+rm(s,a);o+=Cf(s,e,n,c,i)}else if(c=jD(t),typeof c=="function")for(t=c.call(t),a=0;!(s=t.next()).done;)s=s.value,c=r+rm(s,a++),o+=Cf(s,e,n,c,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Wc(t,e,n){if(t==null)return t;var r=[],i=0;return Cf(t,r,"","",function(s){return e.call(n,s,i++)}),r}function FD(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var _n={current:null},Ef={transition:null},$D={ReactCurrentDispatcher:_n,ReactCurrentBatchConfig:Ef,ReactCurrentOwner:H0};function ik(){throw Error("act(...) is not supported in production builds of React.")}Re.Children={map:Wc,forEach:function(t,e,n){Wc(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Wc(t,function(){e++}),e},toArray:function(t){return Wc(t,function(e){return e})||[]},only:function(t){if(!U0(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Re.Component=ia;Re.Fragment=MD;Re.Profiler=OD;Re.PureComponent=F0;Re.StrictMode=_D;Re.Suspense=DD;Re.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=$D;Re.act=ik;Re.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=QS({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=H0.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(c in e)tk.call(e,c)&&!nk.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&a!==void 0?a[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){a=Array(c);for(var f=0;f<c;f++)a[f]=arguments[f+2];r.children=a}return{$$typeof:Hu,type:t.type,key:i,ref:s,props:r,_owner:o}};Re.createContext=function(t){return t={$$typeof:PD,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:AD,_context:t},t.Consumer=t};Re.createElement=rk;Re.createFactory=function(t){var e=rk.bind(null,t);return e.type=t,e};Re.createRef=function(){return{current:null}};Re.forwardRef=function(t){return{$$typeof:RD,render:t}};Re.isValidElement=U0;Re.lazy=function(t){return{$$typeof:LD,_payload:{_status:-1,_result:t},_init:FD}};Re.memo=function(t,e){return{$$typeof:ID,type:t,compare:e===void 0?null:e}};Re.startTransition=function(t){var e=Ef.transition;Ef.transition={};try{t()}finally{Ef.transition=e}};Re.unstable_act=ik;Re.useCallback=function(t,e){return _n.current.useCallback(t,e)};Re.useContext=function(t){return _n.current.useContext(t)};Re.useDebugValue=function(){};Re.useDeferredValue=function(t){return _n.current.useDeferredValue(t)};Re.useEffect=function(t,e){return _n.current.useEffect(t,e)};Re.useId=function(){return _n.current.useId()};Re.useImperativeHandle=function(t,e,n){return _n.current.useImperativeHandle(t,e,n)};Re.useInsertionEffect=function(t,e){return _n.current.useInsertionEffect(t,e)};Re.useLayoutEffect=function(t,e){return _n.current.useLayoutEffect(t,e)};Re.useMemo=function(t,e){return _n.current.useMemo(t,e)};Re.useReducer=function(t,e,n){return _n.current.useReducer(t,e,n)};Re.useRef=function(t){return _n.current.useRef(t)};Re.useState=function(t){return _n.current.useState(t)};Re.useSyncExternalStore=function(t,e,n){return _n.current.useSyncExternalStore(t,e,n)};Re.useTransition=function(){return _n.current.useTransition()};Re.version="18.3.1";JS.exports=Re;var G=JS.exports;const Ks=sh(G);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var HD=G,UD=Symbol.for("react.element"),VD=Symbol.for("react.fragment"),WD=Object.prototype.hasOwnProperty,KD=HD.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,qD={key:!0,ref:!0,__self:!0,__source:!0};function sk(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)WD.call(e,r)&&!qD.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:UD,type:t,key:s,ref:o,props:i,_owner:KD.current}}oh.Fragment=VD;oh.jsx=sk;oh.jsxs=sk;XS.exports=oh;var b=XS.exports,pg={},ok={exports:{}},gr={},lk={exports:{}},ak={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(L,$){var K=L.length;L.push($);e:for(;0<K;){var Z=K-1>>>1,ge=L[Z];if(0<i(ge,$))L[Z]=$,L[K]=ge,K=Z;else break e}}function n(L){return L.length===0?null:L[0]}function r(L){if(L.length===0)return null;var $=L[0],K=L.pop();if(K!==$){L[0]=K;e:for(var Z=0,ge=L.length,Q=ge>>>1;Z<Q;){var Qe=2*(Z+1)-1,it=L[Qe],Xe=Qe+1,ze=L[Xe];if(0>i(it,K))Xe<ge&&0>i(ze,it)?(L[Z]=ze,L[Xe]=K,Z=Xe):(L[Z]=it,L[Qe]=K,Z=Qe);else if(Xe<ge&&0>i(ze,K))L[Z]=ze,L[Xe]=K,Z=Xe;else break e}}return $}function i(L,$){var K=L.sortIndex-$.sortIndex;return K!==0?K:L.id-$.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var c=[],f=[],d=1,p=null,m=3,g=!1,v=!1,S=!1,C=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function E(L){for(var $=n(f);$!==null;){if($.callback===null)r(f);else if($.startTime<=L)r(f),$.sortIndex=$.expirationTime,e(c,$);else break;$=n(f)}}function M(L){if(S=!1,E(L),!v)if(n(c)!==null)v=!0,ee(_);else{var $=n(f);$!==null&&ie(M,$.startTime-L)}}function _(L,$){v=!1,S&&(S=!1,x(R),R=-1),g=!0;var K=m;try{for(E($),p=n(c);p!==null&&(!(p.expirationTime>$)||L&&!te());){var Z=p.callback;if(typeof Z=="function"){p.callback=null,m=p.priorityLevel;var ge=Z(p.expirationTime<=$);$=t.unstable_now(),typeof ge=="function"?p.callback=ge:p===n(c)&&r(c),E($)}else r(c);p=n(c)}if(p!==null)var Q=!0;else{var Qe=n(f);Qe!==null&&ie(M,Qe.startTime-$),Q=!1}return Q}finally{p=null,m=K,g=!1}}var O=!1,A=null,R=-1,z=5,B=-1;function te(){return!(t.unstable_now()-B<z)}function re(){if(A!==null){var L=t.unstable_now();B=L;var $=!0;try{$=A(!0,L)}finally{$?le():(O=!1,A=null)}}else O=!1}var le;if(typeof w=="function")le=function(){w(re)};else if(typeof MessageChannel<"u"){var de=new MessageChannel,pe=de.port2;de.port1.onmessage=re,le=function(){pe.postMessage(null)}}else le=function(){C(re,0)};function ee(L){A=L,O||(O=!0,le())}function ie(L,$){R=C(function(){L(t.unstable_now())},$)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(L){L.callback=null},t.unstable_continueExecution=function(){v||g||(v=!0,ee(_))},t.unstable_forceFrameRate=function(L){0>L||125<L?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):z=0<L?Math.floor(1e3/L):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(L){switch(m){case 1:case 2:case 3:var $=3;break;default:$=m}var K=m;m=$;try{return L()}finally{m=K}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(L,$){switch(L){case 1:case 2:case 3:case 4:case 5:break;default:L=3}var K=m;m=L;try{return $()}finally{m=K}},t.unstable_scheduleCallback=function(L,$,K){var Z=t.unstable_now();switch(typeof K=="object"&&K!==null?(K=K.delay,K=typeof K=="number"&&0<K?Z+K:Z):K=Z,L){case 1:var ge=-1;break;case 2:ge=250;break;case 5:ge=1073741823;break;case 4:ge=1e4;break;default:ge=5e3}return ge=K+ge,L={id:d++,callback:$,priorityLevel:L,startTime:K,expirationTime:ge,sortIndex:-1},K>Z?(L.sortIndex=K,e(f,L),n(c)===null&&L===n(f)&&(S?(x(R),R=-1):S=!0,ie(M,K-Z))):(L.sortIndex=ge,e(c,L),v||g||(v=!0,ee(_))),L},t.unstable_shouldYield=te,t.unstable_wrapCallback=function(L){var $=m;return function(){var K=m;m=$;try{return L.apply(this,arguments)}finally{m=K}}}})(ak);lk.exports=ak;var GD=lk.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var XD=G,mr=GD;function Y(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var uk=new Set,pu={};function Uo(t,e){Ul(t,e),Ul(t+"Capture",e)}function Ul(t,e){for(pu[t]=e,t=0;t<e.length;t++)uk.add(e[t])}var Ji=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),mg=Object.prototype.hasOwnProperty,JD=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Y1={},Q1={};function YD(t){return mg.call(Q1,t)?!0:mg.call(Y1,t)?!1:JD.test(t)?Q1[t]=!0:(Y1[t]=!0,!1)}function QD(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function ZD(t,e,n,r){if(e===null||typeof e>"u"||QD(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function On(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var en={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){en[t]=new On(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];en[e]=new On(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){en[t]=new On(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){en[t]=new On(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){en[t]=new On(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){en[t]=new On(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){en[t]=new On(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){en[t]=new On(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){en[t]=new On(t,5,!1,t.toLowerCase(),null,!1,!1)});var V0=/[\-:]([a-z])/g;function W0(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(V0,W0);en[e]=new On(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(V0,W0);en[e]=new On(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(V0,W0);en[e]=new On(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){en[t]=new On(t,1,!1,t.toLowerCase(),null,!1,!1)});en.xlinkHref=new On("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){en[t]=new On(t,1,!1,t.toLowerCase(),null,!0,!0)});function K0(t,e,n,r){var i=en.hasOwnProperty(e)?en[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(ZD(e,n,i,r)&&(n=null),r||i===null?YD(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var es=XD.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Kc=Symbol.for("react.element"),bl=Symbol.for("react.portal"),Sl=Symbol.for("react.fragment"),q0=Symbol.for("react.strict_mode"),gg=Symbol.for("react.profiler"),ck=Symbol.for("react.provider"),fk=Symbol.for("react.context"),G0=Symbol.for("react.forward_ref"),yg=Symbol.for("react.suspense"),vg=Symbol.for("react.suspense_list"),X0=Symbol.for("react.memo"),xs=Symbol.for("react.lazy"),dk=Symbol.for("react.offscreen"),Z1=Symbol.iterator;function Na(t){return t===null||typeof t!="object"?null:(t=Z1&&t[Z1]||t["@@iterator"],typeof t=="function"?t:null)}var ft=Object.assign,im;function Ba(t){if(im===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);im=e&&e[1]||""}return`
`+im+t}var sm=!1;function om(t,e){if(!t||sm)return"";sm=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(f){var r=f}Reflect.construct(t,[],e)}else{try{e.call()}catch(f){r=f}t.call(e.prototype)}else{try{throw Error()}catch(f){r=f}t()}}catch(f){if(f&&r&&typeof f.stack=="string"){for(var i=f.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var c=`
`+i[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=a);break}}}finally{sm=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Ba(t):""}function eI(t){switch(t.tag){case 5:return Ba(t.type);case 16:return Ba("Lazy");case 13:return Ba("Suspense");case 19:return Ba("SuspenseList");case 0:case 2:case 15:return t=om(t.type,!1),t;case 11:return t=om(t.type.render,!1),t;case 1:return t=om(t.type,!0),t;default:return""}}function xg(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Sl:return"Fragment";case bl:return"Portal";case gg:return"Profiler";case q0:return"StrictMode";case yg:return"Suspense";case vg:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case fk:return(t.displayName||"Context")+".Consumer";case ck:return(t._context.displayName||"Context")+".Provider";case G0:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case X0:return e=t.displayName||null,e!==null?e:xg(t.type)||"Memo";case xs:e=t._payload,t=t._init;try{return xg(t(e))}catch{}}return null}function tI(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return xg(e);case 8:return e===q0?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function qs(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function hk(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function nI(t){var e=hk(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function qc(t){t._valueTracker||(t._valueTracker=nI(t))}function pk(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=hk(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function $f(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function wg(t,e){var n=e.checked;return ft({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function ew(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=qs(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function mk(t,e){e=e.checked,e!=null&&K0(t,"checked",e,!1)}function bg(t,e){mk(t,e);var n=qs(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Sg(t,e.type,n):e.hasOwnProperty("defaultValue")&&Sg(t,e.type,qs(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function tw(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Sg(t,e,n){(e!=="number"||$f(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Fa=Array.isArray;function Il(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+qs(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function kg(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Y(91));return ft({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function nw(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Y(92));if(Fa(n)){if(1<n.length)throw Error(Y(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:qs(n)}}function gk(t,e){var n=qs(e.value),r=qs(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function rw(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function yk(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Cg(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?yk(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Gc,vk=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Gc=Gc||document.createElement("div"),Gc.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Gc.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function mu(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Xa={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},rI=["Webkit","ms","Moz","O"];Object.keys(Xa).forEach(function(t){rI.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Xa[e]=Xa[t]})});function xk(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Xa.hasOwnProperty(t)&&Xa[t]?(""+e).trim():e+"px"}function wk(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=xk(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var iI=ft({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Eg(t,e){if(e){if(iI[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Y(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Y(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Y(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Y(62))}}function Tg(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ng=null;function J0(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Mg=null,Ll=null,jl=null;function iw(t){if(t=Wu(t)){if(typeof Mg!="function")throw Error(Y(280));var e=t.stateNode;e&&(e=fh(e),Mg(t.stateNode,t.type,e))}}function bk(t){Ll?jl?jl.push(t):jl=[t]:Ll=t}function Sk(){if(Ll){var t=Ll,e=jl;if(jl=Ll=null,iw(t),e)for(t=0;t<e.length;t++)iw(e[t])}}function kk(t,e){return t(e)}function Ck(){}var lm=!1;function Ek(t,e,n){if(lm)return t(e,n);lm=!0;try{return kk(t,e,n)}finally{lm=!1,(Ll!==null||jl!==null)&&(Ck(),Sk())}}function gu(t,e){var n=t.stateNode;if(n===null)return null;var r=fh(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Y(231,e,typeof n));return n}var _g=!1;if(Ji)try{var Ma={};Object.defineProperty(Ma,"passive",{get:function(){_g=!0}}),window.addEventListener("test",Ma,Ma),window.removeEventListener("test",Ma,Ma)}catch{_g=!1}function sI(t,e,n,r,i,s,o,a,c){var f=Array.prototype.slice.call(arguments,3);try{e.apply(n,f)}catch(d){this.onError(d)}}var Ja=!1,Hf=null,Uf=!1,Og=null,oI={onError:function(t){Ja=!0,Hf=t}};function lI(t,e,n,r,i,s,o,a,c){Ja=!1,Hf=null,sI.apply(oI,arguments)}function aI(t,e,n,r,i,s,o,a,c){if(lI.apply(this,arguments),Ja){if(Ja){var f=Hf;Ja=!1,Hf=null}else throw Error(Y(198));Uf||(Uf=!0,Og=f)}}function Vo(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Tk(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function sw(t){if(Vo(t)!==t)throw Error(Y(188))}function uI(t){var e=t.alternate;if(!e){if(e=Vo(t),e===null)throw Error(Y(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return sw(i),t;if(s===r)return sw(i),e;s=s.sibling}throw Error(Y(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(Y(189))}}if(n.alternate!==r)throw Error(Y(190))}if(n.tag!==3)throw Error(Y(188));return n.stateNode.current===n?t:e}function Nk(t){return t=uI(t),t!==null?Mk(t):null}function Mk(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Mk(t);if(e!==null)return e;t=t.sibling}return null}var _k=mr.unstable_scheduleCallback,ow=mr.unstable_cancelCallback,cI=mr.unstable_shouldYield,fI=mr.unstable_requestPaint,Ct=mr.unstable_now,dI=mr.unstable_getCurrentPriorityLevel,Y0=mr.unstable_ImmediatePriority,Ok=mr.unstable_UserBlockingPriority,Vf=mr.unstable_NormalPriority,hI=mr.unstable_LowPriority,Ak=mr.unstable_IdlePriority,lh=null,bi=null;function pI(t){if(bi&&typeof bi.onCommitFiberRoot=="function")try{bi.onCommitFiberRoot(lh,t,void 0,(t.current.flags&128)===128)}catch{}}var si=Math.clz32?Math.clz32:yI,mI=Math.log,gI=Math.LN2;function yI(t){return t>>>=0,t===0?32:31-(mI(t)/gI|0)|0}var Xc=64,Jc=4194304;function $a(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Wf(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=$a(a):(s&=o,s!==0&&(r=$a(s)))}else o=n&~i,o!==0?r=$a(o):s!==0&&(r=$a(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-si(e),i=1<<n,r|=t[n],e&=~i;return r}function vI(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function xI(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-si(s),a=1<<o,c=i[o];c===-1?(!(a&n)||a&r)&&(i[o]=vI(a,e)):c<=e&&(t.expiredLanes|=a),s&=~a}}function Ag(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Pk(){var t=Xc;return Xc<<=1,!(Xc&4194240)&&(Xc=64),t}function am(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Uu(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-si(e),t[e]=n}function wI(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-si(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function Q0(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-si(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Ke=0;function Rk(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Dk,Z0,Ik,Lk,jk,Pg=!1,Yc=[],Rs=null,Ds=null,Is=null,yu=new Map,vu=new Map,Cs=[],bI="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function lw(t,e){switch(t){case"focusin":case"focusout":Rs=null;break;case"dragenter":case"dragleave":Ds=null;break;case"mouseover":case"mouseout":Is=null;break;case"pointerover":case"pointerout":yu.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":vu.delete(e.pointerId)}}function _a(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Wu(e),e!==null&&Z0(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function SI(t,e,n,r,i){switch(e){case"focusin":return Rs=_a(Rs,t,e,n,r,i),!0;case"dragenter":return Ds=_a(Ds,t,e,n,r,i),!0;case"mouseover":return Is=_a(Is,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return yu.set(s,_a(yu.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,vu.set(s,_a(vu.get(s)||null,t,e,n,r,i)),!0}return!1}function zk(t){var e=xo(t.target);if(e!==null){var n=Vo(e);if(n!==null){if(e=n.tag,e===13){if(e=Tk(n),e!==null){t.blockedOn=e,jk(t.priority,function(){Ik(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Tf(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Rg(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Ng=r,n.target.dispatchEvent(r),Ng=null}else return e=Wu(n),e!==null&&Z0(e),t.blockedOn=n,!1;e.shift()}return!0}function aw(t,e,n){Tf(t)&&n.delete(e)}function kI(){Pg=!1,Rs!==null&&Tf(Rs)&&(Rs=null),Ds!==null&&Tf(Ds)&&(Ds=null),Is!==null&&Tf(Is)&&(Is=null),yu.forEach(aw),vu.forEach(aw)}function Oa(t,e){t.blockedOn===e&&(t.blockedOn=null,Pg||(Pg=!0,mr.unstable_scheduleCallback(mr.unstable_NormalPriority,kI)))}function xu(t){function e(i){return Oa(i,t)}if(0<Yc.length){Oa(Yc[0],t);for(var n=1;n<Yc.length;n++){var r=Yc[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Rs!==null&&Oa(Rs,t),Ds!==null&&Oa(Ds,t),Is!==null&&Oa(Is,t),yu.forEach(e),vu.forEach(e),n=0;n<Cs.length;n++)r=Cs[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Cs.length&&(n=Cs[0],n.blockedOn===null);)zk(n),n.blockedOn===null&&Cs.shift()}var zl=es.ReactCurrentBatchConfig,Kf=!0;function CI(t,e,n,r){var i=Ke,s=zl.transition;zl.transition=null;try{Ke=1,ey(t,e,n,r)}finally{Ke=i,zl.transition=s}}function EI(t,e,n,r){var i=Ke,s=zl.transition;zl.transition=null;try{Ke=4,ey(t,e,n,r)}finally{Ke=i,zl.transition=s}}function ey(t,e,n,r){if(Kf){var i=Rg(t,e,n,r);if(i===null)vm(t,e,r,qf,n),lw(t,r);else if(SI(i,t,e,n,r))r.stopPropagation();else if(lw(t,r),e&4&&-1<bI.indexOf(t)){for(;i!==null;){var s=Wu(i);if(s!==null&&Dk(s),s=Rg(t,e,n,r),s===null&&vm(t,e,r,qf,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else vm(t,e,r,null,n)}}var qf=null;function Rg(t,e,n,r){if(qf=null,t=J0(r),t=xo(t),t!==null)if(e=Vo(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Tk(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return qf=t,null}function Bk(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(dI()){case Y0:return 1;case Ok:return 4;case Vf:case hI:return 16;case Ak:return 536870912;default:return 16}default:return 16}}var Ms=null,ty=null,Nf=null;function Fk(){if(Nf)return Nf;var t,e=ty,n=e.length,r,i="value"in Ms?Ms.value:Ms.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return Nf=i.slice(t,1<r?1-r:void 0)}function Mf(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Qc(){return!0}function uw(){return!1}function yr(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Qc:uw,this.isPropagationStopped=uw,this}return ft(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Qc)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Qc)},persist:function(){},isPersistent:Qc}),e}var sa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ny=yr(sa),Vu=ft({},sa,{view:0,detail:0}),TI=yr(Vu),um,cm,Aa,ah=ft({},Vu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ry,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Aa&&(Aa&&t.type==="mousemove"?(um=t.screenX-Aa.screenX,cm=t.screenY-Aa.screenY):cm=um=0,Aa=t),um)},movementY:function(t){return"movementY"in t?t.movementY:cm}}),cw=yr(ah),NI=ft({},ah,{dataTransfer:0}),MI=yr(NI),_I=ft({},Vu,{relatedTarget:0}),fm=yr(_I),OI=ft({},sa,{animationName:0,elapsedTime:0,pseudoElement:0}),AI=yr(OI),PI=ft({},sa,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),RI=yr(PI),DI=ft({},sa,{data:0}),fw=yr(DI),II={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},LI={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},jI={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function zI(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=jI[t])?!!e[t]:!1}function ry(){return zI}var BI=ft({},Vu,{key:function(t){if(t.key){var e=II[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Mf(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?LI[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ry,charCode:function(t){return t.type==="keypress"?Mf(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Mf(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),FI=yr(BI),$I=ft({},ah,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),dw=yr($I),HI=ft({},Vu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ry}),UI=yr(HI),VI=ft({},sa,{propertyName:0,elapsedTime:0,pseudoElement:0}),WI=yr(VI),KI=ft({},ah,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),qI=yr(KI),GI=[9,13,27,32],iy=Ji&&"CompositionEvent"in window,Ya=null;Ji&&"documentMode"in document&&(Ya=document.documentMode);var XI=Ji&&"TextEvent"in window&&!Ya,$k=Ji&&(!iy||Ya&&8<Ya&&11>=Ya),hw=" ",pw=!1;function Hk(t,e){switch(t){case"keyup":return GI.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Uk(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var kl=!1;function JI(t,e){switch(t){case"compositionend":return Uk(e);case"keypress":return e.which!==32?null:(pw=!0,hw);case"textInput":return t=e.data,t===hw&&pw?null:t;default:return null}}function YI(t,e){if(kl)return t==="compositionend"||!iy&&Hk(t,e)?(t=Fk(),Nf=ty=Ms=null,kl=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return $k&&e.locale!=="ko"?null:e.data;default:return null}}var QI={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function mw(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!QI[t.type]:e==="textarea"}function Vk(t,e,n,r){bk(r),e=Gf(e,"onChange"),0<e.length&&(n=new ny("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Qa=null,wu=null;function ZI(t){tC(t,0)}function uh(t){var e=Tl(t);if(pk(e))return t}function eL(t,e){if(t==="change")return e}var Wk=!1;if(Ji){var dm;if(Ji){var hm="oninput"in document;if(!hm){var gw=document.createElement("div");gw.setAttribute("oninput","return;"),hm=typeof gw.oninput=="function"}dm=hm}else dm=!1;Wk=dm&&(!document.documentMode||9<document.documentMode)}function yw(){Qa&&(Qa.detachEvent("onpropertychange",Kk),wu=Qa=null)}function Kk(t){if(t.propertyName==="value"&&uh(wu)){var e=[];Vk(e,wu,t,J0(t)),Ek(ZI,e)}}function tL(t,e,n){t==="focusin"?(yw(),Qa=e,wu=n,Qa.attachEvent("onpropertychange",Kk)):t==="focusout"&&yw()}function nL(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return uh(wu)}function rL(t,e){if(t==="click")return uh(e)}function iL(t,e){if(t==="input"||t==="change")return uh(e)}function sL(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var ai=typeof Object.is=="function"?Object.is:sL;function bu(t,e){if(ai(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!mg.call(e,i)||!ai(t[i],e[i]))return!1}return!0}function vw(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function xw(t,e){var n=vw(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=vw(n)}}function qk(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?qk(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Gk(){for(var t=window,e=$f();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=$f(t.document)}return e}function sy(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function oL(t){var e=Gk(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&qk(n.ownerDocument.documentElement,n)){if(r!==null&&sy(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=xw(n,s);var o=xw(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var lL=Ji&&"documentMode"in document&&11>=document.documentMode,Cl=null,Dg=null,Za=null,Ig=!1;function ww(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Ig||Cl==null||Cl!==$f(r)||(r=Cl,"selectionStart"in r&&sy(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Za&&bu(Za,r)||(Za=r,r=Gf(Dg,"onSelect"),0<r.length&&(e=new ny("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Cl)))}function Zc(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var El={animationend:Zc("Animation","AnimationEnd"),animationiteration:Zc("Animation","AnimationIteration"),animationstart:Zc("Animation","AnimationStart"),transitionend:Zc("Transition","TransitionEnd")},pm={},Xk={};Ji&&(Xk=document.createElement("div").style,"AnimationEvent"in window||(delete El.animationend.animation,delete El.animationiteration.animation,delete El.animationstart.animation),"TransitionEvent"in window||delete El.transitionend.transition);function ch(t){if(pm[t])return pm[t];if(!El[t])return t;var e=El[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Xk)return pm[t]=e[n];return t}var Jk=ch("animationend"),Yk=ch("animationiteration"),Qk=ch("animationstart"),Zk=ch("transitionend"),eC=new Map,bw="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ys(t,e){eC.set(t,e),Uo(e,[t])}for(var mm=0;mm<bw.length;mm++){var gm=bw[mm],aL=gm.toLowerCase(),uL=gm[0].toUpperCase()+gm.slice(1);Ys(aL,"on"+uL)}Ys(Jk,"onAnimationEnd");Ys(Yk,"onAnimationIteration");Ys(Qk,"onAnimationStart");Ys("dblclick","onDoubleClick");Ys("focusin","onFocus");Ys("focusout","onBlur");Ys(Zk,"onTransitionEnd");Ul("onMouseEnter",["mouseout","mouseover"]);Ul("onMouseLeave",["mouseout","mouseover"]);Ul("onPointerEnter",["pointerout","pointerover"]);Ul("onPointerLeave",["pointerout","pointerover"]);Uo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Uo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Uo("onBeforeInput",["compositionend","keypress","textInput","paste"]);Uo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Uo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Uo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ha="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),cL=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ha));function Sw(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,aI(r,e,void 0,t),t.currentTarget=null}function tC(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],c=a.instance,f=a.currentTarget;if(a=a.listener,c!==s&&i.isPropagationStopped())break e;Sw(i,a,f),s=c}else for(o=0;o<r.length;o++){if(a=r[o],c=a.instance,f=a.currentTarget,a=a.listener,c!==s&&i.isPropagationStopped())break e;Sw(i,a,f),s=c}}}if(Uf)throw t=Og,Uf=!1,Og=null,t}function tt(t,e){var n=e[Fg];n===void 0&&(n=e[Fg]=new Set);var r=t+"__bubble";n.has(r)||(nC(e,t,2,!1),n.add(r))}function ym(t,e,n){var r=0;e&&(r|=4),nC(n,t,r,e)}var ef="_reactListening"+Math.random().toString(36).slice(2);function Su(t){if(!t[ef]){t[ef]=!0,uk.forEach(function(n){n!=="selectionchange"&&(cL.has(n)||ym(n,!1,t),ym(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[ef]||(e[ef]=!0,ym("selectionchange",!1,e))}}function nC(t,e,n,r){switch(Bk(e)){case 1:var i=CI;break;case 4:i=EI;break;default:i=ey}n=i.bind(null,e,n,t),i=void 0,!_g||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function vm(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===i||c.nodeType===8&&c.parentNode===i))return;o=o.return}for(;a!==null;){if(o=xo(a),o===null)return;if(c=o.tag,c===5||c===6){r=s=o;continue e}a=a.parentNode}}r=r.return}Ek(function(){var f=s,d=J0(n),p=[];e:{var m=eC.get(t);if(m!==void 0){var g=ny,v=t;switch(t){case"keypress":if(Mf(n)===0)break e;case"keydown":case"keyup":g=FI;break;case"focusin":v="focus",g=fm;break;case"focusout":v="blur",g=fm;break;case"beforeblur":case"afterblur":g=fm;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=cw;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=MI;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=UI;break;case Jk:case Yk:case Qk:g=AI;break;case Zk:g=WI;break;case"scroll":g=TI;break;case"wheel":g=qI;break;case"copy":case"cut":case"paste":g=RI;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=dw}var S=(e&4)!==0,C=!S&&t==="scroll",x=S?m!==null?m+"Capture":null:m;S=[];for(var w=f,E;w!==null;){E=w;var M=E.stateNode;if(E.tag===5&&M!==null&&(E=M,x!==null&&(M=gu(w,x),M!=null&&S.push(ku(w,M,E)))),C)break;w=w.return}0<S.length&&(m=new g(m,v,null,n,d),p.push({event:m,listeners:S}))}}if(!(e&7)){e:{if(m=t==="mouseover"||t==="pointerover",g=t==="mouseout"||t==="pointerout",m&&n!==Ng&&(v=n.relatedTarget||n.fromElement)&&(xo(v)||v[Yi]))break e;if((g||m)&&(m=d.window===d?d:(m=d.ownerDocument)?m.defaultView||m.parentWindow:window,g?(v=n.relatedTarget||n.toElement,g=f,v=v?xo(v):null,v!==null&&(C=Vo(v),v!==C||v.tag!==5&&v.tag!==6)&&(v=null)):(g=null,v=f),g!==v)){if(S=cw,M="onMouseLeave",x="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(S=dw,M="onPointerLeave",x="onPointerEnter",w="pointer"),C=g==null?m:Tl(g),E=v==null?m:Tl(v),m=new S(M,w+"leave",g,n,d),m.target=C,m.relatedTarget=E,M=null,xo(d)===f&&(S=new S(x,w+"enter",v,n,d),S.target=E,S.relatedTarget=C,M=S),C=M,g&&v)t:{for(S=g,x=v,w=0,E=S;E;E=fl(E))w++;for(E=0,M=x;M;M=fl(M))E++;for(;0<w-E;)S=fl(S),w--;for(;0<E-w;)x=fl(x),E--;for(;w--;){if(S===x||x!==null&&S===x.alternate)break t;S=fl(S),x=fl(x)}S=null}else S=null;g!==null&&kw(p,m,g,S,!1),v!==null&&C!==null&&kw(p,C,v,S,!0)}}e:{if(m=f?Tl(f):window,g=m.nodeName&&m.nodeName.toLowerCase(),g==="select"||g==="input"&&m.type==="file")var _=eL;else if(mw(m))if(Wk)_=iL;else{_=nL;var O=tL}else(g=m.nodeName)&&g.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(_=rL);if(_&&(_=_(t,f))){Vk(p,_,n,d);break e}O&&O(t,m,f),t==="focusout"&&(O=m._wrapperState)&&O.controlled&&m.type==="number"&&Sg(m,"number",m.value)}switch(O=f?Tl(f):window,t){case"focusin":(mw(O)||O.contentEditable==="true")&&(Cl=O,Dg=f,Za=null);break;case"focusout":Za=Dg=Cl=null;break;case"mousedown":Ig=!0;break;case"contextmenu":case"mouseup":case"dragend":Ig=!1,ww(p,n,d);break;case"selectionchange":if(lL)break;case"keydown":case"keyup":ww(p,n,d)}var A;if(iy)e:{switch(t){case"compositionstart":var R="onCompositionStart";break e;case"compositionend":R="onCompositionEnd";break e;case"compositionupdate":R="onCompositionUpdate";break e}R=void 0}else kl?Hk(t,n)&&(R="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(R="onCompositionStart");R&&($k&&n.locale!=="ko"&&(kl||R!=="onCompositionStart"?R==="onCompositionEnd"&&kl&&(A=Fk()):(Ms=d,ty="value"in Ms?Ms.value:Ms.textContent,kl=!0)),O=Gf(f,R),0<O.length&&(R=new fw(R,t,null,n,d),p.push({event:R,listeners:O}),A?R.data=A:(A=Uk(n),A!==null&&(R.data=A)))),(A=XI?JI(t,n):YI(t,n))&&(f=Gf(f,"onBeforeInput"),0<f.length&&(d=new fw("onBeforeInput","beforeinput",null,n,d),p.push({event:d,listeners:f}),d.data=A))}tC(p,e)})}function ku(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Gf(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=gu(t,n),s!=null&&r.unshift(ku(t,s,i)),s=gu(t,e),s!=null&&r.push(ku(t,s,i))),t=t.return}return r}function fl(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function kw(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,c=a.alternate,f=a.stateNode;if(c!==null&&c===r)break;a.tag===5&&f!==null&&(a=f,i?(c=gu(n,s),c!=null&&o.unshift(ku(n,c,a))):i||(c=gu(n,s),c!=null&&o.push(ku(n,c,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var fL=/\r\n?/g,dL=/\u0000|\uFFFD/g;function Cw(t){return(typeof t=="string"?t:""+t).replace(fL,`
`).replace(dL,"")}function tf(t,e,n){if(e=Cw(e),Cw(t)!==e&&n)throw Error(Y(425))}function Xf(){}var Lg=null,jg=null;function zg(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Bg=typeof setTimeout=="function"?setTimeout:void 0,hL=typeof clearTimeout=="function"?clearTimeout:void 0,Ew=typeof Promise=="function"?Promise:void 0,pL=typeof queueMicrotask=="function"?queueMicrotask:typeof Ew<"u"?function(t){return Ew.resolve(null).then(t).catch(mL)}:Bg;function mL(t){setTimeout(function(){throw t})}function xm(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),xu(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);xu(e)}function Ls(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Tw(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var oa=Math.random().toString(36).slice(2),wi="__reactFiber$"+oa,Cu="__reactProps$"+oa,Yi="__reactContainer$"+oa,Fg="__reactEvents$"+oa,gL="__reactListeners$"+oa,yL="__reactHandles$"+oa;function xo(t){var e=t[wi];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Yi]||n[wi]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Tw(t);t!==null;){if(n=t[wi])return n;t=Tw(t)}return e}t=n,n=t.parentNode}return null}function Wu(t){return t=t[wi]||t[Yi],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Tl(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Y(33))}function fh(t){return t[Cu]||null}var $g=[],Nl=-1;function Qs(t){return{current:t}}function rt(t){0>Nl||(t.current=$g[Nl],$g[Nl]=null,Nl--)}function Ye(t,e){Nl++,$g[Nl]=t.current,t.current=e}var Gs={},fn=Qs(Gs),Wn=Qs(!1),Ro=Gs;function Vl(t,e){var n=t.type.contextTypes;if(!n)return Gs;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Kn(t){return t=t.childContextTypes,t!=null}function Jf(){rt(Wn),rt(fn)}function Nw(t,e,n){if(fn.current!==Gs)throw Error(Y(168));Ye(fn,e),Ye(Wn,n)}function rC(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(Y(108,tI(t)||"Unknown",i));return ft({},n,r)}function Yf(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Gs,Ro=fn.current,Ye(fn,t),Ye(Wn,Wn.current),!0}function Mw(t,e,n){var r=t.stateNode;if(!r)throw Error(Y(169));n?(t=rC(t,e,Ro),r.__reactInternalMemoizedMergedChildContext=t,rt(Wn),rt(fn),Ye(fn,t)):rt(Wn),Ye(Wn,n)}var Ui=null,dh=!1,wm=!1;function iC(t){Ui===null?Ui=[t]:Ui.push(t)}function vL(t){dh=!0,iC(t)}function Zs(){if(!wm&&Ui!==null){wm=!0;var t=0,e=Ke;try{var n=Ui;for(Ke=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Ui=null,dh=!1}catch(i){throw Ui!==null&&(Ui=Ui.slice(t+1)),_k(Y0,Zs),i}finally{Ke=e,wm=!1}}return null}var Ml=[],_l=0,Qf=null,Zf=0,Ir=[],Lr=0,Do=null,Vi=1,Wi="";function go(t,e){Ml[_l++]=Zf,Ml[_l++]=Qf,Qf=t,Zf=e}function sC(t,e,n){Ir[Lr++]=Vi,Ir[Lr++]=Wi,Ir[Lr++]=Do,Do=t;var r=Vi;t=Wi;var i=32-si(r)-1;r&=~(1<<i),n+=1;var s=32-si(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Vi=1<<32-si(e)+i|n<<i|r,Wi=s+t}else Vi=1<<s|n<<i|r,Wi=t}function oy(t){t.return!==null&&(go(t,1),sC(t,1,0))}function ly(t){for(;t===Qf;)Qf=Ml[--_l],Ml[_l]=null,Zf=Ml[--_l],Ml[_l]=null;for(;t===Do;)Do=Ir[--Lr],Ir[Lr]=null,Wi=Ir[--Lr],Ir[Lr]=null,Vi=Ir[--Lr],Ir[Lr]=null}var dr=null,fr=null,ot=!1,ni=null;function oC(t,e){var n=zr(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function _w(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,dr=t,fr=Ls(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,dr=t,fr=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Do!==null?{id:Vi,overflow:Wi}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=zr(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,dr=t,fr=null,!0):!1;default:return!1}}function Hg(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Ug(t){if(ot){var e=fr;if(e){var n=e;if(!_w(t,e)){if(Hg(t))throw Error(Y(418));e=Ls(n.nextSibling);var r=dr;e&&_w(t,e)?oC(r,n):(t.flags=t.flags&-4097|2,ot=!1,dr=t)}}else{if(Hg(t))throw Error(Y(418));t.flags=t.flags&-4097|2,ot=!1,dr=t}}}function Ow(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;dr=t}function nf(t){if(t!==dr)return!1;if(!ot)return Ow(t),ot=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!zg(t.type,t.memoizedProps)),e&&(e=fr)){if(Hg(t))throw lC(),Error(Y(418));for(;e;)oC(t,e),e=Ls(e.nextSibling)}if(Ow(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Y(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){fr=Ls(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}fr=null}}else fr=dr?Ls(t.stateNode.nextSibling):null;return!0}function lC(){for(var t=fr;t;)t=Ls(t.nextSibling)}function Wl(){fr=dr=null,ot=!1}function ay(t){ni===null?ni=[t]:ni.push(t)}var xL=es.ReactCurrentBatchConfig;function Pa(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Y(309));var r=n.stateNode}if(!r)throw Error(Y(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(Y(284));if(!n._owner)throw Error(Y(290,t))}return t}function rf(t,e){throw t=Object.prototype.toString.call(e),Error(Y(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Aw(t){var e=t._init;return e(t._payload)}function aC(t){function e(x,w){if(t){var E=x.deletions;E===null?(x.deletions=[w],x.flags|=16):E.push(w)}}function n(x,w){if(!t)return null;for(;w!==null;)e(x,w),w=w.sibling;return null}function r(x,w){for(x=new Map;w!==null;)w.key!==null?x.set(w.key,w):x.set(w.index,w),w=w.sibling;return x}function i(x,w){return x=Fs(x,w),x.index=0,x.sibling=null,x}function s(x,w,E){return x.index=E,t?(E=x.alternate,E!==null?(E=E.index,E<w?(x.flags|=2,w):E):(x.flags|=2,w)):(x.flags|=1048576,w)}function o(x){return t&&x.alternate===null&&(x.flags|=2),x}function a(x,w,E,M){return w===null||w.tag!==6?(w=Nm(E,x.mode,M),w.return=x,w):(w=i(w,E),w.return=x,w)}function c(x,w,E,M){var _=E.type;return _===Sl?d(x,w,E.props.children,M,E.key):w!==null&&(w.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===xs&&Aw(_)===w.type)?(M=i(w,E.props),M.ref=Pa(x,w,E),M.return=x,M):(M=If(E.type,E.key,E.props,null,x.mode,M),M.ref=Pa(x,w,E),M.return=x,M)}function f(x,w,E,M){return w===null||w.tag!==4||w.stateNode.containerInfo!==E.containerInfo||w.stateNode.implementation!==E.implementation?(w=Mm(E,x.mode,M),w.return=x,w):(w=i(w,E.children||[]),w.return=x,w)}function d(x,w,E,M,_){return w===null||w.tag!==7?(w=No(E,x.mode,M,_),w.return=x,w):(w=i(w,E),w.return=x,w)}function p(x,w,E){if(typeof w=="string"&&w!==""||typeof w=="number")return w=Nm(""+w,x.mode,E),w.return=x,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Kc:return E=If(w.type,w.key,w.props,null,x.mode,E),E.ref=Pa(x,null,w),E.return=x,E;case bl:return w=Mm(w,x.mode,E),w.return=x,w;case xs:var M=w._init;return p(x,M(w._payload),E)}if(Fa(w)||Na(w))return w=No(w,x.mode,E,null),w.return=x,w;rf(x,w)}return null}function m(x,w,E,M){var _=w!==null?w.key:null;if(typeof E=="string"&&E!==""||typeof E=="number")return _!==null?null:a(x,w,""+E,M);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Kc:return E.key===_?c(x,w,E,M):null;case bl:return E.key===_?f(x,w,E,M):null;case xs:return _=E._init,m(x,w,_(E._payload),M)}if(Fa(E)||Na(E))return _!==null?null:d(x,w,E,M,null);rf(x,E)}return null}function g(x,w,E,M,_){if(typeof M=="string"&&M!==""||typeof M=="number")return x=x.get(E)||null,a(w,x,""+M,_);if(typeof M=="object"&&M!==null){switch(M.$$typeof){case Kc:return x=x.get(M.key===null?E:M.key)||null,c(w,x,M,_);case bl:return x=x.get(M.key===null?E:M.key)||null,f(w,x,M,_);case xs:var O=M._init;return g(x,w,E,O(M._payload),_)}if(Fa(M)||Na(M))return x=x.get(E)||null,d(w,x,M,_,null);rf(w,M)}return null}function v(x,w,E,M){for(var _=null,O=null,A=w,R=w=0,z=null;A!==null&&R<E.length;R++){A.index>R?(z=A,A=null):z=A.sibling;var B=m(x,A,E[R],M);if(B===null){A===null&&(A=z);break}t&&A&&B.alternate===null&&e(x,A),w=s(B,w,R),O===null?_=B:O.sibling=B,O=B,A=z}if(R===E.length)return n(x,A),ot&&go(x,R),_;if(A===null){for(;R<E.length;R++)A=p(x,E[R],M),A!==null&&(w=s(A,w,R),O===null?_=A:O.sibling=A,O=A);return ot&&go(x,R),_}for(A=r(x,A);R<E.length;R++)z=g(A,x,R,E[R],M),z!==null&&(t&&z.alternate!==null&&A.delete(z.key===null?R:z.key),w=s(z,w,R),O===null?_=z:O.sibling=z,O=z);return t&&A.forEach(function(te){return e(x,te)}),ot&&go(x,R),_}function S(x,w,E,M){var _=Na(E);if(typeof _!="function")throw Error(Y(150));if(E=_.call(E),E==null)throw Error(Y(151));for(var O=_=null,A=w,R=w=0,z=null,B=E.next();A!==null&&!B.done;R++,B=E.next()){A.index>R?(z=A,A=null):z=A.sibling;var te=m(x,A,B.value,M);if(te===null){A===null&&(A=z);break}t&&A&&te.alternate===null&&e(x,A),w=s(te,w,R),O===null?_=te:O.sibling=te,O=te,A=z}if(B.done)return n(x,A),ot&&go(x,R),_;if(A===null){for(;!B.done;R++,B=E.next())B=p(x,B.value,M),B!==null&&(w=s(B,w,R),O===null?_=B:O.sibling=B,O=B);return ot&&go(x,R),_}for(A=r(x,A);!B.done;R++,B=E.next())B=g(A,x,R,B.value,M),B!==null&&(t&&B.alternate!==null&&A.delete(B.key===null?R:B.key),w=s(B,w,R),O===null?_=B:O.sibling=B,O=B);return t&&A.forEach(function(re){return e(x,re)}),ot&&go(x,R),_}function C(x,w,E,M){if(typeof E=="object"&&E!==null&&E.type===Sl&&E.key===null&&(E=E.props.children),typeof E=="object"&&E!==null){switch(E.$$typeof){case Kc:e:{for(var _=E.key,O=w;O!==null;){if(O.key===_){if(_=E.type,_===Sl){if(O.tag===7){n(x,O.sibling),w=i(O,E.props.children),w.return=x,x=w;break e}}else if(O.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===xs&&Aw(_)===O.type){n(x,O.sibling),w=i(O,E.props),w.ref=Pa(x,O,E),w.return=x,x=w;break e}n(x,O);break}else e(x,O);O=O.sibling}E.type===Sl?(w=No(E.props.children,x.mode,M,E.key),w.return=x,x=w):(M=If(E.type,E.key,E.props,null,x.mode,M),M.ref=Pa(x,w,E),M.return=x,x=M)}return o(x);case bl:e:{for(O=E.key;w!==null;){if(w.key===O)if(w.tag===4&&w.stateNode.containerInfo===E.containerInfo&&w.stateNode.implementation===E.implementation){n(x,w.sibling),w=i(w,E.children||[]),w.return=x,x=w;break e}else{n(x,w);break}else e(x,w);w=w.sibling}w=Mm(E,x.mode,M),w.return=x,x=w}return o(x);case xs:return O=E._init,C(x,w,O(E._payload),M)}if(Fa(E))return v(x,w,E,M);if(Na(E))return S(x,w,E,M);rf(x,E)}return typeof E=="string"&&E!==""||typeof E=="number"?(E=""+E,w!==null&&w.tag===6?(n(x,w.sibling),w=i(w,E),w.return=x,x=w):(n(x,w),w=Nm(E,x.mode,M),w.return=x,x=w),o(x)):n(x,w)}return C}var Kl=aC(!0),uC=aC(!1),ed=Qs(null),td=null,Ol=null,uy=null;function cy(){uy=Ol=td=null}function fy(t){var e=ed.current;rt(ed),t._currentValue=e}function Vg(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Bl(t,e){td=t,uy=Ol=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Vn=!0),t.firstContext=null)}function Ur(t){var e=t._currentValue;if(uy!==t)if(t={context:t,memoizedValue:e,next:null},Ol===null){if(td===null)throw Error(Y(308));Ol=t,td.dependencies={lanes:0,firstContext:t}}else Ol=Ol.next=t;return e}var wo=null;function dy(t){wo===null?wo=[t]:wo.push(t)}function cC(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,dy(e)):(n.next=i.next,i.next=n),e.interleaved=n,Qi(t,r)}function Qi(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var ws=!1;function hy(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function fC(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function qi(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function js(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Be&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Qi(t,n)}return i=r.interleaved,i===null?(e.next=e,dy(r)):(e.next=i.next,i.next=e),r.interleaved=e,Qi(t,n)}function _f(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Q0(t,n)}}function Pw(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function nd(t,e,n,r){var i=t.updateQueue;ws=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var c=a,f=c.next;c.next=null,o===null?s=f:o.next=f,o=c;var d=t.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=f:a.next=f,d.lastBaseUpdate=c))}if(s!==null){var p=i.baseState;o=0,d=f=c=null,a=s;do{var m=a.lane,g=a.eventTime;if((r&m)===m){d!==null&&(d=d.next={eventTime:g,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var v=t,S=a;switch(m=e,g=n,S.tag){case 1:if(v=S.payload,typeof v=="function"){p=v.call(g,p,m);break e}p=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=S.payload,m=typeof v=="function"?v.call(g,p,m):v,m==null)break e;p=ft({},p,m);break e;case 2:ws=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,m=i.effects,m===null?i.effects=[a]:m.push(a))}else g={eventTime:g,lane:m,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(f=d=g,c=p):d=d.next=g,o|=m;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;m=a,a=m.next,m.next=null,i.lastBaseUpdate=m,i.shared.pending=null}}while(!0);if(d===null&&(c=p),i.baseState=c,i.firstBaseUpdate=f,i.lastBaseUpdate=d,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Lo|=o,t.lanes=o,t.memoizedState=p}}function Rw(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(Y(191,i));i.call(r)}}}var Ku={},Si=Qs(Ku),Eu=Qs(Ku),Tu=Qs(Ku);function bo(t){if(t===Ku)throw Error(Y(174));return t}function py(t,e){switch(Ye(Tu,e),Ye(Eu,t),Ye(Si,Ku),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Cg(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Cg(e,t)}rt(Si),Ye(Si,e)}function ql(){rt(Si),rt(Eu),rt(Tu)}function dC(t){bo(Tu.current);var e=bo(Si.current),n=Cg(e,t.type);e!==n&&(Ye(Eu,t),Ye(Si,n))}function my(t){Eu.current===t&&(rt(Si),rt(Eu))}var at=Qs(0);function rd(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var bm=[];function gy(){for(var t=0;t<bm.length;t++)bm[t]._workInProgressVersionPrimary=null;bm.length=0}var Of=es.ReactCurrentDispatcher,Sm=es.ReactCurrentBatchConfig,Io=0,ct=null,Dt=null,Bt=null,id=!1,eu=!1,Nu=0,wL=0;function on(){throw Error(Y(321))}function yy(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!ai(t[n],e[n]))return!1;return!0}function vy(t,e,n,r,i,s){if(Io=s,ct=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Of.current=t===null||t.memoizedState===null?CL:EL,t=n(r,i),eu){s=0;do{if(eu=!1,Nu=0,25<=s)throw Error(Y(301));s+=1,Bt=Dt=null,e.updateQueue=null,Of.current=TL,t=n(r,i)}while(eu)}if(Of.current=sd,e=Dt!==null&&Dt.next!==null,Io=0,Bt=Dt=ct=null,id=!1,e)throw Error(Y(300));return t}function xy(){var t=Nu!==0;return Nu=0,t}function gi(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Bt===null?ct.memoizedState=Bt=t:Bt=Bt.next=t,Bt}function Vr(){if(Dt===null){var t=ct.alternate;t=t!==null?t.memoizedState:null}else t=Dt.next;var e=Bt===null?ct.memoizedState:Bt.next;if(e!==null)Bt=e,Dt=t;else{if(t===null)throw Error(Y(310));Dt=t,t={memoizedState:Dt.memoizedState,baseState:Dt.baseState,baseQueue:Dt.baseQueue,queue:Dt.queue,next:null},Bt===null?ct.memoizedState=Bt=t:Bt=Bt.next=t}return Bt}function Mu(t,e){return typeof e=="function"?e(t):e}function km(t){var e=Vr(),n=e.queue;if(n===null)throw Error(Y(311));n.lastRenderedReducer=t;var r=Dt,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,c=null,f=s;do{var d=f.lane;if((Io&d)===d)c!==null&&(c=c.next={lane:0,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null}),r=f.hasEagerState?f.eagerState:t(r,f.action);else{var p={lane:d,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null};c===null?(a=c=p,o=r):c=c.next=p,ct.lanes|=d,Lo|=d}f=f.next}while(f!==null&&f!==s);c===null?o=r:c.next=a,ai(r,e.memoizedState)||(Vn=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,ct.lanes|=s,Lo|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Cm(t){var e=Vr(),n=e.queue;if(n===null)throw Error(Y(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);ai(s,e.memoizedState)||(Vn=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function hC(){}function pC(t,e){var n=ct,r=Vr(),i=e(),s=!ai(r.memoizedState,i);if(s&&(r.memoizedState=i,Vn=!0),r=r.queue,wy(yC.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||Bt!==null&&Bt.memoizedState.tag&1){if(n.flags|=2048,_u(9,gC.bind(null,n,r,i,e),void 0,null),Ht===null)throw Error(Y(349));Io&30||mC(n,e,i)}return i}function mC(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=ct.updateQueue,e===null?(e={lastEffect:null,stores:null},ct.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function gC(t,e,n,r){e.value=n,e.getSnapshot=r,vC(e)&&xC(t)}function yC(t,e,n){return n(function(){vC(e)&&xC(t)})}function vC(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!ai(t,n)}catch{return!0}}function xC(t){var e=Qi(t,1);e!==null&&oi(e,t,1,-1)}function Dw(t){var e=gi();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Mu,lastRenderedState:t},e.queue=t,t=t.dispatch=kL.bind(null,ct,t),[e.memoizedState,t]}function _u(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=ct.updateQueue,e===null?(e={lastEffect:null,stores:null},ct.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function wC(){return Vr().memoizedState}function Af(t,e,n,r){var i=gi();ct.flags|=t,i.memoizedState=_u(1|e,n,void 0,r===void 0?null:r)}function hh(t,e,n,r){var i=Vr();r=r===void 0?null:r;var s=void 0;if(Dt!==null){var o=Dt.memoizedState;if(s=o.destroy,r!==null&&yy(r,o.deps)){i.memoizedState=_u(e,n,s,r);return}}ct.flags|=t,i.memoizedState=_u(1|e,n,s,r)}function Iw(t,e){return Af(8390656,8,t,e)}function wy(t,e){return hh(2048,8,t,e)}function bC(t,e){return hh(4,2,t,e)}function SC(t,e){return hh(4,4,t,e)}function kC(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function CC(t,e,n){return n=n!=null?n.concat([t]):null,hh(4,4,kC.bind(null,e,t),n)}function by(){}function EC(t,e){var n=Vr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&yy(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function TC(t,e){var n=Vr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&yy(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function NC(t,e,n){return Io&21?(ai(n,e)||(n=Pk(),ct.lanes|=n,Lo|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Vn=!0),t.memoizedState=n)}function bL(t,e){var n=Ke;Ke=n!==0&&4>n?n:4,t(!0);var r=Sm.transition;Sm.transition={};try{t(!1),e()}finally{Ke=n,Sm.transition=r}}function MC(){return Vr().memoizedState}function SL(t,e,n){var r=Bs(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},_C(t))OC(e,n);else if(n=cC(t,e,n,r),n!==null){var i=Tn();oi(n,t,r,i),AC(n,e,r)}}function kL(t,e,n){var r=Bs(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(_C(t))OC(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,ai(a,o)){var c=e.interleaved;c===null?(i.next=i,dy(e)):(i.next=c.next,c.next=i),e.interleaved=i;return}}catch{}finally{}n=cC(t,e,i,r),n!==null&&(i=Tn(),oi(n,t,r,i),AC(n,e,r))}}function _C(t){var e=t.alternate;return t===ct||e!==null&&e===ct}function OC(t,e){eu=id=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function AC(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Q0(t,n)}}var sd={readContext:Ur,useCallback:on,useContext:on,useEffect:on,useImperativeHandle:on,useInsertionEffect:on,useLayoutEffect:on,useMemo:on,useReducer:on,useRef:on,useState:on,useDebugValue:on,useDeferredValue:on,useTransition:on,useMutableSource:on,useSyncExternalStore:on,useId:on,unstable_isNewReconciler:!1},CL={readContext:Ur,useCallback:function(t,e){return gi().memoizedState=[t,e===void 0?null:e],t},useContext:Ur,useEffect:Iw,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Af(4194308,4,kC.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Af(4194308,4,t,e)},useInsertionEffect:function(t,e){return Af(4,2,t,e)},useMemo:function(t,e){var n=gi();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=gi();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=SL.bind(null,ct,t),[r.memoizedState,t]},useRef:function(t){var e=gi();return t={current:t},e.memoizedState=t},useState:Dw,useDebugValue:by,useDeferredValue:function(t){return gi().memoizedState=t},useTransition:function(){var t=Dw(!1),e=t[0];return t=bL.bind(null,t[1]),gi().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=ct,i=gi();if(ot){if(n===void 0)throw Error(Y(407));n=n()}else{if(n=e(),Ht===null)throw Error(Y(349));Io&30||mC(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,Iw(yC.bind(null,r,s,t),[t]),r.flags|=2048,_u(9,gC.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=gi(),e=Ht.identifierPrefix;if(ot){var n=Wi,r=Vi;n=(r&~(1<<32-si(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Nu++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=wL++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},EL={readContext:Ur,useCallback:EC,useContext:Ur,useEffect:wy,useImperativeHandle:CC,useInsertionEffect:bC,useLayoutEffect:SC,useMemo:TC,useReducer:km,useRef:wC,useState:function(){return km(Mu)},useDebugValue:by,useDeferredValue:function(t){var e=Vr();return NC(e,Dt.memoizedState,t)},useTransition:function(){var t=km(Mu)[0],e=Vr().memoizedState;return[t,e]},useMutableSource:hC,useSyncExternalStore:pC,useId:MC,unstable_isNewReconciler:!1},TL={readContext:Ur,useCallback:EC,useContext:Ur,useEffect:wy,useImperativeHandle:CC,useInsertionEffect:bC,useLayoutEffect:SC,useMemo:TC,useReducer:Cm,useRef:wC,useState:function(){return Cm(Mu)},useDebugValue:by,useDeferredValue:function(t){var e=Vr();return Dt===null?e.memoizedState=t:NC(e,Dt.memoizedState,t)},useTransition:function(){var t=Cm(Mu)[0],e=Vr().memoizedState;return[t,e]},useMutableSource:hC,useSyncExternalStore:pC,useId:MC,unstable_isNewReconciler:!1};function ei(t,e){if(t&&t.defaultProps){e=ft({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Wg(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:ft({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var ph={isMounted:function(t){return(t=t._reactInternals)?Vo(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Tn(),i=Bs(t),s=qi(r,i);s.payload=e,n!=null&&(s.callback=n),e=js(t,s,i),e!==null&&(oi(e,t,i,r),_f(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Tn(),i=Bs(t),s=qi(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=js(t,s,i),e!==null&&(oi(e,t,i,r),_f(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Tn(),r=Bs(t),i=qi(n,r);i.tag=2,e!=null&&(i.callback=e),e=js(t,i,r),e!==null&&(oi(e,t,r,n),_f(e,t,r))}};function Lw(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!bu(n,r)||!bu(i,s):!0}function PC(t,e,n){var r=!1,i=Gs,s=e.contextType;return typeof s=="object"&&s!==null?s=Ur(s):(i=Kn(e)?Ro:fn.current,r=e.contextTypes,s=(r=r!=null)?Vl(t,i):Gs),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=ph,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function jw(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&ph.enqueueReplaceState(e,e.state,null)}function Kg(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},hy(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Ur(s):(s=Kn(e)?Ro:fn.current,i.context=Vl(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Wg(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&ph.enqueueReplaceState(i,i.state,null),nd(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Gl(t,e){try{var n="",r=e;do n+=eI(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Em(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function qg(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var NL=typeof WeakMap=="function"?WeakMap:Map;function RC(t,e,n){n=qi(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){ld||(ld=!0,r0=r),qg(t,e)},n}function DC(t,e,n){n=qi(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){qg(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){qg(t,e),typeof r!="function"&&(zs===null?zs=new Set([this]):zs.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function zw(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new NL;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=$L.bind(null,t,e,n),e.then(t,t))}function Bw(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Fw(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=qi(-1,1),e.tag=2,js(n,e,1))),n.lanes|=1),t)}var ML=es.ReactCurrentOwner,Vn=!1;function Cn(t,e,n,r){e.child=t===null?uC(e,null,n,r):Kl(e,t.child,n,r)}function $w(t,e,n,r,i){n=n.render;var s=e.ref;return Bl(e,i),r=vy(t,e,n,r,s,i),n=xy(),t!==null&&!Vn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Zi(t,e,i)):(ot&&n&&oy(e),e.flags|=1,Cn(t,e,r,i),e.child)}function Hw(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!_y(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,IC(t,e,s,r,i)):(t=If(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:bu,n(o,r)&&t.ref===e.ref)return Zi(t,e,i)}return e.flags|=1,t=Fs(s,r),t.ref=e.ref,t.return=e,e.child=t}function IC(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(bu(s,r)&&t.ref===e.ref)if(Vn=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(Vn=!0);else return e.lanes=t.lanes,Zi(t,e,i)}return Gg(t,e,n,r,i)}function LC(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ye(Pl,ur),ur|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ye(Pl,ur),ur|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Ye(Pl,ur),ur|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,Ye(Pl,ur),ur|=r;return Cn(t,e,i,n),e.child}function jC(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Gg(t,e,n,r,i){var s=Kn(n)?Ro:fn.current;return s=Vl(e,s),Bl(e,i),n=vy(t,e,n,r,s,i),r=xy(),t!==null&&!Vn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Zi(t,e,i)):(ot&&r&&oy(e),e.flags|=1,Cn(t,e,n,i),e.child)}function Uw(t,e,n,r,i){if(Kn(n)){var s=!0;Yf(e)}else s=!1;if(Bl(e,i),e.stateNode===null)Pf(t,e),PC(e,n,r),Kg(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var c=o.context,f=n.contextType;typeof f=="object"&&f!==null?f=Ur(f):(f=Kn(n)?Ro:fn.current,f=Vl(e,f));var d=n.getDerivedStateFromProps,p=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";p||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||c!==f)&&jw(e,o,r,f),ws=!1;var m=e.memoizedState;o.state=m,nd(e,r,o,i),c=e.memoizedState,a!==r||m!==c||Wn.current||ws?(typeof d=="function"&&(Wg(e,n,d,r),c=e.memoizedState),(a=ws||Lw(e,n,a,r,m,c,f))?(p||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),o.props=r,o.state=c,o.context=f,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,fC(t,e),a=e.memoizedProps,f=e.type===e.elementType?a:ei(e.type,a),o.props=f,p=e.pendingProps,m=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=Ur(c):(c=Kn(n)?Ro:fn.current,c=Vl(e,c));var g=n.getDerivedStateFromProps;(d=typeof g=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==p||m!==c)&&jw(e,o,r,c),ws=!1,m=e.memoizedState,o.state=m,nd(e,r,o,i);var v=e.memoizedState;a!==p||m!==v||Wn.current||ws?(typeof g=="function"&&(Wg(e,n,g,r),v=e.memoizedState),(f=ws||Lw(e,n,f,r,m,v,c)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,v,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,v,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=v),o.props=r,o.state=v,o.context=c,r=f):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),r=!1)}return Xg(t,e,n,r,s,i)}function Xg(t,e,n,r,i,s){jC(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&Mw(e,n,!1),Zi(t,e,s);r=e.stateNode,ML.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Kl(e,t.child,null,s),e.child=Kl(e,null,a,s)):Cn(t,e,a,s),e.memoizedState=r.state,i&&Mw(e,n,!0),e.child}function zC(t){var e=t.stateNode;e.pendingContext?Nw(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Nw(t,e.context,!1),py(t,e.containerInfo)}function Vw(t,e,n,r,i){return Wl(),ay(i),e.flags|=256,Cn(t,e,n,r),e.child}var Jg={dehydrated:null,treeContext:null,retryLane:0};function Yg(t){return{baseLanes:t,cachePool:null,transitions:null}}function BC(t,e,n){var r=e.pendingProps,i=at.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Ye(at,i&1),t===null)return Ug(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=yh(o,r,0,null),t=No(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Yg(n),e.memoizedState=Jg,t):Sy(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return _L(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=Fs(i,c),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=Fs(a,s):(s=No(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?Yg(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=Jg,r}return s=t.child,t=s.sibling,r=Fs(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Sy(t,e){return e=yh({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function sf(t,e,n,r){return r!==null&&ay(r),Kl(e,t.child,null,n),t=Sy(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function _L(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=Em(Error(Y(422))),sf(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=yh({mode:"visible",children:r.children},i,0,null),s=No(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&Kl(e,t.child,null,o),e.child.memoizedState=Yg(o),e.memoizedState=Jg,s);if(!(e.mode&1))return sf(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(Y(419)),r=Em(s,r,void 0),sf(t,e,o,r)}if(a=(o&t.childLanes)!==0,Vn||a){if(r=Ht,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Qi(t,i),oi(r,t,i,-1))}return My(),r=Em(Error(Y(421))),sf(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=HL.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,fr=Ls(i.nextSibling),dr=e,ot=!0,ni=null,t!==null&&(Ir[Lr++]=Vi,Ir[Lr++]=Wi,Ir[Lr++]=Do,Vi=t.id,Wi=t.overflow,Do=e),e=Sy(e,r.children),e.flags|=4096,e)}function Ww(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Vg(t.return,e,n)}function Tm(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function FC(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Cn(t,e,r.children,n),r=at.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Ww(t,n,e);else if(t.tag===19)Ww(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Ye(at,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&rd(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Tm(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&rd(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Tm(e,!0,n,null,s);break;case"together":Tm(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Pf(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Zi(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Lo|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Y(153));if(e.child!==null){for(t=e.child,n=Fs(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Fs(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function OL(t,e,n){switch(e.tag){case 3:zC(e),Wl();break;case 5:dC(e);break;case 1:Kn(e.type)&&Yf(e);break;case 4:py(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Ye(ed,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Ye(at,at.current&1),e.flags|=128,null):n&e.child.childLanes?BC(t,e,n):(Ye(at,at.current&1),t=Zi(t,e,n),t!==null?t.sibling:null);Ye(at,at.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return FC(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ye(at,at.current),r)break;return null;case 22:case 23:return e.lanes=0,LC(t,e,n)}return Zi(t,e,n)}var $C,Qg,HC,UC;$C=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Qg=function(){};HC=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,bo(Si.current);var s=null;switch(n){case"input":i=wg(t,i),r=wg(t,r),s=[];break;case"select":i=ft({},i,{value:void 0}),r=ft({},r,{value:void 0}),s=[];break;case"textarea":i=kg(t,i),r=kg(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Xf)}Eg(n,r);var o;n=null;for(f in i)if(!r.hasOwnProperty(f)&&i.hasOwnProperty(f)&&i[f]!=null)if(f==="style"){var a=i[f];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else f!=="dangerouslySetInnerHTML"&&f!=="children"&&f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&f!=="autoFocus"&&(pu.hasOwnProperty(f)?s||(s=[]):(s=s||[]).push(f,null));for(f in r){var c=r[f];if(a=i!=null?i[f]:void 0,r.hasOwnProperty(f)&&c!==a&&(c!=null||a!=null))if(f==="style")if(a){for(o in a)!a.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&a[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(s||(s=[]),s.push(f,n)),n=c;else f==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,a=a?a.__html:void 0,c!=null&&a!==c&&(s=s||[]).push(f,c)):f==="children"?typeof c!="string"&&typeof c!="number"||(s=s||[]).push(f,""+c):f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&(pu.hasOwnProperty(f)?(c!=null&&f==="onScroll"&&tt("scroll",t),s||a===c||(s=[])):(s=s||[]).push(f,c))}n&&(s=s||[]).push("style",n);var f=s;(e.updateQueue=f)&&(e.flags|=4)}};UC=function(t,e,n,r){n!==r&&(e.flags|=4)};function Ra(t,e){if(!ot)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function ln(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function AL(t,e,n){var r=e.pendingProps;switch(ly(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ln(e),null;case 1:return Kn(e.type)&&Jf(),ln(e),null;case 3:return r=e.stateNode,ql(),rt(Wn),rt(fn),gy(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(nf(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,ni!==null&&(o0(ni),ni=null))),Qg(t,e),ln(e),null;case 5:my(e);var i=bo(Tu.current);if(n=e.type,t!==null&&e.stateNode!=null)HC(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Y(166));return ln(e),null}if(t=bo(Si.current),nf(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[wi]=e,r[Cu]=s,t=(e.mode&1)!==0,n){case"dialog":tt("cancel",r),tt("close",r);break;case"iframe":case"object":case"embed":tt("load",r);break;case"video":case"audio":for(i=0;i<Ha.length;i++)tt(Ha[i],r);break;case"source":tt("error",r);break;case"img":case"image":case"link":tt("error",r),tt("load",r);break;case"details":tt("toggle",r);break;case"input":ew(r,s),tt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},tt("invalid",r);break;case"textarea":nw(r,s),tt("invalid",r)}Eg(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&tf(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&tf(r.textContent,a,t),i=["children",""+a]):pu.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&tt("scroll",r)}switch(n){case"input":qc(r),tw(r,s,!0);break;case"textarea":qc(r),rw(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Xf)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=yk(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[wi]=e,t[Cu]=r,$C(t,e,!1,!1),e.stateNode=t;e:{switch(o=Tg(n,r),n){case"dialog":tt("cancel",t),tt("close",t),i=r;break;case"iframe":case"object":case"embed":tt("load",t),i=r;break;case"video":case"audio":for(i=0;i<Ha.length;i++)tt(Ha[i],t);i=r;break;case"source":tt("error",t),i=r;break;case"img":case"image":case"link":tt("error",t),tt("load",t),i=r;break;case"details":tt("toggle",t),i=r;break;case"input":ew(t,r),i=wg(t,r),tt("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=ft({},r,{value:void 0}),tt("invalid",t);break;case"textarea":nw(t,r),i=kg(t,r),tt("invalid",t);break;default:i=r}Eg(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var c=a[s];s==="style"?wk(t,c):s==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&vk(t,c)):s==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&mu(t,c):typeof c=="number"&&mu(t,""+c):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(pu.hasOwnProperty(s)?c!=null&&s==="onScroll"&&tt("scroll",t):c!=null&&K0(t,s,c,o))}switch(n){case"input":qc(t),tw(t,r,!1);break;case"textarea":qc(t),rw(t);break;case"option":r.value!=null&&t.setAttribute("value",""+qs(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?Il(t,!!r.multiple,s,!1):r.defaultValue!=null&&Il(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Xf)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return ln(e),null;case 6:if(t&&e.stateNode!=null)UC(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Y(166));if(n=bo(Tu.current),bo(Si.current),nf(e)){if(r=e.stateNode,n=e.memoizedProps,r[wi]=e,(s=r.nodeValue!==n)&&(t=dr,t!==null))switch(t.tag){case 3:tf(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&tf(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[wi]=e,e.stateNode=r}return ln(e),null;case 13:if(rt(at),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(ot&&fr!==null&&e.mode&1&&!(e.flags&128))lC(),Wl(),e.flags|=98560,s=!1;else if(s=nf(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(Y(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(Y(317));s[wi]=e}else Wl(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ln(e),s=!1}else ni!==null&&(o0(ni),ni=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||at.current&1?It===0&&(It=3):My())),e.updateQueue!==null&&(e.flags|=4),ln(e),null);case 4:return ql(),Qg(t,e),t===null&&Su(e.stateNode.containerInfo),ln(e),null;case 10:return fy(e.type._context),ln(e),null;case 17:return Kn(e.type)&&Jf(),ln(e),null;case 19:if(rt(at),s=e.memoizedState,s===null)return ln(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)Ra(s,!1);else{if(It!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=rd(t),o!==null){for(e.flags|=128,Ra(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ye(at,at.current&1|2),e.child}t=t.sibling}s.tail!==null&&Ct()>Xl&&(e.flags|=128,r=!0,Ra(s,!1),e.lanes=4194304)}else{if(!r)if(t=rd(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Ra(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!ot)return ln(e),null}else 2*Ct()-s.renderingStartTime>Xl&&n!==1073741824&&(e.flags|=128,r=!0,Ra(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Ct(),e.sibling=null,n=at.current,Ye(at,r?n&1|2:n&1),e):(ln(e),null);case 22:case 23:return Ny(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?ur&1073741824&&(ln(e),e.subtreeFlags&6&&(e.flags|=8192)):ln(e),null;case 24:return null;case 25:return null}throw Error(Y(156,e.tag))}function PL(t,e){switch(ly(e),e.tag){case 1:return Kn(e.type)&&Jf(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ql(),rt(Wn),rt(fn),gy(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return my(e),null;case 13:if(rt(at),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Y(340));Wl()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return rt(at),null;case 4:return ql(),null;case 10:return fy(e.type._context),null;case 22:case 23:return Ny(),null;case 24:return null;default:return null}}var of=!1,cn=!1,RL=typeof WeakSet=="function"?WeakSet:Set,ue=null;function Al(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){yt(t,e,r)}else n.current=null}function Zg(t,e,n){try{n()}catch(r){yt(t,e,r)}}var Kw=!1;function DL(t,e){if(Lg=Kf,t=Gk(),sy(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,c=-1,f=0,d=0,p=t,m=null;t:for(;;){for(var g;p!==n||i!==0&&p.nodeType!==3||(a=o+i),p!==s||r!==0&&p.nodeType!==3||(c=o+r),p.nodeType===3&&(o+=p.nodeValue.length),(g=p.firstChild)!==null;)m=p,p=g;for(;;){if(p===t)break t;if(m===n&&++f===i&&(a=o),m===s&&++d===r&&(c=o),(g=p.nextSibling)!==null)break;p=m,m=p.parentNode}p=g}n=a===-1||c===-1?null:{start:a,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(jg={focusedElem:t,selectionRange:n},Kf=!1,ue=e;ue!==null;)if(e=ue,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ue=t;else for(;ue!==null;){e=ue;try{var v=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var S=v.memoizedProps,C=v.memoizedState,x=e.stateNode,w=x.getSnapshotBeforeUpdate(e.elementType===e.type?S:ei(e.type,S),C);x.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var E=e.stateNode.containerInfo;E.nodeType===1?E.textContent="":E.nodeType===9&&E.documentElement&&E.removeChild(E.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Y(163))}}catch(M){yt(e,e.return,M)}if(t=e.sibling,t!==null){t.return=e.return,ue=t;break}ue=e.return}return v=Kw,Kw=!1,v}function tu(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&Zg(e,n,s)}i=i.next}while(i!==r)}}function mh(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function e0(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function VC(t){var e=t.alternate;e!==null&&(t.alternate=null,VC(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[wi],delete e[Cu],delete e[Fg],delete e[gL],delete e[yL])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function WC(t){return t.tag===5||t.tag===3||t.tag===4}function qw(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||WC(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function t0(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Xf));else if(r!==4&&(t=t.child,t!==null))for(t0(t,e,n),t=t.sibling;t!==null;)t0(t,e,n),t=t.sibling}function n0(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(n0(t,e,n),t=t.sibling;t!==null;)n0(t,e,n),t=t.sibling}var Xt=null,ti=!1;function ps(t,e,n){for(n=n.child;n!==null;)KC(t,e,n),n=n.sibling}function KC(t,e,n){if(bi&&typeof bi.onCommitFiberUnmount=="function")try{bi.onCommitFiberUnmount(lh,n)}catch{}switch(n.tag){case 5:cn||Al(n,e);case 6:var r=Xt,i=ti;Xt=null,ps(t,e,n),Xt=r,ti=i,Xt!==null&&(ti?(t=Xt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Xt.removeChild(n.stateNode));break;case 18:Xt!==null&&(ti?(t=Xt,n=n.stateNode,t.nodeType===8?xm(t.parentNode,n):t.nodeType===1&&xm(t,n),xu(t)):xm(Xt,n.stateNode));break;case 4:r=Xt,i=ti,Xt=n.stateNode.containerInfo,ti=!0,ps(t,e,n),Xt=r,ti=i;break;case 0:case 11:case 14:case 15:if(!cn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Zg(n,e,o),i=i.next}while(i!==r)}ps(t,e,n);break;case 1:if(!cn&&(Al(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){yt(n,e,a)}ps(t,e,n);break;case 21:ps(t,e,n);break;case 22:n.mode&1?(cn=(r=cn)||n.memoizedState!==null,ps(t,e,n),cn=r):ps(t,e,n);break;default:ps(t,e,n)}}function Gw(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new RL),e.forEach(function(r){var i=UL.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Qr(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Xt=a.stateNode,ti=!1;break e;case 3:Xt=a.stateNode.containerInfo,ti=!0;break e;case 4:Xt=a.stateNode.containerInfo,ti=!0;break e}a=a.return}if(Xt===null)throw Error(Y(160));KC(s,o,i),Xt=null,ti=!1;var c=i.alternate;c!==null&&(c.return=null),i.return=null}catch(f){yt(i,e,f)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)qC(e,t),e=e.sibling}function qC(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Qr(e,t),mi(t),r&4){try{tu(3,t,t.return),mh(3,t)}catch(S){yt(t,t.return,S)}try{tu(5,t,t.return)}catch(S){yt(t,t.return,S)}}break;case 1:Qr(e,t),mi(t),r&512&&n!==null&&Al(n,n.return);break;case 5:if(Qr(e,t),mi(t),r&512&&n!==null&&Al(n,n.return),t.flags&32){var i=t.stateNode;try{mu(i,"")}catch(S){yt(t,t.return,S)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&mk(i,s),Tg(a,o);var f=Tg(a,s);for(o=0;o<c.length;o+=2){var d=c[o],p=c[o+1];d==="style"?wk(i,p):d==="dangerouslySetInnerHTML"?vk(i,p):d==="children"?mu(i,p):K0(i,d,p,f)}switch(a){case"input":bg(i,s);break;case"textarea":gk(i,s);break;case"select":var m=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var g=s.value;g!=null?Il(i,!!s.multiple,g,!1):m!==!!s.multiple&&(s.defaultValue!=null?Il(i,!!s.multiple,s.defaultValue,!0):Il(i,!!s.multiple,s.multiple?[]:"",!1))}i[Cu]=s}catch(S){yt(t,t.return,S)}}break;case 6:if(Qr(e,t),mi(t),r&4){if(t.stateNode===null)throw Error(Y(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(S){yt(t,t.return,S)}}break;case 3:if(Qr(e,t),mi(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{xu(e.containerInfo)}catch(S){yt(t,t.return,S)}break;case 4:Qr(e,t),mi(t);break;case 13:Qr(e,t),mi(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Ey=Ct())),r&4&&Gw(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(cn=(f=cn)||d,Qr(e,t),cn=f):Qr(e,t),mi(t),r&8192){if(f=t.memoizedState!==null,(t.stateNode.isHidden=f)&&!d&&t.mode&1)for(ue=t,d=t.child;d!==null;){for(p=ue=d;ue!==null;){switch(m=ue,g=m.child,m.tag){case 0:case 11:case 14:case 15:tu(4,m,m.return);break;case 1:Al(m,m.return);var v=m.stateNode;if(typeof v.componentWillUnmount=="function"){r=m,n=m.return;try{e=r,v.props=e.memoizedProps,v.state=e.memoizedState,v.componentWillUnmount()}catch(S){yt(r,n,S)}}break;case 5:Al(m,m.return);break;case 22:if(m.memoizedState!==null){Jw(p);continue}}g!==null?(g.return=m,ue=g):Jw(p)}d=d.sibling}e:for(d=null,p=t;;){if(p.tag===5){if(d===null){d=p;try{i=p.stateNode,f?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=p.stateNode,c=p.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,a.style.display=xk("display",o))}catch(S){yt(t,t.return,S)}}}else if(p.tag===6){if(d===null)try{p.stateNode.nodeValue=f?"":p.memoizedProps}catch(S){yt(t,t.return,S)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===t)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===t)break e;for(;p.sibling===null;){if(p.return===null||p.return===t)break e;d===p&&(d=null),p=p.return}d===p&&(d=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:Qr(e,t),mi(t),r&4&&Gw(t);break;case 21:break;default:Qr(e,t),mi(t)}}function mi(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(WC(n)){var r=n;break e}n=n.return}throw Error(Y(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(mu(i,""),r.flags&=-33);var s=qw(t);n0(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=qw(t);t0(t,a,o);break;default:throw Error(Y(161))}}catch(c){yt(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function IL(t,e,n){ue=t,GC(t)}function GC(t,e,n){for(var r=(t.mode&1)!==0;ue!==null;){var i=ue,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||of;if(!o){var a=i.alternate,c=a!==null&&a.memoizedState!==null||cn;a=of;var f=cn;if(of=o,(cn=c)&&!f)for(ue=i;ue!==null;)o=ue,c=o.child,o.tag===22&&o.memoizedState!==null?Yw(i):c!==null?(c.return=o,ue=c):Yw(i);for(;s!==null;)ue=s,GC(s),s=s.sibling;ue=i,of=a,cn=f}Xw(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,ue=s):Xw(t)}}function Xw(t){for(;ue!==null;){var e=ue;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:cn||mh(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!cn)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:ei(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&Rw(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Rw(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var f=e.alternate;if(f!==null){var d=f.memoizedState;if(d!==null){var p=d.dehydrated;p!==null&&xu(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Y(163))}cn||e.flags&512&&e0(e)}catch(m){yt(e,e.return,m)}}if(e===t){ue=null;break}if(n=e.sibling,n!==null){n.return=e.return,ue=n;break}ue=e.return}}function Jw(t){for(;ue!==null;){var e=ue;if(e===t){ue=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ue=n;break}ue=e.return}}function Yw(t){for(;ue!==null;){var e=ue;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{mh(4,e)}catch(c){yt(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(c){yt(e,i,c)}}var s=e.return;try{e0(e)}catch(c){yt(e,s,c)}break;case 5:var o=e.return;try{e0(e)}catch(c){yt(e,o,c)}}}catch(c){yt(e,e.return,c)}if(e===t){ue=null;break}var a=e.sibling;if(a!==null){a.return=e.return,ue=a;break}ue=e.return}}var LL=Math.ceil,od=es.ReactCurrentDispatcher,ky=es.ReactCurrentOwner,Fr=es.ReactCurrentBatchConfig,Be=0,Ht=null,Mt=null,Zt=0,ur=0,Pl=Qs(0),It=0,Ou=null,Lo=0,gh=0,Cy=0,nu=null,Hn=null,Ey=0,Xl=1/0,$i=null,ld=!1,r0=null,zs=null,lf=!1,_s=null,ad=0,ru=0,i0=null,Rf=-1,Df=0;function Tn(){return Be&6?Ct():Rf!==-1?Rf:Rf=Ct()}function Bs(t){return t.mode&1?Be&2&&Zt!==0?Zt&-Zt:xL.transition!==null?(Df===0&&(Df=Pk()),Df):(t=Ke,t!==0||(t=window.event,t=t===void 0?16:Bk(t.type)),t):1}function oi(t,e,n,r){if(50<ru)throw ru=0,i0=null,Error(Y(185));Uu(t,n,r),(!(Be&2)||t!==Ht)&&(t===Ht&&(!(Be&2)&&(gh|=n),It===4&&Es(t,Zt)),qn(t,r),n===1&&Be===0&&!(e.mode&1)&&(Xl=Ct()+500,dh&&Zs()))}function qn(t,e){var n=t.callbackNode;xI(t,e);var r=Wf(t,t===Ht?Zt:0);if(r===0)n!==null&&ow(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&ow(n),e===1)t.tag===0?vL(Qw.bind(null,t)):iC(Qw.bind(null,t)),pL(function(){!(Be&6)&&Zs()}),n=null;else{switch(Rk(r)){case 1:n=Y0;break;case 4:n=Ok;break;case 16:n=Vf;break;case 536870912:n=Ak;break;default:n=Vf}n=nE(n,XC.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function XC(t,e){if(Rf=-1,Df=0,Be&6)throw Error(Y(327));var n=t.callbackNode;if(Fl()&&t.callbackNode!==n)return null;var r=Wf(t,t===Ht?Zt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=ud(t,r);else{e=r;var i=Be;Be|=2;var s=YC();(Ht!==t||Zt!==e)&&($i=null,Xl=Ct()+500,To(t,e));do try{BL();break}catch(a){JC(t,a)}while(!0);cy(),od.current=s,Be=i,Mt!==null?e=0:(Ht=null,Zt=0,e=It)}if(e!==0){if(e===2&&(i=Ag(t),i!==0&&(r=i,e=s0(t,i))),e===1)throw n=Ou,To(t,0),Es(t,r),qn(t,Ct()),n;if(e===6)Es(t,r);else{if(i=t.current.alternate,!(r&30)&&!jL(i)&&(e=ud(t,r),e===2&&(s=Ag(t),s!==0&&(r=s,e=s0(t,s))),e===1))throw n=Ou,To(t,0),Es(t,r),qn(t,Ct()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(Y(345));case 2:yo(t,Hn,$i);break;case 3:if(Es(t,r),(r&130023424)===r&&(e=Ey+500-Ct(),10<e)){if(Wf(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Tn(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Bg(yo.bind(null,t,Hn,$i),e);break}yo(t,Hn,$i);break;case 4:if(Es(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-si(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=Ct()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*LL(r/1960))-r,10<r){t.timeoutHandle=Bg(yo.bind(null,t,Hn,$i),r);break}yo(t,Hn,$i);break;case 5:yo(t,Hn,$i);break;default:throw Error(Y(329))}}}return qn(t,Ct()),t.callbackNode===n?XC.bind(null,t):null}function s0(t,e){var n=nu;return t.current.memoizedState.isDehydrated&&(To(t,e).flags|=256),t=ud(t,e),t!==2&&(e=Hn,Hn=n,e!==null&&o0(e)),t}function o0(t){Hn===null?Hn=t:Hn.push.apply(Hn,t)}function jL(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!ai(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Es(t,e){for(e&=~Cy,e&=~gh,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-si(e),r=1<<n;t[n]=-1,e&=~r}}function Qw(t){if(Be&6)throw Error(Y(327));Fl();var e=Wf(t,0);if(!(e&1))return qn(t,Ct()),null;var n=ud(t,e);if(t.tag!==0&&n===2){var r=Ag(t);r!==0&&(e=r,n=s0(t,r))}if(n===1)throw n=Ou,To(t,0),Es(t,e),qn(t,Ct()),n;if(n===6)throw Error(Y(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,yo(t,Hn,$i),qn(t,Ct()),null}function Ty(t,e){var n=Be;Be|=1;try{return t(e)}finally{Be=n,Be===0&&(Xl=Ct()+500,dh&&Zs())}}function jo(t){_s!==null&&_s.tag===0&&!(Be&6)&&Fl();var e=Be;Be|=1;var n=Fr.transition,r=Ke;try{if(Fr.transition=null,Ke=1,t)return t()}finally{Ke=r,Fr.transition=n,Be=e,!(Be&6)&&Zs()}}function Ny(){ur=Pl.current,rt(Pl)}function To(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,hL(n)),Mt!==null)for(n=Mt.return;n!==null;){var r=n;switch(ly(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Jf();break;case 3:ql(),rt(Wn),rt(fn),gy();break;case 5:my(r);break;case 4:ql();break;case 13:rt(at);break;case 19:rt(at);break;case 10:fy(r.type._context);break;case 22:case 23:Ny()}n=n.return}if(Ht=t,Mt=t=Fs(t.current,null),Zt=ur=e,It=0,Ou=null,Cy=gh=Lo=0,Hn=nu=null,wo!==null){for(e=0;e<wo.length;e++)if(n=wo[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}wo=null}return t}function JC(t,e){do{var n=Mt;try{if(cy(),Of.current=sd,id){for(var r=ct.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}id=!1}if(Io=0,Bt=Dt=ct=null,eu=!1,Nu=0,ky.current=null,n===null||n.return===null){It=1,Ou=e,Mt=null;break}e:{var s=t,o=n.return,a=n,c=e;if(e=Zt,a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var f=c,d=a,p=d.tag;if(!(d.mode&1)&&(p===0||p===11||p===15)){var m=d.alternate;m?(d.updateQueue=m.updateQueue,d.memoizedState=m.memoizedState,d.lanes=m.lanes):(d.updateQueue=null,d.memoizedState=null)}var g=Bw(o);if(g!==null){g.flags&=-257,Fw(g,o,a,s,e),g.mode&1&&zw(s,f,e),e=g,c=f;var v=e.updateQueue;if(v===null){var S=new Set;S.add(c),e.updateQueue=S}else v.add(c);break e}else{if(!(e&1)){zw(s,f,e),My();break e}c=Error(Y(426))}}else if(ot&&a.mode&1){var C=Bw(o);if(C!==null){!(C.flags&65536)&&(C.flags|=256),Fw(C,o,a,s,e),ay(Gl(c,a));break e}}s=c=Gl(c,a),It!==4&&(It=2),nu===null?nu=[s]:nu.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var x=RC(s,c,e);Pw(s,x);break e;case 1:a=c;var w=s.type,E=s.stateNode;if(!(s.flags&128)&&(typeof w.getDerivedStateFromError=="function"||E!==null&&typeof E.componentDidCatch=="function"&&(zs===null||!zs.has(E)))){s.flags|=65536,e&=-e,s.lanes|=e;var M=DC(s,a,e);Pw(s,M);break e}}s=s.return}while(s!==null)}ZC(n)}catch(_){e=_,Mt===n&&n!==null&&(Mt=n=n.return);continue}break}while(!0)}function YC(){var t=od.current;return od.current=sd,t===null?sd:t}function My(){(It===0||It===3||It===2)&&(It=4),Ht===null||!(Lo&268435455)&&!(gh&268435455)||Es(Ht,Zt)}function ud(t,e){var n=Be;Be|=2;var r=YC();(Ht!==t||Zt!==e)&&($i=null,To(t,e));do try{zL();break}catch(i){JC(t,i)}while(!0);if(cy(),Be=n,od.current=r,Mt!==null)throw Error(Y(261));return Ht=null,Zt=0,It}function zL(){for(;Mt!==null;)QC(Mt)}function BL(){for(;Mt!==null&&!cI();)QC(Mt)}function QC(t){var e=tE(t.alternate,t,ur);t.memoizedProps=t.pendingProps,e===null?ZC(t):Mt=e,ky.current=null}function ZC(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=PL(n,e),n!==null){n.flags&=32767,Mt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{It=6,Mt=null;return}}else if(n=AL(n,e,ur),n!==null){Mt=n;return}if(e=e.sibling,e!==null){Mt=e;return}Mt=e=t}while(e!==null);It===0&&(It=5)}function yo(t,e,n){var r=Ke,i=Fr.transition;try{Fr.transition=null,Ke=1,FL(t,e,n,r)}finally{Fr.transition=i,Ke=r}return null}function FL(t,e,n,r){do Fl();while(_s!==null);if(Be&6)throw Error(Y(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Y(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(wI(t,s),t===Ht&&(Mt=Ht=null,Zt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||lf||(lf=!0,nE(Vf,function(){return Fl(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Fr.transition,Fr.transition=null;var o=Ke;Ke=1;var a=Be;Be|=4,ky.current=null,DL(t,n),qC(n,t),oL(jg),Kf=!!Lg,jg=Lg=null,t.current=n,IL(n),fI(),Be=a,Ke=o,Fr.transition=s}else t.current=n;if(lf&&(lf=!1,_s=t,ad=i),s=t.pendingLanes,s===0&&(zs=null),pI(n.stateNode),qn(t,Ct()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(ld)throw ld=!1,t=r0,r0=null,t;return ad&1&&t.tag!==0&&Fl(),s=t.pendingLanes,s&1?t===i0?ru++:(ru=0,i0=t):ru=0,Zs(),null}function Fl(){if(_s!==null){var t=Rk(ad),e=Fr.transition,n=Ke;try{if(Fr.transition=null,Ke=16>t?16:t,_s===null)var r=!1;else{if(t=_s,_s=null,ad=0,Be&6)throw Error(Y(331));var i=Be;for(Be|=4,ue=t.current;ue!==null;){var s=ue,o=s.child;if(ue.flags&16){var a=s.deletions;if(a!==null){for(var c=0;c<a.length;c++){var f=a[c];for(ue=f;ue!==null;){var d=ue;switch(d.tag){case 0:case 11:case 15:tu(8,d,s)}var p=d.child;if(p!==null)p.return=d,ue=p;else for(;ue!==null;){d=ue;var m=d.sibling,g=d.return;if(VC(d),d===f){ue=null;break}if(m!==null){m.return=g,ue=m;break}ue=g}}}var v=s.alternate;if(v!==null){var S=v.child;if(S!==null){v.child=null;do{var C=S.sibling;S.sibling=null,S=C}while(S!==null)}}ue=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,ue=o;else e:for(;ue!==null;){if(s=ue,s.flags&2048)switch(s.tag){case 0:case 11:case 15:tu(9,s,s.return)}var x=s.sibling;if(x!==null){x.return=s.return,ue=x;break e}ue=s.return}}var w=t.current;for(ue=w;ue!==null;){o=ue;var E=o.child;if(o.subtreeFlags&2064&&E!==null)E.return=o,ue=E;else e:for(o=w;ue!==null;){if(a=ue,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:mh(9,a)}}catch(_){yt(a,a.return,_)}if(a===o){ue=null;break e}var M=a.sibling;if(M!==null){M.return=a.return,ue=M;break e}ue=a.return}}if(Be=i,Zs(),bi&&typeof bi.onPostCommitFiberRoot=="function")try{bi.onPostCommitFiberRoot(lh,t)}catch{}r=!0}return r}finally{Ke=n,Fr.transition=e}}return!1}function Zw(t,e,n){e=Gl(n,e),e=RC(t,e,1),t=js(t,e,1),e=Tn(),t!==null&&(Uu(t,1,e),qn(t,e))}function yt(t,e,n){if(t.tag===3)Zw(t,t,n);else for(;e!==null;){if(e.tag===3){Zw(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(zs===null||!zs.has(r))){t=Gl(n,t),t=DC(e,t,1),e=js(e,t,1),t=Tn(),e!==null&&(Uu(e,1,t),qn(e,t));break}}e=e.return}}function $L(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Tn(),t.pingedLanes|=t.suspendedLanes&n,Ht===t&&(Zt&n)===n&&(It===4||It===3&&(Zt&130023424)===Zt&&500>Ct()-Ey?To(t,0):Cy|=n),qn(t,e)}function eE(t,e){e===0&&(t.mode&1?(e=Jc,Jc<<=1,!(Jc&130023424)&&(Jc=4194304)):e=1);var n=Tn();t=Qi(t,e),t!==null&&(Uu(t,e,n),qn(t,n))}function HL(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),eE(t,n)}function UL(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(Y(314))}r!==null&&r.delete(e),eE(t,n)}var tE;tE=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Wn.current)Vn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Vn=!1,OL(t,e,n);Vn=!!(t.flags&131072)}else Vn=!1,ot&&e.flags&1048576&&sC(e,Zf,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Pf(t,e),t=e.pendingProps;var i=Vl(e,fn.current);Bl(e,n),i=vy(null,e,r,t,i,n);var s=xy();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Kn(r)?(s=!0,Yf(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,hy(e),i.updater=ph,e.stateNode=i,i._reactInternals=e,Kg(e,r,t,n),e=Xg(null,e,r,!0,s,n)):(e.tag=0,ot&&s&&oy(e),Cn(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Pf(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=WL(r),t=ei(r,t),i){case 0:e=Gg(null,e,r,t,n);break e;case 1:e=Uw(null,e,r,t,n);break e;case 11:e=$w(null,e,r,t,n);break e;case 14:e=Hw(null,e,r,ei(r.type,t),n);break e}throw Error(Y(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:ei(r,i),Gg(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:ei(r,i),Uw(t,e,r,i,n);case 3:e:{if(zC(e),t===null)throw Error(Y(387));r=e.pendingProps,s=e.memoizedState,i=s.element,fC(t,e),nd(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Gl(Error(Y(423)),e),e=Vw(t,e,r,n,i);break e}else if(r!==i){i=Gl(Error(Y(424)),e),e=Vw(t,e,r,n,i);break e}else for(fr=Ls(e.stateNode.containerInfo.firstChild),dr=e,ot=!0,ni=null,n=uC(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Wl(),r===i){e=Zi(t,e,n);break e}Cn(t,e,r,n)}e=e.child}return e;case 5:return dC(e),t===null&&Ug(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,zg(r,i)?o=null:s!==null&&zg(r,s)&&(e.flags|=32),jC(t,e),Cn(t,e,o,n),e.child;case 6:return t===null&&Ug(e),null;case 13:return BC(t,e,n);case 4:return py(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Kl(e,null,r,n):Cn(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:ei(r,i),$w(t,e,r,i,n);case 7:return Cn(t,e,e.pendingProps,n),e.child;case 8:return Cn(t,e,e.pendingProps.children,n),e.child;case 12:return Cn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,Ye(ed,r._currentValue),r._currentValue=o,s!==null)if(ai(s.value,o)){if(s.children===i.children&&!Wn.current){e=Zi(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var c=a.firstContext;c!==null;){if(c.context===r){if(s.tag===1){c=qi(-1,n&-n),c.tag=2;var f=s.updateQueue;if(f!==null){f=f.shared;var d=f.pending;d===null?c.next=c:(c.next=d.next,d.next=c),f.pending=c}}s.lanes|=n,c=s.alternate,c!==null&&(c.lanes|=n),Vg(s.return,n,e),a.lanes|=n;break}c=c.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(Y(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Vg(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Cn(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Bl(e,n),i=Ur(i),r=r(i),e.flags|=1,Cn(t,e,r,n),e.child;case 14:return r=e.type,i=ei(r,e.pendingProps),i=ei(r.type,i),Hw(t,e,r,i,n);case 15:return IC(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:ei(r,i),Pf(t,e),e.tag=1,Kn(r)?(t=!0,Yf(e)):t=!1,Bl(e,n),PC(e,r,i),Kg(e,r,i,n),Xg(null,e,r,!0,t,n);case 19:return FC(t,e,n);case 22:return LC(t,e,n)}throw Error(Y(156,e.tag))};function nE(t,e){return _k(t,e)}function VL(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function zr(t,e,n,r){return new VL(t,e,n,r)}function _y(t){return t=t.prototype,!(!t||!t.isReactComponent)}function WL(t){if(typeof t=="function")return _y(t)?1:0;if(t!=null){if(t=t.$$typeof,t===G0)return 11;if(t===X0)return 14}return 2}function Fs(t,e){var n=t.alternate;return n===null?(n=zr(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function If(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")_y(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Sl:return No(n.children,i,s,e);case q0:o=8,i|=8;break;case gg:return t=zr(12,n,e,i|2),t.elementType=gg,t.lanes=s,t;case yg:return t=zr(13,n,e,i),t.elementType=yg,t.lanes=s,t;case vg:return t=zr(19,n,e,i),t.elementType=vg,t.lanes=s,t;case dk:return yh(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case ck:o=10;break e;case fk:o=9;break e;case G0:o=11;break e;case X0:o=14;break e;case xs:o=16,r=null;break e}throw Error(Y(130,t==null?t:typeof t,""))}return e=zr(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function No(t,e,n,r){return t=zr(7,t,r,e),t.lanes=n,t}function yh(t,e,n,r){return t=zr(22,t,r,e),t.elementType=dk,t.lanes=n,t.stateNode={isHidden:!1},t}function Nm(t,e,n){return t=zr(6,t,null,e),t.lanes=n,t}function Mm(t,e,n){return e=zr(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function KL(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=am(0),this.expirationTimes=am(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=am(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Oy(t,e,n,r,i,s,o,a,c){return t=new KL(t,e,n,a,c),e===1?(e=1,s===!0&&(e|=8)):e=0,s=zr(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},hy(s),t}function qL(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:bl,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function rE(t){if(!t)return Gs;t=t._reactInternals;e:{if(Vo(t)!==t||t.tag!==1)throw Error(Y(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Kn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Y(171))}if(t.tag===1){var n=t.type;if(Kn(n))return rC(t,n,e)}return e}function iE(t,e,n,r,i,s,o,a,c){return t=Oy(n,r,!0,t,i,s,o,a,c),t.context=rE(null),n=t.current,r=Tn(),i=Bs(n),s=qi(r,i),s.callback=e??null,js(n,s,i),t.current.lanes=i,Uu(t,i,r),qn(t,r),t}function vh(t,e,n,r){var i=e.current,s=Tn(),o=Bs(i);return n=rE(n),e.context===null?e.context=n:e.pendingContext=n,e=qi(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=js(i,e,o),t!==null&&(oi(t,i,o,s),_f(t,i,o)),o}function cd(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function eb(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Ay(t,e){eb(t,e),(t=t.alternate)&&eb(t,e)}function GL(){return null}var sE=typeof reportError=="function"?reportError:function(t){console.error(t)};function Py(t){this._internalRoot=t}xh.prototype.render=Py.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Y(409));vh(t,e,null,null)};xh.prototype.unmount=Py.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;jo(function(){vh(null,t,null,null)}),e[Yi]=null}};function xh(t){this._internalRoot=t}xh.prototype.unstable_scheduleHydration=function(t){if(t){var e=Lk();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Cs.length&&e!==0&&e<Cs[n].priority;n++);Cs.splice(n,0,t),n===0&&zk(t)}};function Ry(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function wh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function tb(){}function XL(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var f=cd(o);s.call(f)}}var o=iE(e,r,t,0,null,!1,!1,"",tb);return t._reactRootContainer=o,t[Yi]=o.current,Su(t.nodeType===8?t.parentNode:t),jo(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var f=cd(c);a.call(f)}}var c=Oy(t,0,!1,null,null,!1,!1,"",tb);return t._reactRootContainer=c,t[Yi]=c.current,Su(t.nodeType===8?t.parentNode:t),jo(function(){vh(e,c,n,r)}),c}function bh(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var c=cd(o);a.call(c)}}vh(e,o,t,i)}else o=XL(n,e,t,i,r);return cd(o)}Dk=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=$a(e.pendingLanes);n!==0&&(Q0(e,n|1),qn(e,Ct()),!(Be&6)&&(Xl=Ct()+500,Zs()))}break;case 13:jo(function(){var r=Qi(t,1);if(r!==null){var i=Tn();oi(r,t,1,i)}}),Ay(t,1)}};Z0=function(t){if(t.tag===13){var e=Qi(t,134217728);if(e!==null){var n=Tn();oi(e,t,134217728,n)}Ay(t,134217728)}};Ik=function(t){if(t.tag===13){var e=Bs(t),n=Qi(t,e);if(n!==null){var r=Tn();oi(n,t,e,r)}Ay(t,e)}};Lk=function(){return Ke};jk=function(t,e){var n=Ke;try{return Ke=t,e()}finally{Ke=n}};Mg=function(t,e,n){switch(e){case"input":if(bg(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=fh(r);if(!i)throw Error(Y(90));pk(r),bg(r,i)}}}break;case"textarea":gk(t,n);break;case"select":e=n.value,e!=null&&Il(t,!!n.multiple,e,!1)}};kk=Ty;Ck=jo;var JL={usingClientEntryPoint:!1,Events:[Wu,Tl,fh,bk,Sk,Ty]},Da={findFiberByHostInstance:xo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},YL={bundleType:Da.bundleType,version:Da.version,rendererPackageName:Da.rendererPackageName,rendererConfig:Da.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:es.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Nk(t),t===null?null:t.stateNode},findFiberByHostInstance:Da.findFiberByHostInstance||GL,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var af=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!af.isDisabled&&af.supportsFiber)try{lh=af.inject(YL),bi=af}catch{}}gr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=JL;gr.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Ry(e))throw Error(Y(200));return qL(t,e,null,n)};gr.createRoot=function(t,e){if(!Ry(t))throw Error(Y(299));var n=!1,r="",i=sE;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Oy(t,1,!1,null,null,n,!1,r,i),t[Yi]=e.current,Su(t.nodeType===8?t.parentNode:t),new Py(e)};gr.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Y(188)):(t=Object.keys(t).join(","),Error(Y(268,t)));return t=Nk(e),t=t===null?null:t.stateNode,t};gr.flushSync=function(t){return jo(t)};gr.hydrate=function(t,e,n){if(!wh(e))throw Error(Y(200));return bh(null,t,e,!0,n)};gr.hydrateRoot=function(t,e,n){if(!Ry(t))throw Error(Y(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=sE;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=iE(e,null,t,1,n??null,i,!1,s,o),t[Yi]=e.current,Su(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new xh(e)};gr.render=function(t,e,n){if(!wh(e))throw Error(Y(200));return bh(null,t,e,!1,n)};gr.unmountComponentAtNode=function(t){if(!wh(t))throw Error(Y(40));return t._reactRootContainer?(jo(function(){bh(null,null,t,!1,function(){t._reactRootContainer=null,t[Yi]=null})}),!0):!1};gr.unstable_batchedUpdates=Ty;gr.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!wh(n))throw Error(Y(200));if(t==null||t._reactInternals===void 0)throw Error(Y(38));return bh(t,e,n,!1,r)};gr.version="18.3.1-next-f1338f8080-20240426";function oE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(oE)}catch(t){console.error(t)}}oE(),ok.exports=gr;var Sh=ok.exports;const QL=sh(Sh);var nb=Sh;pg.createRoot=nb.createRoot,pg.hydrateRoot=nb.hydrateRoot;const Gt=[];for(let t=0;t<256;++t)Gt.push((t+256).toString(16).slice(1));function ZL(t,e=0){return(Gt[t[e+0]]+Gt[t[e+1]]+Gt[t[e+2]]+Gt[t[e+3]]+"-"+Gt[t[e+4]]+Gt[t[e+5]]+"-"+Gt[t[e+6]]+Gt[t[e+7]]+"-"+Gt[t[e+8]]+Gt[t[e+9]]+"-"+Gt[t[e+10]]+Gt[t[e+11]]+Gt[t[e+12]]+Gt[t[e+13]]+Gt[t[e+14]]+Gt[t[e+15]]).toLowerCase()}let _m;const e3=new Uint8Array(16);function t3(){if(!_m){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");_m=crypto.getRandomValues.bind(crypto)}return _m(e3)}const n3=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),rb={randomUUID:n3};function r3(t,e,n){var i;t=t||{};const r=t.random??((i=t.rng)==null?void 0:i.call(t))??t3();if(r.length<16)throw new Error("Random bytes length must be >= 16");return r[6]=r[6]&15|64,r[8]=r[8]&63|128,ZL(r)}function Br(t,e,n){return rb.randomUUID&&!t?rb.randomUUID():r3(t)}const lE="gp_projects_list",aE=()=>{const t=localStorage.getItem(lE);return t?JSON.parse(t):[]},Ua=t=>{localStorage.setItem(lE,JSON.stringify(t))},i3=t=>{const e=`gp_project_${t}`,n=localStorage.getItem(e),r={brainstorm:{items:[],connections:[]},members:[],todos:[],docs:[],assets:[],ui:{pages:[]}};if(!n)return r;try{const i=JSON.parse(n);return i.assets||(i.assets=[]),i.ui&&Array.isArray(i.ui.pages)&&i.ui.pages.forEach(s=>{s.type||(s.type="screen"),s.components||(s.components=[]),s.components.forEach(o=>{o.interaction||(o.interaction={type:"none"}),o.state||(o.state={isVisible:!0,isActive:!1,isDisabled:!1}),typeof o.zIndex!="number"&&(o.zIndex=1),o.type==="fixed"&&(o.type="sprite",o.interaction={type:"none"})})}),i}catch(i){return console.error("Failed to load project content:",i),r}},Om=(t,e)=>{const n=`gp_project_${t}`;localStorage.setItem(n,JSON.stringify(e));const r=aE(),i=r.findIndex(s=>s.id===t);i!==-1&&(r[i].lastModified=Date.now(),Ua(r))};function s3({onOpenProject:t}){const[e,n]=G.useState([]),r=G.useRef(null),[i,s]=G.useState({visible:!1,x:0,y:0,targetId:""});G.useEffect(()=>{n(aE());const p=()=>s({...i,visible:!1});return window.addEventListener("click",p),()=>window.removeEventListener("click",p)},[]);const o=()=>{const m=[{id:Br(),name:"",cover:"",lastModified:Date.now()},...e];n(m),Ua(m)},a=(p,m)=>{p.preventDefault(),s({visible:!0,x:p.clientX,y:p.clientY,targetId:m})},c=p=>{var g;const m=(g=p.target.files)==null?void 0:g[0];if(m&&i.targetId){const v=new FileReader;v.onload=S=>{const C=e.map(x=>{var w;return x.id===i.targetId?{...x,cover:(w=S.target)==null?void 0:w.result}:x});n(C),Ua(C)},v.readAsDataURL(m)}p.target.value=""},f=(p,m)=>{const g=e.map(v=>v.id===p?{...v,name:m}:v);n(g),Ua(g)},d=()=>{if(confirm("")){const p=e.filter(m=>m.id!==i.targetId);n(p),Ua(p)}};return b.jsxs("div",{className:"flex flex-col h-screen w-screen bg-slate-900 text-slate-200 p-10 overflow-hidden relative",children:[b.jsx("input",{type:"file",ref:r,onChange:c,className:"hidden",accept:"image/*"}),b.jsxs("div",{className:"mb-10",children:[b.jsxs("h1",{className:"text-4xl font-bold text-white mb-2",children:["Game Planner ",b.jsx("span",{className:"text-emerald-500 text-sm align-top",children:"Pro"})]}),b.jsx("p",{className:"text-slate-400",children:""})]}),b.jsx("div",{className:"flex-1 overflow-y-auto",children:b.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-6 content-start pb-20",children:[b.jsxs("div",{onClick:o,className:"aspect-[4/3] rounded-xl border-2 border-dashed border-slate-700 hover:border-emerald-500 hover:bg-slate-800/50 flex flex-col items-center justify-center cursor-pointer transition-all group",children:[b.jsx("div",{className:"text-4xl text-slate-600 group-hover:text-emerald-500 mb-2 transition-colors",children:"+"}),b.jsx("span",{className:"text-slate-500 font-medium",children:""})]}),e.map(p=>b.jsxs("div",{onClick:()=>t(p),onContextMenu:m=>a(m,p.id),className:"group relative aspect-[4/3] bg-slate-800 rounded-xl border border-slate-700 hover:border-emerald-500 hover:shadow-xl transition-all cursor-pointer flex flex-col overflow-hidden",children:[b.jsx("div",{className:"flex-1 bg-slate-900 relative pointer-events-none",children:p.cover?b.jsx("img",{src:p.cover,className:"w-full h-full object-cover"}):b.jsx("div",{className:"w-full h-full flex items-center justify-center text-slate-700 text-4xl",children:""})}),b.jsx("div",{className:"h-12 bg-slate-800 border-t border-slate-700 flex items-center px-2",onClick:m=>m.stopPropagation(),children:b.jsx("input",{value:p.name,onChange:m=>f(p.id,m.target.value),className:"bg-transparent font-bold text-slate-200 w-full text-center outline-none focus:bg-slate-900 rounded px-1"})})]},p.id))]})}),i.visible&&b.jsxs("div",{className:"fixed z-[9999] bg-slate-800 border border-slate-600 rounded-lg shadow-xl py-1 w-32 flex flex-col",style:{top:i.y,left:i.x},onClick:p=>p.stopPropagation(),children:[b.jsx("button",{onClick:()=>{var p;return(p=r.current)==null?void 0:p.click()},className:"px-4 py-2 text-left text-sm text-slate-200 hover:bg-emerald-600",children:" "}),b.jsx("button",{onClick:d,className:"px-4 py-2 text-left text-sm text-red-400 hover:bg-red-600 hover:text-white",children:" "})]})]})}var uE={exports:{}},Va={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */Va.exports;var ib;function o3(){return ib||(ib=1,function(t,e){(function(){var n,r="4.17.21",i=200,s="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",o="Expected a function",a="Invalid `variable` option passed into `_.template`",c="__lodash_hash_undefined__",f=500,d="__lodash_placeholder__",p=1,m=2,g=4,v=1,S=2,C=1,x=2,w=4,E=8,M=16,_=32,O=64,A=128,R=256,z=512,B=30,te="...",re=800,le=16,de=1,pe=2,ee=3,ie=1/0,L=9007199254740991,$=17976931348623157e292,K=NaN,Z=4294967295,ge=Z-1,Q=Z>>>1,Qe=[["ary",A],["bind",C],["bindKey",x],["curry",E],["curryRight",M],["flip",z],["partial",_],["partialRight",O],["rearg",R]],it="[object Arguments]",Xe="[object Array]",ze="[object AsyncFunction]",H="[object Boolean]",se="[object Date]",he="[object DOMException]",ve="[object Error]",Ze="[object Function]",Se="[object GeneratorFunction]",Ee="[object Map]",An="[object Number]",ns="[object Null]",Wt="[object Object]",Pn="[object Promise]",ui="[object Proxy]",jt="[object RegExp]",Ue="[object Set]",Tt="[object String]",Nt="[object Symbol]",Ni="[object Undefined]",Wr="[object WeakMap]",Xo="[object WeakSet]",Kr="[object ArrayBuffer]",Jn="[object DataView]",ht="[object Float32Array]",ce="[object Float64Array]",De="[object Int8Array]",Fe="[object Int16Array]",rs="[object Int32Array]",Rn="[object Uint8Array]",Yn="[object Uint8ClampedArray]",wt="[object Uint16Array]",pt="[object Uint32Array]",ci=/\b__p \+= '';/g,xr=/\b(__p \+=) '' \+/g,qr=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Dn=/&(?:amp|lt|gt|quot|#39);/g,Qn=/[&<>"']/g,hn=RegExp(Dn.source),bt=RegExp(Qn.source),fi=/<%-([\s\S]+?)%>/g,Zn=/<%([\s\S]+?)%>/g,wr=/<%=([\s\S]+?)%>/g,nn=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,br=/^\w*$/,ro=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,pn=/[\\^$.*+?()[\]{}|]/g,In=RegExp(pn.source),mn=/^\s+/,Ln=/\s/,Sr=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,kr=/\{\n\/\* \[wrapped with (.+)\] \*/,Vh=/,? & /,Wh=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,gn=/[()=,{}\[\]\/\s]/,yn=/\\(\\)?/g,jn=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,vn=/\w*$/,aa=/^[-+]0x[0-9a-f]+$/i,er=/^0b[01]+$/i,Yu=/^\[object .+?Constructor\]$/,Qu=/^0o[0-7]+$/i,Zu=/^(?:0|[1-9]\d*)$/,ec=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,io=/($^)/,tc=/['\n\r\u2028\u2029\\]/g,Jo="\\ud800-\\udfff",Kh="\\u0300-\\u036f",ua="\\ufe20-\\ufe2f",ca="\\u20d0-\\u20ff",nc=Kh+ua+ca,rc="\\u2700-\\u27bf",ic="a-z\\xdf-\\xf6\\xf8-\\xff",fa="\\xac\\xb1\\xd7\\xf7",CN="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",EN="\\u2000-\\u206f",TN=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Tv="A-Z\\xc0-\\xd6\\xd8-\\xde",Nv="\\ufe0e\\ufe0f",Mv=fa+CN+EN+TN,qh="[']",NN="["+Jo+"]",_v="["+Mv+"]",sc="["+nc+"]",Ov="\\d+",MN="["+rc+"]",Av="["+ic+"]",Pv="[^"+Jo+Mv+Ov+rc+ic+Tv+"]",Gh="\\ud83c[\\udffb-\\udfff]",_N="(?:"+sc+"|"+Gh+")",Rv="[^"+Jo+"]",Xh="(?:\\ud83c[\\udde6-\\uddff]){2}",Jh="[\\ud800-\\udbff][\\udc00-\\udfff]",Yo="["+Tv+"]",Dv="\\u200d",Iv="(?:"+Av+"|"+Pv+")",ON="(?:"+Yo+"|"+Pv+")",Lv="(?:"+qh+"(?:d|ll|m|re|s|t|ve))?",jv="(?:"+qh+"(?:D|LL|M|RE|S|T|VE))?",zv=_N+"?",Bv="["+Nv+"]?",AN="(?:"+Dv+"(?:"+[Rv,Xh,Jh].join("|")+")"+Bv+zv+")*",PN="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",RN="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Fv=Bv+zv+AN,DN="(?:"+[MN,Xh,Jh].join("|")+")"+Fv,IN="(?:"+[Rv+sc+"?",sc,Xh,Jh,NN].join("|")+")",LN=RegExp(qh,"g"),jN=RegExp(sc,"g"),Yh=RegExp(Gh+"(?="+Gh+")|"+IN+Fv,"g"),zN=RegExp([Yo+"?"+Av+"+"+Lv+"(?="+[_v,Yo,"$"].join("|")+")",ON+"+"+jv+"(?="+[_v,Yo+Iv,"$"].join("|")+")",Yo+"?"+Iv+"+"+Lv,Yo+"+"+jv,RN,PN,Ov,DN].join("|"),"g"),BN=RegExp("["+Dv+Jo+nc+Nv+"]"),FN=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,$N=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],HN=-1,et={};et[ht]=et[ce]=et[De]=et[Fe]=et[rs]=et[Rn]=et[Yn]=et[wt]=et[pt]=!0,et[it]=et[Xe]=et[Kr]=et[H]=et[Jn]=et[se]=et[ve]=et[Ze]=et[Ee]=et[An]=et[Wt]=et[jt]=et[Ue]=et[Tt]=et[Wr]=!1;var Je={};Je[it]=Je[Xe]=Je[Kr]=Je[Jn]=Je[H]=Je[se]=Je[ht]=Je[ce]=Je[De]=Je[Fe]=Je[rs]=Je[Ee]=Je[An]=Je[Wt]=Je[jt]=Je[Ue]=Je[Tt]=Je[Nt]=Je[Rn]=Je[Yn]=Je[wt]=Je[pt]=!0,Je[ve]=Je[Ze]=Je[Wr]=!1;var UN={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},VN={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},WN={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},KN={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},qN=parseFloat,GN=parseInt,$v=typeof gl=="object"&&gl&&gl.Object===Object&&gl,XN=typeof self=="object"&&self&&self.Object===Object&&self,Kt=$v||XN||Function("return this")(),Qh=e&&!e.nodeType&&e,so=Qh&&!0&&t&&!t.nodeType&&t,Hv=so&&so.exports===Qh,Zh=Hv&&$v.process,Cr=function(){try{var I=so&&so.require&&so.require("util").types;return I||Zh&&Zh.binding&&Zh.binding("util")}catch{}}(),Uv=Cr&&Cr.isArrayBuffer,Vv=Cr&&Cr.isDate,Wv=Cr&&Cr.isMap,Kv=Cr&&Cr.isRegExp,qv=Cr&&Cr.isSet,Gv=Cr&&Cr.isTypedArray;function tr(I,U,F){switch(F.length){case 0:return I.call(U);case 1:return I.call(U,F[0]);case 2:return I.call(U,F[0],F[1]);case 3:return I.call(U,F[0],F[1],F[2])}return I.apply(U,F)}function JN(I,U,F,ae){for(var Ce=-1,$e=I==null?0:I.length;++Ce<$e;){var Pt=I[Ce];U(ae,Pt,F(Pt),I)}return ae}function Er(I,U){for(var F=-1,ae=I==null?0:I.length;++F<ae&&U(I[F],F,I)!==!1;);return I}function YN(I,U){for(var F=I==null?0:I.length;F--&&U(I[F],F,I)!==!1;);return I}function Xv(I,U){for(var F=-1,ae=I==null?0:I.length;++F<ae;)if(!U(I[F],F,I))return!1;return!0}function is(I,U){for(var F=-1,ae=I==null?0:I.length,Ce=0,$e=[];++F<ae;){var Pt=I[F];U(Pt,F,I)&&($e[Ce++]=Pt)}return $e}function oc(I,U){var F=I==null?0:I.length;return!!F&&Qo(I,U,0)>-1}function ep(I,U,F){for(var ae=-1,Ce=I==null?0:I.length;++ae<Ce;)if(F(U,I[ae]))return!0;return!1}function st(I,U){for(var F=-1,ae=I==null?0:I.length,Ce=Array(ae);++F<ae;)Ce[F]=U(I[F],F,I);return Ce}function ss(I,U){for(var F=-1,ae=U.length,Ce=I.length;++F<ae;)I[Ce+F]=U[F];return I}function tp(I,U,F,ae){var Ce=-1,$e=I==null?0:I.length;for(ae&&$e&&(F=I[++Ce]);++Ce<$e;)F=U(F,I[Ce],Ce,I);return F}function QN(I,U,F,ae){var Ce=I==null?0:I.length;for(ae&&Ce&&(F=I[--Ce]);Ce--;)F=U(F,I[Ce],Ce,I);return F}function np(I,U){for(var F=-1,ae=I==null?0:I.length;++F<ae;)if(U(I[F],F,I))return!0;return!1}var ZN=rp("length");function eM(I){return I.split("")}function tM(I){return I.match(Wh)||[]}function Jv(I,U,F){var ae;return F(I,function(Ce,$e,Pt){if(U(Ce,$e,Pt))return ae=$e,!1}),ae}function lc(I,U,F,ae){for(var Ce=I.length,$e=F+(ae?1:-1);ae?$e--:++$e<Ce;)if(U(I[$e],$e,I))return $e;return-1}function Qo(I,U,F){return U===U?hM(I,U,F):lc(I,Yv,F)}function nM(I,U,F,ae){for(var Ce=F-1,$e=I.length;++Ce<$e;)if(ae(I[Ce],U))return Ce;return-1}function Yv(I){return I!==I}function Qv(I,U){var F=I==null?0:I.length;return F?sp(I,U)/F:K}function rp(I){return function(U){return U==null?n:U[I]}}function ip(I){return function(U){return I==null?n:I[U]}}function Zv(I,U,F,ae,Ce){return Ce(I,function($e,Pt,qe){F=ae?(ae=!1,$e):U(F,$e,Pt,qe)}),F}function rM(I,U){var F=I.length;for(I.sort(U);F--;)I[F]=I[F].value;return I}function sp(I,U){for(var F,ae=-1,Ce=I.length;++ae<Ce;){var $e=U(I[ae]);$e!==n&&(F=F===n?$e:F+$e)}return F}function op(I,U){for(var F=-1,ae=Array(I);++F<I;)ae[F]=U(F);return ae}function iM(I,U){return st(U,function(F){return[F,I[F]]})}function ex(I){return I&&I.slice(0,ix(I)+1).replace(mn,"")}function nr(I){return function(U){return I(U)}}function lp(I,U){return st(U,function(F){return I[F]})}function da(I,U){return I.has(U)}function tx(I,U){for(var F=-1,ae=I.length;++F<ae&&Qo(U,I[F],0)>-1;);return F}function nx(I,U){for(var F=I.length;F--&&Qo(U,I[F],0)>-1;);return F}function sM(I,U){for(var F=I.length,ae=0;F--;)I[F]===U&&++ae;return ae}var oM=ip(UN),lM=ip(VN);function aM(I){return"\\"+KN[I]}function uM(I,U){return I==null?n:I[U]}function Zo(I){return BN.test(I)}function cM(I){return FN.test(I)}function fM(I){for(var U,F=[];!(U=I.next()).done;)F.push(U.value);return F}function ap(I){var U=-1,F=Array(I.size);return I.forEach(function(ae,Ce){F[++U]=[Ce,ae]}),F}function rx(I,U){return function(F){return I(U(F))}}function ls(I,U){for(var F=-1,ae=I.length,Ce=0,$e=[];++F<ae;){var Pt=I[F];(Pt===U||Pt===d)&&(I[F]=d,$e[Ce++]=F)}return $e}function ac(I){var U=-1,F=Array(I.size);return I.forEach(function(ae){F[++U]=ae}),F}function dM(I){var U=-1,F=Array(I.size);return I.forEach(function(ae){F[++U]=[ae,ae]}),F}function hM(I,U,F){for(var ae=F-1,Ce=I.length;++ae<Ce;)if(I[ae]===U)return ae;return-1}function pM(I,U,F){for(var ae=F+1;ae--;)if(I[ae]===U)return ae;return ae}function el(I){return Zo(I)?gM(I):ZN(I)}function Gr(I){return Zo(I)?yM(I):eM(I)}function ix(I){for(var U=I.length;U--&&Ln.test(I.charAt(U)););return U}var mM=ip(WN);function gM(I){for(var U=Yh.lastIndex=0;Yh.test(I);)++U;return U}function yM(I){return I.match(Yh)||[]}function vM(I){return I.match(zN)||[]}var xM=function I(U){U=U==null?Kt:tl.defaults(Kt.Object(),U,tl.pick(Kt,$N));var F=U.Array,ae=U.Date,Ce=U.Error,$e=U.Function,Pt=U.Math,qe=U.Object,up=U.RegExp,wM=U.String,Tr=U.TypeError,uc=F.prototype,bM=$e.prototype,nl=qe.prototype,cc=U["__core-js_shared__"],fc=bM.toString,Ve=nl.hasOwnProperty,SM=0,sx=function(){var l=/[^.]+$/.exec(cc&&cc.keys&&cc.keys.IE_PROTO||"");return l?"Symbol(src)_1."+l:""}(),dc=nl.toString,kM=fc.call(qe),CM=Kt._,EM=up("^"+fc.call(Ve).replace(pn,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),hc=Hv?U.Buffer:n,as=U.Symbol,pc=U.Uint8Array,ox=hc?hc.allocUnsafe:n,mc=rx(qe.getPrototypeOf,qe),lx=qe.create,ax=nl.propertyIsEnumerable,gc=uc.splice,ux=as?as.isConcatSpreadable:n,ha=as?as.iterator:n,oo=as?as.toStringTag:n,yc=function(){try{var l=fo(qe,"defineProperty");return l({},"",{}),l}catch{}}(),TM=U.clearTimeout!==Kt.clearTimeout&&U.clearTimeout,NM=ae&&ae.now!==Kt.Date.now&&ae.now,MM=U.setTimeout!==Kt.setTimeout&&U.setTimeout,vc=Pt.ceil,xc=Pt.floor,cp=qe.getOwnPropertySymbols,_M=hc?hc.isBuffer:n,cx=U.isFinite,OM=uc.join,AM=rx(qe.keys,qe),Rt=Pt.max,rn=Pt.min,PM=ae.now,RM=U.parseInt,fx=Pt.random,DM=uc.reverse,fp=fo(U,"DataView"),pa=fo(U,"Map"),dp=fo(U,"Promise"),rl=fo(U,"Set"),ma=fo(U,"WeakMap"),ga=fo(qe,"create"),wc=ma&&new ma,il={},IM=ho(fp),LM=ho(pa),jM=ho(dp),zM=ho(rl),BM=ho(ma),bc=as?as.prototype:n,ya=bc?bc.valueOf:n,dx=bc?bc.toString:n;function T(l){if(mt(l)&&!Te(l)&&!(l instanceof Ie)){if(l instanceof Nr)return l;if(Ve.call(l,"__wrapped__"))return h1(l)}return new Nr(l)}var sl=function(){function l(){}return function(u){if(!lt(u))return{};if(lx)return lx(u);l.prototype=u;var h=new l;return l.prototype=n,h}}();function Sc(){}function Nr(l,u){this.__wrapped__=l,this.__actions__=[],this.__chain__=!!u,this.__index__=0,this.__values__=n}T.templateSettings={escape:fi,evaluate:Zn,interpolate:wr,variable:"",imports:{_:T}},T.prototype=Sc.prototype,T.prototype.constructor=T,Nr.prototype=sl(Sc.prototype),Nr.prototype.constructor=Nr;function Ie(l){this.__wrapped__=l,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Z,this.__views__=[]}function FM(){var l=new Ie(this.__wrapped__);return l.__actions__=zn(this.__actions__),l.__dir__=this.__dir__,l.__filtered__=this.__filtered__,l.__iteratees__=zn(this.__iteratees__),l.__takeCount__=this.__takeCount__,l.__views__=zn(this.__views__),l}function $M(){if(this.__filtered__){var l=new Ie(this);l.__dir__=-1,l.__filtered__=!0}else l=this.clone(),l.__dir__*=-1;return l}function HM(){var l=this.__wrapped__.value(),u=this.__dir__,h=Te(l),y=u<0,k=h?l.length:0,N=eO(0,k,this.__views__),P=N.start,D=N.end,j=D-P,V=y?D:P-1,W=this.__iteratees__,q=W.length,ne=0,fe=rn(j,this.__takeCount__);if(!h||!y&&k==j&&fe==j)return Lx(l,this.__actions__);var we=[];e:for(;j--&&ne<fe;){V+=u;for(var Me=-1,be=l[V];++Me<q;){var Pe=W[Me],Le=Pe.iteratee,sr=Pe.type,bn=Le(be);if(sr==pe)be=bn;else if(!bn){if(sr==de)continue e;break e}}we[ne++]=be}return we}Ie.prototype=sl(Sc.prototype),Ie.prototype.constructor=Ie;function lo(l){var u=-1,h=l==null?0:l.length;for(this.clear();++u<h;){var y=l[u];this.set(y[0],y[1])}}function UM(){this.__data__=ga?ga(null):{},this.size=0}function VM(l){var u=this.has(l)&&delete this.__data__[l];return this.size-=u?1:0,u}function WM(l){var u=this.__data__;if(ga){var h=u[l];return h===c?n:h}return Ve.call(u,l)?u[l]:n}function KM(l){var u=this.__data__;return ga?u[l]!==n:Ve.call(u,l)}function qM(l,u){var h=this.__data__;return this.size+=this.has(l)?0:1,h[l]=ga&&u===n?c:u,this}lo.prototype.clear=UM,lo.prototype.delete=VM,lo.prototype.get=WM,lo.prototype.has=KM,lo.prototype.set=qM;function Mi(l){var u=-1,h=l==null?0:l.length;for(this.clear();++u<h;){var y=l[u];this.set(y[0],y[1])}}function GM(){this.__data__=[],this.size=0}function XM(l){var u=this.__data__,h=kc(u,l);if(h<0)return!1;var y=u.length-1;return h==y?u.pop():gc.call(u,h,1),--this.size,!0}function JM(l){var u=this.__data__,h=kc(u,l);return h<0?n:u[h][1]}function YM(l){return kc(this.__data__,l)>-1}function QM(l,u){var h=this.__data__,y=kc(h,l);return y<0?(++this.size,h.push([l,u])):h[y][1]=u,this}Mi.prototype.clear=GM,Mi.prototype.delete=XM,Mi.prototype.get=JM,Mi.prototype.has=YM,Mi.prototype.set=QM;function _i(l){var u=-1,h=l==null?0:l.length;for(this.clear();++u<h;){var y=l[u];this.set(y[0],y[1])}}function ZM(){this.size=0,this.__data__={hash:new lo,map:new(pa||Mi),string:new lo}}function e_(l){var u=Ic(this,l).delete(l);return this.size-=u?1:0,u}function t_(l){return Ic(this,l).get(l)}function n_(l){return Ic(this,l).has(l)}function r_(l,u){var h=Ic(this,l),y=h.size;return h.set(l,u),this.size+=h.size==y?0:1,this}_i.prototype.clear=ZM,_i.prototype.delete=e_,_i.prototype.get=t_,_i.prototype.has=n_,_i.prototype.set=r_;function ao(l){var u=-1,h=l==null?0:l.length;for(this.__data__=new _i;++u<h;)this.add(l[u])}function i_(l){return this.__data__.set(l,c),this}function s_(l){return this.__data__.has(l)}ao.prototype.add=ao.prototype.push=i_,ao.prototype.has=s_;function Xr(l){var u=this.__data__=new Mi(l);this.size=u.size}function o_(){this.__data__=new Mi,this.size=0}function l_(l){var u=this.__data__,h=u.delete(l);return this.size=u.size,h}function a_(l){return this.__data__.get(l)}function u_(l){return this.__data__.has(l)}function c_(l,u){var h=this.__data__;if(h instanceof Mi){var y=h.__data__;if(!pa||y.length<i-1)return y.push([l,u]),this.size=++h.size,this;h=this.__data__=new _i(y)}return h.set(l,u),this.size=h.size,this}Xr.prototype.clear=o_,Xr.prototype.delete=l_,Xr.prototype.get=a_,Xr.prototype.has=u_,Xr.prototype.set=c_;function hx(l,u){var h=Te(l),y=!h&&po(l),k=!h&&!y&&hs(l),N=!h&&!y&&!k&&ul(l),P=h||y||k||N,D=P?op(l.length,wM):[],j=D.length;for(var V in l)(u||Ve.call(l,V))&&!(P&&(V=="length"||k&&(V=="offset"||V=="parent")||N&&(V=="buffer"||V=="byteLength"||V=="byteOffset")||Ri(V,j)))&&D.push(V);return D}function px(l){var u=l.length;return u?l[kp(0,u-1)]:n}function f_(l,u){return Lc(zn(l),uo(u,0,l.length))}function d_(l){return Lc(zn(l))}function hp(l,u,h){(h!==n&&!Jr(l[u],h)||h===n&&!(u in l))&&Oi(l,u,h)}function va(l,u,h){var y=l[u];(!(Ve.call(l,u)&&Jr(y,h))||h===n&&!(u in l))&&Oi(l,u,h)}function kc(l,u){for(var h=l.length;h--;)if(Jr(l[h][0],u))return h;return-1}function h_(l,u,h,y){return us(l,function(k,N,P){u(y,k,h(k),P)}),y}function mx(l,u){return l&&hi(u,zt(u),l)}function p_(l,u){return l&&hi(u,Fn(u),l)}function Oi(l,u,h){u=="__proto__"&&yc?yc(l,u,{configurable:!0,enumerable:!0,value:h,writable:!0}):l[u]=h}function pp(l,u){for(var h=-1,y=u.length,k=F(y),N=l==null;++h<y;)k[h]=N?n:Gp(l,u[h]);return k}function uo(l,u,h){return l===l&&(h!==n&&(l=l<=h?l:h),u!==n&&(l=l>=u?l:u)),l}function Mr(l,u,h,y,k,N){var P,D=u&p,j=u&m,V=u&g;if(h&&(P=k?h(l,y,k,N):h(l)),P!==n)return P;if(!lt(l))return l;var W=Te(l);if(W){if(P=nO(l),!D)return zn(l,P)}else{var q=sn(l),ne=q==Ze||q==Se;if(hs(l))return Bx(l,D);if(q==Wt||q==it||ne&&!k){if(P=j||ne?{}:i1(l),!D)return j?W_(l,p_(P,l)):V_(l,mx(P,l))}else{if(!Je[q])return k?l:{};P=rO(l,q,D)}}N||(N=new Xr);var fe=N.get(l);if(fe)return fe;N.set(l,P),R1(l)?l.forEach(function(be){P.add(Mr(be,u,h,be,l,N))}):A1(l)&&l.forEach(function(be,Pe){P.set(Pe,Mr(be,u,h,Pe,l,N))});var we=V?j?Dp:Rp:j?Fn:zt,Me=W?n:we(l);return Er(Me||l,function(be,Pe){Me&&(Pe=be,be=l[Pe]),va(P,Pe,Mr(be,u,h,Pe,l,N))}),P}function m_(l){var u=zt(l);return function(h){return gx(h,l,u)}}function gx(l,u,h){var y=h.length;if(l==null)return!y;for(l=qe(l);y--;){var k=h[y],N=u[k],P=l[k];if(P===n&&!(k in l)||!N(P))return!1}return!0}function yx(l,u,h){if(typeof l!="function")throw new Tr(o);return Ea(function(){l.apply(n,h)},u)}function xa(l,u,h,y){var k=-1,N=oc,P=!0,D=l.length,j=[],V=u.length;if(!D)return j;h&&(u=st(u,nr(h))),y?(N=ep,P=!1):u.length>=i&&(N=da,P=!1,u=new ao(u));e:for(;++k<D;){var W=l[k],q=h==null?W:h(W);if(W=y||W!==0?W:0,P&&q===q){for(var ne=V;ne--;)if(u[ne]===q)continue e;j.push(W)}else N(u,q,y)||j.push(W)}return j}var us=Vx(di),vx=Vx(gp,!0);function g_(l,u){var h=!0;return us(l,function(y,k,N){return h=!!u(y,k,N),h}),h}function Cc(l,u,h){for(var y=-1,k=l.length;++y<k;){var N=l[y],P=u(N);if(P!=null&&(D===n?P===P&&!ir(P):h(P,D)))var D=P,j=N}return j}function y_(l,u,h,y){var k=l.length;for(h=Ne(h),h<0&&(h=-h>k?0:k+h),y=y===n||y>k?k:Ne(y),y<0&&(y+=k),y=h>y?0:I1(y);h<y;)l[h++]=u;return l}function xx(l,u){var h=[];return us(l,function(y,k,N){u(y,k,N)&&h.push(y)}),h}function qt(l,u,h,y,k){var N=-1,P=l.length;for(h||(h=sO),k||(k=[]);++N<P;){var D=l[N];u>0&&h(D)?u>1?qt(D,u-1,h,y,k):ss(k,D):y||(k[k.length]=D)}return k}var mp=Wx(),wx=Wx(!0);function di(l,u){return l&&mp(l,u,zt)}function gp(l,u){return l&&wx(l,u,zt)}function Ec(l,u){return is(u,function(h){return Di(l[h])})}function co(l,u){u=fs(u,l);for(var h=0,y=u.length;l!=null&&h<y;)l=l[pi(u[h++])];return h&&h==y?l:n}function bx(l,u,h){var y=u(l);return Te(l)?y:ss(y,h(l))}function xn(l){return l==null?l===n?Ni:ns:oo&&oo in qe(l)?Z_(l):dO(l)}function yp(l,u){return l>u}function v_(l,u){return l!=null&&Ve.call(l,u)}function x_(l,u){return l!=null&&u in qe(l)}function w_(l,u,h){return l>=rn(u,h)&&l<Rt(u,h)}function vp(l,u,h){for(var y=h?ep:oc,k=l[0].length,N=l.length,P=N,D=F(N),j=1/0,V=[];P--;){var W=l[P];P&&u&&(W=st(W,nr(u))),j=rn(W.length,j),D[P]=!h&&(u||k>=120&&W.length>=120)?new ao(P&&W):n}W=l[0];var q=-1,ne=D[0];e:for(;++q<k&&V.length<j;){var fe=W[q],we=u?u(fe):fe;if(fe=h||fe!==0?fe:0,!(ne?da(ne,we):y(V,we,h))){for(P=N;--P;){var Me=D[P];if(!(Me?da(Me,we):y(l[P],we,h)))continue e}ne&&ne.push(we),V.push(fe)}}return V}function b_(l,u,h,y){return di(l,function(k,N,P){u(y,h(k),N,P)}),y}function wa(l,u,h){u=fs(u,l),l=a1(l,u);var y=l==null?l:l[pi(Or(u))];return y==null?n:tr(y,l,h)}function Sx(l){return mt(l)&&xn(l)==it}function S_(l){return mt(l)&&xn(l)==Kr}function k_(l){return mt(l)&&xn(l)==se}function ba(l,u,h,y,k){return l===u?!0:l==null||u==null||!mt(l)&&!mt(u)?l!==l&&u!==u:C_(l,u,h,y,ba,k)}function C_(l,u,h,y,k,N){var P=Te(l),D=Te(u),j=P?Xe:sn(l),V=D?Xe:sn(u);j=j==it?Wt:j,V=V==it?Wt:V;var W=j==Wt,q=V==Wt,ne=j==V;if(ne&&hs(l)){if(!hs(u))return!1;P=!0,W=!1}if(ne&&!W)return N||(N=new Xr),P||ul(l)?t1(l,u,h,y,k,N):Y_(l,u,j,h,y,k,N);if(!(h&v)){var fe=W&&Ve.call(l,"__wrapped__"),we=q&&Ve.call(u,"__wrapped__");if(fe||we){var Me=fe?l.value():l,be=we?u.value():u;return N||(N=new Xr),k(Me,be,h,y,N)}}return ne?(N||(N=new Xr),Q_(l,u,h,y,k,N)):!1}function E_(l){return mt(l)&&sn(l)==Ee}function xp(l,u,h,y){var k=h.length,N=k,P=!y;if(l==null)return!N;for(l=qe(l);k--;){var D=h[k];if(P&&D[2]?D[1]!==l[D[0]]:!(D[0]in l))return!1}for(;++k<N;){D=h[k];var j=D[0],V=l[j],W=D[1];if(P&&D[2]){if(V===n&&!(j in l))return!1}else{var q=new Xr;if(y)var ne=y(V,W,j,l,u,q);if(!(ne===n?ba(W,V,v|S,y,q):ne))return!1}}return!0}function kx(l){if(!lt(l)||lO(l))return!1;var u=Di(l)?EM:Yu;return u.test(ho(l))}function T_(l){return mt(l)&&xn(l)==jt}function N_(l){return mt(l)&&sn(l)==Ue}function M_(l){return mt(l)&&Hc(l.length)&&!!et[xn(l)]}function Cx(l){return typeof l=="function"?l:l==null?$n:typeof l=="object"?Te(l)?Nx(l[0],l[1]):Tx(l):K1(l)}function wp(l){if(!Ca(l))return AM(l);var u=[];for(var h in qe(l))Ve.call(l,h)&&h!="constructor"&&u.push(h);return u}function __(l){if(!lt(l))return fO(l);var u=Ca(l),h=[];for(var y in l)y=="constructor"&&(u||!Ve.call(l,y))||h.push(y);return h}function bp(l,u){return l<u}function Ex(l,u){var h=-1,y=Bn(l)?F(l.length):[];return us(l,function(k,N,P){y[++h]=u(k,N,P)}),y}function Tx(l){var u=Lp(l);return u.length==1&&u[0][2]?o1(u[0][0],u[0][1]):function(h){return h===l||xp(h,l,u)}}function Nx(l,u){return zp(l)&&s1(u)?o1(pi(l),u):function(h){var y=Gp(h,l);return y===n&&y===u?Xp(h,l):ba(u,y,v|S)}}function Tc(l,u,h,y,k){l!==u&&mp(u,function(N,P){if(k||(k=new Xr),lt(N))O_(l,u,P,h,Tc,y,k);else{var D=y?y(Fp(l,P),N,P+"",l,u,k):n;D===n&&(D=N),hp(l,P,D)}},Fn)}function O_(l,u,h,y,k,N,P){var D=Fp(l,h),j=Fp(u,h),V=P.get(j);if(V){hp(l,h,V);return}var W=N?N(D,j,h+"",l,u,P):n,q=W===n;if(q){var ne=Te(j),fe=!ne&&hs(j),we=!ne&&!fe&&ul(j);W=j,ne||fe||we?Te(D)?W=D:St(D)?W=zn(D):fe?(q=!1,W=Bx(j,!0)):we?(q=!1,W=Fx(j,!0)):W=[]:Ta(j)||po(j)?(W=D,po(D)?W=L1(D):(!lt(D)||Di(D))&&(W=i1(j))):q=!1}q&&(P.set(j,W),k(W,j,y,N,P),P.delete(j)),hp(l,h,W)}function Mx(l,u){var h=l.length;if(h)return u+=u<0?h:0,Ri(u,h)?l[u]:n}function _x(l,u,h){u.length?u=st(u,function(N){return Te(N)?function(P){return co(P,N.length===1?N[0]:N)}:N}):u=[$n];var y=-1;u=st(u,nr(xe()));var k=Ex(l,function(N,P,D){var j=st(u,function(V){return V(N)});return{criteria:j,index:++y,value:N}});return rM(k,function(N,P){return U_(N,P,h)})}function A_(l,u){return Ox(l,u,function(h,y){return Xp(l,y)})}function Ox(l,u,h){for(var y=-1,k=u.length,N={};++y<k;){var P=u[y],D=co(l,P);h(D,P)&&Sa(N,fs(P,l),D)}return N}function P_(l){return function(u){return co(u,l)}}function Sp(l,u,h,y){var k=y?nM:Qo,N=-1,P=u.length,D=l;for(l===u&&(u=zn(u)),h&&(D=st(l,nr(h)));++N<P;)for(var j=0,V=u[N],W=h?h(V):V;(j=k(D,W,j,y))>-1;)D!==l&&gc.call(D,j,1),gc.call(l,j,1);return l}function Ax(l,u){for(var h=l?u.length:0,y=h-1;h--;){var k=u[h];if(h==y||k!==N){var N=k;Ri(k)?gc.call(l,k,1):Tp(l,k)}}return l}function kp(l,u){return l+xc(fx()*(u-l+1))}function R_(l,u,h,y){for(var k=-1,N=Rt(vc((u-l)/(h||1)),0),P=F(N);N--;)P[y?N:++k]=l,l+=h;return P}function Cp(l,u){var h="";if(!l||u<1||u>L)return h;do u%2&&(h+=l),u=xc(u/2),u&&(l+=l);while(u);return h}function Ae(l,u){return $p(l1(l,u,$n),l+"")}function D_(l){return px(cl(l))}function I_(l,u){var h=cl(l);return Lc(h,uo(u,0,h.length))}function Sa(l,u,h,y){if(!lt(l))return l;u=fs(u,l);for(var k=-1,N=u.length,P=N-1,D=l;D!=null&&++k<N;){var j=pi(u[k]),V=h;if(j==="__proto__"||j==="constructor"||j==="prototype")return l;if(k!=P){var W=D[j];V=y?y(W,j,D):n,V===n&&(V=lt(W)?W:Ri(u[k+1])?[]:{})}va(D,j,V),D=D[j]}return l}var Px=wc?function(l,u){return wc.set(l,u),l}:$n,L_=yc?function(l,u){return yc(l,"toString",{configurable:!0,enumerable:!1,value:Yp(u),writable:!0})}:$n;function j_(l){return Lc(cl(l))}function _r(l,u,h){var y=-1,k=l.length;u<0&&(u=-u>k?0:k+u),h=h>k?k:h,h<0&&(h+=k),k=u>h?0:h-u>>>0,u>>>=0;for(var N=F(k);++y<k;)N[y]=l[y+u];return N}function z_(l,u){var h;return us(l,function(y,k,N){return h=u(y,k,N),!h}),!!h}function Nc(l,u,h){var y=0,k=l==null?y:l.length;if(typeof u=="number"&&u===u&&k<=Q){for(;y<k;){var N=y+k>>>1,P=l[N];P!==null&&!ir(P)&&(h?P<=u:P<u)?y=N+1:k=N}return k}return Ep(l,u,$n,h)}function Ep(l,u,h,y){var k=0,N=l==null?0:l.length;if(N===0)return 0;u=h(u);for(var P=u!==u,D=u===null,j=ir(u),V=u===n;k<N;){var W=xc((k+N)/2),q=h(l[W]),ne=q!==n,fe=q===null,we=q===q,Me=ir(q);if(P)var be=y||we;else V?be=we&&(y||ne):D?be=we&&ne&&(y||!fe):j?be=we&&ne&&!fe&&(y||!Me):fe||Me?be=!1:be=y?q<=u:q<u;be?k=W+1:N=W}return rn(N,ge)}function Rx(l,u){for(var h=-1,y=l.length,k=0,N=[];++h<y;){var P=l[h],D=u?u(P):P;if(!h||!Jr(D,j)){var j=D;N[k++]=P===0?0:P}}return N}function Dx(l){return typeof l=="number"?l:ir(l)?K:+l}function rr(l){if(typeof l=="string")return l;if(Te(l))return st(l,rr)+"";if(ir(l))return dx?dx.call(l):"";var u=l+"";return u=="0"&&1/l==-ie?"-0":u}function cs(l,u,h){var y=-1,k=oc,N=l.length,P=!0,D=[],j=D;if(h)P=!1,k=ep;else if(N>=i){var V=u?null:X_(l);if(V)return ac(V);P=!1,k=da,j=new ao}else j=u?[]:D;e:for(;++y<N;){var W=l[y],q=u?u(W):W;if(W=h||W!==0?W:0,P&&q===q){for(var ne=j.length;ne--;)if(j[ne]===q)continue e;u&&j.push(q),D.push(W)}else k(j,q,h)||(j!==D&&j.push(q),D.push(W))}return D}function Tp(l,u){return u=fs(u,l),l=a1(l,u),l==null||delete l[pi(Or(u))]}function Ix(l,u,h,y){return Sa(l,u,h(co(l,u)),y)}function Mc(l,u,h,y){for(var k=l.length,N=y?k:-1;(y?N--:++N<k)&&u(l[N],N,l););return h?_r(l,y?0:N,y?N+1:k):_r(l,y?N+1:0,y?k:N)}function Lx(l,u){var h=l;return h instanceof Ie&&(h=h.value()),tp(u,function(y,k){return k.func.apply(k.thisArg,ss([y],k.args))},h)}function Np(l,u,h){var y=l.length;if(y<2)return y?cs(l[0]):[];for(var k=-1,N=F(y);++k<y;)for(var P=l[k],D=-1;++D<y;)D!=k&&(N[k]=xa(N[k]||P,l[D],u,h));return cs(qt(N,1),u,h)}function jx(l,u,h){for(var y=-1,k=l.length,N=u.length,P={};++y<k;){var D=y<N?u[y]:n;h(P,l[y],D)}return P}function Mp(l){return St(l)?l:[]}function _p(l){return typeof l=="function"?l:$n}function fs(l,u){return Te(l)?l:zp(l,u)?[l]:d1(He(l))}var B_=Ae;function ds(l,u,h){var y=l.length;return h=h===n?y:h,!u&&h>=y?l:_r(l,u,h)}var zx=TM||function(l){return Kt.clearTimeout(l)};function Bx(l,u){if(u)return l.slice();var h=l.length,y=ox?ox(h):new l.constructor(h);return l.copy(y),y}function Op(l){var u=new l.constructor(l.byteLength);return new pc(u).set(new pc(l)),u}function F_(l,u){var h=u?Op(l.buffer):l.buffer;return new l.constructor(h,l.byteOffset,l.byteLength)}function $_(l){var u=new l.constructor(l.source,vn.exec(l));return u.lastIndex=l.lastIndex,u}function H_(l){return ya?qe(ya.call(l)):{}}function Fx(l,u){var h=u?Op(l.buffer):l.buffer;return new l.constructor(h,l.byteOffset,l.length)}function $x(l,u){if(l!==u){var h=l!==n,y=l===null,k=l===l,N=ir(l),P=u!==n,D=u===null,j=u===u,V=ir(u);if(!D&&!V&&!N&&l>u||N&&P&&j&&!D&&!V||y&&P&&j||!h&&j||!k)return 1;if(!y&&!N&&!V&&l<u||V&&h&&k&&!y&&!N||D&&h&&k||!P&&k||!j)return-1}return 0}function U_(l,u,h){for(var y=-1,k=l.criteria,N=u.criteria,P=k.length,D=h.length;++y<P;){var j=$x(k[y],N[y]);if(j){if(y>=D)return j;var V=h[y];return j*(V=="desc"?-1:1)}}return l.index-u.index}function Hx(l,u,h,y){for(var k=-1,N=l.length,P=h.length,D=-1,j=u.length,V=Rt(N-P,0),W=F(j+V),q=!y;++D<j;)W[D]=u[D];for(;++k<P;)(q||k<N)&&(W[h[k]]=l[k]);for(;V--;)W[D++]=l[k++];return W}function Ux(l,u,h,y){for(var k=-1,N=l.length,P=-1,D=h.length,j=-1,V=u.length,W=Rt(N-D,0),q=F(W+V),ne=!y;++k<W;)q[k]=l[k];for(var fe=k;++j<V;)q[fe+j]=u[j];for(;++P<D;)(ne||k<N)&&(q[fe+h[P]]=l[k++]);return q}function zn(l,u){var h=-1,y=l.length;for(u||(u=F(y));++h<y;)u[h]=l[h];return u}function hi(l,u,h,y){var k=!h;h||(h={});for(var N=-1,P=u.length;++N<P;){var D=u[N],j=y?y(h[D],l[D],D,h,l):n;j===n&&(j=l[D]),k?Oi(h,D,j):va(h,D,j)}return h}function V_(l,u){return hi(l,jp(l),u)}function W_(l,u){return hi(l,n1(l),u)}function _c(l,u){return function(h,y){var k=Te(h)?JN:h_,N=u?u():{};return k(h,l,xe(y,2),N)}}function ol(l){return Ae(function(u,h){var y=-1,k=h.length,N=k>1?h[k-1]:n,P=k>2?h[2]:n;for(N=l.length>3&&typeof N=="function"?(k--,N):n,P&&wn(h[0],h[1],P)&&(N=k<3?n:N,k=1),u=qe(u);++y<k;){var D=h[y];D&&l(u,D,y,N)}return u})}function Vx(l,u){return function(h,y){if(h==null)return h;if(!Bn(h))return l(h,y);for(var k=h.length,N=u?k:-1,P=qe(h);(u?N--:++N<k)&&y(P[N],N,P)!==!1;);return h}}function Wx(l){return function(u,h,y){for(var k=-1,N=qe(u),P=y(u),D=P.length;D--;){var j=P[l?D:++k];if(h(N[j],j,N)===!1)break}return u}}function K_(l,u,h){var y=u&C,k=ka(l);function N(){var P=this&&this!==Kt&&this instanceof N?k:l;return P.apply(y?h:this,arguments)}return N}function Kx(l){return function(u){u=He(u);var h=Zo(u)?Gr(u):n,y=h?h[0]:u.charAt(0),k=h?ds(h,1).join(""):u.slice(1);return y[l]()+k}}function ll(l){return function(u){return tp(V1(U1(u).replace(LN,"")),l,"")}}function ka(l){return function(){var u=arguments;switch(u.length){case 0:return new l;case 1:return new l(u[0]);case 2:return new l(u[0],u[1]);case 3:return new l(u[0],u[1],u[2]);case 4:return new l(u[0],u[1],u[2],u[3]);case 5:return new l(u[0],u[1],u[2],u[3],u[4]);case 6:return new l(u[0],u[1],u[2],u[3],u[4],u[5]);case 7:return new l(u[0],u[1],u[2],u[3],u[4],u[5],u[6])}var h=sl(l.prototype),y=l.apply(h,u);return lt(y)?y:h}}function q_(l,u,h){var y=ka(l);function k(){for(var N=arguments.length,P=F(N),D=N,j=al(k);D--;)P[D]=arguments[D];var V=N<3&&P[0]!==j&&P[N-1]!==j?[]:ls(P,j);if(N-=V.length,N<h)return Yx(l,u,Oc,k.placeholder,n,P,V,n,n,h-N);var W=this&&this!==Kt&&this instanceof k?y:l;return tr(W,this,P)}return k}function qx(l){return function(u,h,y){var k=qe(u);if(!Bn(u)){var N=xe(h,3);u=zt(u),h=function(D){return N(k[D],D,k)}}var P=l(u,h,y);return P>-1?k[N?u[P]:P]:n}}function Gx(l){return Pi(function(u){var h=u.length,y=h,k=Nr.prototype.thru;for(l&&u.reverse();y--;){var N=u[y];if(typeof N!="function")throw new Tr(o);if(k&&!P&&Dc(N)=="wrapper")var P=new Nr([],!0)}for(y=P?y:h;++y<h;){N=u[y];var D=Dc(N),j=D=="wrapper"?Ip(N):n;j&&Bp(j[0])&&j[1]==(A|E|_|R)&&!j[4].length&&j[9]==1?P=P[Dc(j[0])].apply(P,j[3]):P=N.length==1&&Bp(N)?P[D]():P.thru(N)}return function(){var V=arguments,W=V[0];if(P&&V.length==1&&Te(W))return P.plant(W).value();for(var q=0,ne=h?u[q].apply(this,V):W;++q<h;)ne=u[q].call(this,ne);return ne}})}function Oc(l,u,h,y,k,N,P,D,j,V){var W=u&A,q=u&C,ne=u&x,fe=u&(E|M),we=u&z,Me=ne?n:ka(l);function be(){for(var Pe=arguments.length,Le=F(Pe),sr=Pe;sr--;)Le[sr]=arguments[sr];if(fe)var bn=al(be),or=sM(Le,bn);if(y&&(Le=Hx(Le,y,k,fe)),N&&(Le=Ux(Le,N,P,fe)),Pe-=or,fe&&Pe<V){var kt=ls(Le,bn);return Yx(l,u,Oc,be.placeholder,h,Le,kt,D,j,V-Pe)}var Yr=q?h:this,Li=ne?Yr[l]:l;return Pe=Le.length,D?Le=hO(Le,D):we&&Pe>1&&Le.reverse(),W&&j<Pe&&(Le.length=j),this&&this!==Kt&&this instanceof be&&(Li=Me||ka(Li)),Li.apply(Yr,Le)}return be}function Xx(l,u){return function(h,y){return b_(h,l,u(y),{})}}function Ac(l,u){return function(h,y){var k;if(h===n&&y===n)return u;if(h!==n&&(k=h),y!==n){if(k===n)return y;typeof h=="string"||typeof y=="string"?(h=rr(h),y=rr(y)):(h=Dx(h),y=Dx(y)),k=l(h,y)}return k}}function Ap(l){return Pi(function(u){return u=st(u,nr(xe())),Ae(function(h){var y=this;return l(u,function(k){return tr(k,y,h)})})})}function Pc(l,u){u=u===n?" ":rr(u);var h=u.length;if(h<2)return h?Cp(u,l):u;var y=Cp(u,vc(l/el(u)));return Zo(u)?ds(Gr(y),0,l).join(""):y.slice(0,l)}function G_(l,u,h,y){var k=u&C,N=ka(l);function P(){for(var D=-1,j=arguments.length,V=-1,W=y.length,q=F(W+j),ne=this&&this!==Kt&&this instanceof P?N:l;++V<W;)q[V]=y[V];for(;j--;)q[V++]=arguments[++D];return tr(ne,k?h:this,q)}return P}function Jx(l){return function(u,h,y){return y&&typeof y!="number"&&wn(u,h,y)&&(h=y=n),u=Ii(u),h===n?(h=u,u=0):h=Ii(h),y=y===n?u<h?1:-1:Ii(y),R_(u,h,y,l)}}function Rc(l){return function(u,h){return typeof u=="string"&&typeof h=="string"||(u=Ar(u),h=Ar(h)),l(u,h)}}function Yx(l,u,h,y,k,N,P,D,j,V){var W=u&E,q=W?P:n,ne=W?n:P,fe=W?N:n,we=W?n:N;u|=W?_:O,u&=~(W?O:_),u&w||(u&=-4);var Me=[l,u,k,fe,q,we,ne,D,j,V],be=h.apply(n,Me);return Bp(l)&&u1(be,Me),be.placeholder=y,c1(be,l,u)}function Pp(l){var u=Pt[l];return function(h,y){if(h=Ar(h),y=y==null?0:rn(Ne(y),292),y&&cx(h)){var k=(He(h)+"e").split("e"),N=u(k[0]+"e"+(+k[1]+y));return k=(He(N)+"e").split("e"),+(k[0]+"e"+(+k[1]-y))}return u(h)}}var X_=rl&&1/ac(new rl([,-0]))[1]==ie?function(l){return new rl(l)}:em;function Qx(l){return function(u){var h=sn(u);return h==Ee?ap(u):h==Ue?dM(u):iM(u,l(u))}}function Ai(l,u,h,y,k,N,P,D){var j=u&x;if(!j&&typeof l!="function")throw new Tr(o);var V=y?y.length:0;if(V||(u&=-97,y=k=n),P=P===n?P:Rt(Ne(P),0),D=D===n?D:Ne(D),V-=k?k.length:0,u&O){var W=y,q=k;y=k=n}var ne=j?n:Ip(l),fe=[l,u,h,y,k,W,q,N,P,D];if(ne&&cO(fe,ne),l=fe[0],u=fe[1],h=fe[2],y=fe[3],k=fe[4],D=fe[9]=fe[9]===n?j?0:l.length:Rt(fe[9]-V,0),!D&&u&(E|M)&&(u&=-25),!u||u==C)var we=K_(l,u,h);else u==E||u==M?we=q_(l,u,D):(u==_||u==(C|_))&&!k.length?we=G_(l,u,h,y):we=Oc.apply(n,fe);var Me=ne?Px:u1;return c1(Me(we,fe),l,u)}function Zx(l,u,h,y){return l===n||Jr(l,nl[h])&&!Ve.call(y,h)?u:l}function e1(l,u,h,y,k,N){return lt(l)&&lt(u)&&(N.set(u,l),Tc(l,u,n,e1,N),N.delete(u)),l}function J_(l){return Ta(l)?n:l}function t1(l,u,h,y,k,N){var P=h&v,D=l.length,j=u.length;if(D!=j&&!(P&&j>D))return!1;var V=N.get(l),W=N.get(u);if(V&&W)return V==u&&W==l;var q=-1,ne=!0,fe=h&S?new ao:n;for(N.set(l,u),N.set(u,l);++q<D;){var we=l[q],Me=u[q];if(y)var be=P?y(Me,we,q,u,l,N):y(we,Me,q,l,u,N);if(be!==n){if(be)continue;ne=!1;break}if(fe){if(!np(u,function(Pe,Le){if(!da(fe,Le)&&(we===Pe||k(we,Pe,h,y,N)))return fe.push(Le)})){ne=!1;break}}else if(!(we===Me||k(we,Me,h,y,N))){ne=!1;break}}return N.delete(l),N.delete(u),ne}function Y_(l,u,h,y,k,N,P){switch(h){case Jn:if(l.byteLength!=u.byteLength||l.byteOffset!=u.byteOffset)return!1;l=l.buffer,u=u.buffer;case Kr:return!(l.byteLength!=u.byteLength||!N(new pc(l),new pc(u)));case H:case se:case An:return Jr(+l,+u);case ve:return l.name==u.name&&l.message==u.message;case jt:case Tt:return l==u+"";case Ee:var D=ap;case Ue:var j=y&v;if(D||(D=ac),l.size!=u.size&&!j)return!1;var V=P.get(l);if(V)return V==u;y|=S,P.set(l,u);var W=t1(D(l),D(u),y,k,N,P);return P.delete(l),W;case Nt:if(ya)return ya.call(l)==ya.call(u)}return!1}function Q_(l,u,h,y,k,N){var P=h&v,D=Rp(l),j=D.length,V=Rp(u),W=V.length;if(j!=W&&!P)return!1;for(var q=j;q--;){var ne=D[q];if(!(P?ne in u:Ve.call(u,ne)))return!1}var fe=N.get(l),we=N.get(u);if(fe&&we)return fe==u&&we==l;var Me=!0;N.set(l,u),N.set(u,l);for(var be=P;++q<j;){ne=D[q];var Pe=l[ne],Le=u[ne];if(y)var sr=P?y(Le,Pe,ne,u,l,N):y(Pe,Le,ne,l,u,N);if(!(sr===n?Pe===Le||k(Pe,Le,h,y,N):sr)){Me=!1;break}be||(be=ne=="constructor")}if(Me&&!be){var bn=l.constructor,or=u.constructor;bn!=or&&"constructor"in l&&"constructor"in u&&!(typeof bn=="function"&&bn instanceof bn&&typeof or=="function"&&or instanceof or)&&(Me=!1)}return N.delete(l),N.delete(u),Me}function Pi(l){return $p(l1(l,n,g1),l+"")}function Rp(l){return bx(l,zt,jp)}function Dp(l){return bx(l,Fn,n1)}var Ip=wc?function(l){return wc.get(l)}:em;function Dc(l){for(var u=l.name+"",h=il[u],y=Ve.call(il,u)?h.length:0;y--;){var k=h[y],N=k.func;if(N==null||N==l)return k.name}return u}function al(l){var u=Ve.call(T,"placeholder")?T:l;return u.placeholder}function xe(){var l=T.iteratee||Qp;return l=l===Qp?Cx:l,arguments.length?l(arguments[0],arguments[1]):l}function Ic(l,u){var h=l.__data__;return oO(u)?h[typeof u=="string"?"string":"hash"]:h.map}function Lp(l){for(var u=zt(l),h=u.length;h--;){var y=u[h],k=l[y];u[h]=[y,k,s1(k)]}return u}function fo(l,u){var h=uM(l,u);return kx(h)?h:n}function Z_(l){var u=Ve.call(l,oo),h=l[oo];try{l[oo]=n;var y=!0}catch{}var k=dc.call(l);return y&&(u?l[oo]=h:delete l[oo]),k}var jp=cp?function(l){return l==null?[]:(l=qe(l),is(cp(l),function(u){return ax.call(l,u)}))}:tm,n1=cp?function(l){for(var u=[];l;)ss(u,jp(l)),l=mc(l);return u}:tm,sn=xn;(fp&&sn(new fp(new ArrayBuffer(1)))!=Jn||pa&&sn(new pa)!=Ee||dp&&sn(dp.resolve())!=Pn||rl&&sn(new rl)!=Ue||ma&&sn(new ma)!=Wr)&&(sn=function(l){var u=xn(l),h=u==Wt?l.constructor:n,y=h?ho(h):"";if(y)switch(y){case IM:return Jn;case LM:return Ee;case jM:return Pn;case zM:return Ue;case BM:return Wr}return u});function eO(l,u,h){for(var y=-1,k=h.length;++y<k;){var N=h[y],P=N.size;switch(N.type){case"drop":l+=P;break;case"dropRight":u-=P;break;case"take":u=rn(u,l+P);break;case"takeRight":l=Rt(l,u-P);break}}return{start:l,end:u}}function tO(l){var u=l.match(kr);return u?u[1].split(Vh):[]}function r1(l,u,h){u=fs(u,l);for(var y=-1,k=u.length,N=!1;++y<k;){var P=pi(u[y]);if(!(N=l!=null&&h(l,P)))break;l=l[P]}return N||++y!=k?N:(k=l==null?0:l.length,!!k&&Hc(k)&&Ri(P,k)&&(Te(l)||po(l)))}function nO(l){var u=l.length,h=new l.constructor(u);return u&&typeof l[0]=="string"&&Ve.call(l,"index")&&(h.index=l.index,h.input=l.input),h}function i1(l){return typeof l.constructor=="function"&&!Ca(l)?sl(mc(l)):{}}function rO(l,u,h){var y=l.constructor;switch(u){case Kr:return Op(l);case H:case se:return new y(+l);case Jn:return F_(l,h);case ht:case ce:case De:case Fe:case rs:case Rn:case Yn:case wt:case pt:return Fx(l,h);case Ee:return new y;case An:case Tt:return new y(l);case jt:return $_(l);case Ue:return new y;case Nt:return H_(l)}}function iO(l,u){var h=u.length;if(!h)return l;var y=h-1;return u[y]=(h>1?"& ":"")+u[y],u=u.join(h>2?", ":" "),l.replace(Sr,`{
/* [wrapped with `+u+`] */
`)}function sO(l){return Te(l)||po(l)||!!(ux&&l&&l[ux])}function Ri(l,u){var h=typeof l;return u=u??L,!!u&&(h=="number"||h!="symbol"&&Zu.test(l))&&l>-1&&l%1==0&&l<u}function wn(l,u,h){if(!lt(h))return!1;var y=typeof u;return(y=="number"?Bn(h)&&Ri(u,h.length):y=="string"&&u in h)?Jr(h[u],l):!1}function zp(l,u){if(Te(l))return!1;var h=typeof l;return h=="number"||h=="symbol"||h=="boolean"||l==null||ir(l)?!0:br.test(l)||!nn.test(l)||u!=null&&l in qe(u)}function oO(l){var u=typeof l;return u=="string"||u=="number"||u=="symbol"||u=="boolean"?l!=="__proto__":l===null}function Bp(l){var u=Dc(l),h=T[u];if(typeof h!="function"||!(u in Ie.prototype))return!1;if(l===h)return!0;var y=Ip(h);return!!y&&l===y[0]}function lO(l){return!!sx&&sx in l}var aO=cc?Di:nm;function Ca(l){var u=l&&l.constructor,h=typeof u=="function"&&u.prototype||nl;return l===h}function s1(l){return l===l&&!lt(l)}function o1(l,u){return function(h){return h==null?!1:h[l]===u&&(u!==n||l in qe(h))}}function uO(l){var u=Fc(l,function(y){return h.size===f&&h.clear(),y}),h=u.cache;return u}function cO(l,u){var h=l[1],y=u[1],k=h|y,N=k<(C|x|A),P=y==A&&h==E||y==A&&h==R&&l[7].length<=u[8]||y==(A|R)&&u[7].length<=u[8]&&h==E;if(!(N||P))return l;y&C&&(l[2]=u[2],k|=h&C?0:w);var D=u[3];if(D){var j=l[3];l[3]=j?Hx(j,D,u[4]):D,l[4]=j?ls(l[3],d):u[4]}return D=u[5],D&&(j=l[5],l[5]=j?Ux(j,D,u[6]):D,l[6]=j?ls(l[5],d):u[6]),D=u[7],D&&(l[7]=D),y&A&&(l[8]=l[8]==null?u[8]:rn(l[8],u[8])),l[9]==null&&(l[9]=u[9]),l[0]=u[0],l[1]=k,l}function fO(l){var u=[];if(l!=null)for(var h in qe(l))u.push(h);return u}function dO(l){return dc.call(l)}function l1(l,u,h){return u=Rt(u===n?l.length-1:u,0),function(){for(var y=arguments,k=-1,N=Rt(y.length-u,0),P=F(N);++k<N;)P[k]=y[u+k];k=-1;for(var D=F(u+1);++k<u;)D[k]=y[k];return D[u]=h(P),tr(l,this,D)}}function a1(l,u){return u.length<2?l:co(l,_r(u,0,-1))}function hO(l,u){for(var h=l.length,y=rn(u.length,h),k=zn(l);y--;){var N=u[y];l[y]=Ri(N,h)?k[N]:n}return l}function Fp(l,u){if(!(u==="constructor"&&typeof l[u]=="function")&&u!="__proto__")return l[u]}var u1=f1(Px),Ea=MM||function(l,u){return Kt.setTimeout(l,u)},$p=f1(L_);function c1(l,u,h){var y=u+"";return $p(l,iO(y,pO(tO(y),h)))}function f1(l){var u=0,h=0;return function(){var y=PM(),k=le-(y-h);if(h=y,k>0){if(++u>=re)return arguments[0]}else u=0;return l.apply(n,arguments)}}function Lc(l,u){var h=-1,y=l.length,k=y-1;for(u=u===n?y:u;++h<u;){var N=kp(h,k),P=l[N];l[N]=l[h],l[h]=P}return l.length=u,l}var d1=uO(function(l){var u=[];return l.charCodeAt(0)===46&&u.push(""),l.replace(ro,function(h,y,k,N){u.push(k?N.replace(yn,"$1"):y||h)}),u});function pi(l){if(typeof l=="string"||ir(l))return l;var u=l+"";return u=="0"&&1/l==-ie?"-0":u}function ho(l){if(l!=null){try{return fc.call(l)}catch{}try{return l+""}catch{}}return""}function pO(l,u){return Er(Qe,function(h){var y="_."+h[0];u&h[1]&&!oc(l,y)&&l.push(y)}),l.sort()}function h1(l){if(l instanceof Ie)return l.clone();var u=new Nr(l.__wrapped__,l.__chain__);return u.__actions__=zn(l.__actions__),u.__index__=l.__index__,u.__values__=l.__values__,u}function mO(l,u,h){(h?wn(l,u,h):u===n)?u=1:u=Rt(Ne(u),0);var y=l==null?0:l.length;if(!y||u<1)return[];for(var k=0,N=0,P=F(vc(y/u));k<y;)P[N++]=_r(l,k,k+=u);return P}function gO(l){for(var u=-1,h=l==null?0:l.length,y=0,k=[];++u<h;){var N=l[u];N&&(k[y++]=N)}return k}function yO(){var l=arguments.length;if(!l)return[];for(var u=F(l-1),h=arguments[0],y=l;y--;)u[y-1]=arguments[y];return ss(Te(h)?zn(h):[h],qt(u,1))}var vO=Ae(function(l,u){return St(l)?xa(l,qt(u,1,St,!0)):[]}),xO=Ae(function(l,u){var h=Or(u);return St(h)&&(h=n),St(l)?xa(l,qt(u,1,St,!0),xe(h,2)):[]}),wO=Ae(function(l,u){var h=Or(u);return St(h)&&(h=n),St(l)?xa(l,qt(u,1,St,!0),n,h):[]});function bO(l,u,h){var y=l==null?0:l.length;return y?(u=h||u===n?1:Ne(u),_r(l,u<0?0:u,y)):[]}function SO(l,u,h){var y=l==null?0:l.length;return y?(u=h||u===n?1:Ne(u),u=y-u,_r(l,0,u<0?0:u)):[]}function kO(l,u){return l&&l.length?Mc(l,xe(u,3),!0,!0):[]}function CO(l,u){return l&&l.length?Mc(l,xe(u,3),!0):[]}function EO(l,u,h,y){var k=l==null?0:l.length;return k?(h&&typeof h!="number"&&wn(l,u,h)&&(h=0,y=k),y_(l,u,h,y)):[]}function p1(l,u,h){var y=l==null?0:l.length;if(!y)return-1;var k=h==null?0:Ne(h);return k<0&&(k=Rt(y+k,0)),lc(l,xe(u,3),k)}function m1(l,u,h){var y=l==null?0:l.length;if(!y)return-1;var k=y-1;return h!==n&&(k=Ne(h),k=h<0?Rt(y+k,0):rn(k,y-1)),lc(l,xe(u,3),k,!0)}function g1(l){var u=l==null?0:l.length;return u?qt(l,1):[]}function TO(l){var u=l==null?0:l.length;return u?qt(l,ie):[]}function NO(l,u){var h=l==null?0:l.length;return h?(u=u===n?1:Ne(u),qt(l,u)):[]}function MO(l){for(var u=-1,h=l==null?0:l.length,y={};++u<h;){var k=l[u];y[k[0]]=k[1]}return y}function y1(l){return l&&l.length?l[0]:n}function _O(l,u,h){var y=l==null?0:l.length;if(!y)return-1;var k=h==null?0:Ne(h);return k<0&&(k=Rt(y+k,0)),Qo(l,u,k)}function OO(l){var u=l==null?0:l.length;return u?_r(l,0,-1):[]}var AO=Ae(function(l){var u=st(l,Mp);return u.length&&u[0]===l[0]?vp(u):[]}),PO=Ae(function(l){var u=Or(l),h=st(l,Mp);return u===Or(h)?u=n:h.pop(),h.length&&h[0]===l[0]?vp(h,xe(u,2)):[]}),RO=Ae(function(l){var u=Or(l),h=st(l,Mp);return u=typeof u=="function"?u:n,u&&h.pop(),h.length&&h[0]===l[0]?vp(h,n,u):[]});function DO(l,u){return l==null?"":OM.call(l,u)}function Or(l){var u=l==null?0:l.length;return u?l[u-1]:n}function IO(l,u,h){var y=l==null?0:l.length;if(!y)return-1;var k=y;return h!==n&&(k=Ne(h),k=k<0?Rt(y+k,0):rn(k,y-1)),u===u?pM(l,u,k):lc(l,Yv,k,!0)}function LO(l,u){return l&&l.length?Mx(l,Ne(u)):n}var jO=Ae(v1);function v1(l,u){return l&&l.length&&u&&u.length?Sp(l,u):l}function zO(l,u,h){return l&&l.length&&u&&u.length?Sp(l,u,xe(h,2)):l}function BO(l,u,h){return l&&l.length&&u&&u.length?Sp(l,u,n,h):l}var FO=Pi(function(l,u){var h=l==null?0:l.length,y=pp(l,u);return Ax(l,st(u,function(k){return Ri(k,h)?+k:k}).sort($x)),y});function $O(l,u){var h=[];if(!(l&&l.length))return h;var y=-1,k=[],N=l.length;for(u=xe(u,3);++y<N;){var P=l[y];u(P,y,l)&&(h.push(P),k.push(y))}return Ax(l,k),h}function Hp(l){return l==null?l:DM.call(l)}function HO(l,u,h){var y=l==null?0:l.length;return y?(h&&typeof h!="number"&&wn(l,u,h)?(u=0,h=y):(u=u==null?0:Ne(u),h=h===n?y:Ne(h)),_r(l,u,h)):[]}function UO(l,u){return Nc(l,u)}function VO(l,u,h){return Ep(l,u,xe(h,2))}function WO(l,u){var h=l==null?0:l.length;if(h){var y=Nc(l,u);if(y<h&&Jr(l[y],u))return y}return-1}function KO(l,u){return Nc(l,u,!0)}function qO(l,u,h){return Ep(l,u,xe(h,2),!0)}function GO(l,u){var h=l==null?0:l.length;if(h){var y=Nc(l,u,!0)-1;if(Jr(l[y],u))return y}return-1}function XO(l){return l&&l.length?Rx(l):[]}function JO(l,u){return l&&l.length?Rx(l,xe(u,2)):[]}function YO(l){var u=l==null?0:l.length;return u?_r(l,1,u):[]}function QO(l,u,h){return l&&l.length?(u=h||u===n?1:Ne(u),_r(l,0,u<0?0:u)):[]}function ZO(l,u,h){var y=l==null?0:l.length;return y?(u=h||u===n?1:Ne(u),u=y-u,_r(l,u<0?0:u,y)):[]}function eA(l,u){return l&&l.length?Mc(l,xe(u,3),!1,!0):[]}function tA(l,u){return l&&l.length?Mc(l,xe(u,3)):[]}var nA=Ae(function(l){return cs(qt(l,1,St,!0))}),rA=Ae(function(l){var u=Or(l);return St(u)&&(u=n),cs(qt(l,1,St,!0),xe(u,2))}),iA=Ae(function(l){var u=Or(l);return u=typeof u=="function"?u:n,cs(qt(l,1,St,!0),n,u)});function sA(l){return l&&l.length?cs(l):[]}function oA(l,u){return l&&l.length?cs(l,xe(u,2)):[]}function lA(l,u){return u=typeof u=="function"?u:n,l&&l.length?cs(l,n,u):[]}function Up(l){if(!(l&&l.length))return[];var u=0;return l=is(l,function(h){if(St(h))return u=Rt(h.length,u),!0}),op(u,function(h){return st(l,rp(h))})}function x1(l,u){if(!(l&&l.length))return[];var h=Up(l);return u==null?h:st(h,function(y){return tr(u,n,y)})}var aA=Ae(function(l,u){return St(l)?xa(l,u):[]}),uA=Ae(function(l){return Np(is(l,St))}),cA=Ae(function(l){var u=Or(l);return St(u)&&(u=n),Np(is(l,St),xe(u,2))}),fA=Ae(function(l){var u=Or(l);return u=typeof u=="function"?u:n,Np(is(l,St),n,u)}),dA=Ae(Up);function hA(l,u){return jx(l||[],u||[],va)}function pA(l,u){return jx(l||[],u||[],Sa)}var mA=Ae(function(l){var u=l.length,h=u>1?l[u-1]:n;return h=typeof h=="function"?(l.pop(),h):n,x1(l,h)});function w1(l){var u=T(l);return u.__chain__=!0,u}function gA(l,u){return u(l),l}function jc(l,u){return u(l)}var yA=Pi(function(l){var u=l.length,h=u?l[0]:0,y=this.__wrapped__,k=function(N){return pp(N,l)};return u>1||this.__actions__.length||!(y instanceof Ie)||!Ri(h)?this.thru(k):(y=y.slice(h,+h+(u?1:0)),y.__actions__.push({func:jc,args:[k],thisArg:n}),new Nr(y,this.__chain__).thru(function(N){return u&&!N.length&&N.push(n),N}))});function vA(){return w1(this)}function xA(){return new Nr(this.value(),this.__chain__)}function wA(){this.__values__===n&&(this.__values__=D1(this.value()));var l=this.__index__>=this.__values__.length,u=l?n:this.__values__[this.__index__++];return{done:l,value:u}}function bA(){return this}function SA(l){for(var u,h=this;h instanceof Sc;){var y=h1(h);y.__index__=0,y.__values__=n,u?k.__wrapped__=y:u=y;var k=y;h=h.__wrapped__}return k.__wrapped__=l,u}function kA(){var l=this.__wrapped__;if(l instanceof Ie){var u=l;return this.__actions__.length&&(u=new Ie(this)),u=u.reverse(),u.__actions__.push({func:jc,args:[Hp],thisArg:n}),new Nr(u,this.__chain__)}return this.thru(Hp)}function CA(){return Lx(this.__wrapped__,this.__actions__)}var EA=_c(function(l,u,h){Ve.call(l,h)?++l[h]:Oi(l,h,1)});function TA(l,u,h){var y=Te(l)?Xv:g_;return h&&wn(l,u,h)&&(u=n),y(l,xe(u,3))}function NA(l,u){var h=Te(l)?is:xx;return h(l,xe(u,3))}var MA=qx(p1),_A=qx(m1);function OA(l,u){return qt(zc(l,u),1)}function AA(l,u){return qt(zc(l,u),ie)}function PA(l,u,h){return h=h===n?1:Ne(h),qt(zc(l,u),h)}function b1(l,u){var h=Te(l)?Er:us;return h(l,xe(u,3))}function S1(l,u){var h=Te(l)?YN:vx;return h(l,xe(u,3))}var RA=_c(function(l,u,h){Ve.call(l,h)?l[h].push(u):Oi(l,h,[u])});function DA(l,u,h,y){l=Bn(l)?l:cl(l),h=h&&!y?Ne(h):0;var k=l.length;return h<0&&(h=Rt(k+h,0)),Uc(l)?h<=k&&l.indexOf(u,h)>-1:!!k&&Qo(l,u,h)>-1}var IA=Ae(function(l,u,h){var y=-1,k=typeof u=="function",N=Bn(l)?F(l.length):[];return us(l,function(P){N[++y]=k?tr(u,P,h):wa(P,u,h)}),N}),LA=_c(function(l,u,h){Oi(l,h,u)});function zc(l,u){var h=Te(l)?st:Ex;return h(l,xe(u,3))}function jA(l,u,h,y){return l==null?[]:(Te(u)||(u=u==null?[]:[u]),h=y?n:h,Te(h)||(h=h==null?[]:[h]),_x(l,u,h))}var zA=_c(function(l,u,h){l[h?0:1].push(u)},function(){return[[],[]]});function BA(l,u,h){var y=Te(l)?tp:Zv,k=arguments.length<3;return y(l,xe(u,4),h,k,us)}function FA(l,u,h){var y=Te(l)?QN:Zv,k=arguments.length<3;return y(l,xe(u,4),h,k,vx)}function $A(l,u){var h=Te(l)?is:xx;return h(l,$c(xe(u,3)))}function HA(l){var u=Te(l)?px:D_;return u(l)}function UA(l,u,h){(h?wn(l,u,h):u===n)?u=1:u=Ne(u);var y=Te(l)?f_:I_;return y(l,u)}function VA(l){var u=Te(l)?d_:j_;return u(l)}function WA(l){if(l==null)return 0;if(Bn(l))return Uc(l)?el(l):l.length;var u=sn(l);return u==Ee||u==Ue?l.size:wp(l).length}function KA(l,u,h){var y=Te(l)?np:z_;return h&&wn(l,u,h)&&(u=n),y(l,xe(u,3))}var qA=Ae(function(l,u){if(l==null)return[];var h=u.length;return h>1&&wn(l,u[0],u[1])?u=[]:h>2&&wn(u[0],u[1],u[2])&&(u=[u[0]]),_x(l,qt(u,1),[])}),Bc=NM||function(){return Kt.Date.now()};function GA(l,u){if(typeof u!="function")throw new Tr(o);return l=Ne(l),function(){if(--l<1)return u.apply(this,arguments)}}function k1(l,u,h){return u=h?n:u,u=l&&u==null?l.length:u,Ai(l,A,n,n,n,n,u)}function C1(l,u){var h;if(typeof u!="function")throw new Tr(o);return l=Ne(l),function(){return--l>0&&(h=u.apply(this,arguments)),l<=1&&(u=n),h}}var Vp=Ae(function(l,u,h){var y=C;if(h.length){var k=ls(h,al(Vp));y|=_}return Ai(l,y,u,h,k)}),E1=Ae(function(l,u,h){var y=C|x;if(h.length){var k=ls(h,al(E1));y|=_}return Ai(u,y,l,h,k)});function T1(l,u,h){u=h?n:u;var y=Ai(l,E,n,n,n,n,n,u);return y.placeholder=T1.placeholder,y}function N1(l,u,h){u=h?n:u;var y=Ai(l,M,n,n,n,n,n,u);return y.placeholder=N1.placeholder,y}function M1(l,u,h){var y,k,N,P,D,j,V=0,W=!1,q=!1,ne=!0;if(typeof l!="function")throw new Tr(o);u=Ar(u)||0,lt(h)&&(W=!!h.leading,q="maxWait"in h,N=q?Rt(Ar(h.maxWait)||0,u):N,ne="trailing"in h?!!h.trailing:ne);function fe(kt){var Yr=y,Li=k;return y=k=n,V=kt,P=l.apply(Li,Yr),P}function we(kt){return V=kt,D=Ea(Pe,u),W?fe(kt):P}function Me(kt){var Yr=kt-j,Li=kt-V,q1=u-Yr;return q?rn(q1,N-Li):q1}function be(kt){var Yr=kt-j,Li=kt-V;return j===n||Yr>=u||Yr<0||q&&Li>=N}function Pe(){var kt=Bc();if(be(kt))return Le(kt);D=Ea(Pe,Me(kt))}function Le(kt){return D=n,ne&&y?fe(kt):(y=k=n,P)}function sr(){D!==n&&zx(D),V=0,y=j=k=D=n}function bn(){return D===n?P:Le(Bc())}function or(){var kt=Bc(),Yr=be(kt);if(y=arguments,k=this,j=kt,Yr){if(D===n)return we(j);if(q)return zx(D),D=Ea(Pe,u),fe(j)}return D===n&&(D=Ea(Pe,u)),P}return or.cancel=sr,or.flush=bn,or}var XA=Ae(function(l,u){return yx(l,1,u)}),JA=Ae(function(l,u,h){return yx(l,Ar(u)||0,h)});function YA(l){return Ai(l,z)}function Fc(l,u){if(typeof l!="function"||u!=null&&typeof u!="function")throw new Tr(o);var h=function(){var y=arguments,k=u?u.apply(this,y):y[0],N=h.cache;if(N.has(k))return N.get(k);var P=l.apply(this,y);return h.cache=N.set(k,P)||N,P};return h.cache=new(Fc.Cache||_i),h}Fc.Cache=_i;function $c(l){if(typeof l!="function")throw new Tr(o);return function(){var u=arguments;switch(u.length){case 0:return!l.call(this);case 1:return!l.call(this,u[0]);case 2:return!l.call(this,u[0],u[1]);case 3:return!l.call(this,u[0],u[1],u[2])}return!l.apply(this,u)}}function QA(l){return C1(2,l)}var ZA=B_(function(l,u){u=u.length==1&&Te(u[0])?st(u[0],nr(xe())):st(qt(u,1),nr(xe()));var h=u.length;return Ae(function(y){for(var k=-1,N=rn(y.length,h);++k<N;)y[k]=u[k].call(this,y[k]);return tr(l,this,y)})}),Wp=Ae(function(l,u){var h=ls(u,al(Wp));return Ai(l,_,n,u,h)}),_1=Ae(function(l,u){var h=ls(u,al(_1));return Ai(l,O,n,u,h)}),eP=Pi(function(l,u){return Ai(l,R,n,n,n,u)});function tP(l,u){if(typeof l!="function")throw new Tr(o);return u=u===n?u:Ne(u),Ae(l,u)}function nP(l,u){if(typeof l!="function")throw new Tr(o);return u=u==null?0:Rt(Ne(u),0),Ae(function(h){var y=h[u],k=ds(h,0,u);return y&&ss(k,y),tr(l,this,k)})}function rP(l,u,h){var y=!0,k=!0;if(typeof l!="function")throw new Tr(o);return lt(h)&&(y="leading"in h?!!h.leading:y,k="trailing"in h?!!h.trailing:k),M1(l,u,{leading:y,maxWait:u,trailing:k})}function iP(l){return k1(l,1)}function sP(l,u){return Wp(_p(u),l)}function oP(){if(!arguments.length)return[];var l=arguments[0];return Te(l)?l:[l]}function lP(l){return Mr(l,g)}function aP(l,u){return u=typeof u=="function"?u:n,Mr(l,g,u)}function uP(l){return Mr(l,p|g)}function cP(l,u){return u=typeof u=="function"?u:n,Mr(l,p|g,u)}function fP(l,u){return u==null||gx(l,u,zt(u))}function Jr(l,u){return l===u||l!==l&&u!==u}var dP=Rc(yp),hP=Rc(function(l,u){return l>=u}),po=Sx(function(){return arguments}())?Sx:function(l){return mt(l)&&Ve.call(l,"callee")&&!ax.call(l,"callee")},Te=F.isArray,pP=Uv?nr(Uv):S_;function Bn(l){return l!=null&&Hc(l.length)&&!Di(l)}function St(l){return mt(l)&&Bn(l)}function mP(l){return l===!0||l===!1||mt(l)&&xn(l)==H}var hs=_M||nm,gP=Vv?nr(Vv):k_;function yP(l){return mt(l)&&l.nodeType===1&&!Ta(l)}function vP(l){if(l==null)return!0;if(Bn(l)&&(Te(l)||typeof l=="string"||typeof l.splice=="function"||hs(l)||ul(l)||po(l)))return!l.length;var u=sn(l);if(u==Ee||u==Ue)return!l.size;if(Ca(l))return!wp(l).length;for(var h in l)if(Ve.call(l,h))return!1;return!0}function xP(l,u){return ba(l,u)}function wP(l,u,h){h=typeof h=="function"?h:n;var y=h?h(l,u):n;return y===n?ba(l,u,n,h):!!y}function Kp(l){if(!mt(l))return!1;var u=xn(l);return u==ve||u==he||typeof l.message=="string"&&typeof l.name=="string"&&!Ta(l)}function bP(l){return typeof l=="number"&&cx(l)}function Di(l){if(!lt(l))return!1;var u=xn(l);return u==Ze||u==Se||u==ze||u==ui}function O1(l){return typeof l=="number"&&l==Ne(l)}function Hc(l){return typeof l=="number"&&l>-1&&l%1==0&&l<=L}function lt(l){var u=typeof l;return l!=null&&(u=="object"||u=="function")}function mt(l){return l!=null&&typeof l=="object"}var A1=Wv?nr(Wv):E_;function SP(l,u){return l===u||xp(l,u,Lp(u))}function kP(l,u,h){return h=typeof h=="function"?h:n,xp(l,u,Lp(u),h)}function CP(l){return P1(l)&&l!=+l}function EP(l){if(aO(l))throw new Ce(s);return kx(l)}function TP(l){return l===null}function NP(l){return l==null}function P1(l){return typeof l=="number"||mt(l)&&xn(l)==An}function Ta(l){if(!mt(l)||xn(l)!=Wt)return!1;var u=mc(l);if(u===null)return!0;var h=Ve.call(u,"constructor")&&u.constructor;return typeof h=="function"&&h instanceof h&&fc.call(h)==kM}var qp=Kv?nr(Kv):T_;function MP(l){return O1(l)&&l>=-L&&l<=L}var R1=qv?nr(qv):N_;function Uc(l){return typeof l=="string"||!Te(l)&&mt(l)&&xn(l)==Tt}function ir(l){return typeof l=="symbol"||mt(l)&&xn(l)==Nt}var ul=Gv?nr(Gv):M_;function _P(l){return l===n}function OP(l){return mt(l)&&sn(l)==Wr}function AP(l){return mt(l)&&xn(l)==Xo}var PP=Rc(bp),RP=Rc(function(l,u){return l<=u});function D1(l){if(!l)return[];if(Bn(l))return Uc(l)?Gr(l):zn(l);if(ha&&l[ha])return fM(l[ha]());var u=sn(l),h=u==Ee?ap:u==Ue?ac:cl;return h(l)}function Ii(l){if(!l)return l===0?l:0;if(l=Ar(l),l===ie||l===-ie){var u=l<0?-1:1;return u*$}return l===l?l:0}function Ne(l){var u=Ii(l),h=u%1;return u===u?h?u-h:u:0}function I1(l){return l?uo(Ne(l),0,Z):0}function Ar(l){if(typeof l=="number")return l;if(ir(l))return K;if(lt(l)){var u=typeof l.valueOf=="function"?l.valueOf():l;l=lt(u)?u+"":u}if(typeof l!="string")return l===0?l:+l;l=ex(l);var h=er.test(l);return h||Qu.test(l)?GN(l.slice(2),h?2:8):aa.test(l)?K:+l}function L1(l){return hi(l,Fn(l))}function DP(l){return l?uo(Ne(l),-L,L):l===0?l:0}function He(l){return l==null?"":rr(l)}var IP=ol(function(l,u){if(Ca(u)||Bn(u)){hi(u,zt(u),l);return}for(var h in u)Ve.call(u,h)&&va(l,h,u[h])}),j1=ol(function(l,u){hi(u,Fn(u),l)}),Vc=ol(function(l,u,h,y){hi(u,Fn(u),l,y)}),LP=ol(function(l,u,h,y){hi(u,zt(u),l,y)}),jP=Pi(pp);function zP(l,u){var h=sl(l);return u==null?h:mx(h,u)}var BP=Ae(function(l,u){l=qe(l);var h=-1,y=u.length,k=y>2?u[2]:n;for(k&&wn(u[0],u[1],k)&&(y=1);++h<y;)for(var N=u[h],P=Fn(N),D=-1,j=P.length;++D<j;){var V=P[D],W=l[V];(W===n||Jr(W,nl[V])&&!Ve.call(l,V))&&(l[V]=N[V])}return l}),FP=Ae(function(l){return l.push(n,e1),tr(z1,n,l)});function $P(l,u){return Jv(l,xe(u,3),di)}function HP(l,u){return Jv(l,xe(u,3),gp)}function UP(l,u){return l==null?l:mp(l,xe(u,3),Fn)}function VP(l,u){return l==null?l:wx(l,xe(u,3),Fn)}function WP(l,u){return l&&di(l,xe(u,3))}function KP(l,u){return l&&gp(l,xe(u,3))}function qP(l){return l==null?[]:Ec(l,zt(l))}function GP(l){return l==null?[]:Ec(l,Fn(l))}function Gp(l,u,h){var y=l==null?n:co(l,u);return y===n?h:y}function XP(l,u){return l!=null&&r1(l,u,v_)}function Xp(l,u){return l!=null&&r1(l,u,x_)}var JP=Xx(function(l,u,h){u!=null&&typeof u.toString!="function"&&(u=dc.call(u)),l[u]=h},Yp($n)),YP=Xx(function(l,u,h){u!=null&&typeof u.toString!="function"&&(u=dc.call(u)),Ve.call(l,u)?l[u].push(h):l[u]=[h]},xe),QP=Ae(wa);function zt(l){return Bn(l)?hx(l):wp(l)}function Fn(l){return Bn(l)?hx(l,!0):__(l)}function ZP(l,u){var h={};return u=xe(u,3),di(l,function(y,k,N){Oi(h,u(y,k,N),y)}),h}function eR(l,u){var h={};return u=xe(u,3),di(l,function(y,k,N){Oi(h,k,u(y,k,N))}),h}var tR=ol(function(l,u,h){Tc(l,u,h)}),z1=ol(function(l,u,h,y){Tc(l,u,h,y)}),nR=Pi(function(l,u){var h={};if(l==null)return h;var y=!1;u=st(u,function(N){return N=fs(N,l),y||(y=N.length>1),N}),hi(l,Dp(l),h),y&&(h=Mr(h,p|m|g,J_));for(var k=u.length;k--;)Tp(h,u[k]);return h});function rR(l,u){return B1(l,$c(xe(u)))}var iR=Pi(function(l,u){return l==null?{}:A_(l,u)});function B1(l,u){if(l==null)return{};var h=st(Dp(l),function(y){return[y]});return u=xe(u),Ox(l,h,function(y,k){return u(y,k[0])})}function sR(l,u,h){u=fs(u,l);var y=-1,k=u.length;for(k||(k=1,l=n);++y<k;){var N=l==null?n:l[pi(u[y])];N===n&&(y=k,N=h),l=Di(N)?N.call(l):N}return l}function oR(l,u,h){return l==null?l:Sa(l,u,h)}function lR(l,u,h,y){return y=typeof y=="function"?y:n,l==null?l:Sa(l,u,h,y)}var F1=Qx(zt),$1=Qx(Fn);function aR(l,u,h){var y=Te(l),k=y||hs(l)||ul(l);if(u=xe(u,4),h==null){var N=l&&l.constructor;k?h=y?new N:[]:lt(l)?h=Di(N)?sl(mc(l)):{}:h={}}return(k?Er:di)(l,function(P,D,j){return u(h,P,D,j)}),h}function uR(l,u){return l==null?!0:Tp(l,u)}function cR(l,u,h){return l==null?l:Ix(l,u,_p(h))}function fR(l,u,h,y){return y=typeof y=="function"?y:n,l==null?l:Ix(l,u,_p(h),y)}function cl(l){return l==null?[]:lp(l,zt(l))}function dR(l){return l==null?[]:lp(l,Fn(l))}function hR(l,u,h){return h===n&&(h=u,u=n),h!==n&&(h=Ar(h),h=h===h?h:0),u!==n&&(u=Ar(u),u=u===u?u:0),uo(Ar(l),u,h)}function pR(l,u,h){return u=Ii(u),h===n?(h=u,u=0):h=Ii(h),l=Ar(l),w_(l,u,h)}function mR(l,u,h){if(h&&typeof h!="boolean"&&wn(l,u,h)&&(u=h=n),h===n&&(typeof u=="boolean"?(h=u,u=n):typeof l=="boolean"&&(h=l,l=n)),l===n&&u===n?(l=0,u=1):(l=Ii(l),u===n?(u=l,l=0):u=Ii(u)),l>u){var y=l;l=u,u=y}if(h||l%1||u%1){var k=fx();return rn(l+k*(u-l+qN("1e-"+((k+"").length-1))),u)}return kp(l,u)}var gR=ll(function(l,u,h){return u=u.toLowerCase(),l+(h?H1(u):u)});function H1(l){return Jp(He(l).toLowerCase())}function U1(l){return l=He(l),l&&l.replace(ec,oM).replace(jN,"")}function yR(l,u,h){l=He(l),u=rr(u);var y=l.length;h=h===n?y:uo(Ne(h),0,y);var k=h;return h-=u.length,h>=0&&l.slice(h,k)==u}function vR(l){return l=He(l),l&&bt.test(l)?l.replace(Qn,lM):l}function xR(l){return l=He(l),l&&In.test(l)?l.replace(pn,"\\$&"):l}var wR=ll(function(l,u,h){return l+(h?"-":"")+u.toLowerCase()}),bR=ll(function(l,u,h){return l+(h?" ":"")+u.toLowerCase()}),SR=Kx("toLowerCase");function kR(l,u,h){l=He(l),u=Ne(u);var y=u?el(l):0;if(!u||y>=u)return l;var k=(u-y)/2;return Pc(xc(k),h)+l+Pc(vc(k),h)}function CR(l,u,h){l=He(l),u=Ne(u);var y=u?el(l):0;return u&&y<u?l+Pc(u-y,h):l}function ER(l,u,h){l=He(l),u=Ne(u);var y=u?el(l):0;return u&&y<u?Pc(u-y,h)+l:l}function TR(l,u,h){return h||u==null?u=0:u&&(u=+u),RM(He(l).replace(mn,""),u||0)}function NR(l,u,h){return(h?wn(l,u,h):u===n)?u=1:u=Ne(u),Cp(He(l),u)}function MR(){var l=arguments,u=He(l[0]);return l.length<3?u:u.replace(l[1],l[2])}var _R=ll(function(l,u,h){return l+(h?"_":"")+u.toLowerCase()});function OR(l,u,h){return h&&typeof h!="number"&&wn(l,u,h)&&(u=h=n),h=h===n?Z:h>>>0,h?(l=He(l),l&&(typeof u=="string"||u!=null&&!qp(u))&&(u=rr(u),!u&&Zo(l))?ds(Gr(l),0,h):l.split(u,h)):[]}var AR=ll(function(l,u,h){return l+(h?" ":"")+Jp(u)});function PR(l,u,h){return l=He(l),h=h==null?0:uo(Ne(h),0,l.length),u=rr(u),l.slice(h,h+u.length)==u}function RR(l,u,h){var y=T.templateSettings;h&&wn(l,u,h)&&(u=n),l=He(l),u=Vc({},u,y,Zx);var k=Vc({},u.imports,y.imports,Zx),N=zt(k),P=lp(k,N),D,j,V=0,W=u.interpolate||io,q="__p += '",ne=up((u.escape||io).source+"|"+W.source+"|"+(W===wr?jn:io).source+"|"+(u.evaluate||io).source+"|$","g"),fe="//# sourceURL="+(Ve.call(u,"sourceURL")?(u.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++HN+"]")+`
`;l.replace(ne,function(be,Pe,Le,sr,bn,or){return Le||(Le=sr),q+=l.slice(V,or).replace(tc,aM),Pe&&(D=!0,q+=`' +
__e(`+Pe+`) +
'`),bn&&(j=!0,q+=`';
`+bn+`;
__p += '`),Le&&(q+=`' +
((__t = (`+Le+`)) == null ? '' : __t) +
'`),V=or+be.length,be}),q+=`';
`;var we=Ve.call(u,"variable")&&u.variable;if(!we)q=`with (obj) {
`+q+`
}
`;else if(gn.test(we))throw new Ce(a);q=(j?q.replace(ci,""):q).replace(xr,"$1").replace(qr,"$1;"),q="function("+(we||"obj")+`) {
`+(we?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(D?", __e = _.escape":"")+(j?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+q+`return __p
}`;var Me=W1(function(){return $e(N,fe+"return "+q).apply(n,P)});if(Me.source=q,Kp(Me))throw Me;return Me}function DR(l){return He(l).toLowerCase()}function IR(l){return He(l).toUpperCase()}function LR(l,u,h){if(l=He(l),l&&(h||u===n))return ex(l);if(!l||!(u=rr(u)))return l;var y=Gr(l),k=Gr(u),N=tx(y,k),P=nx(y,k)+1;return ds(y,N,P).join("")}function jR(l,u,h){if(l=He(l),l&&(h||u===n))return l.slice(0,ix(l)+1);if(!l||!(u=rr(u)))return l;var y=Gr(l),k=nx(y,Gr(u))+1;return ds(y,0,k).join("")}function zR(l,u,h){if(l=He(l),l&&(h||u===n))return l.replace(mn,"");if(!l||!(u=rr(u)))return l;var y=Gr(l),k=tx(y,Gr(u));return ds(y,k).join("")}function BR(l,u){var h=B,y=te;if(lt(u)){var k="separator"in u?u.separator:k;h="length"in u?Ne(u.length):h,y="omission"in u?rr(u.omission):y}l=He(l);var N=l.length;if(Zo(l)){var P=Gr(l);N=P.length}if(h>=N)return l;var D=h-el(y);if(D<1)return y;var j=P?ds(P,0,D).join(""):l.slice(0,D);if(k===n)return j+y;if(P&&(D+=j.length-D),qp(k)){if(l.slice(D).search(k)){var V,W=j;for(k.global||(k=up(k.source,He(vn.exec(k))+"g")),k.lastIndex=0;V=k.exec(W);)var q=V.index;j=j.slice(0,q===n?D:q)}}else if(l.indexOf(rr(k),D)!=D){var ne=j.lastIndexOf(k);ne>-1&&(j=j.slice(0,ne))}return j+y}function FR(l){return l=He(l),l&&hn.test(l)?l.replace(Dn,mM):l}var $R=ll(function(l,u,h){return l+(h?" ":"")+u.toUpperCase()}),Jp=Kx("toUpperCase");function V1(l,u,h){return l=He(l),u=h?n:u,u===n?cM(l)?vM(l):tM(l):l.match(u)||[]}var W1=Ae(function(l,u){try{return tr(l,n,u)}catch(h){return Kp(h)?h:new Ce(h)}}),HR=Pi(function(l,u){return Er(u,function(h){h=pi(h),Oi(l,h,Vp(l[h],l))}),l});function UR(l){var u=l==null?0:l.length,h=xe();return l=u?st(l,function(y){if(typeof y[1]!="function")throw new Tr(o);return[h(y[0]),y[1]]}):[],Ae(function(y){for(var k=-1;++k<u;){var N=l[k];if(tr(N[0],this,y))return tr(N[1],this,y)}})}function VR(l){return m_(Mr(l,p))}function Yp(l){return function(){return l}}function WR(l,u){return l==null||l!==l?u:l}var KR=Gx(),qR=Gx(!0);function $n(l){return l}function Qp(l){return Cx(typeof l=="function"?l:Mr(l,p))}function GR(l){return Tx(Mr(l,p))}function XR(l,u){return Nx(l,Mr(u,p))}var JR=Ae(function(l,u){return function(h){return wa(h,l,u)}}),YR=Ae(function(l,u){return function(h){return wa(l,h,u)}});function Zp(l,u,h){var y=zt(u),k=Ec(u,y);h==null&&!(lt(u)&&(k.length||!y.length))&&(h=u,u=l,l=this,k=Ec(u,zt(u)));var N=!(lt(h)&&"chain"in h)||!!h.chain,P=Di(l);return Er(k,function(D){var j=u[D];l[D]=j,P&&(l.prototype[D]=function(){var V=this.__chain__;if(N||V){var W=l(this.__wrapped__),q=W.__actions__=zn(this.__actions__);return q.push({func:j,args:arguments,thisArg:l}),W.__chain__=V,W}return j.apply(l,ss([this.value()],arguments))})}),l}function QR(){return Kt._===this&&(Kt._=CM),this}function em(){}function ZR(l){return l=Ne(l),Ae(function(u){return Mx(u,l)})}var eD=Ap(st),tD=Ap(Xv),nD=Ap(np);function K1(l){return zp(l)?rp(pi(l)):P_(l)}function rD(l){return function(u){return l==null?n:co(l,u)}}var iD=Jx(),sD=Jx(!0);function tm(){return[]}function nm(){return!1}function oD(){return{}}function lD(){return""}function aD(){return!0}function uD(l,u){if(l=Ne(l),l<1||l>L)return[];var h=Z,y=rn(l,Z);u=xe(u),l-=Z;for(var k=op(y,u);++h<l;)u(h);return k}function cD(l){return Te(l)?st(l,pi):ir(l)?[l]:zn(d1(He(l)))}function fD(l){var u=++SM;return He(l)+u}var dD=Ac(function(l,u){return l+u},0),hD=Pp("ceil"),pD=Ac(function(l,u){return l/u},1),mD=Pp("floor");function gD(l){return l&&l.length?Cc(l,$n,yp):n}function yD(l,u){return l&&l.length?Cc(l,xe(u,2),yp):n}function vD(l){return Qv(l,$n)}function xD(l,u){return Qv(l,xe(u,2))}function wD(l){return l&&l.length?Cc(l,$n,bp):n}function bD(l,u){return l&&l.length?Cc(l,xe(u,2),bp):n}var SD=Ac(function(l,u){return l*u},1),kD=Pp("round"),CD=Ac(function(l,u){return l-u},0);function ED(l){return l&&l.length?sp(l,$n):0}function TD(l,u){return l&&l.length?sp(l,xe(u,2)):0}return T.after=GA,T.ary=k1,T.assign=IP,T.assignIn=j1,T.assignInWith=Vc,T.assignWith=LP,T.at=jP,T.before=C1,T.bind=Vp,T.bindAll=HR,T.bindKey=E1,T.castArray=oP,T.chain=w1,T.chunk=mO,T.compact=gO,T.concat=yO,T.cond=UR,T.conforms=VR,T.constant=Yp,T.countBy=EA,T.create=zP,T.curry=T1,T.curryRight=N1,T.debounce=M1,T.defaults=BP,T.defaultsDeep=FP,T.defer=XA,T.delay=JA,T.difference=vO,T.differenceBy=xO,T.differenceWith=wO,T.drop=bO,T.dropRight=SO,T.dropRightWhile=kO,T.dropWhile=CO,T.fill=EO,T.filter=NA,T.flatMap=OA,T.flatMapDeep=AA,T.flatMapDepth=PA,T.flatten=g1,T.flattenDeep=TO,T.flattenDepth=NO,T.flip=YA,T.flow=KR,T.flowRight=qR,T.fromPairs=MO,T.functions=qP,T.functionsIn=GP,T.groupBy=RA,T.initial=OO,T.intersection=AO,T.intersectionBy=PO,T.intersectionWith=RO,T.invert=JP,T.invertBy=YP,T.invokeMap=IA,T.iteratee=Qp,T.keyBy=LA,T.keys=zt,T.keysIn=Fn,T.map=zc,T.mapKeys=ZP,T.mapValues=eR,T.matches=GR,T.matchesProperty=XR,T.memoize=Fc,T.merge=tR,T.mergeWith=z1,T.method=JR,T.methodOf=YR,T.mixin=Zp,T.negate=$c,T.nthArg=ZR,T.omit=nR,T.omitBy=rR,T.once=QA,T.orderBy=jA,T.over=eD,T.overArgs=ZA,T.overEvery=tD,T.overSome=nD,T.partial=Wp,T.partialRight=_1,T.partition=zA,T.pick=iR,T.pickBy=B1,T.property=K1,T.propertyOf=rD,T.pull=jO,T.pullAll=v1,T.pullAllBy=zO,T.pullAllWith=BO,T.pullAt=FO,T.range=iD,T.rangeRight=sD,T.rearg=eP,T.reject=$A,T.remove=$O,T.rest=tP,T.reverse=Hp,T.sampleSize=UA,T.set=oR,T.setWith=lR,T.shuffle=VA,T.slice=HO,T.sortBy=qA,T.sortedUniq=XO,T.sortedUniqBy=JO,T.split=OR,T.spread=nP,T.tail=YO,T.take=QO,T.takeRight=ZO,T.takeRightWhile=eA,T.takeWhile=tA,T.tap=gA,T.throttle=rP,T.thru=jc,T.toArray=D1,T.toPairs=F1,T.toPairsIn=$1,T.toPath=cD,T.toPlainObject=L1,T.transform=aR,T.unary=iP,T.union=nA,T.unionBy=rA,T.unionWith=iA,T.uniq=sA,T.uniqBy=oA,T.uniqWith=lA,T.unset=uR,T.unzip=Up,T.unzipWith=x1,T.update=cR,T.updateWith=fR,T.values=cl,T.valuesIn=dR,T.without=aA,T.words=V1,T.wrap=sP,T.xor=uA,T.xorBy=cA,T.xorWith=fA,T.zip=dA,T.zipObject=hA,T.zipObjectDeep=pA,T.zipWith=mA,T.entries=F1,T.entriesIn=$1,T.extend=j1,T.extendWith=Vc,Zp(T,T),T.add=dD,T.attempt=W1,T.camelCase=gR,T.capitalize=H1,T.ceil=hD,T.clamp=hR,T.clone=lP,T.cloneDeep=uP,T.cloneDeepWith=cP,T.cloneWith=aP,T.conformsTo=fP,T.deburr=U1,T.defaultTo=WR,T.divide=pD,T.endsWith=yR,T.eq=Jr,T.escape=vR,T.escapeRegExp=xR,T.every=TA,T.find=MA,T.findIndex=p1,T.findKey=$P,T.findLast=_A,T.findLastIndex=m1,T.findLastKey=HP,T.floor=mD,T.forEach=b1,T.forEachRight=S1,T.forIn=UP,T.forInRight=VP,T.forOwn=WP,T.forOwnRight=KP,T.get=Gp,T.gt=dP,T.gte=hP,T.has=XP,T.hasIn=Xp,T.head=y1,T.identity=$n,T.includes=DA,T.indexOf=_O,T.inRange=pR,T.invoke=QP,T.isArguments=po,T.isArray=Te,T.isArrayBuffer=pP,T.isArrayLike=Bn,T.isArrayLikeObject=St,T.isBoolean=mP,T.isBuffer=hs,T.isDate=gP,T.isElement=yP,T.isEmpty=vP,T.isEqual=xP,T.isEqualWith=wP,T.isError=Kp,T.isFinite=bP,T.isFunction=Di,T.isInteger=O1,T.isLength=Hc,T.isMap=A1,T.isMatch=SP,T.isMatchWith=kP,T.isNaN=CP,T.isNative=EP,T.isNil=NP,T.isNull=TP,T.isNumber=P1,T.isObject=lt,T.isObjectLike=mt,T.isPlainObject=Ta,T.isRegExp=qp,T.isSafeInteger=MP,T.isSet=R1,T.isString=Uc,T.isSymbol=ir,T.isTypedArray=ul,T.isUndefined=_P,T.isWeakMap=OP,T.isWeakSet=AP,T.join=DO,T.kebabCase=wR,T.last=Or,T.lastIndexOf=IO,T.lowerCase=bR,T.lowerFirst=SR,T.lt=PP,T.lte=RP,T.max=gD,T.maxBy=yD,T.mean=vD,T.meanBy=xD,T.min=wD,T.minBy=bD,T.stubArray=tm,T.stubFalse=nm,T.stubObject=oD,T.stubString=lD,T.stubTrue=aD,T.multiply=SD,T.nth=LO,T.noConflict=QR,T.noop=em,T.now=Bc,T.pad=kR,T.padEnd=CR,T.padStart=ER,T.parseInt=TR,T.random=mR,T.reduce=BA,T.reduceRight=FA,T.repeat=NR,T.replace=MR,T.result=sR,T.round=kD,T.runInContext=I,T.sample=HA,T.size=WA,T.snakeCase=_R,T.some=KA,T.sortedIndex=UO,T.sortedIndexBy=VO,T.sortedIndexOf=WO,T.sortedLastIndex=KO,T.sortedLastIndexBy=qO,T.sortedLastIndexOf=GO,T.startCase=AR,T.startsWith=PR,T.subtract=CD,T.sum=ED,T.sumBy=TD,T.template=RR,T.times=uD,T.toFinite=Ii,T.toInteger=Ne,T.toLength=I1,T.toLower=DR,T.toNumber=Ar,T.toSafeInteger=DP,T.toString=He,T.toUpper=IR,T.trim=LR,T.trimEnd=jR,T.trimStart=zR,T.truncate=BR,T.unescape=FR,T.uniqueId=fD,T.upperCase=$R,T.upperFirst=Jp,T.each=b1,T.eachRight=S1,T.first=y1,Zp(T,function(){var l={};return di(T,function(u,h){Ve.call(T.prototype,h)||(l[h]=u)}),l}(),{chain:!1}),T.VERSION=r,Er(["bind","bindKey","curry","curryRight","partial","partialRight"],function(l){T[l].placeholder=T}),Er(["drop","take"],function(l,u){Ie.prototype[l]=function(h){h=h===n?1:Rt(Ne(h),0);var y=this.__filtered__&&!u?new Ie(this):this.clone();return y.__filtered__?y.__takeCount__=rn(h,y.__takeCount__):y.__views__.push({size:rn(h,Z),type:l+(y.__dir__<0?"Right":"")}),y},Ie.prototype[l+"Right"]=function(h){return this.reverse()[l](h).reverse()}}),Er(["filter","map","takeWhile"],function(l,u){var h=u+1,y=h==de||h==ee;Ie.prototype[l]=function(k){var N=this.clone();return N.__iteratees__.push({iteratee:xe(k,3),type:h}),N.__filtered__=N.__filtered__||y,N}}),Er(["head","last"],function(l,u){var h="take"+(u?"Right":"");Ie.prototype[l]=function(){return this[h](1).value()[0]}}),Er(["initial","tail"],function(l,u){var h="drop"+(u?"":"Right");Ie.prototype[l]=function(){return this.__filtered__?new Ie(this):this[h](1)}}),Ie.prototype.compact=function(){return this.filter($n)},Ie.prototype.find=function(l){return this.filter(l).head()},Ie.prototype.findLast=function(l){return this.reverse().find(l)},Ie.prototype.invokeMap=Ae(function(l,u){return typeof l=="function"?new Ie(this):this.map(function(h){return wa(h,l,u)})}),Ie.prototype.reject=function(l){return this.filter($c(xe(l)))},Ie.prototype.slice=function(l,u){l=Ne(l);var h=this;return h.__filtered__&&(l>0||u<0)?new Ie(h):(l<0?h=h.takeRight(-l):l&&(h=h.drop(l)),u!==n&&(u=Ne(u),h=u<0?h.dropRight(-u):h.take(u-l)),h)},Ie.prototype.takeRightWhile=function(l){return this.reverse().takeWhile(l).reverse()},Ie.prototype.toArray=function(){return this.take(Z)},di(Ie.prototype,function(l,u){var h=/^(?:filter|find|map|reject)|While$/.test(u),y=/^(?:head|last)$/.test(u),k=T[y?"take"+(u=="last"?"Right":""):u],N=y||/^find/.test(u);k&&(T.prototype[u]=function(){var P=this.__wrapped__,D=y?[1]:arguments,j=P instanceof Ie,V=D[0],W=j||Te(P),q=function(Pe){var Le=k.apply(T,ss([Pe],D));return y&&ne?Le[0]:Le};W&&h&&typeof V=="function"&&V.length!=1&&(j=W=!1);var ne=this.__chain__,fe=!!this.__actions__.length,we=N&&!ne,Me=j&&!fe;if(!N&&W){P=Me?P:new Ie(this);var be=l.apply(P,D);return be.__actions__.push({func:jc,args:[q],thisArg:n}),new Nr(be,ne)}return we&&Me?l.apply(this,D):(be=this.thru(q),we?y?be.value()[0]:be.value():be)})}),Er(["pop","push","shift","sort","splice","unshift"],function(l){var u=uc[l],h=/^(?:push|sort|unshift)$/.test(l)?"tap":"thru",y=/^(?:pop|shift)$/.test(l);T.prototype[l]=function(){var k=arguments;if(y&&!this.__chain__){var N=this.value();return u.apply(Te(N)?N:[],k)}return this[h](function(P){return u.apply(Te(P)?P:[],k)})}}),di(Ie.prototype,function(l,u){var h=T[u];if(h){var y=h.name+"";Ve.call(il,y)||(il[y]=[]),il[y].push({name:u,func:h})}}),il[Oc(n,x).name]=[{name:"wrapper",func:n}],Ie.prototype.clone=FM,Ie.prototype.reverse=$M,Ie.prototype.value=HM,T.prototype.at=yA,T.prototype.chain=vA,T.prototype.commit=xA,T.prototype.next=wA,T.prototype.plant=SA,T.prototype.reverse=kA,T.prototype.toJSON=T.prototype.valueOf=T.prototype.value=CA,T.prototype.first=T.prototype.head,ha&&(T.prototype[ha]=bA),T},tl=xM();so?((so.exports=tl)._=tl,Qh._=tl):Kt._=tl}).call(gl)}(Va,Va.exports)),Va.exports}var Am={exports:{}},Pm,sb;function l3(){if(sb)return Pm;sb=1;var t="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return Pm=t,Pm}var Rm,ob;function a3(){if(ob)return Rm;ob=1;var t=l3();function e(){}function n(){}return n.resetWarningCache=e,Rm=function(){function r(o,a,c,f,d,p){if(p!==t){var m=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw m.name="Invariant Violation",m}}r.isRequired=r;function i(){return r}var s={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:i,element:r,elementType:r,instanceOf:i,node:r,objectOf:i,oneOf:i,oneOfType:i,shape:i,exact:i,checkPropTypes:n,resetWarningCache:e};return s.PropTypes=s,s},Rm}var lb;function Dy(){return lb||(lb=1,Am.exports=a3()()),Am.exports}(function(t,e){(function(r,i){t.exports=i(G,o3(),Dy())})(gl,function(n,r,i){return function(){var s={"./src/Xarrow/utils/buzzier.js":function(f,d,p){p.r(d),p.d(d,{bzFunction:function(){return m},buzzierMinSols:function(){return g}});var m=function(S,C,x,w){return function(E){return Math.pow(1-E,3)*S+3*Math.pow(1-E,2)*E*C+3*(1-E)*Math.pow(E,2)*x+Math.pow(E,3)*w}},g=function(S,C,x,w){var E=m(S,C,x,w),M=-6*S+12*C-6*x,_=Math.pow(-6*S+12*C-6*x,2)-4*(3*C-3*S)*(-3*S+9*C-9*x+3*w),O=2*(-3*S+9*C-9*x+3*w),A=E((M+Math.sqrt(_))/O),R=E((M-Math.sqrt(_))/O);return[A,R]}},"./src/Xarrow/Xarrow.tsx":function(f,d,p){var m=this&&this.__assign||function(){return m=Object.assign||function(R){for(var z,B=1,te=arguments.length;B<te;B++){z=arguments[B];for(var re in z)Object.prototype.hasOwnProperty.call(z,re)&&(R[re]=z[re])}return R},m.apply(this,arguments)},g=this&&this.__createBinding||(Object.create?function(R,z,B,te){te===void 0&&(te=B),Object.defineProperty(R,te,{enumerable:!0,get:function(){return z[B]}})}:function(R,z,B,te){te===void 0&&(te=B),R[te]=z[B]}),v=this&&this.__setModuleDefault||(Object.create?function(R,z){Object.defineProperty(R,"default",{enumerable:!0,value:z})}:function(R,z){R.default=z}),S=this&&this.__importStar||function(R){if(R&&R.__esModule)return R;var z={};if(R!=null)for(var B in R)B!=="default"&&Object.prototype.hasOwnProperty.call(R,B)&&g(z,R,B);return v(z,R),z},C=this&&this.__spreadArray||function(R,z){for(var B=0,te=z.length,re=R.length;B<te;B++,re++)R[re]=z[B];return R},x=this&&this.__importDefault||function(R){return R&&R.__esModule?R:{default:R}};Object.defineProperty(d,"__esModule",{value:!0});var w=S(p("react")),E=x(p("./src/Xarrow/useXarrowProps.ts")),M=p("./src/Xwrapper.tsx"),_=x(p("./src/Xarrow/propTypes.ts")),O=p("./src/Xarrow/utils/GetPosition.tsx"),A=function(R){var z,B=w.useRef({svgRef:w.useRef(null),lineRef:w.useRef(null),headRef:w.useRef(null),tailRef:w.useRef(null),lineDrawAnimRef:w.useRef(null),lineDashAnimRef:w.useRef(null),headOpacityAnimRef:w.useRef(null)}),te=B.current,re=te.svgRef,le=te.lineRef,de=te.headRef;te.tailRef;var pe=te.lineDrawAnimRef,ee=te.lineDashAnimRef,ie=te.headOpacityAnimRef;w.useContext(M.XarrowContext);var L=E.default(R,B.current),$=L[0],K=$.labels,Z=$.lineColor,ge=$.headColor,Q=$.tailColor,Qe=$.strokeWidth,it=$.showHead,Xe=$.showTail,ze=$.dashness,H=$.headShape,se=$.tailShape,he=$.showXarrow,ve=$.animateDrawing,Ze=$.zIndex,Se=$.passProps,Ee=$.arrowBodyProps,An=$.arrowHeadProps,ns=$.arrowTailProps,Wt=$.SVGcanvasProps,Pn=$.divContainerProps,ui=$.divContainerStyle,jt=$.SVGcanvasStyle,Ue=$._debug,Tt=$.shouldUpdatePosition;ve=R.animateDrawing;var Nt=w.useState(!ve),Ni=Nt[0],Wr=Nt[1],Xo=w.useState({}),Kr=Xo[1],Jn=function(){return Kr({})},ht=w.useState({cx0:0,cy0:0,cw:0,ch:0,x1:0,y1:0,x2:0,y2:0,dx:0,dy:0,absDx:0,absDy:0,cpx1:0,cpy1:0,cpx2:0,cpy2:0,headOrient:0,tailOrient:0,arrowHeadOffset:{x:0,y:0},arrowTailOffset:{x:0,y:0},headOffset:0,excRight:0,excLeft:0,excUp:0,excDown:0,startPoints:[],endPoints:[],mainDivPos:{x:0,y:0},xSign:1,ySign:1,lineLength:0,fHeadSize:1,fTailSize:1,arrowPath:"",labelStartPos:{x:0,y:0},labelMiddlePos:{x:0,y:0},labelEndPos:{x:0,y:0}}),ce=ht[0],De=ht[1];w.useLayoutEffect(function(){if(Tt.current){var hn=O.getPosition(L,B);De(hn),Tt.current=!1}});var Fe=ce.x2-ce.arrowHeadOffset.x,rs=ce.y2-ce.arrowHeadOffset.y,Rn=ce.x1-ce.arrowTailOffset.x,Yn=ce.y1-ce.arrowTailOffset.y,wt=ze.strokeLen+ze.nonStrokeLen,pt=1;ze.animation<0&&(ze.animation*=-1,pt=-1);var ci,xr,qr,Dn,Qn=0;return ve&&Ni==!1?(typeof ve=="boolean"&&(ve=1),xr=ve+"s",ci=ce.lineLength,Dn=ce.lineLength,qr=1,ve<0&&(z=[Qn,Dn],Dn=z[0],Qn=z[1],xr=ve*-1+"s")):(ci=ze.strokeLen+" "+ze.nonStrokeLen,xr=1/ze.animation+"s",Dn=wt*pt,qr="indefinite",Qn=0),w.useLayoutEffect(function(){le.current&&De(function(hn){var bt,fi;return m(m({},hn),{lineLength:(fi=(bt=le.current)===null||bt===void 0?void 0:bt.getTotalLength())!==null&&fi!==void 0?fi:0})})},[le.current]),w.useEffect(function(){var hn=function(){window.addEventListener("resize",Jn);var fi=function(){var wr,nn;Wr(!0),(wr=ie.current)===null||wr===void 0||wr.beginElement(),(nn=ee.current)===null||nn===void 0||nn.beginElement()},Zn=function(){return de.current.style.opacity="0"};return pe.current&&de.current&&(pe.current.addEventListener("endEvent",fi),pe.current.addEventListener("beginEvent",Zn)),function(){window.removeEventListener("resize",Jn),pe.current&&(pe.current.removeEventListener("endEvent",fi),de.current&&pe.current.removeEventListener("beginEvent",Zn))}},bt=hn();return function(){Wr(!1),bt()}},[he]),w.default.createElement("div",m({},Pn,{style:m({position:"absolute",zIndex:Ze},ui)}),he?w.default.createElement(w.default.Fragment,null,w.default.createElement("svg",m({ref:re,width:ce.cw,height:ce.ch,style:m({position:"absolute",left:ce.cx0,top:ce.cy0,pointerEvents:"none",border:Ue?"1px dashed yellow":null},jt),overflow:"auto"},Wt),w.default.createElement("path",m({ref:le,d:ce.arrowPath,stroke:Z,strokeDasharray:ci,strokeWidth:Qe,fill:"transparent",pointerEvents:"visibleStroke"},Se,Ee),w.default.createElement(w.default.Fragment,null,Ni?w.default.createElement(w.default.Fragment,null,ze.animation?w.default.createElement("animate",{ref:ee,attributeName:"stroke-dashoffset",values:wt*pt+";0",dur:1/ze.animation+"s",repeatCount:"indefinite"}):null):w.default.createElement(w.default.Fragment,null,ve?w.default.createElement("animate",{ref:pe,id:"svgEndAnimate",attributeName:"stroke-dashoffset",values:Dn+";"+Qn,dur:xr,repeatCount:qr}):null))),Xe?w.default.createElement("g",m({fill:Q,pointerEvents:"auto",transform:"translate("+Rn+","+Yn+") rotate("+ce.tailOrient+") scale("+ce.fTailSize+")"},Se,ns),se.svgElem):null,it?w.default.createElement("g",m({ref:de,fill:ge,pointerEvents:"auto",transform:"translate("+Fe+","+rs+") rotate("+ce.headOrient+") scale("+ce.fHeadSize+")",opacity:ve&&!Ni?0:1},Se,An),w.default.createElement("animate",{ref:ie,dur:"0.4",attributeName:"opacity",from:"0",to:"1",begin:"indefinite",repeatCount:"0",fill:"freeze"}),H.svgElem):null,Ue?w.default.createElement(w.default.Fragment,null,w.default.createElement("circle",{r:"5",cx:ce.cpx1,cy:ce.cpy1,fill:"green"}),w.default.createElement("circle",{r:"5",cx:ce.cpx2,cy:ce.cpy2,fill:"blue"}),w.default.createElement("rect",{x:ce.excLeft,y:ce.excUp,width:ce.absDx,height:ce.absDy,fill:"none",stroke:"pink",strokeWidth:"2px"})):null),K.start?w.default.createElement("div",{style:{transform:ce.dx<0?"translate(-100% , -50%)":"translate(-0% , -50%)",width:"max-content",position:"absolute",left:ce.cx0+ce.labelStartPos.x,top:ce.cy0+ce.labelStartPos.y-Qe-5}},K.start):null,K.middle?w.default.createElement("div",{style:{display:"table",width:"max-content",transform:"translate(-50% , -50%)",position:"absolute",left:ce.cx0+ce.labelMiddlePos.x,top:ce.cy0+ce.labelMiddlePos.y}},K.middle):null,K.end?w.default.createElement("div",{style:{transform:ce.dx>0?"translate(-100% , -50%)":"translate(-0% , -50%)",width:"max-content",position:"absolute",left:ce.cx0+ce.labelEndPos.x,top:ce.cy0+ce.labelEndPos.y+Qe+5}},K.end):null,Ue?w.default.createElement(w.default.Fragment,null,C(C([],ce.startPoints),ce.endPoints).map(function(hn,bt){return w.default.createElement("div",{key:bt,style:{background:"gray",opacity:.5,borderRadius:"50%",transform:"translate(-50%, -50%)",height:5,width:5,position:"absolute",left:hn.x-ce.mainDivPos.x,top:hn.y-ce.mainDivPos.y}})})):null):null)};A.propTypes=_.default,d.default=A},"./src/Xarrow/anchors.ts":function(f,d,p){f=p.nmd(f),Object.defineProperty(d,"__esModule",{value:!0}),d.calcAnchors=void 0;var m=function(v,S){return{middle:{x:v*.5,y:S*.5},left:{x:0,y:S*.5},right:{x:v,y:S*.5},top:{x:v*.5,y:0},bottom:{x:v*.5,y:S}}},g=function(v,S){return v.map(function(C){var x=m(S.right-S.x,S.bottom-S.y),w=x[C.position],E=w.x,M=w.y;return{x:S.x+E+C.offset.x,y:S.y+M+C.offset.y,anchor:C}})};d.calcAnchors=g,p.c[p.s]},"./src/Xarrow/propTypes.ts":function(f,d,p){var m=this&&this.__importDefault||function(B){return B&&B.__esModule?B:{default:B}};Object.defineProperty(d,"__esModule",{value:!0});var g=m(p("prop-types")),v=p("./src/constants.tsx"),S=g.default.oneOf(v.cAnchorEdge),C=g.default.exact({position:S.isRequired,offset:g.default.exact({x:g.default.number,y:g.default.number}).isRequired}),x=g.default.oneOfType([S,C]),w=g.default.oneOfType([x,g.default.arrayOf(x)]),E=g.default.oneOfType([g.default.string,g.default.exact({current:g.default.any})]),M=g.default.oneOfType([g.default.element,g.default.string]),_=g.default.exact({start:M,middle:M,end:M}),O=g.default.oneOf(Object.keys(v.arrowShapes)),A=g.default.any,R=g.default.oneOfType([O,g.default.exact({svgElem:A,offsetForward:g.default.number}).isRequired]),z={start:E.isRequired,end:E.isRequired,startAnchor:w,endAnchor:w,labels:g.default.oneOfType([M,_]),color:g.default.string,lineColor:g.default.string,showHead:g.default.bool,headColor:g.default.string,headSize:g.default.number,tailSize:g.default.number,tailColor:g.default.string,strokeWidth:g.default.number,showTail:g.default.bool,path:g.default.oneOf(v.cPaths),showXarrow:g.default.bool,curveness:g.default.number,gridBreak:g.default.string,dashness:g.default.oneOfType([g.default.bool,g.default.object]),headShape:R,tailShape:R,animateDrawing:g.default.oneOfType([g.default.bool,g.default.number]),zIndex:g.default.number,passProps:g.default.object,arrowBodyProps:g.default.object,arrowHeadProps:g.default.object,arrowTailProps:g.default.object,SVGcanvasProps:g.default.object,divContainerProps:g.default.object,_extendSVGcanvas:g.default.number,_debug:g.default.bool,_cpx1Offset:g.default.number,_cpy1Offset:g.default.number,_cpx2Offset:g.default.number,_cpy2Offset:g.default.number};d.default=z},"./src/Xarrow/useXarrowProps.ts":function(f,d,p){var m=this&&this.__assign||function(){return m=Object.assign||function(H){for(var se,he=1,ve=arguments.length;he<ve;he++){se=arguments[he];for(var Ze in se)Object.prototype.hasOwnProperty.call(se,Ze)&&(H[Ze]=se[Ze])}return H},m.apply(this,arguments)},g=this&&this.__createBinding||(Object.create?function(H,se,he,ve){ve===void 0&&(ve=he),Object.defineProperty(H,ve,{enumerable:!0,get:function(){return se[he]}})}:function(H,se,he,ve){ve===void 0&&(ve=he),H[ve]=se[he]}),v=this&&this.__setModuleDefault||(Object.create?function(H,se){Object.defineProperty(H,"default",{enumerable:!0,value:se})}:function(H,se){H.default=se}),S=this&&this.__importStar||function(H){if(H&&H.__esModule)return H;var se={};if(H!=null)for(var he in H)he!=="default"&&Object.prototype.hasOwnProperty.call(H,he)&&g(se,H,he);return v(se,H),se},C=this&&this.__importDefault||function(H){return H&&H.__esModule?H:{default:H}};Object.defineProperty(d,"__esModule",{value:!0});var x=S(p("react")),w=p("./src/Xarrow/utils/index.ts"),E=C(p("lodash")),M=p("./src/constants.tsx"),_=function(H){var se={start:null,middle:null,end:null};if(H)if(typeof H=="string"||x.default.isValidElement(H))se.middle=H;else for(var he in H)se[he]=H[he];return se},O=function(H){var se=Array.isArray(H)?H:[H],he=se.map(function(Se){return typeof Se=="string"?{position:Se}:Se});he=he.filter(function(Se){return M.cAnchorEdge.includes(Se.position)}),he.length==0&&(he=[{position:"auto"}]);var ve=he.filter(function(Se){return Se.position==="auto"});ve.length>0&&(he=he.filter(function(Se){return Se.position!=="auto"}),he.push.apply(he,ve.flatMap(function(Se){return["left","right","top","bottom"].map(function(Ee){return m(m({},Se),{position:Ee})})})));var Ze=he.map(function(Se){if(typeof Se=="object"){var Ee=Se;return Ee.position||(Ee.position="auto"),Ee.offset||(Ee.offset={x:0,y:0}),Ee.offset.y||(Ee.offset.y=0),Ee.offset.x||(Ee.offset.x=0),Ee=Ee,Ee}else return Se});return Ze},A=function(H,se){var he=0,ve=0,Ze,Se=1;return typeof H=="object"?(he=H.strokeLen||se.strokeWidth*2,ve=H.strokeLen?H.nonStrokeLen:se.strokeWidth,Ze=H.animation?H.animation:null):typeof H=="boolean"&&H&&(he=se.strokeWidth*2,ve=se.strokeWidth,Ze=null),{strokeLen:he,nonStrokeLen:ve,animation:Ze,animDirection:Se}},R=function(H){return typeof H=="string"&&(H in M.arrowShapes?H=M.arrowShapes[H]:(console.warn("'"+H+"' is not supported arrow shape. the supported arrow shapes is one of "+M.cArrowShapes+`.
           reverting to default shape.`),H=M.arrowShapes.arrow1)),H=H,(H==null?void 0:H.offsetForward)===void 0&&(H.offsetForward=.25),(H==null?void 0:H.svgElem)===void 0&&(H.svgElem="path"),H},z=function(H){var se=w.xStr2absRelative(H);return se||(se={relative:.5,abs:0}),se},B=function(H,se){return se&&(se.current=!0),H},te=function(H){return H},re=function(H,se,he){return B(H,he)},le=function(H,se,he){return B(Number(H),he)},de=function(H){return Number(H)},pe={start:function(H){return w.getElementByPropGiven(H)},end:function(H){return w.getElementByPropGiven(H)},startAnchor:function(H,se,he){return B(O(H),he)},endAnchor:function(H,se,he){return B(O(H),he)},labels:function(H){return _(H)},color:te,lineColor:function(H,se){return H||se.color},headColor:function(H,se){return H||se.color},tailColor:function(H,se){return H||se.color},strokeWidth:le,showHead:re,headSize:le,showTail:re,tailSize:le,path:re,curveness:le,gridBreak:function(H,se,he){return B(z(H),he)},dashness:function(H,se){return A(H,se)},headShape:function(H){return R(H)},tailShape:function(H){return R(H)},showXarrow:te,animateDrawing:te,zIndex:de,passProps:te,arrowBodyProps:re,arrowHeadProps:re,arrowTailProps:re,SVGcanvasProps:re,divContainerProps:re,divContainerStyle:re,SVGcanvasStyle:re,_extendSVGcanvas:re,_debug:re,_cpx1Offset:re,_cpy1Offset:re,_cpx2Offset:re,_cpy2Offset:re},ee={};for(var ie in pe)ee[ie]=[ie];for(var L=0,$=["lineColor","headColor","tailColor"];L<$.length;L++){var ie=$[L];ee[ie].push("color")}var K=function(H,se){for(var he,ve=0,Ze=Object.entries(H);ve<Ze.length;ve++){var Se=Ze[ve],Ee=Se[0],An=Se[1];se[Ee]=(he=pe==null?void 0:pe[Ee])===null||he===void 0?void 0:he.call(pe,An,se)}return se},Z={start:null,end:null,startAnchor:"auto",endAnchor:"auto",labels:null,color:"CornflowerBlue",lineColor:null,headColor:null,tailColor:null,strokeWidth:4,showHead:!0,headSize:6,showTail:!1,tailSize:6,path:"smooth",curveness:.8,gridBreak:"50%",dashness:!1,headShape:"arrow1",tailShape:"arrow1",showXarrow:!0,animateDrawing:!1,zIndex:0,passProps:{},arrowBodyProps:{},arrowHeadProps:{},arrowTailProps:{},SVGcanvasProps:{},divContainerProps:{},divContainerStyle:{},SVGcanvasStyle:{},_extendSVGcanvas:0,_debug:!1,_cpx1Offset:0,_cpy1Offset:0,_cpx2Offset:0,_cpy2Offset:0},ge={};ge=K(Z,ge);var Q={startPos:{x:0,y:0,right:0,bottom:0},endPos:{x:0,y:0,right:0,bottom:0}};function Qe(H,se){return E.default.isEqual(H,se)}function it(H){var se=x.useRef();return Qe(H,se.current)||(se.current=H),se.current}function Xe(H,se){x.useLayoutEffect(H,se.map(it))}var ze=function(H,se){var he=x.useState(ge),ve=he[0],Ze=he[1],Se=x.useRef(!1);ve.shouldUpdatePosition=Se;var Ee=m(m({},Z),H),An=function(Tt){x.useLayoutEffect(function(){var Nt;ve[Tt]=(Nt=pe==null?void 0:pe[Tt])===null||Nt===void 0?void 0:Nt.call(pe,Ee[Tt],ve,Se),Ze(m({},ve))},ee[Tt].map(function(Nt){return H[Nt]}))};for(var ns in Z)An(ns);var Wt=x.useState(Q),Pn=Wt[0],ui=Wt[1],jt=w.getElemPos(ve.start);Xe(function(){Pn.startPos=jt,Se.current=!0,ui(m({},Pn))},[jt]);var Ue=w.getElemPos(ve.end);return Xe(function(){Pn.endPos=Ue,Se.current=!0,ui(m({},Pn))},[Ue]),x.useLayoutEffect(function(){Se.current=!0,ui(m({},Pn))},[ve.headShape.svgElem,ve.tailShape.svgElem]),[ve,Pn]};d.default=ze},"./src/Xarrow/utils/GetPosition.tsx":function(f,d,p){var m=this&&this.__importDefault||function(E){return E&&E.__esModule?E:{default:E}};Object.defineProperty(d,"__esModule",{value:!0}),d.getPosition=void 0;var g=p("./src/Xarrow/anchors.ts"),v=p("./src/Xarrow/utils/index.ts"),S=m(p("lodash")),C=p("./src/constants.tsx"),x=p("./src/Xarrow/utils/buzzier.js"),w=function(E,M){var _,O,A,R,z=E[0],B=E[1],te=z.startAnchor,re=z.endAnchor,le=z.strokeWidth,de=z.showHead,pe=z.headSize,ee=z.showTail,ie=z.tailSize,L=z.path,$=z.curveness,K=z.gridBreak,Z=z.headShape,ge=z.tailShape,Q=z._extendSVGcanvas,Qe=z._cpx1Offset,it=z._cpy1Offset,Xe=z._cpx2Offset,ze=z._cpy2Offset,H=B.startPos,se=B.endPos,he=M.current,ve=he.svgRef,Ze=he.lineRef,Se=0,Ee=0,An=g.calcAnchors(te,H),ns=g.calcAnchors(re,se),Wt=v.getShortestLine(An,ns),Pn=Wt.chosenStart,ui=Wt.chosenEnd,jt=Pn.anchor.position,Ue=ui.anchor.position,Tt=S.default.pick(Pn,["x","y"]),Nt=S.default.pick(ui,["x","y"]),Ni=v.getSvgPos(ve),Wr=Math.min(Tt.x,Nt.x)-Ni.x,Xo=Math.min(Tt.y,Nt.y)-Ni.y,Kr=Nt.x-Tt.x,Jn=Nt.y-Tt.y,ht=Math.abs(Nt.x-Tt.x),ce=Math.abs(Nt.y-Tt.y),De=Kr>0?1:-1,Fe=Jn>0?1:-1,rs=[Z.offsetForward,ge.offsetForward],Rn=rs[0],Yn=rs[1],wt=pe*le,pt=ie*le,ci=0,xr=0,qr=0,Dn=0,Qn=wt*Rn,hn=pt*Yn,bt=Number($);C.cPaths.includes(L)||(L="smooth"),L==="straight"&&(bt=0,L="smooth");var fi=pe>ie?pe:ie,Zn=le+le*fi/2,wr=Zn,nn=Zn,br=Zn,ro=Zn;nn+=Number(Q),wr+=Number(Q),br+=Number(Q),ro+=Number(Q);var pn=0,In=ht,mn=0,Ln=ce;if(Kr<0&&(_=[In,pn],pn=_[0],In=_[1]),Jn<0&&(O=[Ln,mn],mn=O[0],Ln=O[1]),bt===0){var Sr=Math.atan(ce/ht);de&&(In-=wt*(1-Rn)*De*Math.cos(Sr),Ln-=wt*(1-Rn)*Fe*Math.sin(Sr),Sr*=Fe,De<0&&(Sr=(Math.PI-Sr*De)*De),ci=Math.cos(Sr)*Qn-Math.sin(Sr)*wt/2,xr=Math.cos(Sr)*wt/2+Math.sin(Sr)*Qn,Se=Sr*180/Math.PI);var kr=Math.atan(ce/ht);ee&&(pn+=pt*(1-Yn)*De*Math.cos(kr),mn+=pt*(1-Yn)*Fe*Math.sin(kr),kr*=-Fe,De>0&&(kr=(Math.PI-kr*De)*De),qr=Math.cos(kr)*hn-Math.sin(kr)*pt/2,Dn=Math.cos(kr)*pt/2+Math.sin(kr)*hn,Ee=kr*180/Math.PI)}else Ue==="middle"&&(ht>ce?Ue="left":Ue="top"),de&&(["left","right"].includes(Ue)?(ci+=Qn*De,In-=wt*(1-Rn)*De,xr+=wt*De/2,Ue==="left"?(Se=0,De<0&&(Se+=180)):(Se=180,De>0&&(Se+=180))):["top","bottom"].includes(Ue)&&(ci+=wt*-Fe/2,xr+=Qn*Fe,Ln-=wt*Fe-xr,Ue==="top"?(Se=270,Fe>0&&(Se+=180)):(Se=90,Fe<0&&(Se+=180))));ee&&bt!==0&&(["left","right"].includes(jt)?(qr+=hn*-De,pn+=pt*De+qr,Dn+=-(pt*De)/2,jt==="left"?(Ee=180,De<0&&(Ee+=180)):(Ee=0,De>0&&(Ee+=180))):["top","bottom"].includes(jt)&&(Dn+=hn*-Fe,mn+=pt*Fe+Dn,qr+=pt*Fe/2,jt==="top"?(Ee=90,Fe>0&&(Ee+=180)):(Ee=270,Fe<0&&(Ee+=180))));var Vh={x:ci,y:xr},Wh={x:qr,y:Dn},gn=pn,yn=mn,jn=In,vn=Ln,aa={};L==="smooth"?aa={hh:function(){gn+=ht*bt*De,jn-=ht*bt*De},vv:function(){yn+=ce*bt*Fe,vn-=ce*bt*Fe},hv:function(){gn+=ht*bt*De,vn-=ce*bt*Fe},vh:function(){yn+=ce*bt*Fe,jn-=ht*bt*De}}:L==="grid"&&(aa={hh:function(){gn+=(ht*K.relative+K.abs)*De,jn-=(ht*(1-K.relative)-K.abs)*De,de&&(gn-=wt*(1-Rn)/2*De,jn+=wt*(1-Rn)/2*De),ee&&(gn-=pt*(1-Yn)/2*De,jn+=pt*(1-Yn)/2*De)},vv:function(){yn+=(ce*K.relative+K.abs)*Fe,vn-=(ce*(1-K.relative)-K.abs)*Fe,de&&(yn-=wt*(1-Rn)/2*Fe,vn+=wt*(1-Rn)/2*Fe),ee&&(yn-=pt*(1-Yn)/2*Fe,vn+=pt*(1-Yn)/2*Fe)},hv:function(){gn=In},vh:function(){yn=Ln}});var er="";["left","right"].includes(jt)?er+="h":["bottom","top"].includes(jt)?er+="v":jt==="middle"&&(er+="m"),["left","right"].includes(Ue)?er+="h":["bottom","top"].includes(Ue)?er+="v":Ue==="middle"&&(er+="m"),ht>ce?er=er.replace(/m/g,"h"):er=er.replace(/m/g,"v"),aa[er](),gn+=Qe,yn+=it,jn+=Xe,vn+=ze;var Yu=x.buzzierMinSols(pn,gn,jn,In),Qu=Yu[0],Zu=Yu[1],ec=x.buzzierMinSols(mn,yn,vn,Ln),io=ec[0],tc=ec[1];Qu<0&&(nn+=-Qu),Zu>ht&&(wr+=Zu-ht),io<0&&(br+=-io),tc>ce&&(ro+=tc-ce),L==="grid"&&(nn+=Zn,wr+=Zn,br+=Zn,ro+=Zn),pn+=nn,In+=nn,mn+=br,Ln+=br,gn+=nn,jn+=nn,yn+=br,vn+=br;var Jo=ht+nn+wr,Kh=ce+br+ro;Wr-=nn,Xo-=br;var ua=x.bzFunction(pn,gn,jn,In),ca=x.bzFunction(mn,yn,vn,Ln),nc={x:ua(.01),y:ca(.01)},rc={x:ua(.5),y:ca(.5)},ic={x:ua(.99),y:ca(.99)},fa;return L==="grid"?fa="M "+pn+" "+mn+" L  "+gn+" "+yn+" L "+jn+" "+vn+" "+In+" "+Ln:L==="smooth"&&(fa="M "+pn+" "+mn+" C "+gn+" "+yn+", "+jn+" "+vn+", "+In+" "+Ln),{cx0:Wr,cy0:Xo,x1:pn,x2:In,y1:mn,y2:Ln,cw:Jo,ch:Kh,cpx1:gn,cpy1:yn,cpx2:jn,cpy2:vn,dx:Kr,dy:Jn,absDx:ht,absDy:ce,headOrient:Se,tailOrient:Ee,labelStartPos:nc,labelMiddlePos:rc,labelEndPos:ic,excLeft:nn,excRight:wr,excUp:br,excDown:ro,headOffset:Qn,arrowHeadOffset:Vh,arrowTailOffset:Wh,startPoints:An,endPoints:ns,mainDivPos:Ni,xSign:De,ySign:Fe,lineLength:(R=(A=Ze.current)===null||A===void 0?void 0:A.getTotalLength())!==null&&R!==void 0?R:0,fHeadSize:wt,fTailSize:pt,arrowPath:fa}};d.getPosition=w},"./src/Xarrow/utils/index.ts":function(f,d){Object.defineProperty(d,"__esModule",{value:!0}),d.getSvgPos=d.getElemPos=d.getShortestLine=d.xStr2absRelative=d.factorDpathStr=d.getElementByPropGiven=void 0;var p=function(w){var E;return typeof w=="string"?E=document.getElementById(w):E=w==null?void 0:w.current,E};d.getElementByPropGiven=p;var m=function(w,E){var M=w.split(/(\d+(?:\.\d+)?)/);return M=M.map(function(_){return Number(_)?(Number(_)*E).toString():_}),M.join("")};d.factorDpathStr=m;var g=function(w){if(typeof w!="string")return{abs:0,relative:.5};var E=w.split("%"),M=0,_=0;if(E.length==1){var O=parseFloat(E[0]);if(!isNaN(O))return M=O,{abs:M,relative:0}}else if(E.length==2){var A=[parseFloat(E[0]),parseFloat(E[1])],R=A[0],z=A[1];if(isNaN(R)||(_=R/100),isNaN(z)||(M=z),!isNaN(R)||!isNaN(z))return{abs:M,relative:_}}};d.xStr2absRelative=g;var v=function(w,E){return Math.sqrt(Math.pow(w.x-E.x,2)+Math.pow(w.y-E.y,2))},S=function(w,E){var M=1/0,_=1/0,O;return w.forEach(function(A){E.forEach(function(R){_=v(A,R),_<M&&(M=_,O={chosenStart:A,chosenEnd:R})})}),O};d.getShortestLine=S;var C=function(w){if(!w)return{x:0,y:0,right:0,bottom:0};var E=w.getBoundingClientRect();return{x:E.left,y:E.top,right:E.right,bottom:E.bottom}};d.getElemPos=C;var x=function(w){if(!w.current)return{x:0,y:0};var E=w.current.getBoundingClientRect(),M=E.left,_=E.top,O=getComputedStyle(w.current),A=Number(O.left.slice(0,-2)),R=Number(O.top.slice(0,-2));return{x:M-A,y:_-R}};d.getSvgPos=x},"./src/Xwrapper.tsx":function(f,d,p){var m=this&&this.__createBinding||(Object.create?function(_,O,A,R){R===void 0&&(R=A),Object.defineProperty(_,R,{enumerable:!0,get:function(){return O[A]}})}:function(_,O,A,R){R===void 0&&(R=A),_[R]=O[A]}),g=this&&this.__setModuleDefault||(Object.create?function(_,O){Object.defineProperty(_,"default",{enumerable:!0,value:O})}:function(_,O){_.default=O}),v=this&&this.__importStar||function(_){if(_&&_.__esModule)return _;var O={};if(_!=null)for(var A in _)A!=="default"&&Object.prototype.hasOwnProperty.call(_,A)&&m(O,_,A);return g(O,_),O};Object.defineProperty(d,"__esModule",{value:!0}),d.XarrowContext=d.XelemContext=void 0;var S=v(p("react"));d.XelemContext=S.default.createContext(null),d.XarrowContext=S.default.createContext(null);var C={},x=0,w=function(_){var O=_.children,A=_.instanceCount,R=S.useState({}),z=R[1],B=function(){return z({})};return S.useEffect(function(){A.current=x,C[A.current]=B},[]),S.default.createElement(d.XarrowContext.Provider,{value:B},O)},E=function(_){var O=_.children,A=_.instanceCount;return S.default.createElement(d.XelemContext.Provider,{value:C[A.current]},O)},M=function(_){var O=_.children,A=S.useRef(x),R=S.useState({}),z=R[1];return S.useEffect(function(){return x++,z({}),function(){delete C[A.current]}},[]),S.default.createElement(E,{instanceCount:A},S.default.createElement(w,{instanceCount:A},O))};d.default=M},"./src/constants.tsx":function(f,d,p){var m=this&&this.__importDefault||function(v){return v&&v.__esModule?v:{default:v}};Object.defineProperty(d,"__esModule",{value:!0}),d.cArrowShapes=d.arrowShapes=d.cSvgElems=d.cPaths=d.cAnchorEdge=void 0;var g=m(p("react"));d.cAnchorEdge=["middle","left","right","top","bottom","auto"],d.cPaths=["smooth","grid","straight"],d.cSvgElems=["circle","ellipse","line","path","polygon","polyline","rect"],d.arrowShapes={arrow1:{svgElem:g.default.createElement("path",{d:"M 0 0 L 1 0.5 L 0 1 L 0.25 0.5 z"}),offsetForward:.25},heart:{svgElem:g.default.createElement("path",{d:"M 0,0.25 A 0.125,0.125 0,0,1 0.5,0.25 A 0.125,0.125 0,0,1 1,0.25 Q 1,0.625 0.5,1 Q 0,0.625 0,0.25 z"}),offsetForward:.1},circle:{svgElem:g.default.createElement("circle",{r:.5,cx:.5,cy:.5}),offsetForward:0}},d.cArrowShapes=Object.keys(d.arrowShapes)},"./src/index.tsx":function(f,d,p){var m=this&&this.__createBinding||(Object.create?function(w,E,M,_){_===void 0&&(_=M),Object.defineProperty(w,_,{enumerable:!0,get:function(){return E[M]}})}:function(w,E,M,_){_===void 0&&(_=M),w[_]=E[M]}),g=this&&this.__exportStar||function(w,E){for(var M in w)M!=="default"&&!Object.prototype.hasOwnProperty.call(E,M)&&m(E,w,M)},v=this&&this.__importDefault||function(w){return w&&w.__esModule?w:{default:w}};Object.defineProperty(d,"__esModule",{value:!0}),d.useXarrow=d.Xwrapper=d.default=void 0;var S=p("./src/Xarrow/Xarrow.tsx");Object.defineProperty(d,"default",{enumerable:!0,get:function(){return v(S).default}}),g(p("./src/types.ts"),d),g(p("./src/constants.tsx"),d);var C=p("./src/Xwrapper.tsx");Object.defineProperty(d,"Xwrapper",{enumerable:!0,get:function(){return v(C).default}});var x=p("./src/useXarrow.tsx");Object.defineProperty(d,"useXarrow",{enumerable:!0,get:function(){return v(x).default}})},"./src/types.ts":function(f,d){Object.defineProperty(d,"__esModule",{value:!0})},"./src/useXarrow.tsx":function(f,d,p){Object.defineProperty(d,"__esModule",{value:!0});var m=p("react"),g=p("./src/Xwrapper.tsx"),v=function(){var S=m.useState({}),C=S[1],x=function(){return C({})},w=m.useContext(g.XelemContext);return w||(w=function(){}),m.useLayoutEffect(function(){w()}),x};d.default=v},lodash:function(f){f.exports=r},"prop-types":function(f){f.exports=i},react:function(f){f.exports=n}},o={};function a(f){var d=o[f];if(d!==void 0)return d.exports;var p=o[f]={id:f,loaded:!1,exports:{}};return s[f].call(p.exports,p,p.exports,a),p.loaded=!0,p.exports}a.c=o,function(){a.d=function(f,d){for(var p in d)a.o(d,p)&&!a.o(f,p)&&Object.defineProperty(f,p,{enumerable:!0,get:d[p]})}}(),function(){a.o=function(f,d){return Object.prototype.hasOwnProperty.call(f,d)}}(),function(){a.r=function(f){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(f,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(f,"__esModule",{value:!0})}}(),function(){a.nmd=function(f){return f.paths=[],f.children||(f.children=[]),f}}();var c=a(a.s="./src/index.tsx");return c}()})})(uE);var l0=uE.exports;const u3=sh(l0);function c3(t,e){if(t.match(/^[a-z]+:\/\//i))return t;if(t.match(/^\/\//))return window.location.protocol+t;if(t.match(/^[a-z]+:/i))return t;const n=document.implementation.createHTMLDocument(),r=n.createElement("base"),i=n.createElement("a");return n.head.appendChild(r),n.body.appendChild(i),e&&(r.href=e),i.href=t,i.href}const f3=(()=>{let t=0;const e=()=>`0000${(Math.random()*36**4<<0).toString(36)}`.slice(-4);return()=>(t+=1,`u${e()}${t}`)})();function $s(t){const e=[];for(let n=0,r=t.length;n<r;n++)e.push(t[n]);return e}let dl=null;function cE(t={}){return dl||(t.includeStyleProperties?(dl=t.includeStyleProperties,dl):(dl=$s(window.getComputedStyle(document.documentElement)),dl))}function fd(t,e){const r=(t.ownerDocument.defaultView||window).getComputedStyle(t).getPropertyValue(e);return r?parseFloat(r.replace("px","")):0}function d3(t){const e=fd(t,"border-left-width"),n=fd(t,"border-right-width");return t.clientWidth+e+n}function h3(t){const e=fd(t,"border-top-width"),n=fd(t,"border-bottom-width");return t.clientHeight+e+n}function fE(t,e={}){const n=e.width||d3(t),r=e.height||h3(t);return{width:n,height:r}}function p3(){let t,e;try{e=process}catch{}const n=e&&e.env?e.env.devicePixelRatio:null;return n&&(t=parseInt(n,10),Number.isNaN(t)&&(t=1)),t||window.devicePixelRatio||1}const lr=16384;function m3(t){(t.width>lr||t.height>lr)&&(t.width>lr&&t.height>lr?t.width>t.height?(t.height*=lr/t.width,t.width=lr):(t.width*=lr/t.height,t.height=lr):t.width>lr?(t.height*=lr/t.width,t.width=lr):(t.width*=lr/t.height,t.height=lr))}function dd(t){return new Promise((e,n)=>{const r=new Image;r.onload=()=>{r.decode().then(()=>{requestAnimationFrame(()=>e(r))})},r.onerror=n,r.crossOrigin="anonymous",r.decoding="async",r.src=t})}async function g3(t){return Promise.resolve().then(()=>new XMLSerializer().serializeToString(t)).then(encodeURIComponent).then(e=>`data:image/svg+xml;charset=utf-8,${e}`)}async function y3(t,e,n){const r="http://www.w3.org/2000/svg",i=document.createElementNS(r,"svg"),s=document.createElementNS(r,"foreignObject");return i.setAttribute("width",`${e}`),i.setAttribute("height",`${n}`),i.setAttribute("viewBox",`0 0 ${e} ${n}`),s.setAttribute("width","100%"),s.setAttribute("height","100%"),s.setAttribute("x","0"),s.setAttribute("y","0"),s.setAttribute("externalResourcesRequired","true"),i.appendChild(s),s.appendChild(t),g3(i)}const Gn=(t,e)=>{if(t instanceof e)return!0;const n=Object.getPrototypeOf(t);return n===null?!1:n.constructor.name===e.name||Gn(n,e)};function v3(t){const e=t.getPropertyValue("content");return`${t.cssText} content: '${e.replace(/'|"/g,"")}';`}function x3(t,e){return cE(e).map(n=>{const r=t.getPropertyValue(n),i=t.getPropertyPriority(n);return`${n}: ${r}${i?" !important":""};`}).join(" ")}function w3(t,e,n,r){const i=`.${t}:${e}`,s=n.cssText?v3(n):x3(n,r);return document.createTextNode(`${i}{${s}}`)}function ab(t,e,n,r){const i=window.getComputedStyle(t,n),s=i.getPropertyValue("content");if(s===""||s==="none")return;const o=f3();try{e.className=`${e.className} ${o}`}catch{return}const a=document.createElement("style");a.appendChild(w3(o,n,i,r)),e.appendChild(a)}function b3(t,e,n){ab(t,e,":before",n),ab(t,e,":after",n)}const ub="application/font-woff",cb="image/jpeg",S3={woff:ub,woff2:ub,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:cb,jpeg:cb,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml",webp:"image/webp"};function k3(t){const e=/\.([^./]*?)$/g.exec(t);return e?e[1]:""}function Iy(t){const e=k3(t).toLowerCase();return S3[e]||""}function C3(t){return t.split(/,/)[1]}function a0(t){return t.search(/^(data:)/)!==-1}function E3(t,e){return`data:${e};base64,${t}`}async function dE(t,e,n){const r=await fetch(t,e);if(r.status===404)throw new Error(`Resource "${r.url}" not found`);const i=await r.blob();return new Promise((s,o)=>{const a=new FileReader;a.onerror=o,a.onloadend=()=>{try{s(n({res:r,result:a.result}))}catch(c){o(c)}},a.readAsDataURL(i)})}const Dm={};function T3(t,e,n){let r=t.replace(/\?.*/,"");return n&&(r=t),/ttf|otf|eot|woff2?/i.test(r)&&(r=r.replace(/.*\//,"")),e?`[${e}]${r}`:r}async function Ly(t,e,n){const r=T3(t,e,n.includeQueryParams);if(Dm[r]!=null)return Dm[r];n.cacheBust&&(t+=(/\?/.test(t)?"&":"?")+new Date().getTime());let i;try{const s=await dE(t,n.fetchRequestInit,({res:o,result:a})=>(e||(e=o.headers.get("Content-Type")||""),C3(a)));i=E3(s,e)}catch(s){i=n.imagePlaceholder||"";let o=`Failed to fetch resource: ${t}`;s&&(o=typeof s=="string"?s:s.message),o&&console.warn(o)}return Dm[r]=i,i}async function N3(t){const e=t.toDataURL();return e==="data:,"?t.cloneNode(!1):dd(e)}async function M3(t,e){if(t.currentSrc){const s=document.createElement("canvas"),o=s.getContext("2d");s.width=t.clientWidth,s.height=t.clientHeight,o==null||o.drawImage(t,0,0,s.width,s.height);const a=s.toDataURL();return dd(a)}const n=t.poster,r=Iy(n),i=await Ly(n,r,e);return dd(i)}async function _3(t,e){var n;try{if(!((n=t==null?void 0:t.contentDocument)===null||n===void 0)&&n.body)return await kh(t.contentDocument.body,e,!0)}catch{}return t.cloneNode(!1)}async function O3(t,e){return Gn(t,HTMLCanvasElement)?N3(t):Gn(t,HTMLVideoElement)?M3(t,e):Gn(t,HTMLIFrameElement)?_3(t,e):t.cloneNode(hE(t))}const A3=t=>t.tagName!=null&&t.tagName.toUpperCase()==="SLOT",hE=t=>t.tagName!=null&&t.tagName.toUpperCase()==="SVG";async function P3(t,e,n){var r,i;if(hE(e))return e;let s=[];return A3(t)&&t.assignedNodes?s=$s(t.assignedNodes()):Gn(t,HTMLIFrameElement)&&(!((r=t.contentDocument)===null||r===void 0)&&r.body)?s=$s(t.contentDocument.body.childNodes):s=$s(((i=t.shadowRoot)!==null&&i!==void 0?i:t).childNodes),s.length===0||Gn(t,HTMLVideoElement)||await s.reduce((o,a)=>o.then(()=>kh(a,n)).then(c=>{c&&e.appendChild(c)}),Promise.resolve()),e}function R3(t,e,n){const r=e.style;if(!r)return;const i=window.getComputedStyle(t);i.cssText?(r.cssText=i.cssText,r.transformOrigin=i.transformOrigin):cE(n).forEach(s=>{let o=i.getPropertyValue(s);s==="font-size"&&o.endsWith("px")&&(o=`${Math.floor(parseFloat(o.substring(0,o.length-2)))-.1}px`),Gn(t,HTMLIFrameElement)&&s==="display"&&o==="inline"&&(o="block"),s==="d"&&e.getAttribute("d")&&(o=`path(${e.getAttribute("d")})`),r.setProperty(s,o,i.getPropertyPriority(s))})}function D3(t,e){Gn(t,HTMLTextAreaElement)&&(e.innerHTML=t.value),Gn(t,HTMLInputElement)&&e.setAttribute("value",t.value)}function I3(t,e){if(Gn(t,HTMLSelectElement)){const n=e,r=Array.from(n.children).find(i=>t.value===i.getAttribute("value"));r&&r.setAttribute("selected","")}}function L3(t,e,n){return Gn(e,Element)&&(R3(t,e,n),b3(t,e,n),D3(t,e),I3(t,e)),e}async function j3(t,e){const n=t.querySelectorAll?t.querySelectorAll("use"):[];if(n.length===0)return t;const r={};for(let s=0;s<n.length;s++){const a=n[s].getAttribute("xlink:href");if(a){const c=t.querySelector(a),f=document.querySelector(a);!c&&f&&!r[a]&&(r[a]=await kh(f,e,!0))}}const i=Object.values(r);if(i.length){const s="http://www.w3.org/1999/xhtml",o=document.createElementNS(s,"svg");o.setAttribute("xmlns",s),o.style.position="absolute",o.style.width="0",o.style.height="0",o.style.overflow="hidden",o.style.display="none";const a=document.createElementNS(s,"defs");o.appendChild(a);for(let c=0;c<i.length;c++)a.appendChild(i[c]);t.appendChild(o)}return t}async function kh(t,e,n){return!n&&e.filter&&!e.filter(t)?null:Promise.resolve(t).then(r=>O3(r,e)).then(r=>P3(t,r,e)).then(r=>L3(t,r,e)).then(r=>j3(r,e))}const pE=/url\((['"]?)([^'"]+?)\1\)/g,z3=/url\([^)]+\)\s*format\((["']?)([^"']+)\1\)/g,B3=/src:\s*(?:url\([^)]+\)\s*format\([^)]+\)[,;]\s*)+/g;function F3(t){const e=t.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1");return new RegExp(`(url\\(['"]?)(${e})(['"]?\\))`,"g")}function $3(t){const e=[];return t.replace(pE,(n,r,i)=>(e.push(i),n)),e.filter(n=>!a0(n))}async function H3(t,e,n,r,i){try{const s=n?c3(e,n):e,o=Iy(e);let a;return i||(a=await Ly(s,o,r)),t.replace(F3(e),`$1${a}$3`)}catch{}return t}function U3(t,{preferredFontFormat:e}){return e?t.replace(B3,n=>{for(;;){const[r,,i]=z3.exec(n)||[];if(!i)return"";if(i===e)return`src: ${r};`}}):t}function mE(t){return t.search(pE)!==-1}async function gE(t,e,n){if(!mE(t))return t;const r=U3(t,n);return $3(r).reduce((s,o)=>s.then(a=>H3(a,o,e,n)),Promise.resolve(r))}async function hl(t,e,n){var r;const i=(r=e.style)===null||r===void 0?void 0:r.getPropertyValue(t);if(i){const s=await gE(i,null,n);return e.style.setProperty(t,s,e.style.getPropertyPriority(t)),!0}return!1}async function V3(t,e){await hl("background",t,e)||await hl("background-image",t,e),await hl("mask",t,e)||await hl("-webkit-mask",t,e)||await hl("mask-image",t,e)||await hl("-webkit-mask-image",t,e)}async function W3(t,e){const n=Gn(t,HTMLImageElement);if(!(n&&!a0(t.src))&&!(Gn(t,SVGImageElement)&&!a0(t.href.baseVal)))return;const r=n?t.src:t.href.baseVal,i=await Ly(r,Iy(r),e);await new Promise((s,o)=>{t.onload=s,t.onerror=e.onImageErrorHandler?(...c)=>{try{s(e.onImageErrorHandler(...c))}catch(f){o(f)}}:o;const a=t;a.decode&&(a.decode=s),a.loading==="lazy"&&(a.loading="eager"),n?(t.srcset="",t.src=i):t.href.baseVal=i})}async function K3(t,e){const r=$s(t.childNodes).map(i=>yE(i,e));await Promise.all(r).then(()=>t)}async function yE(t,e){Gn(t,Element)&&(await V3(t,e),await W3(t,e),await K3(t,e))}function q3(t,e){const{style:n}=t;e.backgroundColor&&(n.backgroundColor=e.backgroundColor),e.width&&(n.width=`${e.width}px`),e.height&&(n.height=`${e.height}px`);const r=e.style;return r!=null&&Object.keys(r).forEach(i=>{n[i]=r[i]}),t}const fb={};async function db(t){let e=fb[t];if(e!=null)return e;const r=await(await fetch(t)).text();return e={url:t,cssText:r},fb[t]=e,e}async function hb(t,e){let n=t.cssText;const r=/url\(["']?([^"')]+)["']?\)/g,s=(n.match(/url\([^)]+\)/g)||[]).map(async o=>{let a=o.replace(r,"$1");return a.startsWith("https://")||(a=new URL(a,t.url).href),dE(a,e.fetchRequestInit,({result:c})=>(n=n.replace(o,`url(${c})`),[o,c]))});return Promise.all(s).then(()=>n)}function pb(t){if(t==null)return[];const e=[],n=/(\/\*[\s\S]*?\*\/)/gi;let r=t.replace(n,"");const i=new RegExp("((@.*?keyframes [\\s\\S]*?){([\\s\\S]*?}\\s*?)})","gi");for(;;){const c=i.exec(r);if(c===null)break;e.push(c[0])}r=r.replace(i,"");const s=/@import[\s\S]*?url\([^)]*\)[\s\S]*?;/gi,o="((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})",a=new RegExp(o,"gi");for(;;){let c=s.exec(r);if(c===null){if(c=a.exec(r),c===null)break;s.lastIndex=a.lastIndex}else a.lastIndex=s.lastIndex;e.push(c[0])}return e}async function G3(t,e){const n=[],r=[];return t.forEach(i=>{if("cssRules"in i)try{$s(i.cssRules||[]).forEach((s,o)=>{if(s.type===CSSRule.IMPORT_RULE){let a=o+1;const c=s.href,f=db(c).then(d=>hb(d,e)).then(d=>pb(d).forEach(p=>{try{i.insertRule(p,p.startsWith("@import")?a+=1:i.cssRules.length)}catch(m){console.error("Error inserting rule from remote css",{rule:p,error:m})}})).catch(d=>{console.error("Error loading remote css",d.toString())});r.push(f)}})}catch(s){const o=t.find(a=>a.href==null)||document.styleSheets[0];i.href!=null&&r.push(db(i.href).then(a=>hb(a,e)).then(a=>pb(a).forEach(c=>{o.insertRule(c,o.cssRules.length)})).catch(a=>{console.error("Error loading remote stylesheet",a)})),console.error("Error inlining remote css file",s)}}),Promise.all(r).then(()=>(t.forEach(i=>{if("cssRules"in i)try{$s(i.cssRules||[]).forEach(s=>{n.push(s)})}catch(s){console.error(`Error while reading CSS rules from ${i.href}`,s)}}),n))}function X3(t){return t.filter(e=>e.type===CSSRule.FONT_FACE_RULE).filter(e=>mE(e.style.getPropertyValue("src")))}async function J3(t,e){if(t.ownerDocument==null)throw new Error("Provided element is not within a Document");const n=$s(t.ownerDocument.styleSheets),r=await G3(n,e);return X3(r)}function vE(t){return t.trim().replace(/["']/g,"")}function Y3(t){const e=new Set;function n(r){(r.style.fontFamily||getComputedStyle(r).fontFamily).split(",").forEach(s=>{e.add(vE(s))}),Array.from(r.children).forEach(s=>{s instanceof HTMLElement&&n(s)})}return n(t),e}async function Q3(t,e){const n=await J3(t,e),r=Y3(t);return(await Promise.all(n.filter(s=>r.has(vE(s.style.fontFamily))).map(s=>{const o=s.parentStyleSheet?s.parentStyleSheet.href:null;return gE(s.cssText,o,e)}))).join(`
`)}async function Z3(t,e){const n=e.fontEmbedCSS!=null?e.fontEmbedCSS:e.skipFonts?null:await Q3(t,e);if(n){const r=document.createElement("style"),i=document.createTextNode(n);r.appendChild(i),t.firstChild?t.insertBefore(r,t.firstChild):t.appendChild(r)}}async function ej(t,e={}){const{width:n,height:r}=fE(t,e),i=await kh(t,e,!0);return await Z3(i,e),await yE(i,e),q3(i,e),await y3(i,n,r)}async function tj(t,e={}){const{width:n,height:r}=fE(t,e),i=await ej(t,e),s=await dd(i),o=document.createElement("canvas"),a=o.getContext("2d"),c=e.pixelRatio||p3(),f=e.canvasWidth||n,d=e.canvasHeight||r;return o.width=f*c,o.height=d*c,e.skipAutoScale||m3(o),o.style.width=`${f}`,o.style.height=`${d}`,e.backgroundColor&&(a.fillStyle=e.backgroundColor,a.fillRect(0,0,o.width,o.height)),a.drawImage(s,0,0,o.width,o.height),o}async function xE(t,e={}){return(await tj(t,e)).toDataURL()}var Ch={exports:{}},wE={},u0={exports:{}};function bE(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=bE(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function mb(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=bE(t))&&(r&&(r+=" "),r+=e);return r}u0.exports=mb,u0.exports.clsx=mb;var nj=u0.exports,xt={},Ei={};Object.defineProperty(Ei,"__esModule",{value:!0});Ei.dontSetMe=lj;Ei.findInArray=rj;Ei.int=oj;Ei.isFunction=ij;Ei.isNum=sj;function rj(t,e){for(let n=0,r=t.length;n<r;n++)if(e.apply(e,[t[n],n,t]))return t[n]}function ij(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Function]"}function sj(t){return typeof t=="number"&&!isNaN(t)}function oj(t){return parseInt(t,10)}function lj(t,e,n){if(t[e])return new Error(`Invalid prop ${e} passed to ${n} - do not set this, set it on the child.`)}var Wo={};Object.defineProperty(Wo,"__esModule",{value:!0});Wo.browserPrefixToKey=kE;Wo.browserPrefixToStyle=aj;Wo.default=void 0;Wo.getPrefix=SE;const Im=["Moz","Webkit","O","ms"];function SE(){var n,r;let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"transform";if(typeof window>"u")return"";const e=(r=(n=window.document)==null?void 0:n.documentElement)==null?void 0:r.style;if(!e||t in e)return"";for(let i=0;i<Im.length;i++)if(kE(t,Im[i])in e)return Im[i];return""}function kE(t,e){return e?`${e}${uj(t)}`:t}function aj(t,e){return e?`-${e.toLowerCase()}-${t}`:t}function uj(t){let e="",n=!0;for(let r=0;r<t.length;r++)n?(e+=t[r].toUpperCase(),n=!1):t[r]==="-"?n=!0:e+=t[r];return e}Wo.default=SE();Object.defineProperty(xt,"__esModule",{value:!0});xt.addClassName=TE;xt.addEvent=fj;xt.addUserSelectStyles=Sj;xt.createCSSTransform=vj;xt.createSVGTransform=xj;xt.getTouch=wj;xt.getTouchIdentifier=bj;xt.getTranslation=jy;xt.innerHeight=mj;xt.innerWidth=gj;xt.matchesSelector=EE;xt.matchesSelectorAndParentsTo=cj;xt.offsetXYFromParent=yj;xt.outerHeight=hj;xt.outerWidth=pj;xt.removeClassName=NE;xt.removeEvent=dj;xt.scheduleRemoveUserSelectStyles=kj;var hr=Ei,gb=CE(Wo);function CE(t,e){if(typeof WeakMap=="function")var n=new WeakMap,r=new WeakMap;return(CE=function(i,s){if(!s&&i&&i.__esModule)return i;var o,a,c={__proto__:null,default:i};if(i===null||typeof i!="object"&&typeof i!="function")return c;if(o=s?r:n){if(o.has(i))return o.get(i);o.set(i,c)}for(const f in i)f!=="default"&&{}.hasOwnProperty.call(i,f)&&((a=(o=Object.defineProperty)&&Object.getOwnPropertyDescriptor(i,f))&&(a.get||a.set)?o(c,f,a):c[f]=i[f]);return c})(t,e)}let uf="";function EE(t,e){return uf||(uf=(0,hr.findInArray)(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],function(n){return(0,hr.isFunction)(t[n])})),(0,hr.isFunction)(t[uf])?t[uf](e):!1}function cj(t,e,n){let r=t;do{if(EE(r,e))return!0;if(r===n)return!1;r=r.parentNode}while(r);return!1}function fj(t,e,n,r){if(!t)return;const i={capture:!0,...r};t.addEventListener?t.addEventListener(e,n,i):t.attachEvent?t.attachEvent("on"+e,n):t["on"+e]=n}function dj(t,e,n,r){if(!t)return;const i={capture:!0,...r};t.removeEventListener?t.removeEventListener(e,n,i):t.detachEvent?t.detachEvent("on"+e,n):t["on"+e]=null}function hj(t){let e=t.clientHeight;const n=t.ownerDocument.defaultView.getComputedStyle(t);return e+=(0,hr.int)(n.borderTopWidth),e+=(0,hr.int)(n.borderBottomWidth),e}function pj(t){let e=t.clientWidth;const n=t.ownerDocument.defaultView.getComputedStyle(t);return e+=(0,hr.int)(n.borderLeftWidth),e+=(0,hr.int)(n.borderRightWidth),e}function mj(t){let e=t.clientHeight;const n=t.ownerDocument.defaultView.getComputedStyle(t);return e-=(0,hr.int)(n.paddingTop),e-=(0,hr.int)(n.paddingBottom),e}function gj(t){let e=t.clientWidth;const n=t.ownerDocument.defaultView.getComputedStyle(t);return e-=(0,hr.int)(n.paddingLeft),e-=(0,hr.int)(n.paddingRight),e}function yj(t,e,n){const i=e===e.ownerDocument.body?{left:0,top:0}:e.getBoundingClientRect(),s=(t.clientX+e.scrollLeft-i.left)/n,o=(t.clientY+e.scrollTop-i.top)/n;return{x:s,y:o}}function vj(t,e){const n=jy(t,e,"px");return{[(0,gb.browserPrefixToKey)("transform",gb.default)]:n}}function xj(t,e){return jy(t,e,"")}function jy(t,e,n){let{x:r,y:i}=t,s=`translate(${r}${n},${i}${n})`;if(e){const o=`${typeof e.x=="string"?e.x:e.x+n}`,a=`${typeof e.y=="string"?e.y:e.y+n}`;s=`translate(${o}, ${a})`+s}return s}function wj(t,e){return t.targetTouches&&(0,hr.findInArray)(t.targetTouches,n=>e===n.identifier)||t.changedTouches&&(0,hr.findInArray)(t.changedTouches,n=>e===n.identifier)}function bj(t){if(t.targetTouches&&t.targetTouches[0])return t.targetTouches[0].identifier;if(t.changedTouches&&t.changedTouches[0])return t.changedTouches[0].identifier}function Sj(t){if(!t)return;let e=t.getElementById("react-draggable-style-el");e||(e=t.createElement("style"),e.type="text/css",e.id="react-draggable-style-el",e.innerHTML=`.react-draggable-transparent-selection *::-moz-selection {all: inherit;}
`,e.innerHTML+=`.react-draggable-transparent-selection *::selection {all: inherit;}
`,t.getElementsByTagName("head")[0].appendChild(e)),t.body&&TE(t.body,"react-draggable-transparent-selection")}function kj(t){window.requestAnimationFrame?window.requestAnimationFrame(()=>{yb(t)}):yb(t)}function yb(t){if(t)try{if(t.body&&NE(t.body,"react-draggable-transparent-selection"),t.selection)t.selection.empty();else{const e=(t.defaultView||window).getSelection();e&&e.type!=="Caret"&&e.removeAllRanges()}}catch{}}function TE(t,e){t.classList?t.classList.add(e):t.className.match(new RegExp(`(?:^|\\s)${e}(?!\\S)`))||(t.className+=` ${e}`)}function NE(t,e){t.classList?t.classList.remove(e):t.className=t.className.replace(new RegExp(`(?:^|\\s)${e}(?!\\S)`,"g"),"")}var Ti={};Object.defineProperty(Ti,"__esModule",{value:!0});Ti.canDragX=Tj;Ti.canDragY=Nj;Ti.createCoreData=_j;Ti.createDraggableData=Oj;Ti.getBoundPosition=Cj;Ti.getControlPosition=Mj;Ti.snapToGrid=Ej;var ar=Ei,Rl=xt;function Cj(t,e,n){if(!t.props.bounds)return[e,n];let{bounds:r}=t.props;r=typeof r=="string"?r:Aj(r);const i=zy(t);if(typeof r=="string"){const{ownerDocument:s}=i,o=s.defaultView;let a;if(r==="parent"?a=i.parentNode:a=i.getRootNode().querySelector(r),!(a instanceof o.HTMLElement))throw new Error('Bounds selector "'+r+'" could not find an element.');const c=a,f=o.getComputedStyle(i),d=o.getComputedStyle(c);r={left:-i.offsetLeft+(0,ar.int)(d.paddingLeft)+(0,ar.int)(f.marginLeft),top:-i.offsetTop+(0,ar.int)(d.paddingTop)+(0,ar.int)(f.marginTop),right:(0,Rl.innerWidth)(c)-(0,Rl.outerWidth)(i)-i.offsetLeft+(0,ar.int)(d.paddingRight)-(0,ar.int)(f.marginRight),bottom:(0,Rl.innerHeight)(c)-(0,Rl.outerHeight)(i)-i.offsetTop+(0,ar.int)(d.paddingBottom)-(0,ar.int)(f.marginBottom)}}return(0,ar.isNum)(r.right)&&(e=Math.min(e,r.right)),(0,ar.isNum)(r.bottom)&&(n=Math.min(n,r.bottom)),(0,ar.isNum)(r.left)&&(e=Math.max(e,r.left)),(0,ar.isNum)(r.top)&&(n=Math.max(n,r.top)),[e,n]}function Ej(t,e,n){const r=Math.round(e/t[0])*t[0],i=Math.round(n/t[1])*t[1];return[r,i]}function Tj(t){return t.props.axis==="both"||t.props.axis==="x"}function Nj(t){return t.props.axis==="both"||t.props.axis==="y"}function Mj(t,e,n){const r=typeof e=="number"?(0,Rl.getTouch)(t,e):null;if(typeof e=="number"&&!r)return null;const i=zy(n),s=n.props.offsetParent||i.offsetParent||i.ownerDocument.body;return(0,Rl.offsetXYFromParent)(r||t,s,n.props.scale)}function _j(t,e,n){const r=!(0,ar.isNum)(t.lastX),i=zy(t);return r?{node:i,deltaX:0,deltaY:0,lastX:e,lastY:n,x:e,y:n}:{node:i,deltaX:e-t.lastX,deltaY:n-t.lastY,lastX:t.lastX,lastY:t.lastY,x:e,y:n}}function Oj(t,e){const n=t.props.scale;return{node:e.node,x:t.state.x+e.deltaX/n,y:t.state.y+e.deltaY/n,deltaX:e.deltaX/n,deltaY:e.deltaY/n,lastX:t.state.x,lastY:t.state.y}}function Aj(t){return{left:t.left,top:t.top,right:t.right,bottom:t.bottom}}function zy(t){const e=t.findDOMNode();if(!e)throw new Error("<DraggableCore>: Unmounted during event!");return e}var Eh={},Th={};Object.defineProperty(Th,"__esModule",{value:!0});Th.default=Pj;function Pj(){}Object.defineProperty(Eh,"__esModule",{value:!0});Eh.default=void 0;var Lm=ME(G),Sn=By(Dy()),Rj=By(Sh),an=xt,ms=Ti,jm=Ei,Ia=By(Th);function By(t){return t&&t.__esModule?t:{default:t}}function ME(t,e){if(typeof WeakMap=="function")var n=new WeakMap,r=new WeakMap;return(ME=function(i,s){if(!s&&i&&i.__esModule)return i;var o,a,c={__proto__:null,default:i};if(i===null||typeof i!="object"&&typeof i!="function")return c;if(o=s?r:n){if(o.has(i))return o.get(i);o.set(i,c)}for(const f in i)f!=="default"&&{}.hasOwnProperty.call(i,f)&&((a=(o=Object.defineProperty)&&Object.getOwnPropertyDescriptor(i,f))&&(a.get||a.set)?o(c,f,a):c[f]=i[f]);return c})(t,e)}function kn(t,e,n){return(e=Dj(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Dj(t){var e=Ij(t,"string");return typeof e=="symbol"?e:e+""}function Ij(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}const Zr={touch:{start:"touchstart",move:"touchmove",stop:"touchend"},mouse:{start:"mousedown",move:"mousemove",stop:"mouseup"}};let gs=Zr.mouse,Nh=class extends Lm.Component{constructor(){super(...arguments),kn(this,"dragging",!1),kn(this,"lastX",NaN),kn(this,"lastY",NaN),kn(this,"touchIdentifier",null),kn(this,"mounted",!1),kn(this,"handleDragStart",e=>{if(this.props.onMouseDown(e),!this.props.allowAnyClick&&typeof e.button=="number"&&e.button!==0)return!1;const n=this.findDOMNode();if(!n||!n.ownerDocument||!n.ownerDocument.body)throw new Error("<DraggableCore> not mounted on DragStart!");const{ownerDocument:r}=n;if(this.props.disabled||!(e.target instanceof r.defaultView.Node)||this.props.handle&&!(0,an.matchesSelectorAndParentsTo)(e.target,this.props.handle,n)||this.props.cancel&&(0,an.matchesSelectorAndParentsTo)(e.target,this.props.cancel,n))return;e.type==="touchstart"&&!this.props.allowMobileScroll&&e.preventDefault();const i=(0,an.getTouchIdentifier)(e);this.touchIdentifier=i;const s=(0,ms.getControlPosition)(e,i,this);if(s==null)return;const{x:o,y:a}=s,c=(0,ms.createCoreData)(this,o,a);(0,Ia.default)("DraggableCore: handleDragStart: %j",c),(0,Ia.default)("calling",this.props.onStart),!(this.props.onStart(e,c)===!1||this.mounted===!1)&&(this.props.enableUserSelectHack&&(0,an.addUserSelectStyles)(r),this.dragging=!0,this.lastX=o,this.lastY=a,(0,an.addEvent)(r,gs.move,this.handleDrag),(0,an.addEvent)(r,gs.stop,this.handleDragStop))}),kn(this,"handleDrag",e=>{const n=(0,ms.getControlPosition)(e,this.touchIdentifier,this);if(n==null)return;let{x:r,y:i}=n;if(Array.isArray(this.props.grid)){let a=r-this.lastX,c=i-this.lastY;if([a,c]=(0,ms.snapToGrid)(this.props.grid,a,c),!a&&!c)return;r=this.lastX+a,i=this.lastY+c}const s=(0,ms.createCoreData)(this,r,i);if((0,Ia.default)("DraggableCore: handleDrag: %j",s),this.props.onDrag(e,s)===!1||this.mounted===!1){try{this.handleDragStop(new MouseEvent("mouseup"))}catch{const c=document.createEvent("MouseEvents");c.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),this.handleDragStop(c)}return}this.lastX=r,this.lastY=i}),kn(this,"handleDragStop",e=>{if(!this.dragging)return;const n=(0,ms.getControlPosition)(e,this.touchIdentifier,this);if(n==null)return;let{x:r,y:i}=n;if(Array.isArray(this.props.grid)){let c=r-this.lastX||0,f=i-this.lastY||0;[c,f]=(0,ms.snapToGrid)(this.props.grid,c,f),r=this.lastX+c,i=this.lastY+f}const s=(0,ms.createCoreData)(this,r,i);if(this.props.onStop(e,s)===!1||this.mounted===!1)return!1;const a=this.findDOMNode();a&&this.props.enableUserSelectHack&&(0,an.scheduleRemoveUserSelectStyles)(a.ownerDocument),(0,Ia.default)("DraggableCore: handleDragStop: %j",s),this.dragging=!1,this.lastX=NaN,this.lastY=NaN,a&&((0,Ia.default)("DraggableCore: Removing handlers"),(0,an.removeEvent)(a.ownerDocument,gs.move,this.handleDrag),(0,an.removeEvent)(a.ownerDocument,gs.stop,this.handleDragStop))}),kn(this,"onMouseDown",e=>(gs=Zr.mouse,this.handleDragStart(e))),kn(this,"onMouseUp",e=>(gs=Zr.mouse,this.handleDragStop(e))),kn(this,"onTouchStart",e=>(gs=Zr.touch,this.handleDragStart(e))),kn(this,"onTouchEnd",e=>(gs=Zr.touch,this.handleDragStop(e)))}componentDidMount(){this.mounted=!0;const e=this.findDOMNode();e&&(0,an.addEvent)(e,Zr.touch.start,this.onTouchStart,{passive:!1})}componentWillUnmount(){this.mounted=!1;const e=this.findDOMNode();if(e){const{ownerDocument:n}=e;(0,an.removeEvent)(n,Zr.mouse.move,this.handleDrag),(0,an.removeEvent)(n,Zr.touch.move,this.handleDrag),(0,an.removeEvent)(n,Zr.mouse.stop,this.handleDragStop),(0,an.removeEvent)(n,Zr.touch.stop,this.handleDragStop),(0,an.removeEvent)(e,Zr.touch.start,this.onTouchStart,{passive:!1}),this.props.enableUserSelectHack&&(0,an.scheduleRemoveUserSelectStyles)(n)}}findDOMNode(){var e,n,r;return(e=this.props)!=null&&e.nodeRef?(r=(n=this.props)==null?void 0:n.nodeRef)==null?void 0:r.current:Rj.default.findDOMNode(this)}render(){return Lm.cloneElement(Lm.Children.only(this.props.children),{onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}};Eh.default=Nh;kn(Nh,"displayName","DraggableCore");kn(Nh,"propTypes",{allowAnyClick:Sn.default.bool,allowMobileScroll:Sn.default.bool,children:Sn.default.node.isRequired,disabled:Sn.default.bool,enableUserSelectHack:Sn.default.bool,offsetParent:function(t,e){if(t[e]&&t[e].nodeType!==1)throw new Error("Draggable's offsetParent must be a DOM Node.")},grid:Sn.default.arrayOf(Sn.default.number),handle:Sn.default.string,cancel:Sn.default.string,nodeRef:Sn.default.object,onStart:Sn.default.func,onDrag:Sn.default.func,onStop:Sn.default.func,onMouseDown:Sn.default.func,scale:Sn.default.number,className:jm.dontSetMe,style:jm.dontSetMe,transform:jm.dontSetMe});kn(Nh,"defaultProps",{allowAnyClick:!1,allowMobileScroll:!1,disabled:!1,enableUserSelectHack:!0,onStart:function(){},onDrag:function(){},onStop:function(){},onMouseDown:function(){},scale:1});(function(t){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"DraggableCore",{enumerable:!0,get:function(){return c.default}}),t.default=void 0;var e=p(G),n=d(Dy()),r=d(Sh),i=nj,s=xt,o=Ti,a=Ei,c=d(Eh),f=d(Th);function d(x){return x&&x.__esModule?x:{default:x}}function p(x,w){if(typeof WeakMap=="function")var E=new WeakMap,M=new WeakMap;return(p=function(_,O){if(!O&&_&&_.__esModule)return _;var A,R,z={__proto__:null,default:_};if(_===null||typeof _!="object"&&typeof _!="function")return z;if(A=O?M:E){if(A.has(_))return A.get(_);A.set(_,z)}for(const B in _)B!=="default"&&{}.hasOwnProperty.call(_,B)&&((R=(A=Object.defineProperty)&&Object.getOwnPropertyDescriptor(_,B))&&(R.get||R.set)?A(z,B,R):z[B]=_[B]);return z})(x,w)}function m(){return m=Object.assign?Object.assign.bind():function(x){for(var w=1;w<arguments.length;w++){var E=arguments[w];for(var M in E)({}).hasOwnProperty.call(E,M)&&(x[M]=E[M])}return x},m.apply(null,arguments)}function g(x,w,E){return(w=v(w))in x?Object.defineProperty(x,w,{value:E,enumerable:!0,configurable:!0,writable:!0}):x[w]=E,x}function v(x){var w=S(x,"string");return typeof w=="symbol"?w:w+""}function S(x,w){if(typeof x!="object"||!x)return x;var E=x[Symbol.toPrimitive];if(E!==void 0){var M=E.call(x,w);if(typeof M!="object")return M;throw new TypeError("@@toPrimitive must return a primitive value.")}return(w==="string"?String:Number)(x)}class C extends e.Component{static getDerivedStateFromProps(w,E){let{position:M}=w,{prevPropsPosition:_}=E;return M&&(!_||M.x!==_.x||M.y!==_.y)?((0,f.default)("Draggable: getDerivedStateFromProps %j",{position:M,prevPropsPosition:_}),{x:M.x,y:M.y,prevPropsPosition:{...M}}):null}constructor(w){super(w),g(this,"onDragStart",(E,M)=>{if((0,f.default)("Draggable: onDragStart: %j",M),this.props.onStart(E,(0,o.createDraggableData)(this,M))===!1)return!1;this.setState({dragging:!0,dragged:!0})}),g(this,"onDrag",(E,M)=>{if(!this.state.dragging)return!1;(0,f.default)("Draggable: onDrag: %j",M);const _=(0,o.createDraggableData)(this,M),O={x:_.x,y:_.y,slackX:0,slackY:0};if(this.props.bounds){const{x:R,y:z}=O;O.x+=this.state.slackX,O.y+=this.state.slackY;const[B,te]=(0,o.getBoundPosition)(this,O.x,O.y);O.x=B,O.y=te,O.slackX=this.state.slackX+(R-O.x),O.slackY=this.state.slackY+(z-O.y),_.x=O.x,_.y=O.y,_.deltaX=O.x-this.state.x,_.deltaY=O.y-this.state.y}if(this.props.onDrag(E,_)===!1)return!1;this.setState(O)}),g(this,"onDragStop",(E,M)=>{if(!this.state.dragging||this.props.onStop(E,(0,o.createDraggableData)(this,M))===!1)return!1;(0,f.default)("Draggable: onDragStop: %j",M);const O={dragging:!1,slackX:0,slackY:0};if(!!this.props.position){const{x:R,y:z}=this.props.position;O.x=R,O.y=z}this.setState(O)}),this.state={dragging:!1,dragged:!1,x:w.position?w.position.x:w.defaultPosition.x,y:w.position?w.position.y:w.defaultPosition.y,prevPropsPosition:{...w.position},slackX:0,slackY:0,isElementSVG:!1},w.position&&!(w.onDrag||w.onStop)&&console.warn("A `position` was applied to this <Draggable>, without drag handlers. This will make this component effectively undraggable. Please attach `onDrag` or `onStop` handlers so you can adjust the `position` of this element.")}componentDidMount(){typeof window.SVGElement<"u"&&this.findDOMNode()instanceof window.SVGElement&&this.setState({isElementSVG:!0})}componentWillUnmount(){this.state.dragging&&this.setState({dragging:!1})}findDOMNode(){var w,E;return((E=(w=this.props)==null?void 0:w.nodeRef)==null?void 0:E.current)??r.default.findDOMNode(this)}render(){const{axis:w,bounds:E,children:M,defaultPosition:_,defaultClassName:O,defaultClassNameDragging:A,defaultClassNameDragged:R,position:z,positionOffset:B,scale:te,...re}=this.props;let le={},de=null;const ee=!!!z||this.state.dragging,ie=z||_,L={x:(0,o.canDragX)(this)&&ee?this.state.x:ie.x,y:(0,o.canDragY)(this)&&ee?this.state.y:ie.y};this.state.isElementSVG?de=(0,s.createSVGTransform)(L,B):le=(0,s.createCSSTransform)(L,B);const $=(0,i.clsx)(M.props.className||"",O,{[A]:this.state.dragging,[R]:this.state.dragged});return e.createElement(c.default,m({},re,{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),e.cloneElement(e.Children.only(M),{className:$,style:{...M.props.style,...le},transform:de}))}}t.default=C,g(C,"displayName","Draggable"),g(C,"propTypes",{...c.default.propTypes,axis:n.default.oneOf(["both","x","y","none"]),bounds:n.default.oneOfType([n.default.shape({left:n.default.number,right:n.default.number,top:n.default.number,bottom:n.default.number}),n.default.string,n.default.oneOf([!1])]),defaultClassName:n.default.string,defaultClassNameDragging:n.default.string,defaultClassNameDragged:n.default.string,defaultPosition:n.default.shape({x:n.default.number,y:n.default.number}),positionOffset:n.default.shape({x:n.default.oneOfType([n.default.number,n.default.string]),y:n.default.oneOfType([n.default.number,n.default.string])}),position:n.default.shape({x:n.default.number,y:n.default.number}),className:a.dontSetMe,style:a.dontSetMe,transform:a.dontSetMe}),g(C,"defaultProps",{...c.default.defaultProps,axis:"both",bounds:!1,defaultClassName:"react-draggable",defaultClassNameDragging:"react-draggable-dragging",defaultClassNameDragged:"react-draggable-dragged",defaultPosition:{x:0,y:0},scale:1})})(wE);const{default:_E,DraggableCore:Lj}=wE;Ch.exports=_E;Ch.exports.default=_E;Ch.exports.DraggableCore=Lj;var jj=Ch.exports;const OE=sh(jj),zm={used:{label:"",color:"bg-emerald-500",text:"text-white"},unused:{label:"",color:"bg-slate-600",text:"text-slate-200"},deprecated:{label:"",color:"bg-red-500",text:"text-white"},verify:{label:"",color:"bg-yellow-500",text:"text-black"},core:{label:"",color:"bg-purple-600",text:"text-white"}};function zj({id:t,type:e,content:n,x:r,y:i,scale:s,isSelected:o,onUpdate:a,onDelete:c,onDrag:f,onConnectStart:d,onConnectEnd:p}){const m=G.useRef(null),[g,v]=G.useState(!n),S=n&&zm[n]?n:"unused",C=zm[S],x=()=>{const O=Object.keys(zm),R=(O.indexOf(S)+1)%O.length;a(t,O[R])},w=()=>{if(e==="status")return b.jsxs("div",{className:"relative group",children:[b.jsx("div",{onClick:x,className:`drag-handle w-32 h-10 ${C.color} ${C.text} rounded-full shadow-lg flex items-center justify-center font-bold text-sm cursor-pointer border-2 border-white/20 select-none hover:brightness-110 active:scale-95 transition-all z-[60]`,children:C.label}),b.jsx("button",{onClick:A=>{A.stopPropagation(),c(t)},className:"absolute -top-2 -right-2 w-5 h-5 bg-slate-700 text-slate-300 hover:bg-red-500 hover:text-white rounded-full opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center text-xs z-[70] border border-slate-500 cursor-pointer pointer-events-auto",children:""})]});const O=A=>A.stopPropagation();return(e==="video"||e==="audio"||e==="link")&&(g||!n)?b.jsxs("div",{className:"w-full h-32 bg-slate-800 flex flex-col items-center justify-center p-4 gap-3 rounded-lg",onMouseDown:O,children:[b.jsxs("span",{className:"text-slate-400 text-xs uppercase font-bold tracking-wider",children:[e," URL"]}),b.jsx("input",{className:"w-full bg-slate-900 text-white text-xs px-3 py-2 rounded border border-slate-600 outline-none focus:border-emerald-500 transition-colors",placeholder:"...",autoFocus:!0,defaultValue:n,onKeyDown:A=>{A.key==="Enter"&&(a(t,A.currentTarget.value),v(!1))}})]}):e==="image"?b.jsx("img",{src:n,className:"w-full h-auto object-cover pointer-events-none display-block"}):e==="video"?b.jsxs("div",{className:"w-full h-auto bg-black flex items-center justify-center relative group",onMouseDown:O,children:[b.jsx("video",{src:n,controls:!0,className:"w-full h-auto max-h-[300px] object-contain"}),b.jsx("button",{onClick:()=>v(!0),className:"absolute top-2 right-2 p-1.5 bg-black/50 text-white rounded opacity-0 group-hover:opacity-100 transition-opacity z-10 hover:bg-emerald-600",children:""})]}):e==="audio"?b.jsxs("div",{className:"w-full h-20 bg-slate-800 flex items-center justify-center relative group",onMouseDown:O,children:[b.jsx("audio",{src:n,controls:!0,className:"w-11/12 h-8"}),b.jsx("button",{onClick:()=>v(!0),className:"absolute top-2 right-2 p-1 text-slate-400 hover:text-white opacity-0 group-hover:opacity-100",children:""})]}):e==="code"?b.jsxs("div",{className:"w-full bg-[#1e1e1e] flex flex-col",onMouseDown:O,children:[b.jsxs("div",{className:"h-7 bg-[#252526] flex items-center px-3 border-b border-black/40 select-none shrink-0",children:[b.jsxs("div",{className:"flex gap-1.5 opacity-60",children:[b.jsx("div",{className:"w-2.5 h-2.5 rounded-full bg-[#ff5f56]"}),b.jsx("div",{className:"w-2.5 h-2.5 rounded-full bg-[#ffbd2e]"}),b.jsx("div",{className:"w-2.5 h-2.5 rounded-full bg-[#27c93f]"})]}),b.jsx("span",{className:"ml-3 text-[10px] text-slate-500 font-mono tracking-tight",children:"SNIPPET"})]}),b.jsx("textarea",{className:"w-full bg-transparent resize-none outline-none text-green-400 font-mono text-xs p-3 leading-relaxed min-h-[120px] block",value:n,onChange:A=>a(t,A.target.value),spellCheck:!1})]}):e==="link"?b.jsxs("div",{className:"w-full h-auto min-h-[80px] bg-slate-900 flex items-center justify-center p-4 relative group",onMouseDown:O,children:[b.jsx("a",{href:n,target:"_blank",rel:"noreferrer",className:"text-blue-400 underline text-sm break-all hover:text-blue-300 text-center",children:n}),b.jsx("button",{onClick:()=>v(!0),className:"absolute bottom-2 right-2 p-1.5 text-slate-500 hover:text-white opacity-0 group-hover:opacity-100 transition-opacity",children:""})]}):b.jsx("textarea",{className:"w-full h-32 bg-[#fff9c4] resize-none outline-none text-slate-800 placeholder-slate-500/50 font-medium p-3 cursor-text block",placeholder:"...",value:n,onChange:A=>a(t,A.target.value),onMouseDown:O})};let E="absolute shadow-sm transition-shadow flex flex-col ",M="w-full h-full overflow-hidden ";e==="status"?E+="z-[50] ":e==="video"||e==="code"||e==="image"?(E+="w-72 h-auto "+(o?"z-20 ring-2 ring-emerald-500":"z-10"),M+="rounded-lg border-2 "+(e==="image"?"border-white bg-white":"border-slate-700 bg-[#1e1e1e]")):e==="audio"||e==="link"?(E+="w-64 h-auto "+(o?"z-20 ring-2 ring-emerald-500":"z-10"),M+="rounded-lg border border-slate-600 bg-slate-800"):(E+="w-48 h-auto "+(o?"z-20 ring-2 ring-emerald-500":"z-10 hover:ring-1 hover:ring-black/10"),M+="rounded-lg border border-transparent bg-[#fff9c4]");const _="w-3 h-3 bg-white border border-slate-400 hover:bg-emerald-500 hover:border-emerald-500 rounded-full absolute transition-all cursor-crosshair z-[100] opacity-0 group-hover:opacity-100 shadow-sm";return b.jsx(OE,{nodeRef:m,position:{x:r,y:i},scale:s,onStart:()=>{},onDrag:(O,A)=>f(t,A.x,A.y),onStop:()=>{},handle:".drag-handle",children:b.jsxs("div",{ref:m,id:t,className:`${E} group cursor-default`,children:[e==="status"?w():b.jsxs("div",{className:M,children:[b.jsx("div",{className:`drag-handle h-6 shrink-0 flex items-center justify-end px-2 cursor-grab active:cursor-grabbing border-b ${e==="code"||e==="video"||e==="audio"||e==="link"?"bg-[#252526] border-black/20":"bg-black/5 border-transparent"}`,children:b.jsx("button",{onClick:O=>{O.stopPropagation(),c(t)},className:"text-slate-400 hover:text-red-500 font-bold text-xs",children:""})}),w()]}),b.jsx("div",{className:`${_} -top-1.5 left-1/2 -translate-x-1/2`,onMouseDown:O=>{O.stopPropagation(),d&&d(t)},onMouseUp:O=>{O.stopPropagation(),p&&p(t)}}),b.jsx("div",{className:`${_} -bottom-1.5 left-1/2 -translate-x-1/2`,onMouseDown:O=>{O.stopPropagation(),d&&d(t)},onMouseUp:O=>{O.stopPropagation(),p&&p(t)}}),b.jsx("div",{className:`${_} top-1/2 -left-1.5 -translate-y-1/2`,onMouseDown:O=>{O.stopPropagation(),d&&d(t)},onMouseUp:O=>{O.stopPropagation(),p&&p(t)}}),b.jsx("div",{className:`${_} top-1/2 -right-1.5 -translate-y-1/2`,onMouseDown:O=>{O.stopPropagation(),d&&d(t)},onMouseUp:O=>{O.stopPropagation(),p&&p(t)}})]})})}/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bj=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Fj=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,r)=>r?r.toUpperCase():n.toLowerCase()),vb=t=>{const e=Fj(t);return e.charAt(0).toUpperCase()+e.slice(1)},AE=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim(),$j=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Hj={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uj=G.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:s,iconNode:o,...a},c)=>G.createElement("svg",{ref:c,...Hj,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:AE("lucide",i),...!s&&!$j(a)&&{"aria-hidden":"true"},...a},[...o.map(([f,d])=>G.createElement(f,d)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const je=(t,e)=>{const n=G.forwardRef(({className:r,...i},s)=>G.createElement(Uj,{ref:s,iconNode:e,className:AE(`lucide-${Bj(vb(t))}`,`lucide-${t}`,r),...i}));return n.displayName=vb(t),n};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vj=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],Wj=je("activity",Vj);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kj=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],qj=je("arrow-left",Kj);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gj=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Xj=je("chevron-down",Gj);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jj=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Yj=je("chevron-right",Jj);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qj=[["path",{d:"m16 18 6-6-6-6",key:"eg8j8"}],["path",{d:"m8 6-6 6 6 6",key:"ppft3o"}]],Zj=je("code",Qj);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e4=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],t4=je("credit-card",e4);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n4=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],r4=je("download",n4);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i4=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]],PE=je("ellipsis",i4);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s4=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],o4=je("eye-off",s4);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l4=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M9 15h6",key:"cctwl0"}],["path",{d:"M12 18v-6",key:"17g6i2"}]],a4=je("file-plus",l4);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u4=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],c4=je("file-text",u4);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f4=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],d4=je("folder",f4);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h4=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],p4=je("hash",h4);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m4=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],hd=je("image",m4);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g4=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],xb=je("layers",g4);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y4=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],v4=je("link",y4);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x4=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],w4=je("lock",x4);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b4=[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]],RE=je("monitor",b4);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S4=[["path",{d:"M12.586 12.586 19 19",key:"ea5xo7"}],["path",{d:"M3.688 3.037a.497.497 0 0 0-.651.651l6.5 15.999a.501.501 0 0 0 .947-.062l1.569-6.083a2 2 0 0 1 1.448-1.479l6.124-1.579a.5.5 0 0 0 .063-.947z",key:"277e5u"}]],k4=je("mouse-pointer",S4);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C4=[["path",{d:"M12 2v20",key:"t6zp3m"}],["path",{d:"m15 19-3 3-3-3",key:"11eu04"}],["path",{d:"m19 9 3 3-3 3",key:"1mg7y2"}],["path",{d:"M2 12h20",key:"9i4pu4"}],["path",{d:"m5 9-3 3 3 3",key:"j64kie"}],["path",{d:"m9 5 3-3 3 3",key:"l8vdw6"}]],DE=je("move",C4);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E4=[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]],T4=je("music",E4);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N4=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}]],M4=je("panel-left",N4);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _4=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]],IE=je("panels-top-left",_4);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O4=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],A4=je("play",O4);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P4=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],pd=je("plus",P4);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R4=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],D4=je("save",R4);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I4=[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]],L4=je("smartphone",I4);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j4=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],z4=je("square",j4);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B4=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["line",{x1:"12",x2:"12.01",y1:"18",y2:"18",key:"1dp563"}]],F4=je("tablet",B4);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $4=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],LE=je("trash-2",$4);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H4=[["path",{d:"M12 4v16",key:"1654pz"}],["path",{d:"M4 7V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2",key:"e0r10z"}],["path",{d:"M9 20h6",key:"s66wpe"}]],jE=je("type",H4);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U4=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],V4=je("upload",U4);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W4=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],K4=je("video",W4);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q4=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],zE=je("x",q4);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G4=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],wb=je("zap",G4);function X4({initialItems:t=[],initialConnections:e=[],onDataChange:n}){const[r,i]=G.useState(t),[s,o]=G.useState(e),[a,c]=G.useState(1),[f,d]=G.useState({x:0,y:0}),[p,m]=G.useState(null),[g,v]=G.useState(!1),S=G.useRef(!1),C=G.useRef({x:0,y:0}),x=G.useRef(null),w=G.useRef(null),E=G.useRef(null),M=l0.useXarrow();G.useEffect(()=>{(t.length>0||e.length>0)&&(i(t),o(e))},[t,e]),G.useEffect(()=>{n&&n(r,s)},[r,s,n]),G.useEffect(()=>{const L=setTimeout(()=>{M()},50);return()=>clearTimeout(L)},[a,f,r,s]);const _=L=>{var H;L.preventDefault();const $=(H=x.current)==null?void 0:H.getBoundingClientRect();if(!$)return;const K=L.clientX-$.left,Z=L.clientY-$.top,ge=(K-f.x)/a,Q=(Z-f.y)/a,it=Math.min(Math.max(a-L.deltaY*.001,.1),5),Xe=K-ge*it,ze=Z-Q*it;c(it),d({x:Xe,y:ze})},O=async()=>{if(!w.current||r.length===0)return;v(!1);const L=a,$=f;try{c(1),d({x:0,y:0}),setTimeout(async()=>{if(M(),w.current){const K=await xE(w.current,{backgroundColor:"#0f172a",pixelRatio:2,filter:ge=>{var Q;return!((Q=ge.classList)!=null&&Q.contains("drag-handle-ignored"))}}),Z=document.createElement("a");Z.download=`GP_Board_${Date.now()}.png`,Z.href=K,Z.click()}c(L),d($)},500)}catch(K){console.error("Export failed:",K),alert(""),c(L),d($)}},A=()=>{var ge,Q;const L=((ge=x.current)==null?void 0:ge.clientWidth)||window.innerWidth,$=((Q=x.current)==null?void 0:Q.clientHeight)||window.innerHeight,K=(L/2-f.x)/a,Z=($/2-f.y)/a;return{x:K-100,y:Z-60}},R=L=>{var Xe;L.preventDefault(),L.stopPropagation();const K=Array.from(L.dataTransfer.files).filter(ze=>ze.type.startsWith("image/")||ze.type.startsWith("video/")||ze.type.startsWith("audio/"));if(K.length===0)return;const Z=(Xe=x.current)==null?void 0:Xe.getBoundingClientRect(),ge=L.clientX-((Z==null?void 0:Z.left)||0),Q=L.clientY-((Z==null?void 0:Z.top)||0),Qe=(ge-f.x)/a,it=(Q-f.y)/a;K.forEach((ze,H)=>{const se=new FileReader;se.onload=he=>{let ve="image";ze.type.startsWith("video/")&&(ve="video"),ze.type.startsWith("audio/")&&(ve="audio"),i(Ze=>{var Se;return[...Ze,{id:Br(),type:ve,content:(Se=he.target)==null?void 0:Se.result,x:Qe+H*20-100,y:it+H*20-60}]})},se.readAsDataURL(ze)})},z=L=>{L.preventDefault(),L.stopPropagation()},B=(L,$="")=>{const{x:K,y:Z}=A();i(ge=>[...ge,{id:Br(),type:L,content:$,x:K,y:Z}]),v(!1)},te=()=>{var L;(L=E.current)==null||L.click(),v(!1)},re=L=>{var K;const $=(K=L.target.files)==null?void 0:K[0];if($){const Z=new FileReader;Z.onload=ge=>{let Q="image";$.type.startsWith("video/")&&(Q="video"),$.type.startsWith("audio/")&&(Q="audio");const{x:Qe,y:it}=A();i(Xe=>{var ze;return[...Xe,{id:Br(),type:Q,content:(ze=ge.target)==null?void 0:ze.result,x:Qe,y:it}]})},Z.readAsDataURL($)}L.target.value=""},le=L=>o($=>$.filter(K=>K.id!==L)),de=L=>{p&&p!==L&&(s.find(K=>K.start===p&&K.end===L||K.start===L&&K.end===p)||o(K=>[...K,{id:Br(),start:p,end:L}])),m(null)},pe=L=>{L.button===1&&(S.current=!0,C.current={x:L.clientX,y:L.clientY})},ee=L=>{if(S.current){const $=L.clientX-C.current.x,K=L.clientY-C.current.y;d(Z=>({x:Z.x+$,y:Z.y+K})),C.current={x:L.clientX,y:L.clientY}}},ie=()=>{S.current=!1,m(null)};return b.jsxs("div",{ref:x,className:"absolute inset-0 bg-slate-900 overflow-hidden select-none",onWheel:_,onMouseDown:pe,onMouseMove:ee,onMouseUp:ie,onMouseLeave:ie,onDrop:R,onDragOver:z,children:[b.jsx("input",{type:"file",ref:E,onChange:re,className:"hidden",accept:"image/*,video/*,audio/*"}),b.jsxs("div",{className:"absolute top-4 left-4 z-50 text-slate-500 text-sm pointer-events-none bg-slate-900/50 p-2 rounded backdrop-blur-sm border border-slate-700",children:[b.jsx("p",{children:" :  | :  |  "}),b.jsxs("p",{className:"text-xs mt-1 text-slate-600",children:["Scale: ",a.toFixed(2),"x"]})]}),b.jsx(l0.Xwrapper,{children:b.jsxs("div",{ref:w,className:"absolute inset-0 w-full h-full",children:[b.jsx("div",{className:"absolute inset-0 will-change-transform origin-top-left",style:{transform:`translate(${f.x}px, ${f.y}px) scale(${a})`},children:b.jsxs("div",{className:"relative w-[5000px] h-[5000px]",children:[b.jsx("div",{className:"absolute inset-0 opacity-10 pointer-events-none",style:{backgroundImage:"radial-gradient(#ffffff 1px, transparent 1px)",backgroundSize:"40px 40px"}}),r.map(L=>b.jsx(zj,{...L,scale:a,isSelected:p===L.id,onUpdate:($,K)=>i(Z=>Z.map(ge=>ge.id===$?{...ge,content:K}:ge)),onDelete:$=>{i(K=>K.filter(Z=>Z.id!==$)),o(K=>K.filter(Z=>Z.start!==$&&Z.end!==$))},onDrag:($,K,Z)=>{i(ge=>ge.map(Q=>Q.id===$?{...Q,x:K,y:Z}:Q)),M()},onConnectStart:m,onConnectEnd:de},L.id))]})}),b.jsx("div",{className:"absolute inset-0 pointer-events-none",style:{transform:`translate(${f.x}px, ${f.y}px)`},children:s.map(L=>b.jsx(u3,{start:L.start,end:L.end,color:"#10b981",strokeWidth:3,headSize:6,path:"smooth",zIndex:10,labels:{middle:b.jsx("div",{onClick:$=>{$.stopPropagation(),le(L.id)},className:"pointer-events-auto cursor-pointer p-1 rounded-full bg-slate-800 border border-slate-600 hover:bg-red-500 hover:border-red-500 hover:text-white text-slate-400 transition-colors z-[999]",title:"",children:b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor",children:b.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})}},L.id))})]})}),b.jsxs("div",{className:"absolute bottom-8 right-8 flex flex-col items-end gap-4 z-[100]",children:[b.jsxs("div",{className:`flex flex-col gap-3 transition-all duration-300 origin-bottom ${g?"opacity-100 scale-100":"opacity-0 scale-0 pointer-events-none"}`,children:[b.jsxs("div",{className:"flex gap-2",children:[b.jsx("button",{onClick:O,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-500 text-white rounded-full shadow-lg",title:"",children:b.jsx(hd,{size:18})}),b.jsx("button",{onClick:te,className:"flex items-center gap-2 px-4 py-2 bg-indigo-600 hover:bg-indigo-500 text-white rounded-full shadow-lg",title:"",children:b.jsx(PE,{size:18})})]}),b.jsxs("div",{className:"flex gap-2",children:[b.jsx("button",{onClick:()=>B("video"),className:"flex items-center gap-2 px-4 py-2 bg-red-600 hover:bg-red-500 text-white rounded-full shadow-lg",title:"",children:b.jsx(K4,{size:18})}),b.jsx("button",{onClick:()=>B("audio"),className:"flex items-center gap-2 px-4 py-2 bg-pink-600 hover:bg-pink-500 text-white rounded-full shadow-lg",title:"",children:b.jsx(T4,{size:18})})]}),b.jsxs("div",{className:"flex gap-2",children:[b.jsx("button",{onClick:()=>B("code"),className:"flex items-center gap-2 px-4 py-2 bg-slate-700 hover:bg-slate-600 text-white rounded-full shadow-lg",title:"",children:b.jsx(Zj,{size:18})}),b.jsx("button",{onClick:()=>B("link"),className:"flex items-center gap-2 px-4 py-2 bg-sky-600 hover:bg-sky-500 text-white rounded-full shadow-lg",title:"",children:b.jsx(v4,{size:18})})]}),b.jsxs("div",{className:"flex gap-2",children:[b.jsx("button",{onClick:()=>B("status","unused"),className:"flex items-center gap-2 px-4 py-2 bg-purple-600 hover:bg-purple-500 text-white rounded-full shadow-lg",title:"",children:b.jsx(Wj,{size:18})}),b.jsx("button",{onClick:()=>B("text"),className:"flex items-center gap-2 px-4 py-2 bg-yellow-500 hover:bg-yellow-400 text-white rounded-full shadow-lg",title:"",children:b.jsx(jE,{size:18})})]})]}),b.jsx("button",{onClick:()=>v(!g),className:`w-16 h-16 bg-emerald-500 hover:bg-emerald-400 text-white rounded-full shadow-2xl flex items-center justify-center text-3xl font-bold transition-transform duration-300 ${g?"rotate-45":"rotate-0"}`,children:"+"})]})]})}function J4({todos:t,members:e,onUpdate:n}){const[r,i]=G.useState(""),[s,o]=G.useState(""),a=d=>{d.preventDefault(),r.trim()&&(n([...t,{id:Br(),text:r,done:!1,assigneeId:s}]),i(""))},c=d=>{n(t.map(p=>p.id===d?{...p,done:!p.done}:p))},f=d=>{n(t.filter(p=>p.id!==d))};return b.jsxs("div",{className:"w-80 bg-slate-800 border-l border-slate-700 flex flex-col shrink-0 h-full",children:[b.jsxs("div",{className:"p-4 border-b border-slate-700 font-bold text-slate-200 flex justify-between items-center",children:[b.jsx("span",{children:" "}),b.jsxs("span",{className:"text-xs text-slate-500",children:[t.filter(d=>!d.done).length," "]})]}),b.jsxs("div",{className:"flex-1 overflow-y-auto p-3 space-y-2",children:[t.map(d=>{const p=e.find(m=>m.id===d.assigneeId);return b.jsx("div",{className:"bg-slate-900/50 p-2 rounded border border-slate-700/50 hover:border-emerald-500/30 group transition-colors",children:b.jsxs("div",{className:"flex gap-2 items-start",children:[b.jsx("input",{type:"checkbox",checked:d.done,onChange:()=>c(d.id),className:"mt-1 accent-emerald-500 cursor-pointer"}),b.jsxs("div",{className:"flex-1 min-w-0",children:[b.jsx("div",{className:`text-sm break-words ${d.done?"line-through text-slate-600":"text-slate-300"}`,children:d.text}),p&&b.jsxs("div",{className:"flex items-center gap-1 mt-1 bg-slate-800/50 w-fit px-1 rounded",children:[p.avatar?b.jsx("img",{src:p.avatar,className:"w-4 h-4 rounded-full object-cover"}):b.jsx("div",{className:`w-4 h-4 rounded-full ${p.color} text-[8px] flex items-center justify-center text-white`,children:p.name[0]}),b.jsx("span",{className:"text-xs text-slate-400",children:p.name})]})]}),b.jsx("button",{onClick:()=>f(d.id),className:"text-slate-600 hover:text-red-400 opacity-0 group-hover:opacity-100 px-1 font-bold",children:""})]})},d.id)}),t.length===0&&b.jsx("div",{className:"text-center text-slate-600 text-sm mt-10",children:""})]}),b.jsxs("form",{onSubmit:a,className:"p-3 border-t border-slate-700 flex flex-col gap-2 bg-slate-800",children:[b.jsx("input",{value:r,onChange:d=>i(d.target.value),className:"bg-slate-900 border border-slate-600 rounded px-2 py-2 text-sm text-white outline-none focus:border-emerald-500 transition-colors",placeholder:"..."}),b.jsxs("div",{className:"flex gap-2",children:[b.jsxs("select",{value:s,onChange:d=>o(d.target.value),className:"bg-slate-700 text-slate-300 text-xs rounded border border-slate-600 flex-1 outline-none px-2",children:[b.jsx("option",{value:"",children:"--  --"}),e.map(d=>b.jsxs("option",{value:d.id,children:[d.name," - ",d.role]},d.id))]}),b.jsx("button",{type:"submit",className:"bg-emerald-600 hover:bg-emerald-500 text-white text-xs px-4 rounded font-bold",children:""})]})]})]})}function Y4({members:t,todos:e,onUpdateMembers:n,onUpdateTodos:r}){var C;const i=G.useRef(null),[s,o]=G.useState({visible:!1,x:0,y:0,memberId:""}),[a,c]=G.useState({isOpen:!1,type:"add",inputValue:""});G.useEffect(()=>{const x=()=>o(w=>({...w,visible:!1}));return window.addEventListener("click",x),()=>window.removeEventListener("click",x)},[]);const f=x=>{if(x.preventDefault(),!!a.inputValue.trim()){if(a.type==="add"){const w=["bg-red-500","bg-blue-500","bg-emerald-500","bg-purple-500","bg-yellow-500","bg-orange-500","bg-pink-500"],E={id:Br(),name:a.inputValue.trim(),role:"",color:w[Math.floor(Math.random()*w.length)]};n([...t,E])}else a.type==="rename"&&a.targetId?n(t.map(w=>w.id===a.targetId?{...w,name:a.inputValue.trim()}:w)):a.type==="role"&&a.targetId&&n(t.map(w=>w.id===a.targetId?{...w,role:a.inputValue.trim()}:w));c({...a,isOpen:!1})}},d=()=>{c({isOpen:!0,type:"add",inputValue:""})},p=()=>{const x=t.find(w=>w.id===s.memberId);x&&(c({isOpen:!0,type:"rename",inputValue:x.name,targetId:x.id}),o(w=>({...w,visible:!1})))},m=()=>{const x=t.find(w=>w.id===s.memberId);x&&(c({isOpen:!0,type:"role",inputValue:x.role,targetId:x.id}),o(w=>({...w,visible:!1})))},g=(x,w)=>{x.preventDefault(),x.stopPropagation();const E=Math.min(x.clientX,window.innerWidth-200),M=Math.min(x.clientY,window.innerHeight-250);o({visible:!0,x:E,y:M,memberId:w})},v=x=>{var E;const w=(E=x.target.files)==null?void 0:E[0];if(w&&s.memberId){const M=new FileReader;M.onload=_=>{n(t.map(O=>{var A;return O.id===s.memberId?{...O,avatar:(A=_.target)==null?void 0:A.result}:O}))},M.readAsDataURL(w)}o(M=>({...M,visible:!1})),x.target.value=""},S=()=>{confirm("")&&n(t.filter(x=>x.id!==s.memberId)),o(x=>({...x,visible:!1}))};return b.jsxs("div",{className:"flex h-full w-full bg-slate-900 overflow-hidden relative",children:[b.jsx("input",{type:"file",ref:i,onChange:v,className:"hidden",accept:"image/*"}),b.jsxs("div",{className:"flex-1 flex flex-col min-w-0",children:[b.jsxs("div",{className:"p-8 pb-4 border-b border-slate-800 flex justify-between items-center shrink-0",children:[b.jsxs("div",{children:[b.jsx("h2",{className:"text-3xl font-bold text-white",children:" "}),b.jsx("p",{className:"text-slate-400 text-sm mt-1",children:""})]}),b.jsxs("button",{onClick:d,className:"bg-emerald-600 hover:bg-emerald-500 text-white px-6 py-2 rounded-lg font-bold shadow-lg transition-colors flex items-center gap-2",children:[b.jsx("span",{children:"+"})," "]})]}),b.jsx("div",{className:"flex-1 overflow-y-auto p-8",children:b.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-6",children:[t.map(x=>b.jsxs("div",{onContextMenu:w=>g(w,x.id),className:"bg-slate-800 border border-slate-700 rounded-xl p-6 flex flex-col items-center gap-4 hover:border-emerald-500 hover:shadow-xl hover:-translate-y-1 transition-all group relative cursor-pointer select-none",children:[b.jsx("div",{className:`w-20 h-20 rounded-full border-4 border-slate-700 flex items-center justify-center text-3xl text-white font-bold overflow-hidden shadow-inner ${x.color}`,children:x.avatar?b.jsx("img",{src:x.avatar,className:"w-full h-full object-cover"}):x.name[0]}),b.jsxs("div",{className:"text-center w-full",children:[b.jsx("h3",{className:"text-lg font-bold text-white truncate px-2",children:x.name}),b.jsx("div",{className:"mt-1 inline-block px-2 py-0.5 bg-slate-900 rounded text-xs text-emerald-400 border border-slate-700 max-w-full truncate",children:x.role})]}),b.jsx("div",{className:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity text-slate-500",children:""})]},x.id)),t.length===0&&b.jsx("div",{className:"col-span-full py-10 text-center text-slate-500 border-2 border-dashed border-slate-800 rounded-xl",children:""})]})})]}),b.jsx(J4,{todos:e,members:t,onUpdate:r}),a.isOpen&&b.jsx("div",{className:"fixed inset-0 bg-black/70 z-[10000] flex items-center justify-center backdrop-blur-sm",onClick:()=>c({...a,isOpen:!1}),children:b.jsxs("div",{className:"bg-slate-800 border border-slate-700 p-6 rounded-xl w-96 shadow-2xl animate-in zoom-in-95 duration-200",onClick:x=>x.stopPropagation(),children:[b.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:a.type==="add"?"":a.type==="rename"?"":""}),b.jsxs("form",{onSubmit:f,children:[b.jsx("input",{autoFocus:!0,value:a.inputValue,onChange:x=>c({...a,inputValue:x.target.value}),placeholder:a.type==="role"?": , ...":"...",className:"w-full bg-slate-900 border border-slate-600 rounded px-4 py-3 text-white outline-none focus:border-emerald-500 mb-6"}),b.jsxs("div",{className:"flex justify-end gap-3",children:[b.jsx("button",{type:"button",onClick:()=>c({...a,isOpen:!1}),className:"px-4 py-2 text-slate-400 hover:text-white transition-colors",children:""}),b.jsx("button",{type:"submit",className:"bg-emerald-600 hover:bg-emerald-500 text-white px-6 py-2 rounded font-bold shadow-lg",children:""})]})]})]})}),s.visible&&b.jsxs(b.Fragment,{children:[b.jsx("div",{className:"fixed inset-0 z-[9998]",onClick:()=>o(x=>({...x,visible:!1}))}),b.jsxs("div",{className:"fixed z-[9999] bg-slate-800 border border-slate-600 rounded-lg shadow-2xl py-1 w-44 flex flex-col animate-in fade-in zoom-in-95 duration-100",style:{top:s.y,left:s.x},children:[b.jsxs("div",{className:"px-4 py-2 text-xs text-slate-500 border-b border-slate-700 font-bold bg-slate-900/50",children:[": ",(C=t.find(x=>x.id===s.memberId))==null?void 0:C.name]}),b.jsxs("button",{onClick:p,className:"px-4 py-3 text-left text-slate-200 hover:bg-emerald-600 hover:text-white flex items-center gap-3 transition-colors text-sm",children:[b.jsx("span",{children:""})," "]}),b.jsxs("button",{onClick:m,className:"px-4 py-3 text-left text-slate-200 hover:bg-emerald-600 hover:text-white flex items-center gap-3 transition-colors text-sm",children:[b.jsx("span",{children:""})," "]}),b.jsxs("button",{onClick:()=>{var x;return(x=i.current)==null?void 0:x.click()},className:"px-4 py-3 text-left text-slate-200 hover:bg-emerald-600 hover:text-white flex items-center gap-3 transition-colors text-sm",children:[b.jsx("span",{children:""})," "]}),b.jsx("div",{className:"h-[1px] bg-slate-700 my-1 mx-2"}),b.jsxs("button",{onClick:S,className:"px-4 py-3 text-left text-red-400 hover:bg-red-600 hover:text-white flex items-center gap-3 transition-colors text-sm rounded-b-lg",children:[b.jsx("span",{children:""})," "]})]})]})]})}var BE={exports:{}},FE={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jl=G;function Q4(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Z4=typeof Object.is=="function"?Object.is:Q4,ez=Jl.useState,tz=Jl.useEffect,nz=Jl.useLayoutEffect,rz=Jl.useDebugValue;function iz(t,e){var n=e(),r=ez({inst:{value:n,getSnapshot:e}}),i=r[0].inst,s=r[1];return nz(function(){i.value=n,i.getSnapshot=e,Bm(i)&&s({inst:i})},[t,n,e]),tz(function(){return Bm(i)&&s({inst:i}),t(function(){Bm(i)&&s({inst:i})})},[t]),rz(n),n}function Bm(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Z4(t,n)}catch{return!0}}function sz(t,e){return e()}var oz=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?sz:iz;FE.useSyncExternalStore=Jl.useSyncExternalStore!==void 0?Jl.useSyncExternalStore:oz;BE.exports=FE;var Fy=BE.exports;function Jt(t){this.content=t}Jt.prototype={constructor:Jt,find:function(t){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===t)return e;return-1},get:function(t){var e=this.find(t);return e==-1?void 0:this.content[e+1]},update:function(t,e,n){var r=n&&n!=t?this.remove(n):this,i=r.find(t),s=r.content.slice();return i==-1?s.push(n||t,e):(s[i+1]=e,n&&(s[i]=n)),new Jt(s)},remove:function(t){var e=this.find(t);if(e==-1)return this;var n=this.content.slice();return n.splice(e,2),new Jt(n)},addToStart:function(t,e){return new Jt([t,e].concat(this.remove(t).content))},addToEnd:function(t,e){var n=this.remove(t).content.slice();return n.push(t,e),new Jt(n)},addBefore:function(t,e,n){var r=this.remove(e),i=r.content.slice(),s=r.find(t);return i.splice(s==-1?i.length:s,0,e,n),new Jt(i)},forEach:function(t){for(var e=0;e<this.content.length;e+=2)t(this.content[e],this.content[e+1])},prepend:function(t){return t=Jt.from(t),t.size?new Jt(t.content.concat(this.subtract(t).content)):this},append:function(t){return t=Jt.from(t),t.size?new Jt(this.subtract(t).content.concat(t.content)):this},subtract:function(t){var e=this;t=Jt.from(t);for(var n=0;n<t.content.length;n+=2)e=e.remove(t.content[n]);return e},toObject:function(){var t={};return this.forEach(function(e,n){t[e]=n}),t},get size(){return this.content.length>>1}};Jt.from=function(t){if(t instanceof Jt)return t;var e=[];if(t)for(var n in t)e.push(n,t[n]);return new Jt(e)};function $E(t,e,n){for(let r=0;;r++){if(r==t.childCount||r==e.childCount)return t.childCount==e.childCount?null:n;let i=t.child(r),s=e.child(r);if(i==s){n+=i.nodeSize;continue}if(!i.sameMarkup(s))return n;if(i.isText&&i.text!=s.text){for(let o=0;i.text[o]==s.text[o];o++)n++;return n}if(i.content.size||s.content.size){let o=$E(i.content,s.content,n+1);if(o!=null)return o}n+=i.nodeSize}}function HE(t,e,n,r){for(let i=t.childCount,s=e.childCount;;){if(i==0||s==0)return i==s?null:{a:n,b:r};let o=t.child(--i),a=e.child(--s),c=o.nodeSize;if(o==a){n-=c,r-=c;continue}if(!o.sameMarkup(a))return{a:n,b:r};if(o.isText&&o.text!=a.text){let f=0,d=Math.min(o.text.length,a.text.length);for(;f<d&&o.text[o.text.length-f-1]==a.text[a.text.length-f-1];)f++,n--,r--;return{a:n,b:r}}if(o.content.size||a.content.size){let f=HE(o.content,a.content,n-1,r-1);if(f)return f}n-=c,r-=c}}class X{constructor(e,n){if(this.content=e,this.size=n||0,n==null)for(let r=0;r<e.length;r++)this.size+=e[r].nodeSize}nodesBetween(e,n,r,i=0,s){for(let o=0,a=0;a<n;o++){let c=this.content[o],f=a+c.nodeSize;if(f>e&&r(c,i+a,s||null,o)!==!1&&c.content.size){let d=a+1;c.nodesBetween(Math.max(0,e-d),Math.min(c.content.size,n-d),r,i+d)}a=f}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,n,r,i){let s="",o=!0;return this.nodesBetween(e,n,(a,c)=>{let f=a.isText?a.text.slice(Math.max(e,c)-c,n-c):a.isLeaf?i?typeof i=="function"?i(a):i:a.type.spec.leafText?a.type.spec.leafText(a):"":"";a.isBlock&&(a.isLeaf&&f||a.isTextblock)&&r&&(o?o=!1:s+=r),s+=f},0),s}append(e){if(!e.size)return this;if(!this.size)return e;let n=this.lastChild,r=e.firstChild,i=this.content.slice(),s=0;for(n.isText&&n.sameMarkup(r)&&(i[i.length-1]=n.withText(n.text+r.text),s=1);s<e.content.length;s++)i.push(e.content[s]);return new X(i,this.size+e.size)}cut(e,n=this.size){if(e==0&&n==this.size)return this;let r=[],i=0;if(n>e)for(let s=0,o=0;o<n;s++){let a=this.content[s],c=o+a.nodeSize;c>e&&((o<e||c>n)&&(a.isText?a=a.cut(Math.max(0,e-o),Math.min(a.text.length,n-o)):a=a.cut(Math.max(0,e-o-1),Math.min(a.content.size,n-o-1))),r.push(a),i+=a.nodeSize),o=c}return new X(r,i)}cutByIndex(e,n){return e==n?X.empty:e==0&&n==this.content.length?this:new X(this.content.slice(e,n))}replaceChild(e,n){let r=this.content[e];if(r==n)return this;let i=this.content.slice(),s=this.size+n.nodeSize-r.nodeSize;return i[e]=n,new X(i,s)}addToStart(e){return new X([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new X(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let n=0;n<this.content.length;n++)if(!this.content[n].eq(e.content[n]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let n=this.content[e];if(!n)throw new RangeError("Index "+e+" out of range for "+this);return n}maybeChild(e){return this.content[e]||null}forEach(e){for(let n=0,r=0;n<this.content.length;n++){let i=this.content[n];e(i,r,n),r+=i.nodeSize}}findDiffStart(e,n=0){return $E(this,e,n)}findDiffEnd(e,n=this.size,r=e.size){return HE(this,e,n,r)}findIndex(e){if(e==0)return cf(0,e);if(e==this.size)return cf(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let n=0,r=0;;n++){let i=this.child(n),s=r+i.nodeSize;if(s>=e)return s==e?cf(n+1,s):cf(n,r);r=s}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,n){if(!n)return X.empty;if(!Array.isArray(n))throw new RangeError("Invalid input for Fragment.fromJSON");return new X(n.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return X.empty;let n,r=0;for(let i=0;i<e.length;i++){let s=e[i];r+=s.nodeSize,i&&s.isText&&e[i-1].sameMarkup(s)?(n||(n=e.slice(0,i)),n[n.length-1]=s.withText(n[n.length-1].text+s.text)):n&&n.push(s)}return new X(n||e,r)}static from(e){if(!e)return X.empty;if(e instanceof X)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new X([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}X.empty=new X([],0);const Fm={index:0,offset:0};function cf(t,e){return Fm.index=t,Fm.offset=e,Fm}function md(t,e){if(t===e)return!0;if(!(t&&typeof t=="object")||!(e&&typeof e=="object"))return!1;let n=Array.isArray(t);if(Array.isArray(e)!=n)return!1;if(n){if(t.length!=e.length)return!1;for(let r=0;r<t.length;r++)if(!md(t[r],e[r]))return!1}else{for(let r in t)if(!(r in e)||!md(t[r],e[r]))return!1;for(let r in e)if(!(r in t))return!1}return!0}let Ge=class c0{constructor(e,n){this.type=e,this.attrs=n}addToSet(e){let n,r=!1;for(let i=0;i<e.length;i++){let s=e[i];if(this.eq(s))return e;if(this.type.excludes(s.type))n||(n=e.slice(0,i));else{if(s.type.excludes(this.type))return e;!r&&s.type.rank>this.type.rank&&(n||(n=e.slice(0,i)),n.push(this),r=!0),n&&n.push(s)}}return n||(n=e.slice()),r||n.push(this),n}removeFromSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return e.slice(0,n).concat(e.slice(n+1));return e}isInSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return!0;return!1}eq(e){return this==e||this.type==e.type&&md(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Mark.fromJSON");let r=e.marks[n.type];if(!r)throw new RangeError(`There is no mark type ${n.type} in this schema`);let i=r.create(n.attrs);return r.checkAttrs(i.attrs),i}static sameSet(e,n){if(e==n)return!0;if(e.length!=n.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].eq(n[r]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return c0.none;if(e instanceof c0)return[e];let n=e.slice();return n.sort((r,i)=>r.type.rank-i.type.rank),n}};Ge.none=[];class gd extends Error{}class oe{constructor(e,n,r){this.content=e,this.openStart=n,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,n){let r=VE(this.content,e+this.openStart,n);return r&&new oe(r,this.openStart,this.openEnd)}removeBetween(e,n){return new oe(UE(this.content,e+this.openStart,n+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,n){if(!n)return oe.empty;let r=n.openStart||0,i=n.openEnd||0;if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new oe(X.fromJSON(e,n.content),r,i)}static maxOpen(e,n=!0){let r=0,i=0;for(let s=e.firstChild;s&&!s.isLeaf&&(n||!s.type.spec.isolating);s=s.firstChild)r++;for(let s=e.lastChild;s&&!s.isLeaf&&(n||!s.type.spec.isolating);s=s.lastChild)i++;return new oe(e,r,i)}}oe.empty=new oe(X.empty,0,0);function UE(t,e,n){let{index:r,offset:i}=t.findIndex(e),s=t.maybeChild(r),{index:o,offset:a}=t.findIndex(n);if(i==e||s.isText){if(a!=n&&!t.child(o).isText)throw new RangeError("Removing non-flat range");return t.cut(0,e).append(t.cut(n))}if(r!=o)throw new RangeError("Removing non-flat range");return t.replaceChild(r,s.copy(UE(s.content,e-i-1,n-i-1)))}function VE(t,e,n,r){let{index:i,offset:s}=t.findIndex(e),o=t.maybeChild(i);if(s==e||o.isText)return r&&!r.canReplace(i,i,n)?null:t.cut(0,e).append(n).append(t.cut(e));let a=VE(o.content,e-s-1,n,o);return a&&t.replaceChild(i,o.copy(a))}function lz(t,e,n){if(n.openStart>t.depth)throw new gd("Inserted content deeper than insertion position");if(t.depth-n.openStart!=e.depth-n.openEnd)throw new gd("Inconsistent open depths");return WE(t,e,n,0)}function WE(t,e,n,r){let i=t.index(r),s=t.node(r);if(i==e.index(r)&&r<t.depth-n.openStart){let o=WE(t,e,n,r+1);return s.copy(s.content.replaceChild(i,o))}else if(n.content.size)if(!n.openStart&&!n.openEnd&&t.depth==r&&e.depth==r){let o=t.parent,a=o.content;return _o(o,a.cut(0,t.parentOffset).append(n.content).append(a.cut(e.parentOffset)))}else{let{start:o,end:a}=az(n,t);return _o(s,qE(t,o,a,e,r))}else return _o(s,yd(t,e,r))}function KE(t,e){if(!e.type.compatibleContent(t.type))throw new gd("Cannot join "+e.type.name+" onto "+t.type.name)}function f0(t,e,n){let r=t.node(n);return KE(r,e.node(n)),r}function Mo(t,e){let n=e.length-1;n>=0&&t.isText&&t.sameMarkup(e[n])?e[n]=t.withText(e[n].text+t.text):e.push(t)}function iu(t,e,n,r){let i=(e||t).node(n),s=0,o=e?e.index(n):i.childCount;t&&(s=t.index(n),t.depth>n?s++:t.textOffset&&(Mo(t.nodeAfter,r),s++));for(let a=s;a<o;a++)Mo(i.child(a),r);e&&e.depth==n&&e.textOffset&&Mo(e.nodeBefore,r)}function _o(t,e){return t.type.checkContent(e),t.copy(e)}function qE(t,e,n,r,i){let s=t.depth>i&&f0(t,e,i+1),o=r.depth>i&&f0(n,r,i+1),a=[];return iu(null,t,i,a),s&&o&&e.index(i)==n.index(i)?(KE(s,o),Mo(_o(s,qE(t,e,n,r,i+1)),a)):(s&&Mo(_o(s,yd(t,e,i+1)),a),iu(e,n,i,a),o&&Mo(_o(o,yd(n,r,i+1)),a)),iu(r,null,i,a),new X(a)}function yd(t,e,n){let r=[];if(iu(null,t,n,r),t.depth>n){let i=f0(t,e,n+1);Mo(_o(i,yd(t,e,n+1)),r)}return iu(e,null,n,r),new X(r)}function az(t,e){let n=e.depth-t.openStart,i=e.node(n).copy(t.content);for(let s=n-1;s>=0;s--)i=e.node(s).copy(X.from(i));return{start:i.resolveNoCache(t.openStart+n),end:i.resolveNoCache(i.content.size-t.openEnd-n)}}class Au{constructor(e,n,r){this.pos=e,this.path=n,this.parentOffset=r,this.depth=n.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,n=this.index(this.depth);if(n==e.childCount)return null;let r=this.pos-this.path[this.path.length-1],i=e.child(n);return r?e.child(n).cut(r):i}get nodeBefore(){let e=this.index(this.depth),n=this.pos-this.path[this.path.length-1];return n?this.parent.child(e).cut(0,n):e==0?null:this.parent.child(e-1)}posAtIndex(e,n){n=this.resolveDepth(n);let r=this.path[n*3],i=n==0?0:this.path[n*3-1]+1;for(let s=0;s<e;s++)i+=r.child(s).nodeSize;return i}marks(){let e=this.parent,n=this.index();if(e.content.size==0)return Ge.none;if(this.textOffset)return e.child(n).marks;let r=e.maybeChild(n-1),i=e.maybeChild(n);if(!r){let a=r;r=i,i=a}let s=r.marks;for(var o=0;o<s.length;o++)s[o].type.spec.inclusive===!1&&(!i||!s[o].isInSet(i.marks))&&(s=s[o--].removeFromSet(s));return s}marksAcross(e){let n=this.parent.maybeChild(this.index());if(!n||!n.isInline)return null;let r=n.marks,i=e.parent.maybeChild(e.index());for(var s=0;s<r.length;s++)r[s].type.spec.inclusive===!1&&(!i||!r[s].isInSet(i.marks))&&(r=r[s--].removeFromSet(r));return r}sharedDepth(e){for(let n=this.depth;n>0;n--)if(this.start(n)<=e&&this.end(n)>=e)return n;return 0}blockRange(e=this,n){if(e.pos<this.pos)return e.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);r>=0;r--)if(e.pos<=this.end(r)&&(!n||n(this.node(r))))return new vd(this,e,r);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let n=1;n<=this.depth;n++)e+=(e?"/":"")+this.node(n).type.name+"_"+this.index(n-1);return e+":"+this.parentOffset}static resolve(e,n){if(!(n>=0&&n<=e.content.size))throw new RangeError("Position "+n+" out of range");let r=[],i=0,s=n;for(let o=e;;){let{index:a,offset:c}=o.content.findIndex(s),f=s-c;if(r.push(o,a,i+c),!f||(o=o.child(a),o.isText))break;s=f-1,i+=c+1}return new Au(n,r,s)}static resolveCached(e,n){let r=bb.get(e);if(r)for(let s=0;s<r.elts.length;s++){let o=r.elts[s];if(o.pos==n)return o}else bb.set(e,r=new uz);let i=r.elts[r.i]=Au.resolve(e,n);return r.i=(r.i+1)%cz,i}}class uz{constructor(){this.elts=[],this.i=0}}const cz=12,bb=new WeakMap;class vd{constructor(e,n,r){this.$from=e,this.$to=n,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const fz=Object.create(null);class li{constructor(e,n,r,i=Ge.none){this.type=e,this.attrs=n,this.marks=i,this.content=r||X.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,n,r,i=0){this.content.nodesBetween(e,n,r,i,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,n,r,i){return this.content.textBetween(e,n,r,i)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,n,r){return this.type==e&&md(this.attrs,n||e.defaultAttrs||fz)&&Ge.sameSet(this.marks,r||Ge.none)}copy(e=null){return e==this.content?this:new li(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new li(this.type,this.attrs,this.content,e)}cut(e,n=this.content.size){return e==0&&n==this.content.size?this:this.copy(this.content.cut(e,n))}slice(e,n=this.content.size,r=!1){if(e==n)return oe.empty;let i=this.resolve(e),s=this.resolve(n),o=r?0:i.sharedDepth(n),a=i.start(o),f=i.node(o).content.cut(i.pos-a,s.pos-a);return new oe(f,i.depth-o,s.depth-o)}replace(e,n,r){return lz(this.resolve(e),this.resolve(n),r)}nodeAt(e){for(let n=this;;){let{index:r,offset:i}=n.content.findIndex(e);if(n=n.maybeChild(r),!n)return null;if(i==e||n.isText)return n;e-=i+1}}childAfter(e){let{index:n,offset:r}=this.content.findIndex(e);return{node:this.content.maybeChild(n),index:n,offset:r}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:n,offset:r}=this.content.findIndex(e);if(r<e)return{node:this.content.child(n),index:n,offset:r};let i=this.content.child(n-1);return{node:i,index:n-1,offset:r-i.nodeSize}}resolve(e){return Au.resolveCached(this,e)}resolveNoCache(e){return Au.resolve(this,e)}rangeHasMark(e,n,r){let i=!1;return n>e&&this.nodesBetween(e,n,s=>(r.isInSet(s.marks)&&(i=!0),!i)),i}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),GE(this.marks,e)}contentMatchAt(e){let n=this.type.contentMatch.matchFragment(this.content,0,e);if(!n)throw new Error("Called contentMatchAt on a node with invalid content");return n}canReplace(e,n,r=X.empty,i=0,s=r.childCount){let o=this.contentMatchAt(e).matchFragment(r,i,s),a=o&&o.matchFragment(this.content,n);if(!a||!a.validEnd)return!1;for(let c=i;c<s;c++)if(!this.type.allowsMarks(r.child(c).marks))return!1;return!0}canReplaceWith(e,n,r,i){if(i&&!this.type.allowsMarks(i))return!1;let s=this.contentMatchAt(e).matchType(r),o=s&&s.matchFragment(this.content,n);return o?o.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=Ge.none;for(let n=0;n<this.marks.length;n++){let r=this.marks[n];r.type.checkAttrs(r.attrs),e=r.addToSet(e)}if(!Ge.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(n=>n.type.name)}`);this.content.forEach(n=>n.check())}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(n=>n.toJSON())),e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Node.fromJSON");let r;if(n.marks){if(!Array.isArray(n.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=n.marks.map(e.markFromJSON)}if(n.type=="text"){if(typeof n.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(n.text,r)}let i=X.fromJSON(e,n.content),s=e.nodeType(n.type).create(n.attrs,i,r);return s.type.checkAttrs(s.attrs),s}}li.prototype.text=void 0;class xd extends li{constructor(e,n,r,i){if(super(e,n,null,i),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):GE(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,n){return this.text.slice(e,n)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new xd(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new xd(this.type,this.attrs,e,this.marks)}cut(e=0,n=this.text.length){return e==0&&n==this.text.length?this:this.withText(this.text.slice(e,n))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function GE(t,e){for(let n=t.length-1;n>=0;n--)e=t[n].type.name+"("+e+")";return e}class zo{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,n){let r=new dz(e,n);if(r.next==null)return zo.empty;let i=XE(r);r.next&&r.err("Unexpected trailing text");let s=xz(vz(i));return wz(s,r),s}matchType(e){for(let n=0;n<this.next.length;n++)if(this.next[n].type==e)return this.next[n].next;return null}matchFragment(e,n=0,r=e.childCount){let i=this;for(let s=n;i&&s<r;s++)i=i.matchType(e.child(s).type);return i}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:n}=this.next[e];if(!(n.isText||n.hasRequiredAttrs()))return n}return null}compatible(e){for(let n=0;n<this.next.length;n++)for(let r=0;r<e.next.length;r++)if(this.next[n].type==e.next[r].type)return!0;return!1}fillBefore(e,n=!1,r=0){let i=[this];function s(o,a){let c=o.matchFragment(e,r);if(c&&(!n||c.validEnd))return X.from(a.map(f=>f.createAndFill()));for(let f=0;f<o.next.length;f++){let{type:d,next:p}=o.next[f];if(!(d.isText||d.hasRequiredAttrs())&&i.indexOf(p)==-1){i.push(p);let m=s(p,a.concat(d));if(m)return m}}return null}return s(this,[])}findWrapping(e){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==e)return this.wrapCache[r+1];let n=this.computeWrapping(e);return this.wrapCache.push(e,n),n}computeWrapping(e){let n=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let i=r.shift(),s=i.match;if(s.matchType(e)){let o=[];for(let a=i;a.type;a=a.via)o.push(a.type);return o.reverse()}for(let o=0;o<s.next.length;o++){let{type:a,next:c}=s.next[o];!a.isLeaf&&!a.hasRequiredAttrs()&&!(a.name in n)&&(!i.type||c.validEnd)&&(r.push({match:a.contentMatch,type:a,via:i}),n[a.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function n(r){e.push(r);for(let i=0;i<r.next.length;i++)e.indexOf(r.next[i].next)==-1&&n(r.next[i].next)}return n(this),e.map((r,i)=>{let s=i+(r.validEnd?"*":" ")+" ";for(let o=0;o<r.next.length;o++)s+=(o?", ":"")+r.next[o].type.name+"->"+e.indexOf(r.next[o].next);return s}).join(`
`)}}zo.empty=new zo(!0);class dz{constructor(e,n){this.string=e,this.nodeTypes=n,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function XE(t){let e=[];do e.push(hz(t));while(t.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function hz(t){let e=[];do e.push(pz(t));while(t.next&&t.next!=")"&&t.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function pz(t){let e=yz(t);for(;;)if(t.eat("+"))e={type:"plus",expr:e};else if(t.eat("*"))e={type:"star",expr:e};else if(t.eat("?"))e={type:"opt",expr:e};else if(t.eat("{"))e=mz(t,e);else break;return e}function Sb(t){/\D/.test(t.next)&&t.err("Expected number, got '"+t.next+"'");let e=Number(t.next);return t.pos++,e}function mz(t,e){let n=Sb(t),r=n;return t.eat(",")&&(t.next!="}"?r=Sb(t):r=-1),t.eat("}")||t.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:e}}function gz(t,e){let n=t.nodeTypes,r=n[e];if(r)return[r];let i=[];for(let s in n){let o=n[s];o.isInGroup(e)&&i.push(o)}return i.length==0&&t.err("No node type or group '"+e+"' found"),i}function yz(t){if(t.eat("(")){let e=XE(t);return t.eat(")")||t.err("Missing closing paren"),e}else if(/\W/.test(t.next))t.err("Unexpected token '"+t.next+"'");else{let e=gz(t,t.next).map(n=>(t.inline==null?t.inline=n.isInline:t.inline!=n.isInline&&t.err("Mixing inline and block content"),{type:"name",value:n}));return t.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function vz(t){let e=[[]];return i(s(t,0),n()),e;function n(){return e.push([])-1}function r(o,a,c){let f={term:c,to:a};return e[o].push(f),f}function i(o,a){o.forEach(c=>c.to=a)}function s(o,a){if(o.type=="choice")return o.exprs.reduce((c,f)=>c.concat(s(f,a)),[]);if(o.type=="seq")for(let c=0;;c++){let f=s(o.exprs[c],a);if(c==o.exprs.length-1)return f;i(f,a=n())}else if(o.type=="star"){let c=n();return r(a,c),i(s(o.expr,c),c),[r(c)]}else if(o.type=="plus"){let c=n();return i(s(o.expr,a),c),i(s(o.expr,c),c),[r(c)]}else{if(o.type=="opt")return[r(a)].concat(s(o.expr,a));if(o.type=="range"){let c=a;for(let f=0;f<o.min;f++){let d=n();i(s(o.expr,c),d),c=d}if(o.max==-1)i(s(o.expr,c),c);else for(let f=o.min;f<o.max;f++){let d=n();r(c,d),i(s(o.expr,c),d),c=d}return[r(c)]}else{if(o.type=="name")return[r(a,void 0,o.value)];throw new Error("Unknown expr type")}}}}function JE(t,e){return e-t}function kb(t,e){let n=[];return r(e),n.sort(JE);function r(i){let s=t[i];if(s.length==1&&!s[0].term)return r(s[0].to);n.push(i);for(let o=0;o<s.length;o++){let{term:a,to:c}=s[o];!a&&n.indexOf(c)==-1&&r(c)}}}function xz(t){let e=Object.create(null);return n(kb(t,0));function n(r){let i=[];r.forEach(o=>{t[o].forEach(({term:a,to:c})=>{if(!a)return;let f;for(let d=0;d<i.length;d++)i[d][0]==a&&(f=i[d][1]);kb(t,c).forEach(d=>{f||i.push([a,f=[]]),f.indexOf(d)==-1&&f.push(d)})})});let s=e[r.join(",")]=new zo(r.indexOf(t.length-1)>-1);for(let o=0;o<i.length;o++){let a=i[o][1].sort(JE);s.next.push({type:i[o][0],next:e[a.join(",")]||n(a)})}return s}}function wz(t,e){for(let n=0,r=[t];n<r.length;n++){let i=r[n],s=!i.validEnd,o=[];for(let a=0;a<i.next.length;a++){let{type:c,next:f}=i.next[a];o.push(c.name),s&&!(c.isText||c.hasRequiredAttrs())&&(s=!1),r.indexOf(f)==-1&&r.push(f)}s&&e.err("Only non-generatable nodes ("+o.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function YE(t){let e=Object.create(null);for(let n in t){let r=t[n];if(!r.hasDefault)return null;e[n]=r.default}return e}function QE(t,e){let n=Object.create(null);for(let r in t){let i=e&&e[r];if(i===void 0){let s=t[r];if(s.hasDefault)i=s.default;else throw new RangeError("No value supplied for attribute "+r)}n[r]=i}return n}function ZE(t,e,n,r){for(let i in e)if(!(i in t))throw new RangeError(`Unsupported attribute ${i} for ${n} of type ${i}`);for(let i in t){let s=t[i];s.validate&&s.validate(e[i])}}function e2(t,e){let n=Object.create(null);if(e)for(let r in e)n[r]=new Sz(t,r,e[r]);return n}let Cb=class t2{constructor(e,n,r){this.name=e,this.schema=n,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=e2(e,r.attrs),this.defaultAttrs=YE(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==zo.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(e){return this.groups.indexOf(e)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:QE(this.attrs,e)}create(e=null,n,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new li(this,this.computeAttrs(e),X.from(n),Ge.setFrom(r))}createChecked(e=null,n,r){return n=X.from(n),this.checkContent(n),new li(this,this.computeAttrs(e),n,Ge.setFrom(r))}createAndFill(e=null,n,r){if(e=this.computeAttrs(e),n=X.from(n),n.size){let o=this.contentMatch.fillBefore(n);if(!o)return null;n=o.append(n)}let i=this.contentMatch.matchFragment(n),s=i&&i.fillBefore(X.empty,!0);return s?new li(this,e,n.append(s),Ge.setFrom(r)):null}validContent(e){let n=this.contentMatch.matchFragment(e);if(!n||!n.validEnd)return!1;for(let r=0;r<e.childCount;r++)if(!this.allowsMarks(e.child(r).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){ZE(this.attrs,e,"node",this.name)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let n=0;n<e.length;n++)if(!this.allowsMarkType(e[n].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let n;for(let r=0;r<e.length;r++)this.allowsMarkType(e[r].type)?n&&n.push(e[r]):n||(n=e.slice(0,r));return n?n.length?n:Ge.none:e}static compile(e,n){let r=Object.create(null);e.forEach((s,o)=>r[s]=new t2(s,n,o));let i=n.spec.topNode||"doc";if(!r[i])throw new RangeError("Schema is missing its top node type ('"+i+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let s in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}};function bz(t,e,n){let r=n.split("|");return i=>{let s=i===null?"null":typeof i;if(r.indexOf(s)<0)throw new RangeError(`Expected value of type ${r} for attribute ${e} on type ${t}, got ${s}`)}}class Sz{constructor(e,n,r){this.hasDefault=Object.prototype.hasOwnProperty.call(r,"default"),this.default=r.default,this.validate=typeof r.validate=="string"?bz(e,n,r.validate):r.validate}get isRequired(){return!this.hasDefault}}class Mh{constructor(e,n,r,i){this.name=e,this.rank=n,this.schema=r,this.spec=i,this.attrs=e2(e,i.attrs),this.excluded=null;let s=YE(this.attrs);this.instance=s?new Ge(this,s):null}create(e=null){return!e&&this.instance?this.instance:new Ge(this,QE(this.attrs,e))}static compile(e,n){let r=Object.create(null),i=0;return e.forEach((s,o)=>r[s]=new Mh(s,i++,n,o)),r}removeFromSet(e){for(var n=0;n<e.length;n++)e[n].type==this&&(e=e.slice(0,n).concat(e.slice(n+1)),n--);return e}isInSet(e){for(let n=0;n<e.length;n++)if(e[n].type==this)return e[n]}checkAttrs(e){ZE(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}}class n2{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let n=this.spec={};for(let i in e)n[i]=e[i];n.nodes=Jt.from(e.nodes),n.marks=Jt.from(e.marks||{}),this.nodes=Cb.compile(this.spec.nodes,this),this.marks=Mh.compile(this.spec.marks,this);let r=Object.create(null);for(let i in this.nodes){if(i in this.marks)throw new RangeError(i+" can not be both a node and a mark");let s=this.nodes[i],o=s.spec.content||"",a=s.spec.marks;if(s.contentMatch=r[o]||(r[o]=zo.parse(o,this.nodes)),s.inlineContent=s.contentMatch.inlineContent,s.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!s.isInline||!s.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=s}s.markSet=a=="_"?null:a?Eb(this,a.split(" ")):a==""||!s.inlineContent?[]:null}for(let i in this.marks){let s=this.marks[i],o=s.spec.excludes;s.excluded=o==null?[s]:o==""?[]:Eb(this,o.split(" "))}this.nodeFromJSON=i=>li.fromJSON(this,i),this.markFromJSON=i=>Ge.fromJSON(this,i),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,n=null,r,i){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof Cb){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(n,r,i)}text(e,n){let r=this.nodes.text;return new xd(r,r.defaultAttrs,e,Ge.setFrom(n))}mark(e,n){return typeof e=="string"&&(e=this.marks[e]),e.create(n)}nodeType(e){let n=this.nodes[e];if(!n)throw new RangeError("Unknown node type: "+e);return n}}function Eb(t,e){let n=[];for(let r=0;r<e.length;r++){let i=e[r],s=t.marks[i],o=s;if(s)n.push(s);else for(let a in t.marks){let c=t.marks[a];(i=="_"||c.spec.group&&c.spec.group.split(" ").indexOf(i)>-1)&&n.push(o=c)}if(!o)throw new SyntaxError("Unknown mark type: '"+e[r]+"'")}return n}function kz(t){return t.tag!=null}function Cz(t){return t.style!=null}class Hs{constructor(e,n){this.schema=e,this.rules=n,this.tags=[],this.styles=[];let r=this.matchedStyles=[];n.forEach(i=>{if(kz(i))this.tags.push(i);else if(Cz(i)){let s=/[^=]*/.exec(i.style)[0];r.indexOf(s)<0&&r.push(s),this.styles.push(i)}}),this.normalizeLists=!this.tags.some(i=>{if(!/^(ul|ol)\b/.test(i.tag)||!i.node)return!1;let s=e.nodes[i.node];return s.contentMatch.matchType(s)})}parse(e,n={}){let r=new Nb(this,n,!1);return r.addAll(e,Ge.none,n.from,n.to),r.finish()}parseSlice(e,n={}){let r=new Nb(this,n,!0);return r.addAll(e,Ge.none,n.from,n.to),oe.maxOpen(r.finish())}matchTag(e,n,r){for(let i=r?this.tags.indexOf(r)+1:0;i<this.tags.length;i++){let s=this.tags[i];if(Nz(e,s.tag)&&(s.namespace===void 0||e.namespaceURI==s.namespace)&&(!s.context||n.matchesContext(s.context))){if(s.getAttrs){let o=s.getAttrs(e);if(o===!1)continue;s.attrs=o||void 0}return s}}}matchStyle(e,n,r,i){for(let s=i?this.styles.indexOf(i)+1:0;s<this.styles.length;s++){let o=this.styles[s],a=o.style;if(!(a.indexOf(e)!=0||o.context&&!r.matchesContext(o.context)||a.length>e.length&&(a.charCodeAt(e.length)!=61||a.slice(e.length+1)!=n))){if(o.getAttrs){let c=o.getAttrs(n);if(c===!1)continue;o.attrs=c||void 0}return o}}}static schemaRules(e){let n=[];function r(i){let s=i.priority==null?50:i.priority,o=0;for(;o<n.length;o++){let a=n[o];if((a.priority==null?50:a.priority)<s)break}n.splice(o,0,i)}for(let i in e.marks){let s=e.marks[i].spec.parseDOM;s&&s.forEach(o=>{r(o=Mb(o)),o.mark||o.ignore||o.clearMark||(o.mark=i)})}for(let i in e.nodes){let s=e.nodes[i].spec.parseDOM;s&&s.forEach(o=>{r(o=Mb(o)),o.node||o.ignore||o.mark||(o.node=i)})}return n}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new Hs(e,Hs.schemaRules(e)))}}const r2={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},Ez={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},i2={ol:!0,ul:!0},Pu=1,d0=2,su=4;function Tb(t,e,n){return e!=null?(e?Pu:0)|(e==="full"?d0:0):t&&t.whitespace=="pre"?Pu|d0:n&~su}class ff{constructor(e,n,r,i,s,o){this.type=e,this.attrs=n,this.marks=r,this.solid=i,this.options=o,this.content=[],this.activeMarks=Ge.none,this.match=s||(o&su?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let n=this.type.contentMatch.fillBefore(X.from(e));if(n)this.match=this.type.contentMatch.matchFragment(n);else{let r=this.type.contentMatch,i;return(i=r.findWrapping(e.type))?(this.match=r,i):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&Pu)){let r=this.content[this.content.length-1],i;if(r&&r.isText&&(i=/[ \t\r\n\u000c]+$/.exec(r.text))){let s=r;r.text.length==i[0].length?this.content.pop():this.content[this.content.length-1]=s.withText(s.text.slice(0,s.text.length-i[0].length))}}let n=X.from(this.content);return!e&&this.match&&(n=n.append(this.match.fillBefore(X.empty,!0))),this.type?this.type.create(this.attrs,n,this.marks):n}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!r2.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class Nb{constructor(e,n,r){this.parser=e,this.options=n,this.isOpen=r,this.open=0,this.localPreserveWS=!1;let i=n.topNode,s,o=Tb(null,n.preserveWhitespace,0)|(r?su:0);i?s=new ff(i.type,i.attrs,Ge.none,!0,n.topMatch||i.type.contentMatch,o):r?s=new ff(null,null,Ge.none,!0,null,o):s=new ff(e.schema.topNodeType,null,Ge.none,!0,null,o),this.nodes=[s],this.find=n.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e,n){e.nodeType==3?this.addTextNode(e,n):e.nodeType==1&&this.addElement(e,n)}addTextNode(e,n){let r=e.nodeValue,i=this.top,s=i.options&d0?"full":this.localPreserveWS||(i.options&Pu)>0,{schema:o}=this.parser;if(s==="full"||i.inlineContext(e)||/[^ \t\r\n\u000c]/.test(r)){if(s)if(s==="full")r=r.replace(/\r\n?/g,`
`);else if(o.linebreakReplacement&&/[\r\n]/.test(r)&&this.top.findWrapping(o.linebreakReplacement.create())){let a=r.split(/\r?\n|\r/);for(let c=0;c<a.length;c++)c&&this.insertNode(o.linebreakReplacement.create(),n,!0),a[c]&&this.insertNode(o.text(a[c]),n,!/\S/.test(a[c]));r=""}else r=r.replace(/\r?\n|\r/g," ");else if(r=r.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(r)&&this.open==this.nodes.length-1){let a=i.content[i.content.length-1],c=e.previousSibling;(!a||c&&c.nodeName=="BR"||a.isText&&/[ \t\r\n\u000c]$/.test(a.text))&&(r=r.slice(1))}r&&this.insertNode(o.text(r),n,!/\S/.test(r)),this.findInText(e)}else this.findInside(e)}addElement(e,n,r){let i=this.localPreserveWS,s=this.top;(e.tagName=="PRE"||/pre/.test(e.style&&e.style.whiteSpace))&&(this.localPreserveWS=!0);let o=e.nodeName.toLowerCase(),a;i2.hasOwnProperty(o)&&this.parser.normalizeLists&&Tz(e);let c=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(a=this.parser.matchTag(e,this,r));e:if(c?c.ignore:Ez.hasOwnProperty(o))this.findInside(e),this.ignoreFallback(e,n);else if(!c||c.skip||c.closeParent){c&&c.closeParent?this.open=Math.max(0,this.open-1):c&&c.skip.nodeType&&(e=c.skip);let f,d=this.needsBlock;if(r2.hasOwnProperty(o))s.content.length&&s.content[0].isInline&&this.open&&(this.open--,s=this.top),f=!0,s.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,n);break e}let p=c&&c.skip?n:this.readStyles(e,n);p&&this.addAll(e,p),f&&this.sync(s),this.needsBlock=d}else{let f=this.readStyles(e,n);f&&this.addElementByRule(e,c,f,c.consuming===!1?a:void 0)}this.localPreserveWS=i}leafFallback(e,n){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`),n)}ignoreFallback(e,n){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),n,!0)}readStyles(e,n){let r=e.style;if(r&&r.length)for(let i=0;i<this.parser.matchedStyles.length;i++){let s=this.parser.matchedStyles[i],o=r.getPropertyValue(s);if(o)for(let a=void 0;;){let c=this.parser.matchStyle(s,o,this,a);if(!c)break;if(c.ignore)return null;if(c.clearMark?n=n.filter(f=>!c.clearMark(f)):n=n.concat(this.parser.schema.marks[c.mark].create(c.attrs)),c.consuming===!1)a=c;else break}}return n}addElementByRule(e,n,r,i){let s,o;if(n.node)if(o=this.parser.schema.nodes[n.node],o.isLeaf)this.insertNode(o.create(n.attrs),r,e.nodeName=="BR")||this.leafFallback(e,r);else{let c=this.enter(o,n.attrs||null,r,n.preserveWhitespace);c&&(s=!0,r=c)}else{let c=this.parser.schema.marks[n.mark];r=r.concat(c.create(n.attrs))}let a=this.top;if(o&&o.isLeaf)this.findInside(e);else if(i)this.addElement(e,r,i);else if(n.getContent)this.findInside(e),n.getContent(e,this.parser.schema).forEach(c=>this.insertNode(c,r,!1));else{let c=e;typeof n.contentElement=="string"?c=e.querySelector(n.contentElement):typeof n.contentElement=="function"?c=n.contentElement(e):n.contentElement&&(c=n.contentElement),this.findAround(e,c,!0),this.addAll(c,r),this.findAround(e,c,!1)}s&&this.sync(a)&&this.open--}addAll(e,n,r,i){let s=r||0;for(let o=r?e.childNodes[r]:e.firstChild,a=i==null?null:e.childNodes[i];o!=a;o=o.nextSibling,++s)this.findAtPoint(e,s),this.addDOM(o,n);this.findAtPoint(e,s)}findPlace(e,n,r){let i,s;for(let o=this.open,a=0;o>=0;o--){let c=this.nodes[o],f=c.findWrapping(e);if(f&&(!i||i.length>f.length+a)&&(i=f,s=c,!f.length))break;if(c.solid){if(r)break;a+=2}}if(!i)return null;this.sync(s);for(let o=0;o<i.length;o++)n=this.enterInner(i[o],null,n,!1);return n}insertNode(e,n,r){if(e.isInline&&this.needsBlock&&!this.top.type){let s=this.textblockFromContext();s&&(n=this.enterInner(s,null,n))}let i=this.findPlace(e,n,r);if(i){this.closeExtra();let s=this.top;s.match&&(s.match=s.match.matchType(e.type));let o=Ge.none;for(let a of i.concat(e.marks))(s.type?s.type.allowsMarkType(a.type):_b(a.type,e.type))&&(o=a.addToSet(o));return s.content.push(e.mark(o)),!0}return!1}enter(e,n,r,i){let s=this.findPlace(e.create(n),r,!1);return s&&(s=this.enterInner(e,n,r,!0,i)),s}enterInner(e,n,r,i=!1,s){this.closeExtra();let o=this.top;o.match=o.match&&o.match.matchType(e);let a=Tb(e,s,o.options);o.options&su&&o.content.length==0&&(a|=su);let c=Ge.none;return r=r.filter(f=>(o.type?o.type.allowsMarkType(f.type):_b(f.type,e))?(c=f.addToSet(c),!1):!0),this.nodes.push(new ff(e,n,c,i,null,a)),this.open++,r}closeExtra(e=!1){let n=this.nodes.length-1;if(n>this.open){for(;n>this.open;n--)this.nodes[n-1].content.push(this.nodes[n].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(e){for(let n=this.open;n>=0;n--){if(this.nodes[n]==e)return this.open=n,!0;this.localPreserveWS&&(this.nodes[n].options|=Pu)}return!1}get currentPos(){this.closeExtra();let e=0;for(let n=this.open;n>=0;n--){let r=this.nodes[n].content;for(let i=r.length-1;i>=0;i--)e+=r[i].nodeSize;n&&e++}return e}findAtPoint(e,n){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&this.find[r].offset==n&&(this.find[r].pos=this.currentPos)}findInside(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].pos==null&&e.nodeType==1&&e.contains(this.find[n].node)&&(this.find[n].pos=this.currentPos)}findAround(e,n,r){if(e!=n&&this.find)for(let i=0;i<this.find.length;i++)this.find[i].pos==null&&e.nodeType==1&&e.contains(this.find[i].node)&&n.compareDocumentPosition(this.find[i].node)&(r?2:4)&&(this.find[i].pos=this.currentPos)}findInText(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==e&&(this.find[n].pos=this.currentPos-(e.nodeValue.length-this.find[n].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let n=e.split("/"),r=this.options.context,i=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),s=-(r?r.depth+1:0)+(i?0:1),o=(a,c)=>{for(;a>=0;a--){let f=n[a];if(f==""){if(a==n.length-1||a==0)continue;for(;c>=s;c--)if(o(a-1,c))return!0;return!1}else{let d=c>0||c==0&&i?this.nodes[c].type:r&&c>=s?r.node(c-s).type:null;if(!d||d.name!=f&&!d.isInGroup(f))return!1;c--}}return!0};return o(n.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let n=e.depth;n>=0;n--){let r=e.node(n).contentMatchAt(e.indexAfter(n)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let n in this.parser.schema.nodes){let r=this.parser.schema.nodes[n];if(r.isTextblock&&r.defaultAttrs)return r}}}function Tz(t){for(let e=t.firstChild,n=null;e;e=e.nextSibling){let r=e.nodeType==1?e.nodeName.toLowerCase():null;r&&i2.hasOwnProperty(r)&&n?(n.appendChild(e),e=n):r=="li"?n=e:r&&(n=null)}}function Nz(t,e){return(t.matches||t.msMatchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector).call(t,e)}function Mb(t){let e={};for(let n in t)e[n]=t[n];return e}function _b(t,e){let n=e.schema.nodes;for(let r in n){let i=n[r];if(!i.allowsMarkType(t))continue;let s=[],o=a=>{s.push(a);for(let c=0;c<a.edgeCount;c++){let{type:f,next:d}=a.edge(c);if(f==e||s.indexOf(d)<0&&o(d))return!0}};if(o(i.contentMatch))return!0}}class Ko{constructor(e,n){this.nodes=e,this.marks=n}serializeFragment(e,n={},r){r||(r=$m(n).createDocumentFragment());let i=r,s=[];return e.forEach(o=>{if(s.length||o.marks.length){let a=0,c=0;for(;a<s.length&&c<o.marks.length;){let f=o.marks[c];if(!this.marks[f.type.name]){c++;continue}if(!f.eq(s[a][0])||f.type.spec.spanning===!1)break;a++,c++}for(;a<s.length;)i=s.pop()[1];for(;c<o.marks.length;){let f=o.marks[c++],d=this.serializeMark(f,o.isInline,n);d&&(s.push([f,i]),i.appendChild(d.dom),i=d.contentDOM||d.dom)}}i.appendChild(this.serializeNodeInner(o,n))}),r}serializeNodeInner(e,n){let{dom:r,contentDOM:i}=Lf($m(n),this.nodes[e.type.name](e),null,e.attrs);if(i){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,n,i)}return r}serializeNode(e,n={}){let r=this.serializeNodeInner(e,n);for(let i=e.marks.length-1;i>=0;i--){let s=this.serializeMark(e.marks[i],e.isInline,n);s&&((s.contentDOM||s.dom).appendChild(r),r=s.dom)}return r}serializeMark(e,n,r={}){let i=this.marks[e.type.name];return i&&Lf($m(r),i(e,n),null,e.attrs)}static renderSpec(e,n,r=null,i){return Lf(e,n,r,i)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new Ko(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let n=Ob(e.nodes);return n.text||(n.text=r=>r.text),n}static marksFromSchema(e){return Ob(e.marks)}}function Ob(t){let e={};for(let n in t){let r=t[n].spec.toDOM;r&&(e[n]=r)}return e}function $m(t){return t.document||window.document}const Ab=new WeakMap;function Mz(t){let e=Ab.get(t);return e===void 0&&Ab.set(t,e=_z(t)),e}function _z(t){let e=null;function n(r){if(r&&typeof r=="object")if(Array.isArray(r))if(typeof r[0]=="string")e||(e=[]),e.push(r);else for(let i=0;i<r.length;i++)n(r[i]);else for(let i in r)n(r[i])}return n(t),e}function Lf(t,e,n,r){if(typeof e=="string")return{dom:t.createTextNode(e)};if(e.nodeType!=null)return{dom:e};if(e.dom&&e.dom.nodeType!=null)return e;let i=e[0],s;if(typeof i!="string")throw new RangeError("Invalid array passed to renderSpec");if(r&&(s=Mz(r))&&s.indexOf(e)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let o=i.indexOf(" ");o>0&&(n=i.slice(0,o),i=i.slice(o+1));let a,c=n?t.createElementNS(n,i):t.createElement(i),f=e[1],d=1;if(f&&typeof f=="object"&&f.nodeType==null&&!Array.isArray(f)){d=2;for(let p in f)if(f[p]!=null){let m=p.indexOf(" ");m>0?c.setAttributeNS(p.slice(0,m),p.slice(m+1),f[p]):p=="style"&&c.style?c.style.cssText=f[p]:c.setAttribute(p,f[p])}}for(let p=d;p<e.length;p++){let m=e[p];if(m===0){if(p<e.length-1||p>d)throw new RangeError("Content hole must be the only child of its parent node");return{dom:c,contentDOM:c}}else{let{dom:g,contentDOM:v}=Lf(t,m,n,r);if(c.appendChild(g),v){if(a)throw new RangeError("Multiple content holes");a=v}}}return{dom:c,contentDOM:a}}const s2=65535,o2=Math.pow(2,16);function Oz(t,e){return t+e*o2}function Pb(t){return t&s2}function Az(t){return(t-(t&s2))/o2}const l2=1,a2=2,jf=4,u2=8;class h0{constructor(e,n,r){this.pos=e,this.delInfo=n,this.recover=r}get deleted(){return(this.delInfo&u2)>0}get deletedBefore(){return(this.delInfo&(l2|jf))>0}get deletedAfter(){return(this.delInfo&(a2|jf))>0}get deletedAcross(){return(this.delInfo&jf)>0}}class cr{constructor(e,n=!1){if(this.ranges=e,this.inverted=n,!e.length&&cr.empty)return cr.empty}recover(e){let n=0,r=Pb(e);if(!this.inverted)for(let i=0;i<r;i++)n+=this.ranges[i*3+2]-this.ranges[i*3+1];return this.ranges[r*3]+n+Az(e)}mapResult(e,n=1){return this._map(e,n,!1)}map(e,n=1){return this._map(e,n,!0)}_map(e,n,r){let i=0,s=this.inverted?2:1,o=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let c=this.ranges[a]-(this.inverted?i:0);if(c>e)break;let f=this.ranges[a+s],d=this.ranges[a+o],p=c+f;if(e<=p){let m=f?e==c?-1:e==p?1:n:n,g=c+i+(m<0?0:d);if(r)return g;let v=e==(n<0?c:p)?null:Oz(a/3,e-c),S=e==c?a2:e==p?l2:jf;return(n<0?e!=c:e!=p)&&(S|=u2),new h0(g,S,v)}i+=d-f}return r?e+i:new h0(e+i,0,null)}touches(e,n){let r=0,i=Pb(n),s=this.inverted?2:1,o=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let c=this.ranges[a]-(this.inverted?r:0);if(c>e)break;let f=this.ranges[a+s],d=c+f;if(e<=d&&a==i*3)return!0;r+=this.ranges[a+o]-f}return!1}forEach(e){let n=this.inverted?2:1,r=this.inverted?1:2;for(let i=0,s=0;i<this.ranges.length;i+=3){let o=this.ranges[i],a=o-(this.inverted?s:0),c=o+(this.inverted?0:s),f=this.ranges[i+n],d=this.ranges[i+r];e(a,a+f,c,c+d),s+=d-f}}invert(){return new cr(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?cr.empty:new cr(e<0?[0,-e,0]:[0,0,e])}}cr.empty=new cr([]);class Ru{constructor(e,n,r=0,i=e?e.length:0){this.mirror=n,this.from=r,this.to=i,this._maps=e||[],this.ownData=!(e||n)}get maps(){return this._maps}slice(e=0,n=this.maps.length){return new Ru(this._maps,this.mirror,e,n)}appendMap(e,n){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(e),n!=null&&this.setMirror(this._maps.length-1,n)}appendMapping(e){for(let n=0,r=this._maps.length;n<e._maps.length;n++){let i=e.getMirror(n);this.appendMap(e._maps[n],i!=null&&i<n?r+i:void 0)}}getMirror(e){if(this.mirror){for(let n=0;n<this.mirror.length;n++)if(this.mirror[n]==e)return this.mirror[n+(n%2?-1:1)]}}setMirror(e,n){this.mirror||(this.mirror=[]),this.mirror.push(e,n)}appendMappingInverted(e){for(let n=e.maps.length-1,r=this._maps.length+e._maps.length;n>=0;n--){let i=e.getMirror(n);this.appendMap(e._maps[n].invert(),i!=null&&i>n?r-i-1:void 0)}}invert(){let e=new Ru;return e.appendMappingInverted(this),e}map(e,n=1){if(this.mirror)return this._map(e,n,!0);for(let r=this.from;r<this.to;r++)e=this._maps[r].map(e,n);return e}mapResult(e,n=1){return this._map(e,n,!1)}_map(e,n,r){let i=0;for(let s=this.from;s<this.to;s++){let o=this._maps[s],a=o.mapResult(e,n);if(a.recover!=null){let c=this.getMirror(s);if(c!=null&&c>s&&c<this.to){s=c,e=this._maps[c].recover(a.recover);continue}}i|=a.delInfo,e=a.pos}return r?e:new h0(e,i,null)}}const Hm=Object.create(null);class dn{getMap(){return cr.empty}merge(e){return null}static fromJSON(e,n){if(!n||!n.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=Hm[n.stepType];if(!r)throw new RangeError(`No step type ${n.stepType} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in Hm)throw new RangeError("Duplicate use of step JSON ID "+e);return Hm[e]=n,n.prototype.jsonID=e,n}}class _t{constructor(e,n){this.doc=e,this.failed=n}static ok(e){return new _t(e,null)}static fail(e){return new _t(null,e)}static fromReplace(e,n,r,i){try{return _t.ok(e.replace(n,r,i))}catch(s){if(s instanceof gd)return _t.fail(s.message);throw s}}}function $y(t,e,n){let r=[];for(let i=0;i<t.childCount;i++){let s=t.child(i);s.content.size&&(s=s.copy($y(s.content,e,s))),s.isInline&&(s=e(s,n,i)),r.push(s)}return X.fromArray(r)}class Os extends dn{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=e.resolve(this.from),i=r.node(r.sharedDepth(this.to)),s=new oe($y(n.content,(o,a)=>!o.isAtom||!a.type.allowsMarkType(this.mark.type)?o:o.mark(this.mark.addToSet(o.marks)),i),n.openStart,n.openEnd);return _t.fromReplace(e,this.from,this.to,s)}invert(){return new ii(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new Os(n.pos,r.pos,this.mark)}merge(e){return e instanceof Os&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new Os(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new Os(n.from,n.to,e.markFromJSON(n.mark))}}dn.jsonID("addMark",Os);class ii extends dn{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=new oe($y(n.content,i=>i.mark(this.mark.removeFromSet(i.marks)),e),n.openStart,n.openEnd);return _t.fromReplace(e,this.from,this.to,r)}invert(){return new Os(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new ii(n.pos,r.pos,this.mark)}merge(e){return e instanceof ii&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new ii(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new ii(n.from,n.to,e.markFromJSON(n.mark))}}dn.jsonID("removeMark",ii);class As extends dn{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return _t.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.addToSet(n.marks));return _t.fromReplace(e,this.pos,this.pos+1,new oe(X.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);if(n){let r=this.mark.addToSet(n.marks);if(r.length==n.marks.length){for(let i=0;i<n.marks.length;i++)if(!n.marks[i].isInSet(r))return new As(this.pos,n.marks[i]);return new As(this.pos,this.mark)}}return new Bo(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new As(n.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new As(n.pos,e.markFromJSON(n.mark))}}dn.jsonID("addNodeMark",As);class Bo extends dn{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return _t.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.removeFromSet(n.marks));return _t.fromReplace(e,this.pos,this.pos+1,new oe(X.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);return!n||!this.mark.isInSet(n.marks)?this:new As(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new Bo(n.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new Bo(n.pos,e.markFromJSON(n.mark))}}dn.jsonID("removeNodeMark",Bo);class Ft extends dn{constructor(e,n,r,i=!1){super(),this.from=e,this.to=n,this.slice=r,this.structure=i}apply(e){return this.structure&&p0(e,this.from,this.to)?_t.fail("Structure replace would overwrite content"):_t.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new cr([this.from,this.to-this.from,this.slice.size])}invert(e){return new Ft(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deletedAcross&&r.deletedAcross?null:new Ft(n.pos,Math.max(n.pos,r.pos),this.slice,this.structure)}merge(e){if(!(e instanceof Ft)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let n=this.slice.size+e.slice.size==0?oe.empty:new oe(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new Ft(this.from,this.to+(e.to-e.from),n,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let n=this.slice.size+e.slice.size==0?oe.empty:new oe(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new Ft(e.from,this.to,n,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new Ft(n.from,n.to,oe.fromJSON(e,n.slice),!!n.structure)}}dn.jsonID("replace",Ft);class Ut extends dn{constructor(e,n,r,i,s,o,a=!1){super(),this.from=e,this.to=n,this.gapFrom=r,this.gapTo=i,this.slice=s,this.insert=o,this.structure=a}apply(e){if(this.structure&&(p0(e,this.from,this.gapFrom)||p0(e,this.gapTo,this.to)))return _t.fail("Structure gap-replace would overwrite content");let n=e.slice(this.gapFrom,this.gapTo);if(n.openStart||n.openEnd)return _t.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,n.content);return r?_t.fromReplace(e,this.from,this.to,r):_t.fail("Content does not fit in gap")}getMap(){return new cr([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let n=this.gapTo-this.gapFrom;return new Ut(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),i=this.from==this.gapFrom?n.pos:e.map(this.gapFrom,-1),s=this.to==this.gapTo?r.pos:e.map(this.gapTo,1);return n.deletedAcross&&r.deletedAcross||i<n.pos||s>r.pos?null:new Ut(n.pos,r.pos,i,s,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number"||typeof n.gapFrom!="number"||typeof n.gapTo!="number"||typeof n.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new Ut(n.from,n.to,n.gapFrom,n.gapTo,oe.fromJSON(e,n.slice),n.insert,!!n.structure)}}dn.jsonID("replaceAround",Ut);function p0(t,e,n){let r=t.resolve(e),i=n-e,s=r.depth;for(;i>0&&s>0&&r.indexAfter(s)==r.node(s).childCount;)s--,i--;if(i>0){let o=r.node(s).maybeChild(r.indexAfter(s));for(;i>0;){if(!o||o.isLeaf)return!0;o=o.firstChild,i--}}return!1}function Pz(t,e,n,r){let i=[],s=[],o,a;t.doc.nodesBetween(e,n,(c,f,d)=>{if(!c.isInline)return;let p=c.marks;if(!r.isInSet(p)&&d.type.allowsMarkType(r.type)){let m=Math.max(f,e),g=Math.min(f+c.nodeSize,n),v=r.addToSet(p);for(let S=0;S<p.length;S++)p[S].isInSet(v)||(o&&o.to==m&&o.mark.eq(p[S])?o.to=g:i.push(o=new ii(m,g,p[S])));a&&a.to==m?a.to=g:s.push(a=new Os(m,g,r))}}),i.forEach(c=>t.step(c)),s.forEach(c=>t.step(c))}function Rz(t,e,n,r){let i=[],s=0;t.doc.nodesBetween(e,n,(o,a)=>{if(!o.isInline)return;s++;let c=null;if(r instanceof Mh){let f=o.marks,d;for(;d=r.isInSet(f);)(c||(c=[])).push(d),f=d.removeFromSet(f)}else r?r.isInSet(o.marks)&&(c=[r]):c=o.marks;if(c&&c.length){let f=Math.min(a+o.nodeSize,n);for(let d=0;d<c.length;d++){let p=c[d],m;for(let g=0;g<i.length;g++){let v=i[g];v.step==s-1&&p.eq(i[g].style)&&(m=v)}m?(m.to=f,m.step=s):i.push({style:p,from:Math.max(a,e),to:f,step:s})}}}),i.forEach(o=>t.step(new ii(o.from,o.to,o.style)))}function Hy(t,e,n,r=n.contentMatch,i=!0){let s=t.doc.nodeAt(e),o=[],a=e+1;for(let c=0;c<s.childCount;c++){let f=s.child(c),d=a+f.nodeSize,p=r.matchType(f.type);if(!p)o.push(new Ft(a,d,oe.empty));else{r=p;for(let m=0;m<f.marks.length;m++)n.allowsMarkType(f.marks[m].type)||t.step(new ii(a,d,f.marks[m]));if(i&&f.isText&&n.whitespace!="pre"){let m,g=/\r?\n|\r/g,v;for(;m=g.exec(f.text);)v||(v=new oe(X.from(n.schema.text(" ",n.allowedMarks(f.marks))),0,0)),o.push(new Ft(a+m.index,a+m.index+m[0].length,v))}}a=d}if(!r.validEnd){let c=r.fillBefore(X.empty,!0);t.replace(a,a,new oe(c,0,0))}for(let c=o.length-1;c>=0;c--)t.step(o[c])}function Dz(t,e,n){return(e==0||t.canReplace(e,t.childCount))&&(n==t.childCount||t.canReplace(0,n))}function la(t){let n=t.parent.content.cutByIndex(t.startIndex,t.endIndex);for(let r=t.depth,i=0,s=0;;--r){let o=t.$from.node(r),a=t.$from.index(r)+i,c=t.$to.indexAfter(r)-s;if(r<t.depth&&o.canReplace(a,c,n))return r;if(r==0||o.type.spec.isolating||!Dz(o,a,c))break;a&&(i=1),c<o.childCount&&(s=1)}return null}function Iz(t,e,n){let{$from:r,$to:i,depth:s}=e,o=r.before(s+1),a=i.after(s+1),c=o,f=a,d=X.empty,p=0;for(let v=s,S=!1;v>n;v--)S||r.index(v)>0?(S=!0,d=X.from(r.node(v).copy(d)),p++):c--;let m=X.empty,g=0;for(let v=s,S=!1;v>n;v--)S||i.after(v+1)<i.end(v)?(S=!0,m=X.from(i.node(v).copy(m)),g++):f++;t.step(new Ut(c,f,o,a,new oe(d.append(m),p,g),d.size-p,!0))}function Uy(t,e,n=null,r=t){let i=Lz(t,e),s=i&&jz(r,e);return s?i.map(Rb).concat({type:e,attrs:n}).concat(s.map(Rb)):null}function Rb(t){return{type:t,attrs:null}}function Lz(t,e){let{parent:n,startIndex:r,endIndex:i}=t,s=n.contentMatchAt(r).findWrapping(e);if(!s)return null;let o=s.length?s[0]:e;return n.canReplaceWith(r,i,o)?s:null}function jz(t,e){let{parent:n,startIndex:r,endIndex:i}=t,s=n.child(r),o=e.contentMatch.findWrapping(s.type);if(!o)return null;let c=(o.length?o[o.length-1]:e).contentMatch;for(let f=r;c&&f<i;f++)c=c.matchType(n.child(f).type);return!c||!c.validEnd?null:o}function zz(t,e,n){let r=X.empty;for(let o=n.length-1;o>=0;o--){if(r.size){let a=n[o].type.contentMatch.matchFragment(r);if(!a||!a.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=X.from(n[o].type.create(n[o].attrs,r))}let i=e.start,s=e.end;t.step(new Ut(i,s,i,s,new oe(r,0,0),n.length,!0))}function Bz(t,e,n,r,i){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let s=t.steps.length;t.doc.nodesBetween(e,n,(o,a)=>{let c=typeof i=="function"?i(o):i;if(o.isTextblock&&!o.hasMarkup(r,c)&&Fz(t.doc,t.mapping.slice(s).map(a),r)){let f=null;if(r.schema.linebreakReplacement){let g=r.whitespace=="pre",v=!!r.contentMatch.matchType(r.schema.linebreakReplacement);g&&!v?f=!1:!g&&v&&(f=!0)}f===!1&&f2(t,o,a,s),Hy(t,t.mapping.slice(s).map(a,1),r,void 0,f===null);let d=t.mapping.slice(s),p=d.map(a,1),m=d.map(a+o.nodeSize,1);return t.step(new Ut(p,m,p+1,m-1,new oe(X.from(r.create(c,null,o.marks)),0,0),1,!0)),f===!0&&c2(t,o,a,s),!1}})}function c2(t,e,n,r){e.forEach((i,s)=>{if(i.isText){let o,a=/\r?\n|\r/g;for(;o=a.exec(i.text);){let c=t.mapping.slice(r).map(n+1+s+o.index);t.replaceWith(c,c+1,e.type.schema.linebreakReplacement.create())}}})}function f2(t,e,n,r){e.forEach((i,s)=>{if(i.type==i.type.schema.linebreakReplacement){let o=t.mapping.slice(r).map(n+1+s);t.replaceWith(o,o+1,e.type.schema.text(`
`))}})}function Fz(t,e,n){let r=t.resolve(e),i=r.index();return r.parent.canReplaceWith(i,i+1,n)}function $z(t,e,n,r,i){let s=t.doc.nodeAt(e);if(!s)throw new RangeError("No node at given position");n||(n=s.type);let o=n.create(r,null,i||s.marks);if(s.isLeaf)return t.replaceWith(e,e+s.nodeSize,o);if(!n.validContent(s.content))throw new RangeError("Invalid content for node type "+n.name);t.step(new Ut(e,e+s.nodeSize,e+1,e+s.nodeSize-1,new oe(X.from(o),0,0),1,!0))}function Gi(t,e,n=1,r){let i=t.resolve(e),s=i.depth-n,o=r&&r[r.length-1]||i.parent;if(s<0||i.parent.type.spec.isolating||!i.parent.canReplace(i.index(),i.parent.childCount)||!o.type.validContent(i.parent.content.cutByIndex(i.index(),i.parent.childCount)))return!1;for(let f=i.depth-1,d=n-2;f>s;f--,d--){let p=i.node(f),m=i.index(f);if(p.type.spec.isolating)return!1;let g=p.content.cutByIndex(m,p.childCount),v=r&&r[d+1];v&&(g=g.replaceChild(0,v.type.create(v.attrs)));let S=r&&r[d]||p;if(!p.canReplace(m+1,p.childCount)||!S.type.validContent(g))return!1}let a=i.indexAfter(s),c=r&&r[0];return i.node(s).canReplaceWith(a,a,c?c.type:i.node(s+1).type)}function Hz(t,e,n=1,r){let i=t.doc.resolve(e),s=X.empty,o=X.empty;for(let a=i.depth,c=i.depth-n,f=n-1;a>c;a--,f--){s=X.from(i.node(a).copy(s));let d=r&&r[f];o=X.from(d?d.type.create(d.attrs,o):i.node(a).copy(o))}t.step(new Ft(e,e,new oe(s.append(o),n,n),!0))}function eo(t,e){let n=t.resolve(e),r=n.index();return d2(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)}function Uz(t,e){e.content.size||t.type.compatibleContent(e.type);let n=t.contentMatchAt(t.childCount),{linebreakReplacement:r}=t.type.schema;for(let i=0;i<e.childCount;i++){let s=e.child(i),o=s.type==r?t.type.schema.nodes.text:s.type;if(n=n.matchType(o),!n||!t.type.allowsMarks(s.marks))return!1}return n.validEnd}function d2(t,e){return!!(t&&e&&!t.isLeaf&&Uz(t,e))}function _h(t,e,n=-1){let r=t.resolve(e);for(let i=r.depth;;i--){let s,o,a=r.index(i);if(i==r.depth?(s=r.nodeBefore,o=r.nodeAfter):n>0?(s=r.node(i+1),a++,o=r.node(i).maybeChild(a)):(s=r.node(i).maybeChild(a-1),o=r.node(i+1)),s&&!s.isTextblock&&d2(s,o)&&r.node(i).canReplace(a,a+1))return e;if(i==0)break;e=n<0?r.before(i):r.after(i)}}function Vz(t,e,n){let r=null,{linebreakReplacement:i}=t.doc.type.schema,s=t.doc.resolve(e-n),o=s.node().type;if(i&&o.inlineContent){let d=o.whitespace=="pre",p=!!o.contentMatch.matchType(i);d&&!p?r=!1:!d&&p&&(r=!0)}let a=t.steps.length;if(r===!1){let d=t.doc.resolve(e+n);f2(t,d.node(),d.before(),a)}o.inlineContent&&Hy(t,e+n-1,o,s.node().contentMatchAt(s.index()),r==null);let c=t.mapping.slice(a),f=c.map(e-n);if(t.step(new Ft(f,c.map(e+n,-1),oe.empty,!0)),r===!0){let d=t.doc.resolve(f);c2(t,d.node(),d.before(),t.steps.length)}return t}function Wz(t,e,n){let r=t.resolve(e);if(r.parent.canReplaceWith(r.index(),r.index(),n))return e;if(r.parentOffset==0)for(let i=r.depth-1;i>=0;i--){let s=r.index(i);if(r.node(i).canReplaceWith(s,s,n))return r.before(i+1);if(s>0)return null}if(r.parentOffset==r.parent.content.size)for(let i=r.depth-1;i>=0;i--){let s=r.indexAfter(i);if(r.node(i).canReplaceWith(s,s,n))return r.after(i+1);if(s<r.node(i).childCount)return null}return null}function h2(t,e,n){let r=t.resolve(e);if(!n.content.size)return e;let i=n.content;for(let s=0;s<n.openStart;s++)i=i.firstChild.content;for(let s=1;s<=(n.openStart==0&&n.size?2:1);s++)for(let o=r.depth;o>=0;o--){let a=o==r.depth?0:r.pos<=(r.start(o+1)+r.end(o+1))/2?-1:1,c=r.index(o)+(a>0?1:0),f=r.node(o),d=!1;if(s==1)d=f.canReplace(c,c,i);else{let p=f.contentMatchAt(c).findWrapping(i.firstChild.type);d=p&&f.canReplaceWith(c,c,p[0])}if(d)return a==0?r.pos:a<0?r.before(o+1):r.after(o+1)}return null}function Oh(t,e,n=e,r=oe.empty){if(e==n&&!r.size)return null;let i=t.resolve(e),s=t.resolve(n);return p2(i,s,r)?new Ft(e,n,r):new Kz(i,s,r).fit()}function p2(t,e,n){return!n.openStart&&!n.openEnd&&t.start()==e.start()&&t.parent.canReplace(t.index(),e.index(),n.content)}class Kz{constructor(e,n,r){this.$from=e,this.$to=n,this.unplaced=r,this.frontier=[],this.placed=X.empty;for(let i=0;i<=e.depth;i++){let s=e.node(i);this.frontier.push({type:s.type,match:s.contentMatchAt(e.indexAfter(i))})}for(let i=e.depth;i>0;i--)this.placed=X.from(e.node(i).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let f=this.findFittable();f?this.placeNodes(f):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,r=this.$from,i=this.close(e<0?this.$to:r.doc.resolve(e));if(!i)return null;let s=this.placed,o=r.depth,a=i.depth;for(;o&&a&&s.childCount==1;)s=s.firstChild.content,o--,a--;let c=new oe(s,o,a);return e>-1?new Ut(r.pos,e,this.$to.pos,this.$to.end(),c,n):c.size||r.pos!=this.$to.pos?new Ft(r.pos,i.pos,c):null}findFittable(){let e=this.unplaced.openStart;for(let n=this.unplaced.content,r=0,i=this.unplaced.openEnd;r<e;r++){let s=n.firstChild;if(n.childCount>1&&(i=0),s.type.spec.isolating&&i<=r){e=r;break}n=s.content}for(let n=1;n<=2;n++)for(let r=n==1?e:this.unplaced.openStart;r>=0;r--){let i,s=null;r?(s=Um(this.unplaced.content,r-1).firstChild,i=s.content):i=this.unplaced.content;let o=i.firstChild;for(let a=this.depth;a>=0;a--){let{type:c,match:f}=this.frontier[a],d,p=null;if(n==1&&(o?f.matchType(o.type)||(p=f.fillBefore(X.from(o),!1)):s&&c.compatibleContent(s.type)))return{sliceDepth:r,frontierDepth:a,parent:s,inject:p};if(n==2&&o&&(d=f.findWrapping(o.type)))return{sliceDepth:r,frontierDepth:a,parent:s,wrap:d};if(s&&f.matchType(s.type))break}}}openMore(){let{content:e,openStart:n,openEnd:r}=this.unplaced,i=Um(e,n);return!i.childCount||i.firstChild.isLeaf?!1:(this.unplaced=new oe(e,n+1,Math.max(r,i.size+n>=e.size-r?n+1:0)),!0)}dropNode(){let{content:e,openStart:n,openEnd:r}=this.unplaced,i=Um(e,n);if(i.childCount<=1&&n>0){let s=e.size-n<=n+i.size;this.unplaced=new oe(Wa(e,n-1,1),n-1,s?n-1:r)}else this.unplaced=new oe(Wa(e,n,1),n,r)}placeNodes({sliceDepth:e,frontierDepth:n,parent:r,inject:i,wrap:s}){for(;this.depth>n;)this.closeFrontierNode();if(s)for(let S=0;S<s.length;S++)this.openFrontierNode(s[S]);let o=this.unplaced,a=r?r.content:o.content,c=o.openStart-e,f=0,d=[],{match:p,type:m}=this.frontier[n];if(i){for(let S=0;S<i.childCount;S++)d.push(i.child(S));p=p.matchFragment(i)}let g=a.size+e-(o.content.size-o.openEnd);for(;f<a.childCount;){let S=a.child(f),C=p.matchType(S.type);if(!C)break;f++,(f>1||c==0||S.content.size)&&(p=C,d.push(m2(S.mark(m.allowedMarks(S.marks)),f==1?c:0,f==a.childCount?g:-1)))}let v=f==a.childCount;v||(g=-1),this.placed=Ka(this.placed,n,X.from(d)),this.frontier[n].match=p,v&&g<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let S=0,C=a;S<g;S++){let x=C.lastChild;this.frontier.push({type:x.type,match:x.contentMatchAt(x.childCount)}),C=x.content}this.unplaced=v?e==0?oe.empty:new oe(Wa(o.content,e-1,1),e-1,g<0?o.openEnd:e-1):new oe(Wa(o.content,e,f),o.openStart,o.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],n;if(!e.type.isTextblock||!Vm(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(n=this.findCloseLevel(this.$to))&&n.depth==this.depth)return-1;let{depth:r}=this.$to,i=this.$to.after(r);for(;r>1&&i==this.$to.end(--r);)++i;return i}findCloseLevel(e){e:for(let n=Math.min(this.depth,e.depth);n>=0;n--){let{match:r,type:i}=this.frontier[n],s=n<e.depth&&e.end(n+1)==e.pos+(e.depth-(n+1)),o=Vm(e,n,i,r,s);if(o){for(let a=n-1;a>=0;a--){let{match:c,type:f}=this.frontier[a],d=Vm(e,a,f,c,!0);if(!d||d.childCount)continue e}return{depth:n,fit:o,move:s?e.doc.resolve(e.after(n+1)):e}}}}close(e){let n=this.findCloseLevel(e);if(!n)return null;for(;this.depth>n.depth;)this.closeFrontierNode();n.fit.childCount&&(this.placed=Ka(this.placed,n.depth,n.fit)),e=n.move;for(let r=n.depth+1;r<=e.depth;r++){let i=e.node(r),s=i.type.contentMatch.fillBefore(i.content,!0,e.index(r));this.openFrontierNode(i.type,i.attrs,s)}return e}openFrontierNode(e,n=null,r){let i=this.frontier[this.depth];i.match=i.match.matchType(e),this.placed=Ka(this.placed,this.depth,X.from(e.create(n,r))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let n=this.frontier.pop().match.fillBefore(X.empty,!0);n.childCount&&(this.placed=Ka(this.placed,this.frontier.length,n))}}function Wa(t,e,n){return e==0?t.cutByIndex(n,t.childCount):t.replaceChild(0,t.firstChild.copy(Wa(t.firstChild.content,e-1,n)))}function Ka(t,e,n){return e==0?t.append(n):t.replaceChild(t.childCount-1,t.lastChild.copy(Ka(t.lastChild.content,e-1,n)))}function Um(t,e){for(let n=0;n<e;n++)t=t.firstChild.content;return t}function m2(t,e,n){if(e<=0)return t;let r=t.content;return e>1&&(r=r.replaceChild(0,m2(r.firstChild,e-1,r.childCount==1?n-1:0))),e>0&&(r=t.type.contentMatch.fillBefore(r).append(r),n<=0&&(r=r.append(t.type.contentMatch.matchFragment(r).fillBefore(X.empty,!0)))),t.copy(r)}function Vm(t,e,n,r,i){let s=t.node(e),o=i?t.indexAfter(e):t.index(e);if(o==s.childCount&&!n.compatibleContent(s.type))return null;let a=r.fillBefore(s.content,!0,o);return a&&!qz(n,s.content,o)?a:null}function qz(t,e,n){for(let r=n;r<e.childCount;r++)if(!t.allowsMarks(e.child(r).marks))return!0;return!1}function Gz(t){return t.spec.defining||t.spec.definingForContent}function Xz(t,e,n,r){if(!r.size)return t.deleteRange(e,n);let i=t.doc.resolve(e),s=t.doc.resolve(n);if(p2(i,s,r))return t.step(new Ft(e,n,r));let o=y2(i,s);o[o.length-1]==0&&o.pop();let a=-(i.depth+1);o.unshift(a);for(let m=i.depth,g=i.pos-1;m>0;m--,g--){let v=i.node(m).type.spec;if(v.defining||v.definingAsContext||v.isolating)break;o.indexOf(m)>-1?a=m:i.before(m)==g&&o.splice(1,0,-m)}let c=o.indexOf(a),f=[],d=r.openStart;for(let m=r.content,g=0;;g++){let v=m.firstChild;if(f.push(v),g==r.openStart)break;m=v.content}for(let m=d-1;m>=0;m--){let g=f[m],v=Gz(g.type);if(v&&!g.sameMarkup(i.node(Math.abs(a)-1)))d=m;else if(v||!g.type.isTextblock)break}for(let m=r.openStart;m>=0;m--){let g=(m+d+1)%(r.openStart+1),v=f[g];if(v)for(let S=0;S<o.length;S++){let C=o[(S+c)%o.length],x=!0;C<0&&(x=!1,C=-C);let w=i.node(C-1),E=i.index(C-1);if(w.canReplaceWith(E,E,v.type,v.marks))return t.replace(i.before(C),x?s.after(C):n,new oe(g2(r.content,0,r.openStart,g),g,r.openEnd))}}let p=t.steps.length;for(let m=o.length-1;m>=0&&(t.replace(e,n,r),!(t.steps.length>p));m--){let g=o[m];g<0||(e=i.before(g),n=s.after(g))}}function g2(t,e,n,r,i){if(e<n){let s=t.firstChild;t=t.replaceChild(0,s.copy(g2(s.content,e+1,n,r,s)))}if(e>r){let s=i.contentMatchAt(0),o=s.fillBefore(t).append(t);t=o.append(s.matchFragment(o).fillBefore(X.empty,!0))}return t}function Jz(t,e,n,r){if(!r.isInline&&e==n&&t.doc.resolve(e).parent.content.size){let i=Wz(t.doc,e,r.type);i!=null&&(e=n=i)}t.replaceRange(e,n,new oe(X.from(r),0,0))}function Yz(t,e,n){let r=t.doc.resolve(e),i=t.doc.resolve(n),s=y2(r,i);for(let o=0;o<s.length;o++){let a=s[o],c=o==s.length-1;if(c&&a==0||r.node(a).type.contentMatch.validEnd)return t.delete(r.start(a),i.end(a));if(a>0&&(c||r.node(a-1).canReplace(r.index(a-1),i.indexAfter(a-1))))return t.delete(r.before(a),i.after(a))}for(let o=1;o<=r.depth&&o<=i.depth;o++)if(e-r.start(o)==r.depth-o&&n>r.end(o)&&i.end(o)-n!=i.depth-o&&r.start(o-1)==i.start(o-1)&&r.node(o-1).canReplace(r.index(o-1),i.index(o-1)))return t.delete(r.before(o),n);t.delete(e,n)}function y2(t,e){let n=[],r=Math.min(t.depth,e.depth);for(let i=r;i>=0;i--){let s=t.start(i);if(s<t.pos-(t.depth-i)||e.end(i)>e.pos+(e.depth-i)||t.node(i).type.spec.isolating||e.node(i).type.spec.isolating)break;(s==e.start(i)||i==t.depth&&i==e.depth&&t.parent.inlineContent&&e.parent.inlineContent&&i&&e.start(i-1)==s-1)&&n.push(i)}return n}class $l extends dn{constructor(e,n,r){super(),this.pos=e,this.attr=n,this.value=r}apply(e){let n=e.nodeAt(this.pos);if(!n)return _t.fail("No node at attribute step's position");let r=Object.create(null);for(let s in n.attrs)r[s]=n.attrs[s];r[this.attr]=this.value;let i=n.type.create(r,null,n.marks);return _t.fromReplace(e,this.pos,this.pos+1,new oe(X.from(i),0,n.isLeaf?0:1))}getMap(){return cr.empty}invert(e){return new $l(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new $l(n.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.pos!="number"||typeof n.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new $l(n.pos,n.attr,n.value)}}dn.jsonID("attr",$l);class Du extends dn{constructor(e,n){super(),this.attr=e,this.value=n}apply(e){let n=Object.create(null);for(let i in e.attrs)n[i]=e.attrs[i];n[this.attr]=this.value;let r=e.type.create(n,e.content,e.marks);return _t.ok(r)}getMap(){return cr.empty}invert(e){return new Du(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new Du(n.attr,n.value)}}dn.jsonID("docAttr",Du);let Yl=class extends Error{};Yl=function t(e){let n=Error.call(this,e);return n.__proto__=t.prototype,n};Yl.prototype=Object.create(Error.prototype);Yl.prototype.constructor=Yl;Yl.prototype.name="TransformError";class v2{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new Ru}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let n=this.maybeStep(e);if(n.failed)throw new Yl(n.failed);return this}maybeStep(e){let n=e.apply(this.doc);return n.failed||this.addStep(e,n.doc),n}get docChanged(){return this.steps.length>0}addStep(e,n){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=n}replace(e,n=e,r=oe.empty){let i=Oh(this.doc,e,n,r);return i&&this.step(i),this}replaceWith(e,n,r){return this.replace(e,n,new oe(X.from(r),0,0))}delete(e,n){return this.replace(e,n,oe.empty)}insert(e,n){return this.replaceWith(e,e,n)}replaceRange(e,n,r){return Xz(this,e,n,r),this}replaceRangeWith(e,n,r){return Jz(this,e,n,r),this}deleteRange(e,n){return Yz(this,e,n),this}lift(e,n){return Iz(this,e,n),this}join(e,n=1){return Vz(this,e,n),this}wrap(e,n){return zz(this,e,n),this}setBlockType(e,n=e,r,i=null){return Bz(this,e,n,r,i),this}setNodeMarkup(e,n,r=null,i){return $z(this,e,n,r,i),this}setNodeAttribute(e,n,r){return this.step(new $l(e,n,r)),this}setDocAttribute(e,n){return this.step(new Du(e,n)),this}addNodeMark(e,n){return this.step(new As(e,n)),this}removeNodeMark(e,n){let r=this.doc.nodeAt(e);if(!r)throw new RangeError("No node at position "+e);if(n instanceof Ge)n.isInSet(r.marks)&&this.step(new Bo(e,n));else{let i=r.marks,s,o=[];for(;s=n.isInSet(i);)o.push(new Bo(e,s)),i=s.removeFromSet(i);for(let a=o.length-1;a>=0;a--)this.step(o[a])}return this}split(e,n=1,r){return Hz(this,e,n,r),this}addMark(e,n,r){return Pz(this,e,n,r),this}removeMark(e,n,r){return Rz(this,e,n,r),this}clearIncompatible(e,n,r){return Hy(this,e,n,r),this}}const Wm=Object.create(null);class Oe{constructor(e,n,r){this.$anchor=e,this.$head=n,this.ranges=r||[new Qz(e.min(n),e.max(n))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let n=0;n<e.length;n++)if(e[n].$from.pos!=e[n].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,n=oe.empty){let r=n.content.lastChild,i=null;for(let a=0;a<n.openEnd;a++)i=r,r=r.lastChild;let s=e.steps.length,o=this.ranges;for(let a=0;a<o.length;a++){let{$from:c,$to:f}=o[a],d=e.mapping.slice(s);e.replaceRange(d.map(c.pos),d.map(f.pos),a?oe.empty:n),a==0&&Lb(e,s,(r?r.isInline:i&&i.isTextblock)?-1:1)}}replaceWith(e,n){let r=e.steps.length,i=this.ranges;for(let s=0;s<i.length;s++){let{$from:o,$to:a}=i[s],c=e.mapping.slice(r),f=c.map(o.pos),d=c.map(a.pos);s?e.deleteRange(f,d):(e.replaceRangeWith(f,d,n),Lb(e,r,n.isInline?-1:1))}}static findFrom(e,n,r=!1){let i=e.parent.inlineContent?new ke(e):yl(e.node(0),e.parent,e.pos,e.index(),n,r);if(i)return i;for(let s=e.depth-1;s>=0;s--){let o=n<0?yl(e.node(0),e.node(s),e.before(s+1),e.index(s),n,r):yl(e.node(0),e.node(s),e.after(s+1),e.index(s)+1,n,r);if(o)return o}return null}static near(e,n=1){return this.findFrom(e,n)||this.findFrom(e,-n)||new pr(e.node(0))}static atStart(e){return yl(e,e,0,0,1)||new pr(e)}static atEnd(e){return yl(e,e,e.content.size,e.childCount,-1)||new pr(e)}static fromJSON(e,n){if(!n||!n.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=Wm[n.type];if(!r)throw new RangeError(`No selection type ${n.type} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in Wm)throw new RangeError("Duplicate use of selection JSON ID "+e);return Wm[e]=n,n.prototype.jsonID=e,n}getBookmark(){return ke.between(this.$anchor,this.$head).getBookmark()}}Oe.prototype.visible=!0;class Qz{constructor(e,n){this.$from=e,this.$to=n}}let Db=!1;function Ib(t){!Db&&!t.parent.inlineContent&&(Db=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+t.parent.type.name+")"))}class ke extends Oe{constructor(e,n=e){Ib(e),Ib(n),super(e,n)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,n){let r=e.resolve(n.map(this.head));if(!r.parent.inlineContent)return Oe.near(r);let i=e.resolve(n.map(this.anchor));return new ke(i.parent.inlineContent?i:r,r)}replace(e,n=oe.empty){if(super.replace(e,n),n==oe.empty){let r=this.$from.marksAcross(this.$to);r&&e.ensureMarks(r)}}eq(e){return e instanceof ke&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new Ah(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,n){if(typeof n.anchor!="number"||typeof n.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new ke(e.resolve(n.anchor),e.resolve(n.head))}static create(e,n,r=n){let i=e.resolve(n);return new this(i,r==n?i:e.resolve(r))}static between(e,n,r){let i=e.pos-n.pos;if((!r||i)&&(r=i>=0?1:-1),!n.parent.inlineContent){let s=Oe.findFrom(n,r,!0)||Oe.findFrom(n,-r,!0);if(s)n=s.$head;else return Oe.near(n,r)}return e.parent.inlineContent||(i==0?e=n:(e=(Oe.findFrom(e,-r,!0)||Oe.findFrom(e,r,!0)).$anchor,e.pos<n.pos!=i<0&&(e=n))),new ke(e,n)}}Oe.jsonID("text",ke);class Ah{constructor(e,n){this.anchor=e,this.head=n}map(e){return new Ah(e.map(this.anchor),e.map(this.head))}resolve(e){return ke.between(e.resolve(this.anchor),e.resolve(this.head))}}class ye extends Oe{constructor(e){let n=e.nodeAfter,r=e.node(0).resolve(e.pos+n.nodeSize);super(e,r),this.node=n}map(e,n){let{deleted:r,pos:i}=n.mapResult(this.anchor),s=e.resolve(i);return r?Oe.near(s):new ye(s)}content(){return new oe(X.from(this.node),0,0)}eq(e){return e instanceof ye&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new Vy(this.anchor)}static fromJSON(e,n){if(typeof n.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new ye(e.resolve(n.anchor))}static create(e,n){return new ye(e.resolve(n))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}ye.prototype.visible=!1;Oe.jsonID("node",ye);class Vy{constructor(e){this.anchor=e}map(e){let{deleted:n,pos:r}=e.mapResult(this.anchor);return n?new Ah(r,r):new Vy(r)}resolve(e){let n=e.resolve(this.anchor),r=n.nodeAfter;return r&&ye.isSelectable(r)?new ye(n):Oe.near(n)}}class pr extends Oe{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,n=oe.empty){if(n==oe.empty){e.delete(0,e.doc.content.size);let r=Oe.atStart(e.doc);r.eq(e.selection)||e.setSelection(r)}else super.replace(e,n)}toJSON(){return{type:"all"}}static fromJSON(e){return new pr(e)}map(e){return new pr(e)}eq(e){return e instanceof pr}getBookmark(){return Zz}}Oe.jsonID("all",pr);const Zz={map(){return this},resolve(t){return new pr(t)}};function yl(t,e,n,r,i,s=!1){if(e.inlineContent)return ke.create(t,n);for(let o=r-(i>0?0:1);i>0?o<e.childCount:o>=0;o+=i){let a=e.child(o);if(a.isAtom){if(!s&&ye.isSelectable(a))return ye.create(t,n-(i<0?a.nodeSize:0))}else{let c=yl(t,a,n+i,i<0?a.childCount:0,i,s);if(c)return c}n+=a.nodeSize*i}return null}function Lb(t,e,n){let r=t.steps.length-1;if(r<e)return;let i=t.steps[r];if(!(i instanceof Ft||i instanceof Ut))return;let s=t.mapping.maps[r],o;s.forEach((a,c,f,d)=>{o==null&&(o=d)}),t.setSelection(Oe.near(t.doc.resolve(o),n))}const jb=1,df=2,zb=4;class e5 extends v2{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|jb)&~df,this.storedMarks=null,this}get selectionSet(){return(this.updated&jb)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=df,this}ensureMarks(e){return Ge.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&df)>0}addStep(e,n){super.addStep(e,n),this.updated=this.updated&~df,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,n=!0){let r=this.selection;return n&&(e=e.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||Ge.none))),r.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,n,r){let i=this.doc.type.schema;if(n==null)return e?this.replaceSelectionWith(i.text(e),!0):this.deleteSelection();{if(r==null&&(r=n),!e)return this.deleteRange(n,r);let s=this.storedMarks;if(!s){let o=this.doc.resolve(n);s=r==n?o.marks():o.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(n,r,i.text(e,s)),!this.selection.empty&&this.selection.to==n+e.length&&this.setSelection(Oe.near(this.selection.$to)),this}}setMeta(e,n){return this.meta[typeof e=="string"?e:e.key]=n,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=zb,this}get scrolledIntoView(){return(this.updated&zb)>0}}function Bb(t,e){return!e||!t?t:t.bind(e)}class qa{constructor(e,n,r){this.name=e,this.init=Bb(n.init,r),this.apply=Bb(n.apply,r)}}const t5=[new qa("doc",{init(t){return t.doc||t.schema.topNodeType.createAndFill()},apply(t){return t.doc}}),new qa("selection",{init(t,e){return t.selection||Oe.atStart(e.doc)},apply(t){return t.selection}}),new qa("storedMarks",{init(t){return t.storedMarks||null},apply(t,e,n,r){return r.selection.$cursor?t.storedMarks:null}}),new qa("scrollToSelection",{init(){return 0},apply(t,e){return t.scrolledIntoView?e+1:e}})];class Km{constructor(e,n){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=t5.slice(),n&&n.forEach(r=>{if(this.pluginsByKey[r.key])throw new RangeError("Adding different instances of a keyed plugin ("+r.key+")");this.plugins.push(r),this.pluginsByKey[r.key]=r,r.spec.state&&this.fields.push(new qa(r.key,r.spec.state,r))})}}class Dl{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,n=-1){for(let r=0;r<this.config.plugins.length;r++)if(r!=n){let i=this.config.plugins[r];if(i.spec.filterTransaction&&!i.spec.filterTransaction.call(i,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let n=[e],r=this.applyInner(e),i=null;for(;;){let s=!1;for(let o=0;o<this.config.plugins.length;o++){let a=this.config.plugins[o];if(a.spec.appendTransaction){let c=i?i[o].n:0,f=i?i[o].state:this,d=c<n.length&&a.spec.appendTransaction.call(a,c?n.slice(c):n,f,r);if(d&&r.filterTransaction(d,o)){if(d.setMeta("appendedTransaction",e),!i){i=[];for(let p=0;p<this.config.plugins.length;p++)i.push(p<o?{state:r,n:n.length}:{state:this,n:0})}n.push(d),r=r.applyInner(d),s=!0}i&&(i[o]={state:r,n:n.length})}}if(!s)return{state:r,transactions:n}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let n=new Dl(this.config),r=this.config.fields;for(let i=0;i<r.length;i++){let s=r[i];n[s.name]=s.apply(e,this[s.name],this,n)}return n}get tr(){return new e5(this)}static create(e){let n=new Km(e.doc?e.doc.type.schema:e.schema,e.plugins),r=new Dl(n);for(let i=0;i<n.fields.length;i++)r[n.fields[i].name]=n.fields[i].init(e,r);return r}reconfigure(e){let n=new Km(this.schema,e.plugins),r=n.fields,i=new Dl(n);for(let s=0;s<r.length;s++){let o=r[s].name;i[o]=this.hasOwnProperty(o)?this[o]:r[s].init(e,i)}return i}toJSON(e){let n={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(n.storedMarks=this.storedMarks.map(r=>r.toJSON())),e&&typeof e=="object")for(let r in e){if(r=="doc"||r=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let i=e[r],s=i.spec.state;s&&s.toJSON&&(n[r]=s.toJSON.call(i,this[i.key]))}return n}static fromJSON(e,n,r){if(!n)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let i=new Km(e.schema,e.plugins),s=new Dl(i);return i.fields.forEach(o=>{if(o.name=="doc")s.doc=li.fromJSON(e.schema,n.doc);else if(o.name=="selection")s.selection=Oe.fromJSON(s.doc,n.selection);else if(o.name=="storedMarks")n.storedMarks&&(s.storedMarks=n.storedMarks.map(e.schema.markFromJSON));else{if(r)for(let a in r){let c=r[a],f=c.spec.state;if(c.key==o.name&&f&&f.fromJSON&&Object.prototype.hasOwnProperty.call(n,a)){s[o.name]=f.fromJSON.call(c,e,n[a],s);return}}s[o.name]=o.init(e,s)}}),s}}function x2(t,e,n){for(let r in t){let i=t[r];i instanceof Function?i=i.bind(e):r=="handleDOMEvents"&&(i=x2(i,e,{})),n[r]=i}return n}class dt{constructor(e){this.spec=e,this.props={},e.props&&x2(e.props,this,this.props),this.key=e.key?e.key.key:w2("plugin")}getState(e){return e[this.key]}}const qm=Object.create(null);function w2(t){return t in qm?t+"$"+ ++qm[t]:(qm[t]=0,t+"$")}class Lt{constructor(e="key"){this.key=w2(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const Wy=(t,e)=>t.selection.empty?!1:(e&&e(t.tr.deleteSelection().scrollIntoView()),!0);function b2(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("backward",t):n.parentOffset>0)?null:n}const S2=(t,e,n)=>{let r=b2(t,n);if(!r)return!1;let i=Ky(r);if(!i){let o=r.blockRange(),a=o&&la(o);return a==null?!1:(e&&e(t.tr.lift(o,a).scrollIntoView()),!0)}let s=i.nodeBefore;if(A2(t,i,e,-1))return!0;if(r.parent.content.size==0&&(Ql(s,"end")||ye.isSelectable(s)))for(let o=r.depth;;o--){let a=Oh(t.doc,r.before(o),r.after(o),oe.empty);if(a&&a.slice.size<a.to-a.from){if(e){let c=t.tr.step(a);c.setSelection(Ql(s,"end")?Oe.findFrom(c.doc.resolve(c.mapping.map(i.pos,-1)),-1):ye.create(c.doc,i.pos-s.nodeSize)),e(c.scrollIntoView())}return!0}if(o==1||r.node(o-1).childCount>1)break}return s.isAtom&&i.depth==r.depth-1?(e&&e(t.tr.delete(i.pos-s.nodeSize,i.pos).scrollIntoView()),!0):!1},n5=(t,e,n)=>{let r=b2(t,n);if(!r)return!1;let i=Ky(r);return i?k2(t,i,e):!1},r5=(t,e,n)=>{let r=E2(t,n);if(!r)return!1;let i=qy(r);return i?k2(t,i,e):!1};function k2(t,e,n){let r=e.nodeBefore,i=r,s=e.pos-1;for(;!i.isTextblock;s--){if(i.type.spec.isolating)return!1;let d=i.lastChild;if(!d)return!1;i=d}let o=e.nodeAfter,a=o,c=e.pos+1;for(;!a.isTextblock;c++){if(a.type.spec.isolating)return!1;let d=a.firstChild;if(!d)return!1;a=d}let f=Oh(t.doc,s,c,oe.empty);if(!f||f.from!=s||f instanceof Ft&&f.slice.size>=c-s)return!1;if(n){let d=t.tr.step(f);d.setSelection(ke.create(d.doc,s)),n(d.scrollIntoView())}return!0}function Ql(t,e,n=!1){for(let r=t;r;r=e=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(n&&r.childCount!=1)return!1}return!1}const C2=(t,e,n)=>{let{$head:r,empty:i}=t.selection,s=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("backward",t):r.parentOffset>0)return!1;s=Ky(r)}let o=s&&s.nodeBefore;return!o||!ye.isSelectable(o)?!1:(e&&e(t.tr.setSelection(ye.create(t.doc,s.pos-o.nodeSize)).scrollIntoView()),!0)};function Ky(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){if(t.index(e)>0)return t.doc.resolve(t.before(e+1));if(t.node(e).type.spec.isolating)break}return null}function E2(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("forward",t):n.parentOffset<n.parent.content.size)?null:n}const T2=(t,e,n)=>{let r=E2(t,n);if(!r)return!1;let i=qy(r);if(!i)return!1;let s=i.nodeAfter;if(A2(t,i,e,1))return!0;if(r.parent.content.size==0&&(Ql(s,"start")||ye.isSelectable(s))){let o=Oh(t.doc,r.before(),r.after(),oe.empty);if(o&&o.slice.size<o.to-o.from){if(e){let a=t.tr.step(o);a.setSelection(Ql(s,"start")?Oe.findFrom(a.doc.resolve(a.mapping.map(i.pos)),1):ye.create(a.doc,a.mapping.map(i.pos))),e(a.scrollIntoView())}return!0}}return s.isAtom&&i.depth==r.depth-1?(e&&e(t.tr.delete(i.pos,i.pos+s.nodeSize).scrollIntoView()),!0):!1},N2=(t,e,n)=>{let{$head:r,empty:i}=t.selection,s=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("forward",t):r.parentOffset<r.parent.content.size)return!1;s=qy(r)}let o=s&&s.nodeAfter;return!o||!ye.isSelectable(o)?!1:(e&&e(t.tr.setSelection(ye.create(t.doc,s.pos)).scrollIntoView()),!0)};function qy(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){let n=t.node(e);if(t.index(e)+1<n.childCount)return t.doc.resolve(t.after(e+1));if(n.type.spec.isolating)break}return null}const i5=(t,e)=>{let n=t.selection,r=n instanceof ye,i;if(r){if(n.node.isTextblock||!eo(t.doc,n.from))return!1;i=n.from}else if(i=_h(t.doc,n.from,-1),i==null)return!1;if(e){let s=t.tr.join(i);r&&s.setSelection(ye.create(s.doc,i-t.doc.resolve(i).nodeBefore.nodeSize)),e(s.scrollIntoView())}return!0},s5=(t,e)=>{let n=t.selection,r;if(n instanceof ye){if(n.node.isTextblock||!eo(t.doc,n.to))return!1;r=n.to}else if(r=_h(t.doc,n.to,1),r==null)return!1;return e&&e(t.tr.join(r).scrollIntoView()),!0},o5=(t,e)=>{let{$from:n,$to:r}=t.selection,i=n.blockRange(r),s=i&&la(i);return s==null?!1:(e&&e(t.tr.lift(i,s).scrollIntoView()),!0)},M2=(t,e)=>{let{$head:n,$anchor:r}=t.selection;return!n.parent.type.spec.code||!n.sameParent(r)?!1:(e&&e(t.tr.insertText(`
`).scrollIntoView()),!0)};function Gy(t){for(let e=0;e<t.edgeCount;e++){let{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}const l5=(t,e)=>{let{$head:n,$anchor:r}=t.selection;if(!n.parent.type.spec.code||!n.sameParent(r))return!1;let i=n.node(-1),s=n.indexAfter(-1),o=Gy(i.contentMatchAt(s));if(!o||!i.canReplaceWith(s,s,o))return!1;if(e){let a=n.after(),c=t.tr.replaceWith(a,a,o.createAndFill());c.setSelection(Oe.near(c.doc.resolve(a),1)),e(c.scrollIntoView())}return!0},_2=(t,e)=>{let n=t.selection,{$from:r,$to:i}=n;if(n instanceof pr||r.parent.inlineContent||i.parent.inlineContent)return!1;let s=Gy(i.parent.contentMatchAt(i.indexAfter()));if(!s||!s.isTextblock)return!1;if(e){let o=(!r.parentOffset&&i.index()<i.parent.childCount?r:i).pos,a=t.tr.insert(o,s.createAndFill());a.setSelection(ke.create(a.doc,o+1)),e(a.scrollIntoView())}return!0},O2=(t,e)=>{let{$cursor:n}=t.selection;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){let s=n.before();if(Gi(t.doc,s))return e&&e(t.tr.split(s).scrollIntoView()),!0}let r=n.blockRange(),i=r&&la(r);return i==null?!1:(e&&e(t.tr.lift(r,i).scrollIntoView()),!0)};function a5(t){return(e,n)=>{let{$from:r,$to:i}=e.selection;if(e.selection instanceof ye&&e.selection.node.isBlock)return!r.parentOffset||!Gi(e.doc,r.pos)?!1:(n&&n(e.tr.split(r.pos).scrollIntoView()),!0);if(!r.depth)return!1;let s=[],o,a,c=!1,f=!1;for(let g=r.depth;;g--)if(r.node(g).isBlock){c=r.end(g)==r.pos+(r.depth-g),f=r.start(g)==r.pos-(r.depth-g),a=Gy(r.node(g-1).contentMatchAt(r.indexAfter(g-1))),s.unshift(c&&a?{type:a}:null),o=g;break}else{if(g==1)return!1;s.unshift(null)}let d=e.tr;(e.selection instanceof ke||e.selection instanceof pr)&&d.deleteSelection();let p=d.mapping.map(r.pos),m=Gi(d.doc,p,s.length,s);if(m||(s[0]=a?{type:a}:null,m=Gi(d.doc,p,s.length,s)),!m)return!1;if(d.split(p,s.length,s),!c&&f&&r.node(o).type!=a){let g=d.mapping.map(r.before(o)),v=d.doc.resolve(g);a&&r.node(o-1).canReplaceWith(v.index(),v.index()+1,a)&&d.setNodeMarkup(d.mapping.map(r.before(o)),a)}return n&&n(d.scrollIntoView()),!0}}const u5=a5(),c5=(t,e)=>{let{$from:n,to:r}=t.selection,i,s=n.sharedDepth(r);return s==0?!1:(i=n.before(s),e&&e(t.tr.setSelection(ye.create(t.doc,i))),!0)};function f5(t,e,n){let r=e.nodeBefore,i=e.nodeAfter,s=e.index();return!r||!i||!r.type.compatibleContent(i.type)?!1:!r.content.size&&e.parent.canReplace(s-1,s)?(n&&n(t.tr.delete(e.pos-r.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(s,s+1)||!(i.isTextblock||eo(t.doc,e.pos))?!1:(n&&n(t.tr.join(e.pos).scrollIntoView()),!0)}function A2(t,e,n,r){let i=e.nodeBefore,s=e.nodeAfter,o,a,c=i.type.spec.isolating||s.type.spec.isolating;if(!c&&f5(t,e,n))return!0;let f=!c&&e.parent.canReplace(e.index(),e.index()+1);if(f&&(o=(a=i.contentMatchAt(i.childCount)).findWrapping(s.type))&&a.matchType(o[0]||s.type).validEnd){if(n){let g=e.pos+s.nodeSize,v=X.empty;for(let x=o.length-1;x>=0;x--)v=X.from(o[x].create(null,v));v=X.from(i.copy(v));let S=t.tr.step(new Ut(e.pos-1,g,e.pos,g,new oe(v,1,0),o.length,!0)),C=S.doc.resolve(g+2*o.length);C.nodeAfter&&C.nodeAfter.type==i.type&&eo(S.doc,C.pos)&&S.join(C.pos),n(S.scrollIntoView())}return!0}let d=s.type.spec.isolating||r>0&&c?null:Oe.findFrom(e,1),p=d&&d.$from.blockRange(d.$to),m=p&&la(p);if(m!=null&&m>=e.depth)return n&&n(t.tr.lift(p,m).scrollIntoView()),!0;if(f&&Ql(s,"start",!0)&&Ql(i,"end")){let g=i,v=[];for(;v.push(g),!g.isTextblock;)g=g.lastChild;let S=s,C=1;for(;!S.isTextblock;S=S.firstChild)C++;if(g.canReplace(g.childCount,g.childCount,S.content)){if(n){let x=X.empty;for(let E=v.length-1;E>=0;E--)x=X.from(v[E].copy(x));let w=t.tr.step(new Ut(e.pos-v.length,e.pos+s.nodeSize,e.pos+C,e.pos+s.nodeSize-C,new oe(x,v.length,0),0,!0));n(w.scrollIntoView())}return!0}}return!1}function P2(t){return function(e,n){let r=e.selection,i=t<0?r.$from:r.$to,s=i.depth;for(;i.node(s).isInline;){if(!s)return!1;s--}return i.node(s).isTextblock?(n&&n(e.tr.setSelection(ke.create(e.doc,t<0?i.start(s):i.end(s)))),!0):!1}}const d5=P2(-1),h5=P2(1);function p5(t,e=null){return function(n,r){let{$from:i,$to:s}=n.selection,o=i.blockRange(s),a=o&&Uy(o,t,e);return a?(r&&r(n.tr.wrap(o,a).scrollIntoView()),!0):!1}}function Fb(t,e=null){return function(n,r){let i=!1;for(let s=0;s<n.selection.ranges.length&&!i;s++){let{$from:{pos:o},$to:{pos:a}}=n.selection.ranges[s];n.doc.nodesBetween(o,a,(c,f)=>{if(i)return!1;if(!(!c.isTextblock||c.hasMarkup(t,e)))if(c.type==t)i=!0;else{let d=n.doc.resolve(f),p=d.index();i=d.parent.canReplaceWith(p,p+1,t)}})}if(!i)return!1;if(r){let s=n.tr;for(let o=0;o<n.selection.ranges.length;o++){let{$from:{pos:a},$to:{pos:c}}=n.selection.ranges[o];s.setBlockType(a,c,t,e)}r(s.scrollIntoView())}return!0}}function Xy(...t){return function(e,n,r){for(let i=0;i<t.length;i++)if(t[i](e,n,r))return!0;return!1}}Xy(Wy,S2,C2);Xy(Wy,T2,N2);Xy(M2,_2,O2,u5);typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function m5(t,e=null){return function(n,r){let{$from:i,$to:s}=n.selection,o=i.blockRange(s);if(!o)return!1;let a=r?n.tr:null;return g5(a,o,t,e)?(r&&r(a.scrollIntoView()),!0):!1}}function g5(t,e,n,r=null){let i=!1,s=e,o=e.$from.doc;if(e.depth>=2&&e.$from.node(e.depth-1).type.compatibleContent(n)&&e.startIndex==0){if(e.$from.index(e.depth-1)==0)return!1;let c=o.resolve(e.start-2);s=new vd(c,c,e.depth),e.endIndex<e.parent.childCount&&(e=new vd(e.$from,o.resolve(e.$to.end(e.depth)),e.depth)),i=!0}let a=Uy(s,n,r,e);return a?(t&&y5(t,e,a,i,n),!0):!1}function y5(t,e,n,r,i){let s=X.empty;for(let d=n.length-1;d>=0;d--)s=X.from(n[d].type.create(n[d].attrs,s));t.step(new Ut(e.start-(r?2:0),e.end,e.start,e.end,new oe(s,0,0),n.length,!0));let o=0;for(let d=0;d<n.length;d++)n[d].type==i&&(o=d+1);let a=n.length-o,c=e.start+n.length-(r?2:0),f=e.parent;for(let d=e.startIndex,p=e.endIndex,m=!0;d<p;d++,m=!1)!m&&Gi(t.doc,c,a)&&(t.split(c,a),c+=2*a),c+=f.child(d).nodeSize;return t}function v5(t){return function(e,n){let{$from:r,$to:i}=e.selection,s=r.blockRange(i,o=>o.childCount>0&&o.firstChild.type==t);return s?n?r.node(s.depth-1).type==t?x5(e,n,t,s):w5(e,n,s):!0:!1}}function x5(t,e,n,r){let i=t.tr,s=r.end,o=r.$to.end(r.depth);s<o&&(i.step(new Ut(s-1,o,s,o,new oe(X.from(n.create(null,r.parent.copy())),1,0),1,!0)),r=new vd(i.doc.resolve(r.$from.pos),i.doc.resolve(o),r.depth));const a=la(r);if(a==null)return!1;i.lift(r,a);let c=i.doc.resolve(i.mapping.map(s,-1)-1);return eo(i.doc,c.pos)&&c.nodeBefore.type==c.nodeAfter.type&&i.join(c.pos),e(i.scrollIntoView()),!0}function w5(t,e,n){let r=t.tr,i=n.parent;for(let g=n.end,v=n.endIndex-1,S=n.startIndex;v>S;v--)g-=i.child(v).nodeSize,r.delete(g-1,g+1);let s=r.doc.resolve(n.start),o=s.nodeAfter;if(r.mapping.map(n.end)!=n.start+s.nodeAfter.nodeSize)return!1;let a=n.startIndex==0,c=n.endIndex==i.childCount,f=s.node(-1),d=s.index(-1);if(!f.canReplace(d+(a?0:1),d+1,o.content.append(c?X.empty:X.from(i))))return!1;let p=s.pos,m=p+o.nodeSize;return r.step(new Ut(p-(a?1:0),m+(c?1:0),p+1,m-1,new oe((a?X.empty:X.from(i.copy(X.empty))).append(c?X.empty:X.from(i.copy(X.empty))),a?0:1,c?0:1),a?0:1)),e(r.scrollIntoView()),!0}function b5(t){return function(e,n){let{$from:r,$to:i}=e.selection,s=r.blockRange(i,f=>f.childCount>0&&f.firstChild.type==t);if(!s)return!1;let o=s.startIndex;if(o==0)return!1;let a=s.parent,c=a.child(o-1);if(c.type!=t)return!1;if(n){let f=c.lastChild&&c.lastChild.type==a.type,d=X.from(f?t.create():null),p=new oe(X.from(t.create(null,X.from(a.type.create(null,d)))),f?3:1,0),m=s.start,g=s.end;n(e.tr.step(new Ut(m-(f?3:1),g,m,g,p,1,!0)).scrollIntoView())}return!0}}const Yt=function(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e},Zl=function(t){let e=t.assignedSlot||t.parentNode;return e&&e.nodeType==11?e.host:e};let m0=null;const Hi=function(t,e,n){let r=m0||(m0=document.createRange());return r.setEnd(t,n??t.nodeValue.length),r.setStart(t,e||0),r},S5=function(){m0=null},Fo=function(t,e,n,r){return n&&($b(t,e,n,r,-1)||$b(t,e,n,r,1))},k5=/^(img|br|input|textarea|hr)$/i;function $b(t,e,n,r,i){for(var s;;){if(t==n&&e==r)return!0;if(e==(i<0?0:jr(t))){let o=t.parentNode;if(!o||o.nodeType!=1||qu(t)||k5.test(t.nodeName)||t.contentEditable=="false")return!1;e=Yt(t)+(i<0?0:1),t=o}else if(t.nodeType==1){let o=t.childNodes[e+(i<0?-1:0)];if(o.nodeType==1&&o.contentEditable=="false")if(!((s=o.pmViewDesc)===null||s===void 0)&&s.ignoreForSelection)e+=i;else return!1;else t=o,e=i<0?jr(t):0}else return!1}}function jr(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function C5(t,e){for(;;){if(t.nodeType==3&&e)return t;if(t.nodeType==1&&e>0){if(t.contentEditable=="false")return null;t=t.childNodes[e-1],e=jr(t)}else if(t.parentNode&&!qu(t))e=Yt(t),t=t.parentNode;else return null}}function E5(t,e){for(;;){if(t.nodeType==3&&e<t.nodeValue.length)return t;if(t.nodeType==1&&e<t.childNodes.length){if(t.contentEditable=="false")return null;t=t.childNodes[e],e=0}else if(t.parentNode&&!qu(t))e=Yt(t)+1,t=t.parentNode;else return null}}function T5(t,e,n){for(let r=e==0,i=e==jr(t);r||i;){if(t==n)return!0;let s=Yt(t);if(t=t.parentNode,!t)return!1;r=r&&s==0,i=i&&s==jr(t)}}function qu(t){let e;for(let n=t;n&&!(e=n.pmViewDesc);n=n.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==t||e.contentDOM==t)}const Ph=function(t){return t.focusNode&&Fo(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset)};function vo(t,e){let n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=t,n.key=n.code=e,n}function N5(t){let e=t.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function M5(t,e,n){if(t.caretPositionFromPoint)try{let r=t.caretPositionFromPoint(e,n);if(r)return{node:r.offsetNode,offset:Math.min(jr(r.offsetNode),r.offset)}}catch{}if(t.caretRangeFromPoint){let r=t.caretRangeFromPoint(e,n);if(r)return{node:r.startContainer,offset:Math.min(jr(r.startContainer),r.startOffset)}}}const ki=typeof navigator<"u"?navigator:null,Hb=typeof document<"u"?document:null,to=ki&&ki.userAgent||"",g0=/Edge\/(\d+)/.exec(to),R2=/MSIE \d/.exec(to),y0=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(to),Xn=!!(R2||y0||g0),Us=R2?document.documentMode:y0?+y0[1]:g0?+g0[1]:0,$r=!Xn&&/gecko\/(\d+)/i.test(to);$r&&+(/Firefox\/(\d+)/.exec(to)||[0,0])[1];const v0=!Xn&&/Chrome\/(\d+)/.exec(to),$t=!!v0,D2=v0?+v0[1]:0,tn=!Xn&&!!ki&&/Apple Computer/.test(ki.vendor),ea=tn&&(/Mobile\/\w+/.test(to)||!!ki&&ki.maxTouchPoints>2),Dr=ea||(ki?/Mac/.test(ki.platform):!1),I2=ki?/Win/.test(ki.platform):!1,Ki=/Android \d/.test(to),Gu=!!Hb&&"webkitFontSmoothing"in Hb.documentElement.style,_5=Gu?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function O5(t){let e=t.defaultView&&t.defaultView.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:t.documentElement.clientWidth,top:0,bottom:t.documentElement.clientHeight}}function ji(t,e){return typeof t=="number"?t:t[e]}function A5(t){let e=t.getBoundingClientRect(),n=e.width/t.offsetWidth||1,r=e.height/t.offsetHeight||1;return{left:e.left,right:e.left+t.clientWidth*n,top:e.top,bottom:e.top+t.clientHeight*r}}function Ub(t,e,n){let r=t.someProp("scrollThreshold")||0,i=t.someProp("scrollMargin")||5,s=t.dom.ownerDocument;for(let o=n||t.dom;o;){if(o.nodeType!=1){o=Zl(o);continue}let a=o,c=a==s.body,f=c?O5(s):A5(a),d=0,p=0;if(e.top<f.top+ji(r,"top")?p=-(f.top-e.top+ji(i,"top")):e.bottom>f.bottom-ji(r,"bottom")&&(p=e.bottom-e.top>f.bottom-f.top?e.top+ji(i,"top")-f.top:e.bottom-f.bottom+ji(i,"bottom")),e.left<f.left+ji(r,"left")?d=-(f.left-e.left+ji(i,"left")):e.right>f.right-ji(r,"right")&&(d=e.right-f.right+ji(i,"right")),d||p)if(c)s.defaultView.scrollBy(d,p);else{let g=a.scrollLeft,v=a.scrollTop;p&&(a.scrollTop+=p),d&&(a.scrollLeft+=d);let S=a.scrollLeft-g,C=a.scrollTop-v;e={left:e.left-S,top:e.top-C,right:e.right-S,bottom:e.bottom-C}}let m=c?"fixed":getComputedStyle(o).position;if(/^(fixed|sticky)$/.test(m))break;o=m=="absolute"?o.offsetParent:Zl(o)}}function P5(t){let e=t.dom.getBoundingClientRect(),n=Math.max(0,e.top),r,i;for(let s=(e.left+e.right)/2,o=n+1;o<Math.min(innerHeight,e.bottom);o+=5){let a=t.root.elementFromPoint(s,o);if(!a||a==t.dom||!t.dom.contains(a))continue;let c=a.getBoundingClientRect();if(c.top>=n-20){r=a,i=c.top;break}}return{refDOM:r,refTop:i,stack:L2(t.dom)}}function L2(t){let e=[],n=t.ownerDocument;for(let r=t;r&&(e.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),t!=n);r=Zl(r));return e}function R5({refDOM:t,refTop:e,stack:n}){let r=t?t.getBoundingClientRect().top:0;j2(n,r==0?0:r-e)}function j2(t,e){for(let n=0;n<t.length;n++){let{dom:r,top:i,left:s}=t[n];r.scrollTop!=i+e&&(r.scrollTop=i+e),r.scrollLeft!=s&&(r.scrollLeft=s)}}let pl=null;function D5(t){if(t.setActive)return t.setActive();if(pl)return t.focus(pl);let e=L2(t);t.focus(pl==null?{get preventScroll(){return pl={preventScroll:!0},!0}}:void 0),pl||(pl=!1,j2(e,0))}function z2(t,e){let n,r=2e8,i,s=0,o=e.top,a=e.top,c,f;for(let d=t.firstChild,p=0;d;d=d.nextSibling,p++){let m;if(d.nodeType==1)m=d.getClientRects();else if(d.nodeType==3)m=Hi(d).getClientRects();else continue;for(let g=0;g<m.length;g++){let v=m[g];if(v.top<=o&&v.bottom>=a){o=Math.max(v.bottom,o),a=Math.min(v.top,a);let S=v.left>e.left?v.left-e.left:v.right<e.left?e.left-v.right:0;if(S<r){n=d,r=S,i=S&&n.nodeType==3?{left:v.right<e.left?v.right:v.left,top:e.top}:e,d.nodeType==1&&S&&(s=p+(e.left>=(v.left+v.right)/2?1:0));continue}}else v.top>e.top&&!c&&v.left<=e.left&&v.right>=e.left&&(c=d,f={left:Math.max(v.left,Math.min(v.right,e.left)),top:v.top});!n&&(e.left>=v.right&&e.top>=v.top||e.left>=v.left&&e.top>=v.bottom)&&(s=p+1)}}return!n&&c&&(n=c,i=f,r=0),n&&n.nodeType==3?I5(n,i):!n||r&&n.nodeType==1?{node:t,offset:s}:z2(n,i)}function I5(t,e){let n=t.nodeValue.length,r=document.createRange(),i;for(let s=0;s<n;s++){r.setEnd(t,s+1),r.setStart(t,s);let o=vs(r,1);if(o.top!=o.bottom&&Jy(e,o)){i={node:t,offset:s+(e.left>=(o.left+o.right)/2?1:0)};break}}return r.detach(),i||{node:t,offset:0}}function Jy(t,e){return t.left>=e.left-1&&t.left<=e.right+1&&t.top>=e.top-1&&t.top<=e.bottom+1}function L5(t,e){let n=t.parentNode;return n&&/^li$/i.test(n.nodeName)&&e.left<t.getBoundingClientRect().left?n:t}function j5(t,e,n){let{node:r,offset:i}=z2(e,n),s=-1;if(r.nodeType==1&&!r.firstChild){let o=r.getBoundingClientRect();s=o.left!=o.right&&n.left>(o.left+o.right)/2?1:-1}return t.docView.posFromDOM(r,i,s)}function z5(t,e,n,r){let i=-1;for(let s=e,o=!1;s!=t.dom;){let a=t.docView.nearestDesc(s,!0),c;if(!a)return null;if(a.dom.nodeType==1&&(a.node.isBlock&&a.parent||!a.contentDOM)&&((c=a.dom.getBoundingClientRect()).width||c.height)&&(a.node.isBlock&&a.parent&&!/^T(R|BODY|HEAD|FOOT)$/.test(a.dom.nodeName)&&(!o&&c.left>r.left||c.top>r.top?i=a.posBefore:(!o&&c.right<r.left||c.bottom<r.top)&&(i=a.posAfter),o=!0),!a.contentDOM&&i<0&&!a.node.isText))return(a.node.isBlock?r.top<(c.top+c.bottom)/2:r.left<(c.left+c.right)/2)?a.posBefore:a.posAfter;s=a.dom.parentNode}return i>-1?i:t.docView.posFromDOM(e,n,-1)}function B2(t,e,n){let r=t.childNodes.length;if(r&&n.top<n.bottom)for(let i=Math.max(0,Math.min(r-1,Math.floor(r*(e.top-n.top)/(n.bottom-n.top))-2)),s=i;;){let o=t.childNodes[s];if(o.nodeType==1){let a=o.getClientRects();for(let c=0;c<a.length;c++){let f=a[c];if(Jy(e,f))return B2(o,e,f)}}if((s=(s+1)%r)==i)break}return t}function B5(t,e){let n=t.dom.ownerDocument,r,i=0,s=M5(n,e.left,e.top);s&&({node:r,offset:i}=s);let o=(t.root.elementFromPoint?t.root:n).elementFromPoint(e.left,e.top),a;if(!o||!t.dom.contains(o.nodeType!=1?o.parentNode:o)){let f=t.dom.getBoundingClientRect();if(!Jy(e,f)||(o=B2(t.dom,e,f),!o))return null}if(tn)for(let f=o;r&&f;f=Zl(f))f.draggable&&(r=void 0);if(o=L5(o,e),r){if($r&&r.nodeType==1&&(i=Math.min(i,r.childNodes.length),i<r.childNodes.length)){let d=r.childNodes[i],p;d.nodeName=="IMG"&&(p=d.getBoundingClientRect()).right<=e.left&&p.bottom>e.top&&i++}let f;Gu&&i&&r.nodeType==1&&(f=r.childNodes[i-1]).nodeType==1&&f.contentEditable=="false"&&f.getBoundingClientRect().top>=e.top&&i--,r==t.dom&&i==r.childNodes.length-1&&r.lastChild.nodeType==1&&e.top>r.lastChild.getBoundingClientRect().bottom?a=t.state.doc.content.size:(i==0||r.nodeType!=1||r.childNodes[i-1].nodeName!="BR")&&(a=z5(t,r,i,e))}a==null&&(a=j5(t,o,e));let c=t.docView.nearestDesc(o,!0);return{pos:a,inside:c?c.posAtStart-c.border:-1}}function Vb(t){return t.top<t.bottom||t.left<t.right}function vs(t,e){let n=t.getClientRects();if(n.length){let r=n[e<0?0:n.length-1];if(Vb(r))return r}return Array.prototype.find.call(n,Vb)||t.getBoundingClientRect()}const F5=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function F2(t,e,n){let{node:r,offset:i,atom:s}=t.docView.domFromPos(e,n<0?-1:1),o=Gu||$r;if(r.nodeType==3)if(o&&(F5.test(r.nodeValue)||(n<0?!i:i==r.nodeValue.length))){let c=vs(Hi(r,i,i),n);if($r&&i&&/\s/.test(r.nodeValue[i-1])&&i<r.nodeValue.length){let f=vs(Hi(r,i-1,i-1),-1);if(f.top==c.top){let d=vs(Hi(r,i,i+1),-1);if(d.top!=c.top)return La(d,d.left<f.left)}}return c}else{let c=i,f=i,d=n<0?1:-1;return n<0&&!i?(f++,d=-1):n>=0&&i==r.nodeValue.length?(c--,d=1):n<0?c--:f++,La(vs(Hi(r,c,f),d),d<0)}if(!t.state.doc.resolve(e-(s||0)).parent.inlineContent){if(s==null&&i&&(n<0||i==jr(r))){let c=r.childNodes[i-1];if(c.nodeType==1)return Gm(c.getBoundingClientRect(),!1)}if(s==null&&i<jr(r)){let c=r.childNodes[i];if(c.nodeType==1)return Gm(c.getBoundingClientRect(),!0)}return Gm(r.getBoundingClientRect(),n>=0)}if(s==null&&i&&(n<0||i==jr(r))){let c=r.childNodes[i-1],f=c.nodeType==3?Hi(c,jr(c)-(o?0:1)):c.nodeType==1&&(c.nodeName!="BR"||!c.nextSibling)?c:null;if(f)return La(vs(f,1),!1)}if(s==null&&i<jr(r)){let c=r.childNodes[i];for(;c.pmViewDesc&&c.pmViewDesc.ignoreForCoords;)c=c.nextSibling;let f=c?c.nodeType==3?Hi(c,0,o?0:1):c.nodeType==1?c:null:null;if(f)return La(vs(f,-1),!0)}return La(vs(r.nodeType==3?Hi(r):r,-n),n>=0)}function La(t,e){if(t.width==0)return t;let n=e?t.left:t.right;return{top:t.top,bottom:t.bottom,left:n,right:n}}function Gm(t,e){if(t.height==0)return t;let n=e?t.top:t.bottom;return{top:n,bottom:n,left:t.left,right:t.right}}function $2(t,e,n){let r=t.state,i=t.root.activeElement;r!=e&&t.updateState(e),i!=t.dom&&t.focus();try{return n()}finally{r!=e&&t.updateState(r),i!=t.dom&&i&&i.focus()}}function $5(t,e,n){let r=e.selection,i=n=="up"?r.$from:r.$to;return $2(t,e,()=>{let{node:s}=t.docView.domFromPos(i.pos,n=="up"?-1:1);for(;;){let a=t.docView.nearestDesc(s,!0);if(!a)break;if(a.node.isBlock){s=a.contentDOM||a.dom;break}s=a.dom.parentNode}let o=F2(t,i.pos,1);for(let a=s.firstChild;a;a=a.nextSibling){let c;if(a.nodeType==1)c=a.getClientRects();else if(a.nodeType==3)c=Hi(a,0,a.nodeValue.length).getClientRects();else continue;for(let f=0;f<c.length;f++){let d=c[f];if(d.bottom>d.top+1&&(n=="up"?o.top-d.top>(d.bottom-o.top)*2:d.bottom-o.bottom>(o.bottom-d.top)*2))return!1}}return!0})}const H5=/[\u0590-\u08ac]/;function U5(t,e,n){let{$head:r}=e.selection;if(!r.parent.isTextblock)return!1;let i=r.parentOffset,s=!i,o=i==r.parent.content.size,a=t.domSelection();return a?!H5.test(r.parent.textContent)||!a.modify?n=="left"||n=="backward"?s:o:$2(t,e,()=>{let{focusNode:c,focusOffset:f,anchorNode:d,anchorOffset:p}=t.domSelectionRange(),m=a.caretBidiLevel;a.modify("move",n,"character");let g=r.depth?t.docView.domAfterPos(r.before()):t.dom,{focusNode:v,focusOffset:S}=t.domSelectionRange(),C=v&&!g.contains(v.nodeType==1?v:v.parentNode)||c==v&&f==S;try{a.collapse(d,p),c&&(c!=d||f!=p)&&a.extend&&a.extend(c,f)}catch{}return m!=null&&(a.caretBidiLevel=m),C}):r.pos==r.start()||r.pos==r.end()}let Wb=null,Kb=null,qb=!1;function V5(t,e,n){return Wb==e&&Kb==n?qb:(Wb=e,Kb=n,qb=n=="up"||n=="down"?$5(t,e,n):U5(t,e,n))}const Hr=0,Gb=1,So=2,Ci=3;class Xu{constructor(e,n,r,i){this.parent=e,this.children=n,this.dom=r,this.contentDOM=i,this.dirty=Hr,r.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,n,r){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let n=0;n<this.children.length;n++)e+=this.children[n].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let n=0,r=this.posAtStart;;n++){let i=this.children[n];if(i==e)return r;r+=i.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,n,r){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(r<0){let s,o;if(e==this.contentDOM)s=e.childNodes[n-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;s=e.previousSibling}for(;s&&!((o=s.pmViewDesc)&&o.parent==this);)s=s.previousSibling;return s?this.posBeforeChild(o)+o.size:this.posAtStart}else{let s,o;if(e==this.contentDOM)s=e.childNodes[n];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;s=e.nextSibling}for(;s&&!((o=s.pmViewDesc)&&o.parent==this);)s=s.nextSibling;return s?this.posBeforeChild(o):this.posAtEnd}let i;if(e==this.dom&&this.contentDOM)i=n>Yt(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))i=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(n==0)for(let s=e;;s=s.parentNode){if(s==this.dom){i=!1;break}if(s.previousSibling)break}if(i==null&&n==e.childNodes.length)for(let s=e;;s=s.parentNode){if(s==this.dom){i=!0;break}if(s.nextSibling)break}}return i??r>0?this.posAtEnd:this.posAtStart}nearestDesc(e,n=!1){for(let r=!0,i=e;i;i=i.parentNode){let s=this.getDesc(i),o;if(s&&(!n||s.node))if(r&&(o=s.nodeDOM)&&!(o.nodeType==1?o.contains(e.nodeType==1?e:e.parentNode):o==e))r=!1;else return s}}getDesc(e){let n=e.pmViewDesc;for(let r=n;r;r=r.parent)if(r==this)return n}posFromDOM(e,n,r){for(let i=e;i;i=i.parentNode){let s=this.getDesc(i);if(s)return s.localPosFromDOM(e,n,r)}return-1}descAt(e){for(let n=0,r=0;n<this.children.length;n++){let i=this.children[n],s=r+i.size;if(r==e&&s!=r){for(;!i.border&&i.children.length;)for(let o=0;o<i.children.length;o++){let a=i.children[o];if(a.size){i=a;break}}return i}if(e<s)return i.descAt(e-r-i.border);r=s}}domFromPos(e,n){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let r=0,i=0;for(let s=0;r<this.children.length;r++){let o=this.children[r],a=s+o.size;if(a>e||o instanceof U2){i=e-s;break}s=a}if(i)return this.children[r].domFromPos(i-this.children[r].border,n);for(let s;r&&!(s=this.children[r-1]).size&&s instanceof H2&&s.side>=0;r--);if(n<=0){let s,o=!0;for(;s=r?this.children[r-1]:null,!(!s||s.dom.parentNode==this.contentDOM);r--,o=!1);return s&&n&&o&&!s.border&&!s.domAtom?s.domFromPos(s.size,n):{node:this.contentDOM,offset:s?Yt(s.dom)+1:0}}else{let s,o=!0;for(;s=r<this.children.length?this.children[r]:null,!(!s||s.dom.parentNode==this.contentDOM);r++,o=!1);return s&&o&&!s.border&&!s.domAtom?s.domFromPos(0,n):{node:this.contentDOM,offset:s?Yt(s.dom):this.contentDOM.childNodes.length}}}parseRange(e,n,r=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:n,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let i=-1,s=-1;for(let o=r,a=0;;a++){let c=this.children[a],f=o+c.size;if(i==-1&&e<=f){let d=o+c.border;if(e>=d&&n<=f-c.border&&c.node&&c.contentDOM&&this.contentDOM.contains(c.contentDOM))return c.parseRange(e,n,d);e=o;for(let p=a;p>0;p--){let m=this.children[p-1];if(m.size&&m.dom.parentNode==this.contentDOM&&!m.emptyChildAt(1)){i=Yt(m.dom)+1;break}e-=m.size}i==-1&&(i=0)}if(i>-1&&(f>n||a==this.children.length-1)){n=f;for(let d=a+1;d<this.children.length;d++){let p=this.children[d];if(p.size&&p.dom.parentNode==this.contentDOM&&!p.emptyChildAt(-1)){s=Yt(p.dom);break}n+=p.size}s==-1&&(s=this.contentDOM.childNodes.length);break}o=f}return{node:this.contentDOM,from:e,to:n,fromOffset:i,toOffset:s}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let n=this.children[e<0?0:this.children.length-1];return n.size==0||n.emptyChildAt(e)}domAfterPos(e){let{node:n,offset:r}=this.domFromPos(e,0);if(n.nodeType!=1||r==n.childNodes.length)throw new RangeError("No node after pos "+e);return n.childNodes[r]}setSelection(e,n,r,i=!1){let s=Math.min(e,n),o=Math.max(e,n);for(let g=0,v=0;g<this.children.length;g++){let S=this.children[g],C=v+S.size;if(s>v&&o<C)return S.setSelection(e-v-S.border,n-v-S.border,r,i);v=C}let a=this.domFromPos(e,e?-1:1),c=n==e?a:this.domFromPos(n,n?-1:1),f=r.root.getSelection(),d=r.domSelectionRange(),p=!1;if(($r||tn)&&e==n){let{node:g,offset:v}=a;if(g.nodeType==3){if(p=!!(v&&g.nodeValue[v-1]==`
`),p&&v==g.nodeValue.length)for(let S=g,C;S;S=S.parentNode){if(C=S.nextSibling){C.nodeName=="BR"&&(a=c={node:C.parentNode,offset:Yt(C)+1});break}let x=S.pmViewDesc;if(x&&x.node&&x.node.isBlock)break}}else{let S=g.childNodes[v-1];p=S&&(S.nodeName=="BR"||S.contentEditable=="false")}}if($r&&d.focusNode&&d.focusNode!=c.node&&d.focusNode.nodeType==1){let g=d.focusNode.childNodes[d.focusOffset];g&&g.contentEditable=="false"&&(i=!0)}if(!(i||p&&tn)&&Fo(a.node,a.offset,d.anchorNode,d.anchorOffset)&&Fo(c.node,c.offset,d.focusNode,d.focusOffset))return;let m=!1;if((f.extend||e==n)&&!(p&&$r)){f.collapse(a.node,a.offset);try{e!=n&&f.extend(c.node,c.offset),m=!0}catch{}}if(!m){if(e>n){let v=a;a=c,c=v}let g=document.createRange();g.setEnd(c.node,c.offset),g.setStart(a.node,a.offset),f.removeAllRanges(),f.addRange(g)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,n){for(let r=0,i=0;i<this.children.length;i++){let s=this.children[i],o=r+s.size;if(r==o?e<=o&&n>=r:e<o&&n>r){let a=r+s.border,c=o-s.border;if(e>=a&&n<=c){this.dirty=e==r||n==o?So:Gb,e==a&&n==c&&(s.contentLost||s.dom.parentNode!=this.contentDOM)?s.dirty=Ci:s.markDirty(e-a,n-a);return}else s.dirty=s.dom==s.contentDOM&&s.dom.parentNode==this.contentDOM&&!s.children.length?So:Ci}r=o}this.dirty=So}markParentsDirty(){let e=1;for(let n=this.parent;n;n=n.parent,e++){let r=e==1?So:Gb;n.dirty<r&&(n.dirty=r)}}get domAtom(){return!1}get ignoreForCoords(){return!1}get ignoreForSelection(){return!1}isText(e){return!1}}class H2 extends Xu{constructor(e,n,r,i){let s,o=n.type.toDOM;if(typeof o=="function"&&(o=o(r,()=>{if(!s)return i;if(s.parent)return s.parent.posBeforeChild(s)})),!n.type.spec.raw){if(o.nodeType!=1){let a=document.createElement("span");a.appendChild(o),o=a}o.contentEditable="false",o.classList.add("ProseMirror-widget")}super(e,[],o,null),this.widget=n,this.widget=n,s=this}matchesWidget(e){return this.dirty==Hr&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let n=this.widget.spec.stopEvent;return n?n(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get ignoreForSelection(){return!!this.widget.type.spec.relaxedSide}get side(){return this.widget.type.side}}class W5 extends Xu{constructor(e,n,r,i){super(e,[],n,null),this.textDOM=r,this.text=i}get size(){return this.text.length}localPosFromDOM(e,n){return e!=this.textDOM?this.posAtStart+(n?this.size:0):this.posAtStart+n}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class $o extends Xu{constructor(e,n,r,i,s){super(e,[],r,i),this.mark=n,this.spec=s}static create(e,n,r,i){let s=i.nodeViews[n.type.name],o=s&&s(n,i,r);return(!o||!o.dom)&&(o=Ko.renderSpec(document,n.type.spec.toDOM(n,r),null,n.attrs)),new $o(e,n,o.dom,o.contentDOM||o.dom,o)}parseRule(){return this.dirty&Ci||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=Ci&&this.mark.eq(e)}markDirty(e,n){if(super.markDirty(e,n),this.dirty!=Hr){let r=this.parent;for(;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=Hr}}slice(e,n,r){let i=$o.create(this.parent,this.mark,!0,r),s=this.children,o=this.size;n<o&&(s=w0(s,n,o,r)),e>0&&(s=w0(s,0,e,r));for(let a=0;a<s.length;a++)s[a].parent=i;return i.children=s,i}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class Vs extends Xu{constructor(e,n,r,i,s,o,a,c,f){super(e,[],s,o),this.node=n,this.outerDeco=r,this.innerDeco=i,this.nodeDOM=a}static create(e,n,r,i,s,o){let a=s.nodeViews[n.type.name],c,f=a&&a(n,s,()=>{if(!c)return o;if(c.parent)return c.parent.posBeforeChild(c)},r,i),d=f&&f.dom,p=f&&f.contentDOM;if(n.isText){if(!d)d=document.createTextNode(n.text);else if(d.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else d||({dom:d,contentDOM:p}=Ko.renderSpec(document,n.type.spec.toDOM(n),null,n.attrs));!p&&!n.isText&&d.nodeName!="BR"&&(d.hasAttribute("contenteditable")||(d.contentEditable="false"),n.type.spec.draggable&&(d.draggable=!0));let m=d;return d=K2(d,r,n),f?c=new K5(e,n,r,i,d,p||null,m,f,s,o+1):n.isText?new Rh(e,n,r,i,d,m,s):new Vs(e,n,r,i,d,p||null,m,s,o+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let n=this.children.length-1;n>=0;n--){let r=this.children[n];if(this.dom.contains(r.dom.parentNode)){e.contentElement=r.dom.parentNode;break}}e.contentElement||(e.getContent=()=>X.empty)}return e}matchesNode(e,n,r){return this.dirty==Hr&&e.eq(this.node)&&wd(n,this.outerDeco)&&r.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,n){let r=this.node.inlineContent,i=n,s=e.composing?this.localCompositionInfo(e,n):null,o=s&&s.pos>-1?s:null,a=s&&s.pos<0,c=new G5(this,o&&o.node,e);Y5(this.node,this.innerDeco,(f,d,p)=>{f.spec.marks?c.syncToMarks(f.spec.marks,r,e,d):f.type.side>=0&&!p&&c.syncToMarks(d==this.node.childCount?Ge.none:this.node.child(d).marks,r,e,d),c.placeWidget(f,e,i)},(f,d,p,m)=>{c.syncToMarks(f.marks,r,e,m);let g;c.findNodeMatch(f,d,p,m)||a&&e.state.selection.from>i&&e.state.selection.to<i+f.nodeSize&&(g=c.findIndexWithChild(s.node))>-1&&c.updateNodeAt(f,d,p,g,e)||c.updateNextNode(f,d,p,e,m,i)||c.addNode(f,d,p,e,i),i+=f.nodeSize}),c.syncToMarks([],r,e,0),this.node.isTextblock&&c.addTextblockHacks(),c.destroyRest(),(c.changed||this.dirty==So)&&(o&&this.protectLocalComposition(e,o),V2(this.contentDOM,this.children,e),ea&&Q5(this.dom))}localCompositionInfo(e,n){let{from:r,to:i}=e.state.selection;if(!(e.state.selection instanceof ke)||r<n||i>n+this.node.content.size)return null;let s=e.input.compositionNode;if(!s||!this.dom.contains(s.parentNode))return null;if(this.node.inlineContent){let o=s.nodeValue,a=Z5(this.node.content,o,r-n,i-n);return a<0?null:{node:s,pos:a,text:o}}else return{node:s,pos:-1,text:""}}protectLocalComposition(e,{node:n,pos:r,text:i}){if(this.getDesc(n))return;let s=n;for(;s.parentNode!=this.contentDOM;s=s.parentNode){for(;s.previousSibling;)s.parentNode.removeChild(s.previousSibling);for(;s.nextSibling;)s.parentNode.removeChild(s.nextSibling);s.pmViewDesc&&(s.pmViewDesc=void 0)}let o=new W5(this,s,n,i);e.input.compositionNodes.push(o),this.children=w0(this.children,r,r+i.length,e,o)}update(e,n,r,i){return this.dirty==Ci||!e.sameMarkup(this.node)?!1:(this.updateInner(e,n,r,i),!0)}updateInner(e,n,r,i){this.updateOuterDeco(n),this.node=e,this.innerDeco=r,this.contentDOM&&this.updateChildren(i,this.posAtStart),this.dirty=Hr}updateOuterDeco(e){if(wd(e,this.outerDeco))return;let n=this.nodeDOM.nodeType!=1,r=this.dom;this.dom=W2(this.dom,this.nodeDOM,x0(this.outerDeco,this.node,n),x0(e,this.node,n)),this.dom!=r&&(r.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.nodeDOM.draggable=!0))}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.nodeDOM.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function Xb(t,e,n,r,i){K2(r,e,t);let s=new Vs(void 0,t,e,n,r,r,r,i,0);return s.contentDOM&&s.updateChildren(i,0),s}class Rh extends Vs{constructor(e,n,r,i,s,o,a){super(e,n,r,i,s,null,o,a,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,n,r,i){return this.dirty==Ci||this.dirty!=Hr&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(n),(this.dirty!=Hr||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,i.trackWrites==this.nodeDOM&&(i.trackWrites=null)),this.node=e,this.dirty=Hr,!0)}inParent(){let e=this.parent.contentDOM;for(let n=this.nodeDOM;n;n=n.parentNode)if(n==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,n,r){return e==this.nodeDOM?this.posAtStart+Math.min(n,this.node.text.length):super.localPosFromDOM(e,n,r)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,n,r){let i=this.node.cut(e,n),s=document.createTextNode(i.text);return new Rh(this.parent,i,this.outerDeco,this.innerDeco,s,s,r)}markDirty(e,n){super.markDirty(e,n),this.dom!=this.nodeDOM&&(e==0||n==this.nodeDOM.nodeValue.length)&&(this.dirty=Ci)}get domAtom(){return!1}isText(e){return this.node.text==e}}class U2 extends Xu{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==Hr&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class K5 extends Vs{constructor(e,n,r,i,s,o,a,c,f,d){super(e,n,r,i,s,o,a,f,d),this.spec=c}update(e,n,r,i){if(this.dirty==Ci)return!1;if(this.spec.update&&(this.node.type==e.type||this.spec.multiType)){let s=this.spec.update(e,n,r);return s&&this.updateInner(e,n,r,i),s}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,n,r,i)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,n,r,i){this.spec.setSelection?this.spec.setSelection(e,n,r.root):super.setSelection(e,n,r,i)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function V2(t,e,n){let r=t.firstChild,i=!1;for(let s=0;s<e.length;s++){let o=e[s],a=o.dom;if(a.parentNode==t){for(;a!=r;)r=Jb(r),i=!0;r=r.nextSibling}else i=!0,t.insertBefore(a,r);if(o instanceof $o){let c=r?r.previousSibling:t.lastChild;V2(o.contentDOM,o.children,n),r=c?c.nextSibling:t.firstChild}}for(;r;)r=Jb(r),i=!0;i&&n.trackWrites==t&&(n.trackWrites=null)}const ou=function(t){t&&(this.nodeName=t)};ou.prototype=Object.create(null);const ko=[new ou];function x0(t,e,n){if(t.length==0)return ko;let r=n?ko[0]:new ou,i=[r];for(let s=0;s<t.length;s++){let o=t[s].type.attrs;if(o){o.nodeName&&i.push(r=new ou(o.nodeName));for(let a in o){let c=o[a];c!=null&&(n&&i.length==1&&i.push(r=new ou(e.isInline?"span":"div")),a=="class"?r.class=(r.class?r.class+" ":"")+c:a=="style"?r.style=(r.style?r.style+";":"")+c:a!="nodeName"&&(r[a]=c))}}}return i}function W2(t,e,n,r){if(n==ko&&r==ko)return e;let i=e;for(let s=0;s<r.length;s++){let o=r[s],a=n[s];if(s){let c;a&&a.nodeName==o.nodeName&&i!=t&&(c=i.parentNode)&&c.nodeName.toLowerCase()==o.nodeName||(c=document.createElement(o.nodeName),c.pmIsDeco=!0,c.appendChild(i),a=ko[0]),i=c}q5(i,a||ko[0],o)}return i}function q5(t,e,n){for(let r in e)r!="class"&&r!="style"&&r!="nodeName"&&!(r in n)&&t.removeAttribute(r);for(let r in n)r!="class"&&r!="style"&&r!="nodeName"&&n[r]!=e[r]&&t.setAttribute(r,n[r]);if(e.class!=n.class){let r=e.class?e.class.split(" ").filter(Boolean):[],i=n.class?n.class.split(" ").filter(Boolean):[];for(let s=0;s<r.length;s++)i.indexOf(r[s])==-1&&t.classList.remove(r[s]);for(let s=0;s<i.length;s++)r.indexOf(i[s])==-1&&t.classList.add(i[s]);t.classList.length==0&&t.removeAttribute("class")}if(e.style!=n.style){if(e.style){let r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,i;for(;i=r.exec(e.style);)t.style.removeProperty(i[1])}n.style&&(t.style.cssText+=n.style)}}function K2(t,e,n){return W2(t,t,ko,x0(e,n,t.nodeType!=1))}function wd(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].type.eq(e[n].type))return!1;return!0}function Jb(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class G5{constructor(e,n,r){this.lock=n,this.view=r,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=X5(e.node.content,e)}destroyBetween(e,n){if(e!=n){for(let r=e;r<n;r++)this.top.children[r].destroy();this.top.children.splice(e,n-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,n,r,i){let s=0,o=this.stack.length>>1,a=Math.min(o,e.length);for(;s<a&&(s==o-1?this.top:this.stack[s+1<<1]).matchesMark(e[s])&&e[s].type.spec.spanning!==!1;)s++;for(;s<o;)this.destroyRest(),this.top.dirty=Hr,this.index=this.stack.pop(),this.top=this.stack.pop(),o--;for(;o<e.length;){this.stack.push(this.top,this.index+1);let c=-1,f=this.top.children.length;i<this.preMatch.index&&(f=Math.min(this.index+3,f));for(let d=this.index;d<f;d++){let p=this.top.children[d];if(p.matchesMark(e[o])&&!this.isLocked(p.dom)){c=d;break}}if(c>-1)c>this.index&&(this.changed=!0,this.destroyBetween(this.index,c)),this.top=this.top.children[this.index];else{let d=$o.create(this.top,e[o],n,r);this.top.children.splice(this.index,0,d),this.top=d,this.changed=!0}this.index=0,o++}}findNodeMatch(e,n,r,i){let s=-1,o;if(i>=this.preMatch.index&&(o=this.preMatch.matches[i-this.preMatch.index]).parent==this.top&&o.matchesNode(e,n,r))s=this.top.children.indexOf(o,this.index);else for(let a=this.index,c=Math.min(this.top.children.length,a+5);a<c;a++){let f=this.top.children[a];if(f.matchesNode(e,n,r)&&!this.preMatch.matched.has(f)){s=a;break}}return s<0?!1:(this.destroyBetween(this.index,s),this.index++,!0)}updateNodeAt(e,n,r,i,s){let o=this.top.children[i];return o.dirty==Ci&&o.dom==o.contentDOM&&(o.dirty=So),o.update(e,n,r,s)?(this.destroyBetween(this.index,i),this.index++,!0):!1}findIndexWithChild(e){for(;;){let n=e.parentNode;if(!n)return-1;if(n==this.top.contentDOM){let r=e.pmViewDesc;if(r){for(let i=this.index;i<this.top.children.length;i++)if(this.top.children[i]==r)return i}return-1}e=n}}updateNextNode(e,n,r,i,s,o){for(let a=this.index;a<this.top.children.length;a++){let c=this.top.children[a];if(c instanceof Vs){let f=this.preMatch.matched.get(c);if(f!=null&&f!=s)return!1;let d=c.dom,p,m=this.isLocked(d)&&!(e.isText&&c.node&&c.node.isText&&c.nodeDOM.nodeValue==e.text&&c.dirty!=Ci&&wd(n,c.outerDeco));if(!m&&c.update(e,n,r,i))return this.destroyBetween(this.index,a),c.dom!=d&&(this.changed=!0),this.index++,!0;if(!m&&(p=this.recreateWrapper(c,e,n,r,i,o)))return this.destroyBetween(this.index,a),this.top.children[this.index]=p,p.contentDOM&&(p.dirty=So,p.updateChildren(i,o+1),p.dirty=Hr),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,n,r,i,s,o){if(e.dirty||n.isAtom||!e.children.length||!e.node.content.eq(n.content)||!wd(r,e.outerDeco)||!i.eq(e.innerDeco))return null;let a=Vs.create(this.top,n,r,i,s,o);if(a.contentDOM){a.children=e.children,e.children=[];for(let c of a.children)c.parent=a}return e.destroy(),a}addNode(e,n,r,i,s){let o=Vs.create(this.top,e,n,r,i,s);o.contentDOM&&o.updateChildren(i,s+1),this.top.children.splice(this.index++,0,o),this.changed=!0}placeWidget(e,n,r){let i=this.index<this.top.children.length?this.top.children[this.index]:null;if(i&&i.matchesWidget(e)&&(e==i.widget||!i.widget.type.toDOM.parentNode))this.index++;else{let s=new H2(this.top,e,n,r);this.top.children.splice(this.index++,0,s),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],n=this.top;for(;e instanceof $o;)n=e,e=n.children[n.children.length-1];(!e||!(e instanceof Rh)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((tn||$t)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",n),this.addHackNode("BR",this.top))}addHackNode(e,n){if(n==this.top&&this.index<n.children.length&&n.children[this.index].matchesHack(e))this.index++;else{let r=document.createElement(e);e=="IMG"&&(r.className="ProseMirror-separator",r.alt=""),e=="BR"&&(r.className="ProseMirror-trailingBreak");let i=new U2(this.top,[],r,null);n!=this.top?n.children.push(i):n.children.splice(this.index++,0,i),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function X5(t,e){let n=e,r=n.children.length,i=t.childCount,s=new Map,o=[];e:for(;i>0;){let a;for(;;)if(r){let f=n.children[r-1];if(f instanceof $o)n=f,r=f.children.length;else{a=f,r--;break}}else{if(n==e)break e;r=n.parent.children.indexOf(n),n=n.parent}let c=a.node;if(c){if(c!=t.child(i-1))break;--i,s.set(a,i),o.push(a)}}return{index:i,matched:s,matches:o.reverse()}}function J5(t,e){return t.type.side-e.type.side}function Y5(t,e,n,r){let i=e.locals(t),s=0;if(i.length==0){for(let f=0;f<t.childCount;f++){let d=t.child(f);r(d,i,e.forChild(s,d),f),s+=d.nodeSize}return}let o=0,a=[],c=null;for(let f=0;;){let d,p;for(;o<i.length&&i[o].to==s;){let C=i[o++];C.widget&&(d?(p||(p=[d])).push(C):d=C)}if(d)if(p){p.sort(J5);for(let C=0;C<p.length;C++)n(p[C],f,!!c)}else n(d,f,!!c);let m,g;if(c)g=-1,m=c,c=null;else if(f<t.childCount)g=f,m=t.child(f++);else break;for(let C=0;C<a.length;C++)a[C].to<=s&&a.splice(C--,1);for(;o<i.length&&i[o].from<=s&&i[o].to>s;)a.push(i[o++]);let v=s+m.nodeSize;if(m.isText){let C=v;o<i.length&&i[o].from<C&&(C=i[o].from);for(let x=0;x<a.length;x++)a[x].to<C&&(C=a[x].to);C<v&&(c=m.cut(C-s),m=m.cut(0,C-s),v=C,g=-1)}else for(;o<i.length&&i[o].to<v;)o++;let S=m.isInline&&!m.isLeaf?a.filter(C=>!C.inline):a.slice();r(m,S,e.forChild(s,m),g),s=v}}function Q5(t){if(t.nodeName=="UL"||t.nodeName=="OL"){let e=t.style.cssText;t.style.cssText=e+"; list-style: square !important",window.getComputedStyle(t).listStyle,t.style.cssText=e}}function Z5(t,e,n,r){for(let i=0,s=0;i<t.childCount&&s<=r;){let o=t.child(i++),a=s;if(s+=o.nodeSize,!o.isText)continue;let c=o.text;for(;i<t.childCount;){let f=t.child(i++);if(s+=f.nodeSize,!f.isText)break;c+=f.text}if(s>=n){if(s>=r&&c.slice(r-e.length-a,r-a)==e)return r-e.length;let f=a<r?c.lastIndexOf(e,r-a-1):-1;if(f>=0&&f+e.length+a>=n)return a+f;if(n==r&&c.length>=r+e.length-a&&c.slice(r-a,r-a+e.length)==e)return r}}return-1}function w0(t,e,n,r,i){let s=[];for(let o=0,a=0;o<t.length;o++){let c=t[o],f=a,d=a+=c.size;f>=n||d<=e?s.push(c):(f<e&&s.push(c.slice(0,e-f,r)),i&&(s.push(i),i=void 0),d>n&&s.push(c.slice(n-f,c.size,r)))}return s}function Yy(t,e=null){let n=t.domSelectionRange(),r=t.state.doc;if(!n.focusNode)return null;let i=t.docView.nearestDesc(n.focusNode),s=i&&i.size==0,o=t.docView.posFromDOM(n.focusNode,n.focusOffset,1);if(o<0)return null;let a=r.resolve(o),c,f;if(Ph(n)){for(c=o;i&&!i.node;)i=i.parent;let p=i.node;if(i&&p.isAtom&&ye.isSelectable(p)&&i.parent&&!(p.isInline&&T5(n.focusNode,n.focusOffset,i.dom))){let m=i.posBefore;f=new ye(o==m?a:r.resolve(m))}}else{if(n instanceof t.dom.ownerDocument.defaultView.Selection&&n.rangeCount>1){let p=o,m=o;for(let g=0;g<n.rangeCount;g++){let v=n.getRangeAt(g);p=Math.min(p,t.docView.posFromDOM(v.startContainer,v.startOffset,1)),m=Math.max(m,t.docView.posFromDOM(v.endContainer,v.endOffset,-1))}if(p<0)return null;[c,o]=m==t.state.selection.anchor?[m,p]:[p,m],a=r.resolve(o)}else c=t.docView.posFromDOM(n.anchorNode,n.anchorOffset,1);if(c<0)return null}let d=r.resolve(c);if(!f){let p=e=="pointer"||t.state.selection.head<a.pos&&!s?1:-1;f=Qy(t,d,a,p)}return f}function q2(t){return t.editable?t.hasFocus():X2(t)&&document.activeElement&&document.activeElement.contains(t.dom)}function Xi(t,e=!1){let n=t.state.selection;if(G2(t,n),!!q2(t)){if(!e&&t.input.mouseDown&&t.input.mouseDown.allowDefault&&$t){let r=t.domSelectionRange(),i=t.domObserver.currentSelection;if(r.anchorNode&&i.anchorNode&&Fo(r.anchorNode,r.anchorOffset,i.anchorNode,i.anchorOffset)){t.input.mouseDown.delayedSelectionSync=!0,t.domObserver.setCurSelection();return}}if(t.domObserver.disconnectSelection(),t.cursorWrapper)tB(t);else{let{anchor:r,head:i}=n,s,o;Yb&&!(n instanceof ke)&&(n.$from.parent.inlineContent||(s=Qb(t,n.from)),!n.empty&&!n.$from.parent.inlineContent&&(o=Qb(t,n.to))),t.docView.setSelection(r,i,t,e),Yb&&(s&&Zb(s),o&&Zb(o)),n.visible?t.dom.classList.remove("ProseMirror-hideselection"):(t.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&eB(t))}t.domObserver.setCurSelection(),t.domObserver.connectSelection()}}const Yb=tn||$t&&D2<63;function Qb(t,e){let{node:n,offset:r}=t.docView.domFromPos(e,0),i=r<n.childNodes.length?n.childNodes[r]:null,s=r?n.childNodes[r-1]:null;if(tn&&i&&i.contentEditable=="false")return Xm(i);if((!i||i.contentEditable=="false")&&(!s||s.contentEditable=="false")){if(i)return Xm(i);if(s)return Xm(s)}}function Xm(t){return t.contentEditable="true",tn&&t.draggable&&(t.draggable=!1,t.wasDraggable=!0),t}function Zb(t){t.contentEditable="false",t.wasDraggable&&(t.draggable=!0,t.wasDraggable=null)}function eB(t){let e=t.dom.ownerDocument;e.removeEventListener("selectionchange",t.input.hideSelectionGuard);let n=t.domSelectionRange(),r=n.anchorNode,i=n.anchorOffset;e.addEventListener("selectionchange",t.input.hideSelectionGuard=()=>{(n.anchorNode!=r||n.anchorOffset!=i)&&(e.removeEventListener("selectionchange",t.input.hideSelectionGuard),setTimeout(()=>{(!q2(t)||t.state.selection.visible)&&t.dom.classList.remove("ProseMirror-hideselection")},20))})}function tB(t){let e=t.domSelection();if(!e)return;let n=t.cursorWrapper.dom,r=n.nodeName=="IMG";r?e.collapse(n.parentNode,Yt(n)+1):e.collapse(n,0),!r&&!t.state.selection.visible&&Xn&&Us<=11&&(n.disabled=!0,n.disabled=!1)}function G2(t,e){if(e instanceof ye){let n=t.docView.descAt(e.from);n!=t.lastSelectedViewDesc&&(eS(t),n&&n.selectNode(),t.lastSelectedViewDesc=n)}else eS(t)}function eS(t){t.lastSelectedViewDesc&&(t.lastSelectedViewDesc.parent&&t.lastSelectedViewDesc.deselectNode(),t.lastSelectedViewDesc=void 0)}function Qy(t,e,n,r){return t.someProp("createSelectionBetween",i=>i(t,e,n))||ke.between(e,n,r)}function tS(t){return t.editable&&!t.hasFocus()?!1:X2(t)}function X2(t){let e=t.domSelectionRange();if(!e.anchorNode)return!1;try{return t.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(t.editable||t.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function nB(t){let e=t.docView.domFromPos(t.state.selection.anchor,0),n=t.domSelectionRange();return Fo(e.node,e.offset,n.anchorNode,n.anchorOffset)}function b0(t,e){let{$anchor:n,$head:r}=t.selection,i=e>0?n.max(r):n.min(r),s=i.parent.inlineContent?i.depth?t.doc.resolve(e>0?i.after():i.before()):null:i;return s&&Oe.findFrom(s,e)}function bs(t,e){return t.dispatch(t.state.tr.setSelection(e).scrollIntoView()),!0}function nS(t,e,n){let r=t.state.selection;if(r instanceof ke)if(n.indexOf("s")>-1){let{$head:i}=r,s=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter;if(!s||s.isText||!s.isLeaf)return!1;let o=t.state.doc.resolve(i.pos+s.nodeSize*(e<0?-1:1));return bs(t,new ke(r.$anchor,o))}else if(r.empty){if(t.endOfTextblock(e>0?"forward":"backward")){let i=b0(t.state,e);return i&&i instanceof ye?bs(t,i):!1}else if(!(Dr&&n.indexOf("m")>-1)){let i=r.$head,s=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter,o;if(!s||s.isText)return!1;let a=e<0?i.pos-s.nodeSize:i.pos;return s.isAtom||(o=t.docView.descAt(a))&&!o.contentDOM?ye.isSelectable(s)?bs(t,new ye(e<0?t.state.doc.resolve(i.pos-s.nodeSize):i)):Gu?bs(t,new ke(t.state.doc.resolve(e<0?a:a+s.nodeSize))):!1:!1}}else return!1;else{if(r instanceof ye&&r.node.isInline)return bs(t,new ke(e>0?r.$to:r.$from));{let i=b0(t.state,e);return i?bs(t,i):!1}}}function bd(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function lu(t,e){let n=t.pmViewDesc;return n&&n.size==0&&(e<0||t.nextSibling||t.nodeName!="BR")}function ml(t,e){return e<0?rB(t):iB(t)}function rB(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let i,s,o=!1;for($r&&n.nodeType==1&&r<bd(n)&&lu(n.childNodes[r],-1)&&(o=!0);;)if(r>0){if(n.nodeType!=1)break;{let a=n.childNodes[r-1];if(lu(a,-1))i=n,s=--r;else if(a.nodeType==3)n=a,r=n.nodeValue.length;else break}}else{if(J2(n))break;{let a=n.previousSibling;for(;a&&lu(a,-1);)i=n.parentNode,s=Yt(a),a=a.previousSibling;if(a)n=a,r=bd(n);else{if(n=n.parentNode,n==t.dom)break;r=0}}}o?S0(t,n,r):i&&S0(t,i,s)}function iB(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let i=bd(n),s,o;for(;;)if(r<i){if(n.nodeType!=1)break;let a=n.childNodes[r];if(lu(a,1))s=n,o=++r;else break}else{if(J2(n))break;{let a=n.nextSibling;for(;a&&lu(a,1);)s=a.parentNode,o=Yt(a)+1,a=a.nextSibling;if(a)n=a,r=0,i=bd(n);else{if(n=n.parentNode,n==t.dom)break;r=i=0}}}s&&S0(t,s,o)}function J2(t){let e=t.pmViewDesc;return e&&e.node&&e.node.isBlock}function sB(t,e){for(;t&&e==t.childNodes.length&&!qu(t);)e=Yt(t)+1,t=t.parentNode;for(;t&&e<t.childNodes.length;){let n=t.childNodes[e];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=0}}function oB(t,e){for(;t&&!e&&!qu(t);)e=Yt(t),t=t.parentNode;for(;t&&e;){let n=t.childNodes[e-1];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=t.childNodes.length}}function S0(t,e,n){if(e.nodeType!=3){let s,o;(o=sB(e,n))?(e=o,n=0):(s=oB(e,n))&&(e=s,n=s.nodeValue.length)}let r=t.domSelection();if(!r)return;if(Ph(r)){let s=document.createRange();s.setEnd(e,n),s.setStart(e,n),r.removeAllRanges(),r.addRange(s)}else r.extend&&r.extend(e,n);t.domObserver.setCurSelection();let{state:i}=t;setTimeout(()=>{t.state==i&&Xi(t)},50)}function rS(t,e){let n=t.state.doc.resolve(e);if(!($t||I2)&&n.parent.inlineContent){let i=t.coordsAtPos(e);if(e>n.start()){let s=t.coordsAtPos(e-1),o=(s.top+s.bottom)/2;if(o>i.top&&o<i.bottom&&Math.abs(s.left-i.left)>1)return s.left<i.left?"ltr":"rtl"}if(e<n.end()){let s=t.coordsAtPos(e+1),o=(s.top+s.bottom)/2;if(o>i.top&&o<i.bottom&&Math.abs(s.left-i.left)>1)return s.left>i.left?"ltr":"rtl"}}return getComputedStyle(t.dom).direction=="rtl"?"rtl":"ltr"}function iS(t,e,n){let r=t.state.selection;if(r instanceof ke&&!r.empty||n.indexOf("s")>-1||Dr&&n.indexOf("m")>-1)return!1;let{$from:i,$to:s}=r;if(!i.parent.inlineContent||t.endOfTextblock(e<0?"up":"down")){let o=b0(t.state,e);if(o&&o instanceof ye)return bs(t,o)}if(!i.parent.inlineContent){let o=e<0?i:s,a=r instanceof pr?Oe.near(o,e):Oe.findFrom(o,e);return a?bs(t,a):!1}return!1}function sS(t,e){if(!(t.state.selection instanceof ke))return!0;let{$head:n,$anchor:r,empty:i}=t.state.selection;if(!n.sameParent(r))return!0;if(!i)return!1;if(t.endOfTextblock(e>0?"forward":"backward"))return!0;let s=!n.textOffset&&(e<0?n.nodeBefore:n.nodeAfter);if(s&&!s.isText){let o=t.state.tr;return e<0?o.delete(n.pos-s.nodeSize,n.pos):o.delete(n.pos,n.pos+s.nodeSize),t.dispatch(o),!0}return!1}function oS(t,e,n){t.domObserver.stop(),e.contentEditable=n,t.domObserver.start()}function lB(t){if(!tn||t.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:n}=t.domSelectionRange();if(e&&e.nodeType==1&&n==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let r=e.firstChild;oS(t,r,"true"),setTimeout(()=>oS(t,r,"false"),20)}return!1}function aB(t){let e="";return t.ctrlKey&&(e+="c"),t.metaKey&&(e+="m"),t.altKey&&(e+="a"),t.shiftKey&&(e+="s"),e}function uB(t,e){let n=e.keyCode,r=aB(e);if(n==8||Dr&&n==72&&r=="c")return sS(t,-1)||ml(t,-1);if(n==46&&!e.shiftKey||Dr&&n==68&&r=="c")return sS(t,1)||ml(t,1);if(n==13||n==27)return!0;if(n==37||Dr&&n==66&&r=="c"){let i=n==37?rS(t,t.state.selection.from)=="ltr"?-1:1:-1;return nS(t,i,r)||ml(t,i)}else if(n==39||Dr&&n==70&&r=="c"){let i=n==39?rS(t,t.state.selection.from)=="ltr"?1:-1:1;return nS(t,i,r)||ml(t,i)}else{if(n==38||Dr&&n==80&&r=="c")return iS(t,-1,r)||ml(t,-1);if(n==40||Dr&&n==78&&r=="c")return lB(t)||iS(t,1,r)||ml(t,1);if(r==(Dr?"m":"c")&&(n==66||n==73||n==89||n==90))return!0}return!1}function Zy(t,e){t.someProp("transformCopied",g=>{e=g(e,t)});let n=[],{content:r,openStart:i,openEnd:s}=e;for(;i>1&&s>1&&r.childCount==1&&r.firstChild.childCount==1;){i--,s--;let g=r.firstChild;n.push(g.type.name,g.attrs!=g.type.defaultAttrs?g.attrs:null),r=g.content}let o=t.someProp("clipboardSerializer")||Ko.fromSchema(t.state.schema),a=nT(),c=a.createElement("div");c.appendChild(o.serializeFragment(r,{document:a}));let f=c.firstChild,d,p=0;for(;f&&f.nodeType==1&&(d=tT[f.nodeName.toLowerCase()]);){for(let g=d.length-1;g>=0;g--){let v=a.createElement(d[g]);for(;c.firstChild;)v.appendChild(c.firstChild);c.appendChild(v),p++}f=c.firstChild}f&&f.nodeType==1&&f.setAttribute("data-pm-slice",`${i} ${s}${p?` -${p}`:""} ${JSON.stringify(n)}`);let m=t.someProp("clipboardTextSerializer",g=>g(e,t))||e.content.textBetween(0,e.content.size,`

`);return{dom:c,text:m,slice:e}}function Y2(t,e,n,r,i){let s=i.parent.type.spec.code,o,a;if(!n&&!e)return null;let c=!!e&&(r||s||!n);if(c){if(t.someProp("transformPastedText",m=>{e=m(e,s||r,t)}),s)return a=new oe(X.from(t.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0),t.someProp("transformPasted",m=>{a=m(a,t,!0)}),a;let p=t.someProp("clipboardTextParser",m=>m(e,i,r,t));if(p)a=p;else{let m=i.marks(),{schema:g}=t.state,v=Ko.fromSchema(g);o=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(S=>{let C=o.appendChild(document.createElement("p"));S&&C.appendChild(v.serializeNode(g.text(S,m)))})}}else t.someProp("transformPastedHTML",p=>{n=p(n,t)}),o=hB(n),Gu&&pB(o);let f=o&&o.querySelector("[data-pm-slice]"),d=f&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(f.getAttribute("data-pm-slice")||"");if(d&&d[3])for(let p=+d[3];p>0;p--){let m=o.firstChild;for(;m&&m.nodeType!=1;)m=m.nextSibling;if(!m)break;o=m}if(a||(a=(t.someProp("clipboardParser")||t.someProp("domParser")||Hs.fromSchema(t.state.schema)).parseSlice(o,{preserveWhitespace:!!(c||d),context:i,ruleFromNode(m){return m.nodeName=="BR"&&!m.nextSibling&&m.parentNode&&!cB.test(m.parentNode.nodeName)?{ignore:!0}:null}})),d)a=mB(lS(a,+d[1],+d[2]),d[4]);else if(a=oe.maxOpen(fB(a.content,i),!0),a.openStart||a.openEnd){let p=0,m=0;for(let g=a.content.firstChild;p<a.openStart&&!g.type.spec.isolating;p++,g=g.firstChild);for(let g=a.content.lastChild;m<a.openEnd&&!g.type.spec.isolating;m++,g=g.lastChild);a=lS(a,p,m)}return t.someProp("transformPasted",p=>{a=p(a,t,c)}),a}const cB=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function fB(t,e){if(t.childCount<2)return t;for(let n=e.depth;n>=0;n--){let i=e.node(n).contentMatchAt(e.index(n)),s,o=[];if(t.forEach(a=>{if(!o)return;let c=i.findWrapping(a.type),f;if(!c)return o=null;if(f=o.length&&s.length&&Z2(c,s,a,o[o.length-1],0))o[o.length-1]=f;else{o.length&&(o[o.length-1]=eT(o[o.length-1],s.length));let d=Q2(a,c);o.push(d),i=i.matchType(d.type),s=c}}),o)return X.from(o)}return t}function Q2(t,e,n=0){for(let r=e.length-1;r>=n;r--)t=e[r].create(null,X.from(t));return t}function Z2(t,e,n,r,i){if(i<t.length&&i<e.length&&t[i]==e[i]){let s=Z2(t,e,n,r.lastChild,i+1);if(s)return r.copy(r.content.replaceChild(r.childCount-1,s));if(r.contentMatchAt(r.childCount).matchType(i==t.length-1?n.type:t[i+1]))return r.copy(r.content.append(X.from(Q2(n,t,i+1))))}}function eT(t,e){if(e==0)return t;let n=t.content.replaceChild(t.childCount-1,eT(t.lastChild,e-1)),r=t.contentMatchAt(t.childCount).fillBefore(X.empty,!0);return t.copy(n.append(r))}function k0(t,e,n,r,i,s){let o=e<0?t.firstChild:t.lastChild,a=o.content;return t.childCount>1&&(s=0),i<r-1&&(a=k0(a,e,n,r,i+1,s)),i>=n&&(a=e<0?o.contentMatchAt(0).fillBefore(a,s<=i).append(a):a.append(o.contentMatchAt(o.childCount).fillBefore(X.empty,!0))),t.replaceChild(e<0?0:t.childCount-1,o.copy(a))}function lS(t,e,n){return e<t.openStart&&(t=new oe(k0(t.content,-1,e,t.openStart,0,t.openEnd),e,t.openEnd)),n<t.openEnd&&(t=new oe(k0(t.content,1,n,t.openEnd,0,0),t.openStart,n)),t}const tT={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let aS=null;function nT(){return aS||(aS=document.implementation.createHTMLDocument("title"))}let Jm=null;function dB(t){let e=window.trustedTypes;return e?(Jm||(Jm=e.defaultPolicy||e.createPolicy("ProseMirrorClipboard",{createHTML:n=>n})),Jm.createHTML(t)):t}function hB(t){let e=/^(\s*<meta [^>]*>)*/.exec(t);e&&(t=t.slice(e[0].length));let n=nT().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(t),i;if((i=r&&tT[r[1].toLowerCase()])&&(t=i.map(s=>"<"+s+">").join("")+t+i.map(s=>"</"+s+">").reverse().join("")),n.innerHTML=dB(t),i)for(let s=0;s<i.length;s++)n=n.querySelector(i[s])||n;return n}function pB(t){let e=t.querySelectorAll($t?"span:not([class]):not([style])":"span.Apple-converted-space");for(let n=0;n<e.length;n++){let r=e[n];r.childNodes.length==1&&r.textContent==""&&r.parentNode&&r.parentNode.replaceChild(t.ownerDocument.createTextNode(" "),r)}}function mB(t,e){if(!t.size)return t;let n=t.content.firstChild.type.schema,r;try{r=JSON.parse(e)}catch{return t}let{content:i,openStart:s,openEnd:o}=t;for(let a=r.length-2;a>=0;a-=2){let c=n.nodes[r[a]];if(!c||c.hasRequiredAttrs())break;i=X.from(c.create(r[a+1],i)),s++,o++}return new oe(i,s,o)}const Nn={},Mn={},gB={touchstart:!0,touchmove:!0};class yB{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:"",button:0},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.badSafariComposition=!1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function vB(t){for(let e in Nn){let n=Nn[e];t.dom.addEventListener(e,t.input.eventHandlers[e]=r=>{wB(t,r)&&!ev(t,r)&&(t.editable||!(r.type in Mn))&&n(t,r)},gB[e]?{passive:!0}:void 0)}tn&&t.dom.addEventListener("input",()=>null),C0(t)}function Ps(t,e){t.input.lastSelectionOrigin=e,t.input.lastSelectionTime=Date.now()}function xB(t){t.domObserver.stop();for(let e in t.input.eventHandlers)t.dom.removeEventListener(e,t.input.eventHandlers[e]);clearTimeout(t.input.composingTimeout),clearTimeout(t.input.lastIOSEnterFallbackTimeout)}function C0(t){t.someProp("handleDOMEvents",e=>{for(let n in e)t.input.eventHandlers[n]||t.dom.addEventListener(n,t.input.eventHandlers[n]=r=>ev(t,r))})}function ev(t,e){return t.someProp("handleDOMEvents",n=>{let r=n[e.type];return r?r(t,e)||e.defaultPrevented:!1})}function wB(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n=e.target;n!=t.dom;n=n.parentNode)if(!n||n.nodeType==11||n.pmViewDesc&&n.pmViewDesc.stopEvent(e))return!1;return!0}function bB(t,e){!ev(t,e)&&Nn[e.type]&&(t.editable||!(e.type in Mn))&&Nn[e.type](t,e)}Mn.keydown=(t,e)=>{let n=e;if(t.input.shiftKey=n.keyCode==16||n.shiftKey,!iT(t,n)&&(t.input.lastKeyCode=n.keyCode,t.input.lastKeyCodeTime=Date.now(),!(Ki&&$t&&n.keyCode==13)))if(n.keyCode!=229&&t.domObserver.forceFlush(),ea&&n.keyCode==13&&!n.ctrlKey&&!n.altKey&&!n.metaKey){let r=Date.now();t.input.lastIOSEnter=r,t.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{t.input.lastIOSEnter==r&&(t.someProp("handleKeyDown",i=>i(t,vo(13,"Enter"))),t.input.lastIOSEnter=0)},200)}else t.someProp("handleKeyDown",r=>r(t,n))||uB(t,n)?n.preventDefault():Ps(t,"key")};Mn.keyup=(t,e)=>{e.keyCode==16&&(t.input.shiftKey=!1)};Mn.keypress=(t,e)=>{let n=e;if(iT(t,n)||!n.charCode||n.ctrlKey&&!n.altKey||Dr&&n.metaKey)return;if(t.someProp("handleKeyPress",i=>i(t,n))){n.preventDefault();return}let r=t.state.selection;if(!(r instanceof ke)||!r.$from.sameParent(r.$to)){let i=String.fromCharCode(n.charCode),s=()=>t.state.tr.insertText(i).scrollIntoView();!/[\r\n]/.test(i)&&!t.someProp("handleTextInput",o=>o(t,r.$from.pos,r.$to.pos,i,s))&&t.dispatch(s()),n.preventDefault()}};function Dh(t){return{left:t.clientX,top:t.clientY}}function SB(t,e){let n=e.x-t.clientX,r=e.y-t.clientY;return n*n+r*r<100}function tv(t,e,n,r,i){if(r==-1)return!1;let s=t.state.doc.resolve(r);for(let o=s.depth+1;o>0;o--)if(t.someProp(e,a=>o>s.depth?a(t,n,s.nodeAfter,s.before(o),i,!0):a(t,n,s.node(o),s.before(o),i,!1)))return!0;return!1}function Hl(t,e,n){if(t.focused||t.focus(),t.state.selection.eq(e))return;let r=t.state.tr.setSelection(e);r.setMeta("pointer",!0),t.dispatch(r)}function kB(t,e){if(e==-1)return!1;let n=t.state.doc.resolve(e),r=n.nodeAfter;return r&&r.isAtom&&ye.isSelectable(r)?(Hl(t,new ye(n)),!0):!1}function CB(t,e){if(e==-1)return!1;let n=t.state.selection,r,i;n instanceof ye&&(r=n.node);let s=t.state.doc.resolve(e);for(let o=s.depth+1;o>0;o--){let a=o>s.depth?s.nodeAfter:s.node(o);if(ye.isSelectable(a)){r&&n.$from.depth>0&&o>=n.$from.depth&&s.before(n.$from.depth+1)==n.$from.pos?i=s.before(n.$from.depth):i=s.before(o);break}}return i!=null?(Hl(t,ye.create(t.state.doc,i)),!0):!1}function EB(t,e,n,r,i){return tv(t,"handleClickOn",e,n,r)||t.someProp("handleClick",s=>s(t,e,r))||(i?CB(t,n):kB(t,n))}function TB(t,e,n,r){return tv(t,"handleDoubleClickOn",e,n,r)||t.someProp("handleDoubleClick",i=>i(t,e,r))}function NB(t,e,n,r){return tv(t,"handleTripleClickOn",e,n,r)||t.someProp("handleTripleClick",i=>i(t,e,r))||MB(t,n,r)}function MB(t,e,n){if(n.button!=0)return!1;let r=t.state.doc;if(e==-1)return r.inlineContent?(Hl(t,ke.create(r,0,r.content.size)),!0):!1;let i=r.resolve(e);for(let s=i.depth+1;s>0;s--){let o=s>i.depth?i.nodeAfter:i.node(s),a=i.before(s);if(o.inlineContent)Hl(t,ke.create(r,a+1,a+1+o.content.size));else if(ye.isSelectable(o))Hl(t,ye.create(r,a));else continue;return!0}}function nv(t){return Sd(t)}const rT=Dr?"metaKey":"ctrlKey";Nn.mousedown=(t,e)=>{let n=e;t.input.shiftKey=n.shiftKey;let r=nv(t),i=Date.now(),s="singleClick";i-t.input.lastClick.time<500&&SB(n,t.input.lastClick)&&!n[rT]&&t.input.lastClick.button==n.button&&(t.input.lastClick.type=="singleClick"?s="doubleClick":t.input.lastClick.type=="doubleClick"&&(s="tripleClick")),t.input.lastClick={time:i,x:n.clientX,y:n.clientY,type:s,button:n.button};let o=t.posAtCoords(Dh(n));o&&(s=="singleClick"?(t.input.mouseDown&&t.input.mouseDown.done(),t.input.mouseDown=new _B(t,o,n,!!r)):(s=="doubleClick"?TB:NB)(t,o.pos,o.inside,n)?n.preventDefault():Ps(t,"pointer"))};class _B{constructor(e,n,r,i){this.view=e,this.pos=n,this.event=r,this.flushed=i,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!r[rT],this.allowDefault=r.shiftKey;let s,o;if(n.inside>-1)s=e.state.doc.nodeAt(n.inside),o=n.inside;else{let d=e.state.doc.resolve(n.pos);s=d.parent,o=d.depth?d.before():0}const a=i?null:r.target,c=a?e.docView.nearestDesc(a,!0):null;this.target=c&&c.nodeDOM.nodeType==1?c.nodeDOM:null;let{selection:f}=e.state;(r.button==0&&s.type.spec.draggable&&s.type.spec.selectable!==!1||f instanceof ye&&f.from<=o&&f.to>o)&&(this.mightDrag={node:s,pos:o,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&$r&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),Ps(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>Xi(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let n=this.pos;this.view.state.doc!=this.startDoc&&(n=this.view.posAtCoords(Dh(e))),this.updateAllowDefault(e),this.allowDefault||!n?Ps(this.view,"pointer"):EB(this.view,n.pos,n.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||tn&&this.mightDrag&&!this.mightDrag.node.isAtom||$t&&!this.view.state.selection.visible&&Math.min(Math.abs(n.pos-this.view.state.selection.from),Math.abs(n.pos-this.view.state.selection.to))<=2)?(Hl(this.view,Oe.near(this.view.state.doc.resolve(n.pos))),e.preventDefault()):Ps(this.view,"pointer")}move(e){this.updateAllowDefault(e),Ps(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}Nn.touchstart=t=>{t.input.lastTouch=Date.now(),nv(t),Ps(t,"pointer")};Nn.touchmove=t=>{t.input.lastTouch=Date.now(),Ps(t,"pointer")};Nn.contextmenu=t=>nv(t);function iT(t,e){return t.composing?!0:tn&&Math.abs(e.timeStamp-t.input.compositionEndedAt)<500?(t.input.compositionEndedAt=-2e8,!0):!1}const OB=Ki?5e3:-1;Mn.compositionstart=Mn.compositionupdate=t=>{if(!t.composing){t.domObserver.flush();let{state:e}=t,n=e.selection.$to;if(e.selection instanceof ke&&(e.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some(r=>r.type.spec.inclusive===!1)||$t&&I2&&AB(t)))t.markCursor=t.state.storedMarks||n.marks(),Sd(t,!0),t.markCursor=null;else if(Sd(t,!e.selection.empty),$r&&e.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length){let r=t.domSelectionRange();for(let i=r.focusNode,s=r.focusOffset;i&&i.nodeType==1&&s!=0;){let o=s<0?i.lastChild:i.childNodes[s-1];if(!o)break;if(o.nodeType==3){let a=t.domSelection();a&&a.collapse(o,o.nodeValue.length);break}else i=o,s=-1}}t.input.composing=!0}sT(t,OB)};function AB(t){let{focusNode:e,focusOffset:n}=t.domSelectionRange();if(!e||e.nodeType!=1||n>=e.childNodes.length)return!1;let r=e.childNodes[n];return r.nodeType==1&&r.contentEditable=="false"}Mn.compositionend=(t,e)=>{t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=e.timeStamp,t.input.compositionPendingChanges=t.domObserver.pendingRecords().length?t.input.compositionID:0,t.input.compositionNode=null,t.input.badSafariComposition?t.domObserver.forceFlush():t.input.compositionPendingChanges&&Promise.resolve().then(()=>t.domObserver.flush()),t.input.compositionID++,sT(t,20))};function sT(t,e){clearTimeout(t.input.composingTimeout),e>-1&&(t.input.composingTimeout=setTimeout(()=>Sd(t),e))}function oT(t){for(t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=RB());t.input.compositionNodes.length>0;)t.input.compositionNodes.pop().markParentsDirty()}function PB(t){let e=t.domSelectionRange();if(!e.focusNode)return null;let n=C5(e.focusNode,e.focusOffset),r=E5(e.focusNode,e.focusOffset);if(n&&r&&n!=r){let i=r.pmViewDesc,s=t.domObserver.lastChangedTextNode;if(n==s||r==s)return s;if(!i||!i.isText(r.nodeValue))return r;if(t.input.compositionNode==r){let o=n.pmViewDesc;if(!(!o||!o.isText(n.nodeValue)))return r}}return n||r}function RB(){let t=document.createEvent("Event");return t.initEvent("event",!0,!0),t.timeStamp}function Sd(t,e=!1){if(!(Ki&&t.domObserver.flushingSoon>=0)){if(t.domObserver.forceFlush(),oT(t),e||t.docView&&t.docView.dirty){let n=Yy(t),r=t.state.selection;return n&&!n.eq(r)?t.dispatch(t.state.tr.setSelection(n)):(t.markCursor||e)&&!r.$from.node(r.$from.sharedDepth(r.to)).inlineContent?t.dispatch(t.state.tr.deleteSelection()):t.updateState(t.state),!0}return!1}}function DB(t,e){if(!t.dom.parentNode)return;let n=t.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(e),n.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),i=document.createRange();i.selectNodeContents(e),t.dom.blur(),r.removeAllRanges(),r.addRange(i),setTimeout(()=>{n.parentNode&&n.parentNode.removeChild(n),t.focus()},50)}const Iu=Xn&&Us<15||ea&&_5<604;Nn.copy=Mn.cut=(t,e)=>{let n=e,r=t.state.selection,i=n.type=="cut";if(r.empty)return;let s=Iu?null:n.clipboardData,o=r.content(),{dom:a,text:c}=Zy(t,o);s?(n.preventDefault(),s.clearData(),s.setData("text/html",a.innerHTML),s.setData("text/plain",c)):DB(t,a),i&&t.dispatch(t.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function IB(t){return t.openStart==0&&t.openEnd==0&&t.content.childCount==1?t.content.firstChild:null}function LB(t,e){if(!t.dom.parentNode)return;let n=t.input.shiftKey||t.state.selection.$from.parent.type.spec.code,r=t.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let i=t.input.shiftKey&&t.input.lastKeyCode!=45;setTimeout(()=>{t.focus(),r.parentNode&&r.parentNode.removeChild(r),n?Lu(t,r.value,null,i,e):Lu(t,r.textContent,r.innerHTML,i,e)},50)}function Lu(t,e,n,r,i){let s=Y2(t,e,n,r,t.state.selection.$from);if(t.someProp("handlePaste",c=>c(t,i,s||oe.empty)))return!0;if(!s)return!1;let o=IB(s),a=o?t.state.tr.replaceSelectionWith(o,r):t.state.tr.replaceSelection(s);return t.dispatch(a.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function lT(t){let e=t.getData("text/plain")||t.getData("Text");if(e)return e;let n=t.getData("text/uri-list");return n?n.replace(/\r?\n/g," "):""}Mn.paste=(t,e)=>{let n=e;if(t.composing&&!Ki)return;let r=Iu?null:n.clipboardData,i=t.input.shiftKey&&t.input.lastKeyCode!=45;r&&Lu(t,lT(r),r.getData("text/html"),i,n)?n.preventDefault():LB(t,n)};class aT{constructor(e,n,r){this.slice=e,this.move=n,this.node=r}}const jB=Dr?"altKey":"ctrlKey";function uT(t,e){let n=t.someProp("dragCopies",r=>!r(e));return n??!e[jB]}Nn.dragstart=(t,e)=>{let n=e,r=t.input.mouseDown;if(r&&r.done(),!n.dataTransfer)return;let i=t.state.selection,s=i.empty?null:t.posAtCoords(Dh(n)),o;if(!(s&&s.pos>=i.from&&s.pos<=(i instanceof ye?i.to-1:i.to))){if(r&&r.mightDrag)o=ye.create(t.state.doc,r.mightDrag.pos);else if(n.target&&n.target.nodeType==1){let p=t.docView.nearestDesc(n.target,!0);p&&p.node.type.spec.draggable&&p!=t.docView&&(o=ye.create(t.state.doc,p.posBefore))}}let a=(o||t.state.selection).content(),{dom:c,text:f,slice:d}=Zy(t,a);(!n.dataTransfer.files.length||!$t||D2>120)&&n.dataTransfer.clearData(),n.dataTransfer.setData(Iu?"Text":"text/html",c.innerHTML),n.dataTransfer.effectAllowed="copyMove",Iu||n.dataTransfer.setData("text/plain",f),t.dragging=new aT(d,uT(t,n),o)};Nn.dragend=t=>{let e=t.dragging;window.setTimeout(()=>{t.dragging==e&&(t.dragging=null)},50)};Mn.dragover=Mn.dragenter=(t,e)=>e.preventDefault();Mn.drop=(t,e)=>{try{zB(t,e,t.dragging)}finally{t.dragging=null}};function zB(t,e,n){if(!e.dataTransfer)return;let r=t.posAtCoords(Dh(e));if(!r)return;let i=t.state.doc.resolve(r.pos),s=n&&n.slice;s?t.someProp("transformPasted",g=>{s=g(s,t,!1)}):s=Y2(t,lT(e.dataTransfer),Iu?null:e.dataTransfer.getData("text/html"),!1,i);let o=!!(n&&uT(t,e));if(t.someProp("handleDrop",g=>g(t,e,s||oe.empty,o))){e.preventDefault();return}if(!s)return;e.preventDefault();let a=s?h2(t.state.doc,i.pos,s):i.pos;a==null&&(a=i.pos);let c=t.state.tr;if(o){let{node:g}=n;g?g.replace(c):c.deleteSelection()}let f=c.mapping.map(a),d=s.openStart==0&&s.openEnd==0&&s.content.childCount==1,p=c.doc;if(d?c.replaceRangeWith(f,f,s.content.firstChild):c.replaceRange(f,f,s),c.doc.eq(p))return;let m=c.doc.resolve(f);if(d&&ye.isSelectable(s.content.firstChild)&&m.nodeAfter&&m.nodeAfter.sameMarkup(s.content.firstChild))c.setSelection(new ye(m));else{let g=c.mapping.map(a);c.mapping.maps[c.mapping.maps.length-1].forEach((v,S,C,x)=>g=x),c.setSelection(Qy(t,m,c.doc.resolve(g)))}t.focus(),t.dispatch(c.setMeta("uiEvent","drop"))}Nn.focus=t=>{t.input.lastFocus=Date.now(),t.focused||(t.domObserver.stop(),t.dom.classList.add("ProseMirror-focused"),t.domObserver.start(),t.focused=!0,setTimeout(()=>{t.docView&&t.hasFocus()&&!t.domObserver.currentSelection.eq(t.domSelectionRange())&&Xi(t)},20))};Nn.blur=(t,e)=>{let n=e;t.focused&&(t.domObserver.stop(),t.dom.classList.remove("ProseMirror-focused"),t.domObserver.start(),n.relatedTarget&&t.dom.contains(n.relatedTarget)&&t.domObserver.currentSelection.clear(),t.focused=!1)};Nn.beforeinput=(t,e)=>{if($t&&Ki&&e.inputType=="deleteContentBackward"){t.domObserver.flushSoon();let{domChangeCount:r}=t.input;setTimeout(()=>{if(t.input.domChangeCount!=r||(t.dom.blur(),t.focus(),t.someProp("handleKeyDown",s=>s(t,vo(8,"Backspace")))))return;let{$cursor:i}=t.state.selection;i&&i.pos>0&&t.dispatch(t.state.tr.delete(i.pos-1,i.pos).scrollIntoView())},50)}};for(let t in Mn)Nn[t]=Mn[t];function ju(t,e){if(t==e)return!0;for(let n in t)if(t[n]!==e[n])return!1;for(let n in e)if(!(n in t))return!1;return!0}class kd{constructor(e,n){this.toDOM=e,this.spec=n||Oo,this.side=this.spec.side||0}map(e,n,r,i){let{pos:s,deleted:o}=e.mapResult(n.from+i,this.side<0?-1:1);return o?null:new En(s-r,s-r,this)}valid(){return!0}eq(e){return this==e||e instanceof kd&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&ju(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class Ws{constructor(e,n){this.attrs=e,this.spec=n||Oo}map(e,n,r,i){let s=e.map(n.from+i,this.spec.inclusiveStart?-1:1)-r,o=e.map(n.to+i,this.spec.inclusiveEnd?1:-1)-r;return s>=o?null:new En(s,o,this)}valid(e,n){return n.from<n.to}eq(e){return this==e||e instanceof Ws&&ju(this.attrs,e.attrs)&&ju(this.spec,e.spec)}static is(e){return e.type instanceof Ws}destroy(){}}class rv{constructor(e,n){this.attrs=e,this.spec=n||Oo}map(e,n,r,i){let s=e.mapResult(n.from+i,1);if(s.deleted)return null;let o=e.mapResult(n.to+i,-1);return o.deleted||o.pos<=s.pos?null:new En(s.pos-r,o.pos-r,this)}valid(e,n){let{index:r,offset:i}=e.content.findIndex(n.from),s;return i==n.from&&!(s=e.child(r)).isText&&i+s.nodeSize==n.to}eq(e){return this==e||e instanceof rv&&ju(this.attrs,e.attrs)&&ju(this.spec,e.spec)}destroy(){}}class En{constructor(e,n,r){this.from=e,this.to=n,this.type=r}copy(e,n){return new En(e,n,this.type)}eq(e,n=0){return this.type.eq(e.type)&&this.from+n==e.from&&this.to+n==e.to}map(e,n,r){return this.type.map(e,this,n,r)}static widget(e,n,r){return new En(e,e,new kd(n,r))}static inline(e,n,r,i){return new En(e,n,new Ws(r,i))}static node(e,n,r,i){return new En(e,n,new rv(r,i))}get spec(){return this.type.spec}get inline(){return this.type instanceof Ws}get widget(){return this.type instanceof kd}}const vl=[],Oo={};class ut{constructor(e,n){this.local=e.length?e:vl,this.children=n.length?n:vl}static create(e,n){return n.length?Cd(n,e,0,Oo):un}find(e,n,r){let i=[];return this.findInner(e??0,n??1e9,i,0,r),i}findInner(e,n,r,i,s){for(let o=0;o<this.local.length;o++){let a=this.local[o];a.from<=n&&a.to>=e&&(!s||s(a.spec))&&r.push(a.copy(a.from+i,a.to+i))}for(let o=0;o<this.children.length;o+=3)if(this.children[o]<n&&this.children[o+1]>e){let a=this.children[o]+1;this.children[o+2].findInner(e-a,n-a,r,i+a,s)}}map(e,n,r){return this==un||e.maps.length==0?this:this.mapInner(e,n,0,0,r||Oo)}mapInner(e,n,r,i,s){let o;for(let a=0;a<this.local.length;a++){let c=this.local[a].map(e,r,i);c&&c.type.valid(n,c)?(o||(o=[])).push(c):s.onRemove&&s.onRemove(this.local[a].spec)}return this.children.length?BB(this.children,o||[],e,n,r,i,s):o?new ut(o.sort(Ao),vl):un}add(e,n){return n.length?this==un?ut.create(e,n):this.addInner(e,n,0):this}addInner(e,n,r){let i,s=0;e.forEach((a,c)=>{let f=c+r,d;if(d=fT(n,a,f)){for(i||(i=this.children.slice());s<i.length&&i[s]<c;)s+=3;i[s]==c?i[s+2]=i[s+2].addInner(a,d,f+1):i.splice(s,0,c,c+a.nodeSize,Cd(d,a,f+1,Oo)),s+=3}});let o=cT(s?dT(n):n,-r);for(let a=0;a<o.length;a++)o[a].type.valid(e,o[a])||o.splice(a--,1);return new ut(o.length?this.local.concat(o).sort(Ao):this.local,i||this.children)}remove(e){return e.length==0||this==un?this:this.removeInner(e,0)}removeInner(e,n){let r=this.children,i=this.local;for(let s=0;s<r.length;s+=3){let o,a=r[s]+n,c=r[s+1]+n;for(let d=0,p;d<e.length;d++)(p=e[d])&&p.from>a&&p.to<c&&(e[d]=null,(o||(o=[])).push(p));if(!o)continue;r==this.children&&(r=this.children.slice());let f=r[s+2].removeInner(o,a+1);f!=un?r[s+2]=f:(r.splice(s,3),s-=3)}if(i.length){for(let s=0,o;s<e.length;s++)if(o=e[s])for(let a=0;a<i.length;a++)i[a].eq(o,n)&&(i==this.local&&(i=this.local.slice()),i.splice(a--,1))}return r==this.children&&i==this.local?this:i.length||r.length?new ut(i,r):un}forChild(e,n){if(this==un)return this;if(n.isLeaf)return ut.empty;let r,i;for(let a=0;a<this.children.length;a+=3)if(this.children[a]>=e){this.children[a]==e&&(r=this.children[a+2]);break}let s=e+1,o=s+n.content.size;for(let a=0;a<this.local.length;a++){let c=this.local[a];if(c.from<o&&c.to>s&&c.type instanceof Ws){let f=Math.max(s,c.from)-s,d=Math.min(o,c.to)-s;f<d&&(i||(i=[])).push(c.copy(f,d))}}if(i){let a=new ut(i.sort(Ao),vl);return r?new Ts([a,r]):a}return r||un}eq(e){if(this==e)return!0;if(!(e instanceof ut)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let n=0;n<this.local.length;n++)if(!this.local[n].eq(e.local[n]))return!1;for(let n=0;n<this.children.length;n+=3)if(this.children[n]!=e.children[n]||this.children[n+1]!=e.children[n+1]||!this.children[n+2].eq(e.children[n+2]))return!1;return!0}locals(e){return iv(this.localsInner(e))}localsInner(e){if(this==un)return vl;if(e.inlineContent||!this.local.some(Ws.is))return this.local;let n=[];for(let r=0;r<this.local.length;r++)this.local[r].type instanceof Ws||n.push(this.local[r]);return n}forEachSet(e){e(this)}}ut.empty=new ut([],[]);ut.removeOverlap=iv;const un=ut.empty;class Ts{constructor(e){this.members=e}map(e,n){const r=this.members.map(i=>i.map(e,n,Oo));return Ts.from(r)}forChild(e,n){if(n.isLeaf)return ut.empty;let r=[];for(let i=0;i<this.members.length;i++){let s=this.members[i].forChild(e,n);s!=un&&(s instanceof Ts?r=r.concat(s.members):r.push(s))}return Ts.from(r)}eq(e){if(!(e instanceof Ts)||e.members.length!=this.members.length)return!1;for(let n=0;n<this.members.length;n++)if(!this.members[n].eq(e.members[n]))return!1;return!0}locals(e){let n,r=!0;for(let i=0;i<this.members.length;i++){let s=this.members[i].localsInner(e);if(s.length)if(!n)n=s;else{r&&(n=n.slice(),r=!1);for(let o=0;o<s.length;o++)n.push(s[o])}}return n?iv(r?n:n.sort(Ao)):vl}static from(e){switch(e.length){case 0:return un;case 1:return e[0];default:return new Ts(e.every(n=>n instanceof ut)?e:e.reduce((n,r)=>n.concat(r instanceof ut?r:r.members),[]))}}forEachSet(e){for(let n=0;n<this.members.length;n++)this.members[n].forEachSet(e)}}function BB(t,e,n,r,i,s,o){let a=t.slice();for(let f=0,d=s;f<n.maps.length;f++){let p=0;n.maps[f].forEach((m,g,v,S)=>{let C=S-v-(g-m);for(let x=0;x<a.length;x+=3){let w=a[x+1];if(w<0||m>w+d-p)continue;let E=a[x]+d-p;g>=E?a[x+1]=m<=E?-2:-1:m>=d&&C&&(a[x]+=C,a[x+1]+=C)}p+=C}),d=n.maps[f].map(d,-1)}let c=!1;for(let f=0;f<a.length;f+=3)if(a[f+1]<0){if(a[f+1]==-2){c=!0,a[f+1]=-1;continue}let d=n.map(t[f]+s),p=d-i;if(p<0||p>=r.content.size){c=!0;continue}let m=n.map(t[f+1]+s,-1),g=m-i,{index:v,offset:S}=r.content.findIndex(p),C=r.maybeChild(v);if(C&&S==p&&S+C.nodeSize==g){let x=a[f+2].mapInner(n,C,d+1,t[f]+s+1,o);x!=un?(a[f]=p,a[f+1]=g,a[f+2]=x):(a[f+1]=-2,c=!0)}else c=!0}if(c){let f=FB(a,t,e,n,i,s,o),d=Cd(f,r,0,o);e=d.local;for(let p=0;p<a.length;p+=3)a[p+1]<0&&(a.splice(p,3),p-=3);for(let p=0,m=0;p<d.children.length;p+=3){let g=d.children[p];for(;m<a.length&&a[m]<g;)m+=3;a.splice(m,0,d.children[p],d.children[p+1],d.children[p+2])}}return new ut(e.sort(Ao),a)}function cT(t,e){if(!e||!t.length)return t;let n=[];for(let r=0;r<t.length;r++){let i=t[r];n.push(new En(i.from+e,i.to+e,i.type))}return n}function FB(t,e,n,r,i,s,o){function a(c,f){for(let d=0;d<c.local.length;d++){let p=c.local[d].map(r,i,f);p?n.push(p):o.onRemove&&o.onRemove(c.local[d].spec)}for(let d=0;d<c.children.length;d+=3)a(c.children[d+2],c.children[d]+f+1)}for(let c=0;c<t.length;c+=3)t[c+1]==-1&&a(t[c+2],e[c]+s+1);return n}function fT(t,e,n){if(e.isLeaf)return null;let r=n+e.nodeSize,i=null;for(let s=0,o;s<t.length;s++)(o=t[s])&&o.from>n&&o.to<r&&((i||(i=[])).push(o),t[s]=null);return i}function dT(t){let e=[];for(let n=0;n<t.length;n++)t[n]!=null&&e.push(t[n]);return e}function Cd(t,e,n,r){let i=[],s=!1;e.forEach((a,c)=>{let f=fT(t,a,c+n);if(f){s=!0;let d=Cd(f,a,n+c+1,r);d!=un&&i.push(c,c+a.nodeSize,d)}});let o=cT(s?dT(t):t,-n).sort(Ao);for(let a=0;a<o.length;a++)o[a].type.valid(e,o[a])||(r.onRemove&&r.onRemove(o[a].spec),o.splice(a--,1));return o.length||i.length?new ut(o,i):un}function Ao(t,e){return t.from-e.from||t.to-e.to}function iv(t){let e=t;for(let n=0;n<e.length-1;n++){let r=e[n];if(r.from!=r.to)for(let i=n+1;i<e.length;i++){let s=e[i];if(s.from==r.from){s.to!=r.to&&(e==t&&(e=t.slice()),e[i]=s.copy(s.from,r.to),uS(e,i+1,s.copy(r.to,s.to)));continue}else{s.from<r.to&&(e==t&&(e=t.slice()),e[n]=r.copy(r.from,s.from),uS(e,i,r.copy(s.from,r.to)));break}}}return e}function uS(t,e,n){for(;e<t.length&&Ao(n,t[e])>0;)e++;t.splice(e,0,n)}function Ym(t){let e=[];return t.someProp("decorations",n=>{let r=n(t.state);r&&r!=un&&e.push(r)}),t.cursorWrapper&&e.push(ut.create(t.state.doc,[t.cursorWrapper.deco])),Ts.from(e)}const $B={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},HB=Xn&&Us<=11;class UB{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class VB{constructor(e,n){this.view=e,this.handleDOMChange=n,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new UB,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(r=>{for(let i=0;i<r.length;i++)this.queue.push(r[i]);Xn&&Us<=11&&r.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():tn&&e.composing&&r.some(i=>i.type=="childList"&&i.target.nodeName=="TR")?(e.input.badSafariComposition=!0,this.flushSoon()):this.flush()}),HB&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,$B)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let n=0;n<e.length;n++)this.queue.push(e[n]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(tS(this.view)){if(this.suppressingSelectionUpdates)return Xi(this.view);if(Xn&&Us<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&Fo(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let n=new Set,r;for(let s=e.focusNode;s;s=Zl(s))n.add(s);for(let s=e.anchorNode;s;s=Zl(s))if(n.has(s)){r=s;break}let i=r&&this.view.docView.nearestDesc(r);if(i&&i.ignoreMutation({type:"selection",target:r.nodeType==3?r.parentNode:r}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let n=this.pendingRecords();n.length&&(this.queue=[]);let r=e.domSelectionRange(),i=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(r)&&tS(e)&&!this.ignoreSelectionChange(r),s=-1,o=-1,a=!1,c=[];if(e.editable)for(let d=0;d<n.length;d++){let p=this.registerMutation(n[d],c);p&&(s=s<0?p.from:Math.min(p.from,s),o=o<0?p.to:Math.max(p.to,o),p.typeOver&&(a=!0))}if($r&&c.length){let d=c.filter(p=>p.nodeName=="BR");if(d.length==2){let[p,m]=d;p.parentNode&&p.parentNode.parentNode==m.parentNode?m.remove():p.remove()}else{let{focusNode:p}=this.currentSelection;for(let m of d){let g=m.parentNode;g&&g.nodeName=="LI"&&(!p||qB(e,p)!=g)&&m.remove()}}}else if(($t||tn)&&c.some(d=>d.nodeName=="BR")&&(e.input.lastKeyCode==8||e.input.lastKeyCode==46)){for(let d of c)if(d.nodeName=="BR"&&d.parentNode){let p=d.nextSibling;p&&p.nodeType==1&&p.contentEditable=="false"&&d.parentNode.removeChild(d)}}let f=null;s<0&&i&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&Ph(r)&&(f=Yy(e))&&f.eq(Oe.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,Xi(e),this.currentSelection.set(r),e.scrollToSelection()):(s>-1||i)&&(s>-1&&(e.docView.markDirty(s,o),WB(e)),e.input.badSafariComposition&&(e.input.badSafariComposition=!1,GB(e,c)),this.handleDOMChange(s,o,a,c),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(r)||Xi(e),this.currentSelection.set(r))}registerMutation(e,n){if(n.indexOf(e.target)>-1)return null;let r=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(r==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!r||r.ignoreMutation(e))return null;if(e.type=="childList"){for(let d=0;d<e.addedNodes.length;d++){let p=e.addedNodes[d];n.push(p),p.nodeType==3&&(this.lastChangedTextNode=p)}if(r.contentDOM&&r.contentDOM!=r.dom&&!r.contentDOM.contains(e.target))return{from:r.posBefore,to:r.posAfter};let i=e.previousSibling,s=e.nextSibling;if(Xn&&Us<=11&&e.addedNodes.length)for(let d=0;d<e.addedNodes.length;d++){let{previousSibling:p,nextSibling:m}=e.addedNodes[d];(!p||Array.prototype.indexOf.call(e.addedNodes,p)<0)&&(i=p),(!m||Array.prototype.indexOf.call(e.addedNodes,m)<0)&&(s=m)}let o=i&&i.parentNode==e.target?Yt(i)+1:0,a=r.localPosFromDOM(e.target,o,-1),c=s&&s.parentNode==e.target?Yt(s):e.target.childNodes.length,f=r.localPosFromDOM(e.target,c,1);return{from:a,to:f}}else return e.type=="attributes"?{from:r.posAtStart-r.border,to:r.posAtEnd+r.border}:(this.lastChangedTextNode=e.target,{from:r.posAtStart,to:r.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}}let cS=new WeakMap,fS=!1;function WB(t){if(!cS.has(t)&&(cS.set(t,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(t.dom).whiteSpace)!==-1)){if(t.requiresGeckoHackNode=$r,fS)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),fS=!0}}function dS(t,e){let n=e.startContainer,r=e.startOffset,i=e.endContainer,s=e.endOffset,o=t.domAtPos(t.state.selection.anchor);return Fo(o.node,o.offset,i,s)&&([n,r,i,s]=[i,s,n,r]),{anchorNode:n,anchorOffset:r,focusNode:i,focusOffset:s}}function KB(t,e){if(e.getComposedRanges){let i=e.getComposedRanges(t.root)[0];if(i)return dS(t,i)}let n;function r(i){i.preventDefault(),i.stopImmediatePropagation(),n=i.getTargetRanges()[0]}return t.dom.addEventListener("beforeinput",r,!0),document.execCommand("indent"),t.dom.removeEventListener("beforeinput",r,!0),n?dS(t,n):null}function qB(t,e){for(let n=e.parentNode;n&&n!=t.dom;n=n.parentNode){let r=t.docView.nearestDesc(n,!0);if(r&&r.node.isBlock)return n}return null}function GB(t,e){var n;let{focusNode:r,focusOffset:i}=t.domSelectionRange();for(let s of e)if(((n=s.parentNode)===null||n===void 0?void 0:n.nodeName)=="TR"){let o=s.nextSibling;for(;o&&o.nodeName!="TD"&&o.nodeName!="TH";)o=o.nextSibling;if(o){let a=o;for(;;){let c=a.firstChild;if(!c||c.nodeType!=1||c.contentEditable=="false"||/^(BR|IMG)$/.test(c.nodeName))break;a=c}a.insertBefore(s,a.firstChild),r==s&&t.domSelection().collapse(s,i)}else s.parentNode.removeChild(s)}}function XB(t,e,n){let{node:r,fromOffset:i,toOffset:s,from:o,to:a}=t.docView.parseRange(e,n),c=t.domSelectionRange(),f,d=c.anchorNode;if(d&&t.dom.contains(d.nodeType==1?d:d.parentNode)&&(f=[{node:d,offset:c.anchorOffset}],Ph(c)||f.push({node:c.focusNode,offset:c.focusOffset})),$t&&t.input.lastKeyCode===8)for(let C=s;C>i;C--){let x=r.childNodes[C-1],w=x.pmViewDesc;if(x.nodeName=="BR"&&!w){s=C;break}if(!w||w.size)break}let p=t.state.doc,m=t.someProp("domParser")||Hs.fromSchema(t.state.schema),g=p.resolve(o),v=null,S=m.parse(r,{topNode:g.parent,topMatch:g.parent.contentMatchAt(g.index()),topOpen:!0,from:i,to:s,preserveWhitespace:g.parent.type.whitespace=="pre"?"full":!0,findPositions:f,ruleFromNode:JB,context:g});if(f&&f[0].pos!=null){let C=f[0].pos,x=f[1]&&f[1].pos;x==null&&(x=C),v={anchor:C+o,head:x+o}}return{doc:S,sel:v,from:o,to:a}}function JB(t){let e=t.pmViewDesc;if(e)return e.parseRule();if(t.nodeName=="BR"&&t.parentNode){if(tn&&/^(ul|ol)$/i.test(t.parentNode.nodeName)){let n=document.createElement("div");return n.appendChild(document.createElement("li")),{skip:n}}else if(t.parentNode.lastChild==t||tn&&/^(tr|table)$/i.test(t.parentNode.nodeName))return{ignore:!0}}else if(t.nodeName=="IMG"&&t.getAttribute("mark-placeholder"))return{ignore:!0};return null}const YB=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|img|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function QB(t,e,n,r,i){let s=t.input.compositionPendingChanges||(t.composing?t.input.compositionID:0);if(t.input.compositionPendingChanges=0,e<0){let A=t.input.lastSelectionTime>Date.now()-50?t.input.lastSelectionOrigin:null,R=Yy(t,A);if(R&&!t.state.selection.eq(R)){if($t&&Ki&&t.input.lastKeyCode===13&&Date.now()-100<t.input.lastKeyCodeTime&&t.someProp("handleKeyDown",B=>B(t,vo(13,"Enter"))))return;let z=t.state.tr.setSelection(R);A=="pointer"?z.setMeta("pointer",!0):A=="key"&&z.scrollIntoView(),s&&z.setMeta("composition",s),t.dispatch(z)}return}let o=t.state.doc.resolve(e),a=o.sharedDepth(n);e=o.before(a+1),n=t.state.doc.resolve(n).after(a+1);let c=t.state.selection,f=XB(t,e,n),d=t.state.doc,p=d.slice(f.from,f.to),m,g;t.input.lastKeyCode===8&&Date.now()-100<t.input.lastKeyCodeTime?(m=t.state.selection.to,g="end"):(m=t.state.selection.from,g="start"),t.input.lastKeyCode=null;let v=t6(p.content,f.doc.content,f.from,m,g);if(v&&t.input.domChangeCount++,(ea&&t.input.lastIOSEnter>Date.now()-225||Ki)&&i.some(A=>A.nodeType==1&&!YB.test(A.nodeName))&&(!v||v.endA>=v.endB)&&t.someProp("handleKeyDown",A=>A(t,vo(13,"Enter")))){t.input.lastIOSEnter=0;return}if(!v)if(r&&c instanceof ke&&!c.empty&&c.$head.sameParent(c.$anchor)&&!t.composing&&!(f.sel&&f.sel.anchor!=f.sel.head))v={start:c.from,endA:c.to,endB:c.to};else{if(f.sel){let A=hS(t,t.state.doc,f.sel);if(A&&!A.eq(t.state.selection)){let R=t.state.tr.setSelection(A);s&&R.setMeta("composition",s),t.dispatch(R)}}return}t.state.selection.from<t.state.selection.to&&v.start==v.endB&&t.state.selection instanceof ke&&(v.start>t.state.selection.from&&v.start<=t.state.selection.from+2&&t.state.selection.from>=f.from?v.start=t.state.selection.from:v.endA<t.state.selection.to&&v.endA>=t.state.selection.to-2&&t.state.selection.to<=f.to&&(v.endB+=t.state.selection.to-v.endA,v.endA=t.state.selection.to)),Xn&&Us<=11&&v.endB==v.start+1&&v.endA==v.start&&v.start>f.from&&f.doc.textBetween(v.start-f.from-1,v.start-f.from+1)==" "&&(v.start--,v.endA--,v.endB--);let S=f.doc.resolveNoCache(v.start-f.from),C=f.doc.resolveNoCache(v.endB-f.from),x=d.resolve(v.start),w=S.sameParent(C)&&S.parent.inlineContent&&x.end()>=v.endA;if((ea&&t.input.lastIOSEnter>Date.now()-225&&(!w||i.some(A=>A.nodeName=="DIV"||A.nodeName=="P"))||!w&&S.pos<f.doc.content.size&&(!S.sameParent(C)||!S.parent.inlineContent)&&S.pos<C.pos&&!/\S/.test(f.doc.textBetween(S.pos,C.pos,"","")))&&t.someProp("handleKeyDown",A=>A(t,vo(13,"Enter")))){t.input.lastIOSEnter=0;return}if(t.state.selection.anchor>v.start&&e6(d,v.start,v.endA,S,C)&&t.someProp("handleKeyDown",A=>A(t,vo(8,"Backspace")))){Ki&&$t&&t.domObserver.suppressSelectionUpdates();return}$t&&v.endB==v.start&&(t.input.lastChromeDelete=Date.now()),Ki&&!w&&S.start()!=C.start()&&C.parentOffset==0&&S.depth==C.depth&&f.sel&&f.sel.anchor==f.sel.head&&f.sel.head==v.endA&&(v.endB-=2,C=f.doc.resolveNoCache(v.endB-f.from),setTimeout(()=>{t.someProp("handleKeyDown",function(A){return A(t,vo(13,"Enter"))})},20));let E=v.start,M=v.endA,_=A=>{let R=A||t.state.tr.replace(E,M,f.doc.slice(v.start-f.from,v.endB-f.from));if(f.sel){let z=hS(t,R.doc,f.sel);z&&!($t&&t.composing&&z.empty&&(v.start!=v.endB||t.input.lastChromeDelete<Date.now()-100)&&(z.head==E||z.head==R.mapping.map(M)-1)||Xn&&z.empty&&z.head==E)&&R.setSelection(z)}return s&&R.setMeta("composition",s),R.scrollIntoView()},O;if(w)if(S.pos==C.pos){Xn&&Us<=11&&S.parentOffset==0&&(t.domObserver.suppressSelectionUpdates(),setTimeout(()=>Xi(t),20));let A=_(t.state.tr.delete(E,M)),R=d.resolve(v.start).marksAcross(d.resolve(v.endA));R&&A.ensureMarks(R),t.dispatch(A)}else if(v.endA==v.endB&&(O=ZB(S.parent.content.cut(S.parentOffset,C.parentOffset),x.parent.content.cut(x.parentOffset,v.endA-x.start())))){let A=_(t.state.tr);O.type=="add"?A.addMark(E,M,O.mark):A.removeMark(E,M,O.mark),t.dispatch(A)}else if(S.parent.child(S.index()).isText&&S.index()==C.index()-(C.textOffset?0:1)){let A=S.parent.textBetween(S.parentOffset,C.parentOffset),R=()=>_(t.state.tr.insertText(A,E,M));t.someProp("handleTextInput",z=>z(t,E,M,A,R))||t.dispatch(R())}else t.dispatch(_());else t.dispatch(_())}function hS(t,e,n){return Math.max(n.anchor,n.head)>e.content.size?null:Qy(t,e.resolve(n.anchor),e.resolve(n.head))}function ZB(t,e){let n=t.firstChild.marks,r=e.firstChild.marks,i=n,s=r,o,a,c;for(let d=0;d<r.length;d++)i=r[d].removeFromSet(i);for(let d=0;d<n.length;d++)s=n[d].removeFromSet(s);if(i.length==1&&s.length==0)a=i[0],o="add",c=d=>d.mark(a.addToSet(d.marks));else if(i.length==0&&s.length==1)a=s[0],o="remove",c=d=>d.mark(a.removeFromSet(d.marks));else return null;let f=[];for(let d=0;d<e.childCount;d++)f.push(c(e.child(d)));if(X.from(f).eq(t))return{mark:a,type:o}}function e6(t,e,n,r,i){if(n-e<=i.pos-r.pos||Qm(r,!0,!1)<i.pos)return!1;let s=t.resolve(e);if(!r.parent.isTextblock){let a=s.nodeAfter;return a!=null&&n==e+a.nodeSize}if(s.parentOffset<s.parent.content.size||!s.parent.isTextblock)return!1;let o=t.resolve(Qm(s,!0,!0));return!o.parent.isTextblock||o.pos>n||Qm(o,!0,!1)<n?!1:r.parent.content.cut(r.parentOffset).eq(o.parent.content)}function Qm(t,e,n){let r=t.depth,i=e?t.end():t.pos;for(;r>0&&(e||t.indexAfter(r)==t.node(r).childCount);)r--,i++,e=!1;if(n){let s=t.node(r).maybeChild(t.indexAfter(r));for(;s&&!s.isLeaf;)s=s.firstChild,i++}return i}function t6(t,e,n,r,i){let s=t.findDiffStart(e,n);if(s==null)return null;let{a:o,b:a}=t.findDiffEnd(e,n+t.size,n+e.size);if(i=="end"){let c=Math.max(0,s-Math.min(o,a));r-=o+c-s}if(o<s&&t.size<e.size){let c=r<=s&&r>=o?s-r:0;s-=c,s&&s<e.size&&pS(e.textBetween(s-1,s+1))&&(s+=c?1:-1),a=s+(a-o),o=s}else if(a<s){let c=r<=s&&r>=a?s-r:0;s-=c,s&&s<t.size&&pS(t.textBetween(s-1,s+1))&&(s+=c?1:-1),o=s+(o-a),a=s}return{start:s,endA:o,endB:a}}function pS(t){if(t.length!=2)return!1;let e=t.charCodeAt(0),n=t.charCodeAt(1);return e>=56320&&e<=57343&&n>=55296&&n<=56319}class hT{constructor(e,n){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new yB,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=n,this.state=n.state,this.directPlugins=n.plugins||[],this.directPlugins.forEach(xS),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=yS(this),gS(this),this.nodeViews=vS(this),this.docView=Xb(this.state.doc,mS(this),Ym(this),this.dom,this),this.domObserver=new VB(this,(r,i,s,o)=>QB(this,r,i,s,o)),this.domObserver.start(),vB(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let n in e)this._props[n]=e[n];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&C0(this);let n=this._props;this._props=e,e.plugins&&(e.plugins.forEach(xS),this.directPlugins=e.plugins),this.updateStateInner(e.state,n)}setProps(e){let n={};for(let r in this._props)n[r]=this._props[r];n.state=this.state;for(let r in e)n[r]=e[r];this.update(n)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,n){var r;let i=this.state,s=!1,o=!1;e.storedMarks&&this.composing&&(oT(this),o=!0),this.state=e;let a=i.plugins!=e.plugins||this._props.plugins!=n.plugins;if(a||this._props.plugins!=n.plugins||this._props.nodeViews!=n.nodeViews){let g=vS(this);r6(g,this.nodeViews)&&(this.nodeViews=g,s=!0)}(a||n.handleDOMEvents!=this._props.handleDOMEvents)&&C0(this),this.editable=yS(this),gS(this);let c=Ym(this),f=mS(this),d=i.plugins!=e.plugins&&!i.doc.eq(e.doc)?"reset":e.scrollToSelection>i.scrollToSelection?"to selection":"preserve",p=s||!this.docView.matchesNode(e.doc,f,c);(p||!e.selection.eq(i.selection))&&(o=!0);let m=d=="preserve"&&o&&this.dom.style.overflowAnchor==null&&P5(this);if(o){this.domObserver.stop();let g=p&&(Xn||$t)&&!this.composing&&!i.selection.empty&&!e.selection.empty&&n6(i.selection,e.selection);if(p){let v=$t?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=PB(this)),(s||!this.docView.update(e.doc,f,c,this))&&(this.docView.updateOuterDeco(f),this.docView.destroy(),this.docView=Xb(e.doc,f,c,this.dom,this)),v&&(!this.trackWrites||!this.dom.contains(this.trackWrites))&&(g=!0)}g||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&nB(this))?Xi(this,g):(G2(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(i),!((r=this.dragging)===null||r===void 0)&&r.node&&!i.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,i),d=="reset"?this.dom.scrollTop=0:d=="to selection"?this.scrollToSelection():m&&R5(m)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!(!e||!this.dom.contains(e.nodeType==1?e:e.parentNode))){if(!this.someProp("handleScrollToSelection",n=>n(this)))if(this.state.selection instanceof ye){let n=this.docView.domAfterPos(this.state.selection.from);n.nodeType==1&&Ub(this,n.getBoundingClientRect(),e)}else Ub(this,this.coordsAtPos(this.state.selection.head,1),e)}}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let n=0;n<this.directPlugins.length;n++){let r=this.directPlugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}for(let n=0;n<this.state.plugins.length;n++){let r=this.state.plugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}}else for(let n=0;n<this.pluginViews.length;n++){let r=this.pluginViews[n];r.update&&r.update(this,e)}}updateDraggedNode(e,n){let r=e.node,i=-1;if(this.state.doc.nodeAt(r.from)==r.node)i=r.from;else{let s=r.from+(this.state.doc.content.size-n.doc.content.size);(s>0&&this.state.doc.nodeAt(s))==r.node&&(i=s)}this.dragging=new aT(e.slice,e.move,i<0?void 0:ye.create(this.state.doc,i))}someProp(e,n){let r=this._props&&this._props[e],i;if(r!=null&&(i=n?n(r):r))return i;for(let o=0;o<this.directPlugins.length;o++){let a=this.directPlugins[o].props[e];if(a!=null&&(i=n?n(a):a))return i}let s=this.state.plugins;if(s)for(let o=0;o<s.length;o++){let a=s[o].props[e];if(a!=null&&(i=n?n(a):a))return i}}hasFocus(){if(Xn){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&D5(this.dom),Xi(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let n=this.dom.parentNode;n;n=n.parentNode)if(n.nodeType==9||n.nodeType==11&&n.host)return n.getSelection||(Object.getPrototypeOf(n).getSelection=()=>n.ownerDocument.getSelection()),this._root=n}return e||document}updateRoot(){this._root=null}posAtCoords(e){return B5(this,e)}coordsAtPos(e,n=1){return F2(this,e,n)}domAtPos(e,n=0){return this.docView.domFromPos(e,n)}nodeDOM(e){let n=this.docView.descAt(e);return n?n.nodeDOM:null}posAtDOM(e,n,r=-1){let i=this.docView.posFromDOM(e,n,r);if(i==null)throw new RangeError("DOM position not inside the editor");return i}endOfTextblock(e,n){return V5(this,n||this.state,e)}pasteHTML(e,n){return Lu(this,"",e,!1,n||new ClipboardEvent("paste"))}pasteText(e,n){return Lu(this,e,null,!0,n||new ClipboardEvent("paste"))}serializeForClipboard(e){return Zy(this,e)}destroy(){this.docView&&(xB(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],Ym(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,S5())}get isDestroyed(){return this.docView==null}dispatchEvent(e){return bB(this,e)}domSelectionRange(){let e=this.domSelection();return e?tn&&this.root.nodeType===11&&N5(this.dom.ownerDocument)==this.dom&&KB(this,e)||e:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}hT.prototype.dispatch=function(t){let e=this._props.dispatchTransaction;e?e.call(this,t):this.updateState(this.state.apply(t))};function mS(t){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(t.editable),t.someProp("attributes",n=>{if(typeof n=="function"&&(n=n(t.state)),n)for(let r in n)r=="class"?e.class+=" "+n[r]:r=="style"?e.style=(e.style?e.style+";":"")+n[r]:!e[r]&&r!="contenteditable"&&r!="nodeName"&&(e[r]=String(n[r]))}),e.translate||(e.translate="no"),[En.node(0,t.state.doc.content.size,e)]}function gS(t){if(t.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),t.cursorWrapper={dom:e,deco:En.widget(t.state.selection.from,e,{raw:!0,marks:t.markCursor})}}else t.cursorWrapper=null}function yS(t){return!t.someProp("editable",e=>e(t.state)===!1)}function n6(t,e){let n=Math.min(t.$anchor.sharedDepth(t.head),e.$anchor.sharedDepth(e.head));return t.$anchor.start(n)!=e.$anchor.start(n)}function vS(t){let e=Object.create(null);function n(r){for(let i in r)Object.prototype.hasOwnProperty.call(e,i)||(e[i]=r[i])}return t.someProp("nodeViews",n),t.someProp("markViews",n),e}function r6(t,e){let n=0,r=0;for(let i in t){if(t[i]!=e[i])return!0;n++}for(let i in e)r++;return n!=r}function xS(t){if(t.spec.state||t.spec.filterTransaction||t.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var Xs={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Ed={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},i6=typeof navigator<"u"&&/Mac/.test(navigator.platform),s6=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var Qt=0;Qt<10;Qt++)Xs[48+Qt]=Xs[96+Qt]=String(Qt);for(var Qt=1;Qt<=24;Qt++)Xs[Qt+111]="F"+Qt;for(var Qt=65;Qt<=90;Qt++)Xs[Qt]=String.fromCharCode(Qt+32),Ed[Qt]=String.fromCharCode(Qt);for(var Zm in Xs)Ed.hasOwnProperty(Zm)||(Ed[Zm]=Xs[Zm]);function o6(t){var e=i6&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||s6&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",n=!e&&t.key||(t.shiftKey?Ed:Xs)[t.keyCode]||t.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}const l6=typeof navigator<"u"&&/Mac|iP(hone|[oa]d)/.test(navigator.platform),a6=typeof navigator<"u"&&/Win/.test(navigator.platform);function u6(t){let e=t.split(/-(?!$)/),n=e[e.length-1];n=="Space"&&(n=" ");let r,i,s,o;for(let a=0;a<e.length-1;a++){let c=e[a];if(/^(cmd|meta|m)$/i.test(c))o=!0;else if(/^a(lt)?$/i.test(c))r=!0;else if(/^(c|ctrl|control)$/i.test(c))i=!0;else if(/^s(hift)?$/i.test(c))s=!0;else if(/^mod$/i.test(c))l6?o=!0:i=!0;else throw new Error("Unrecognized modifier name: "+c)}return r&&(n="Alt-"+n),i&&(n="Ctrl-"+n),o&&(n="Meta-"+n),s&&(n="Shift-"+n),n}function c6(t){let e=Object.create(null);for(let n in t)e[u6(n)]=t[n];return e}function eg(t,e,n=!0){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),n&&e.shiftKey&&(t="Shift-"+t),t}function f6(t){return new dt({props:{handleKeyDown:pT(t)}})}function pT(t){let e=c6(t);return function(n,r){let i=o6(r),s,o=e[eg(i,r)];if(o&&o(n.state,n.dispatch,n))return!0;if(i.length==1&&i!=" "){if(r.shiftKey){let a=e[eg(i,r,!1)];if(a&&a(n.state,n.dispatch,n))return!0}if((r.altKey||r.metaKey||r.ctrlKey)&&!(a6&&r.ctrlKey&&r.altKey)&&(s=Xs[r.keyCode])&&s!=i){let a=e[eg(s,r)];if(a&&a(n.state,n.dispatch,n))return!0}}return!1}}var d6=Object.defineProperty,sv=(t,e)=>{for(var n in e)d6(t,n,{get:e[n],enumerable:!0})};function Ih(t){const{state:e,transaction:n}=t;let{selection:r}=n,{doc:i}=n,{storedMarks:s}=n;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return s},get selection(){return r},get doc(){return i},get tr(){return r=n.selection,i=n.doc,s=n.storedMarks,n}}}var Lh=class{constructor(t){this.editor=t.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=t.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:t,editor:e,state:n}=this,{view:r}=e,{tr:i}=n,s=this.buildProps(i);return Object.fromEntries(Object.entries(t).map(([o,a])=>[o,(...f)=>{const d=a(...f)(s);return!i.getMeta("preventDispatch")&&!this.hasCustomState&&r.dispatch(i),d}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(t,e=!0){const{rawCommands:n,editor:r,state:i}=this,{view:s}=r,o=[],a=!!t,c=t||i.tr,f=()=>(!a&&e&&!c.getMeta("preventDispatch")&&!this.hasCustomState&&s.dispatch(c),o.every(p=>p===!0)),d={...Object.fromEntries(Object.entries(n).map(([p,m])=>[p,(...v)=>{const S=this.buildProps(c,e),C=m(...v)(S);return o.push(C),d}])),run:f};return d}createCan(t){const{rawCommands:e,state:n}=this,r=!1,i=t||n.tr,s=this.buildProps(i,r);return{...Object.fromEntries(Object.entries(e).map(([a,c])=>[a,(...f)=>c(...f)({...s,dispatch:void 0})])),chain:()=>this.createChain(i,r)}}buildProps(t,e=!0){const{rawCommands:n,editor:r,state:i}=this,{view:s}=r,o={tr:t,editor:r,view:s,state:Ih({state:i,transaction:t}),dispatch:e?()=>{}:void 0,chain:()=>this.createChain(t,e),can:()=>this.createCan(t),get commands(){return Object.fromEntries(Object.entries(n).map(([a,c])=>[a,(...f)=>c(...f)(o)]))}};return o}},mT={};sv(mT,{blur:()=>h6,clearContent:()=>p6,clearNodes:()=>m6,command:()=>g6,createParagraphNear:()=>y6,cut:()=>v6,deleteCurrentNode:()=>x6,deleteNode:()=>w6,deleteRange:()=>b6,deleteSelection:()=>S6,enter:()=>k6,exitCode:()=>C6,extendMarkRange:()=>E6,first:()=>T6,focus:()=>M6,forEach:()=>_6,insertContent:()=>O6,insertContentAt:()=>R6,joinBackward:()=>L6,joinDown:()=>I6,joinForward:()=>j6,joinItemBackward:()=>z6,joinItemForward:()=>B6,joinTextblockBackward:()=>F6,joinTextblockForward:()=>$6,joinUp:()=>D6,keyboardShortcut:()=>U6,lift:()=>V6,liftEmptyBlock:()=>W6,liftListItem:()=>K6,newlineInCode:()=>q6,resetAttributes:()=>G6,scrollIntoView:()=>X6,selectAll:()=>J6,selectNodeBackward:()=>Y6,selectNodeForward:()=>Q6,selectParentNode:()=>Z6,selectTextblockEnd:()=>eF,selectTextblockStart:()=>tF,setContent:()=>nF,setMark:()=>SF,setMeta:()=>kF,setNode:()=>CF,setNodeSelection:()=>EF,setTextDirection:()=>TF,setTextSelection:()=>NF,sinkListItem:()=>MF,splitBlock:()=>_F,splitListItem:()=>OF,toggleList:()=>AF,toggleMark:()=>PF,toggleNode:()=>RF,toggleWrap:()=>DF,undoInputRule:()=>IF,unsetAllMarks:()=>LF,unsetMark:()=>jF,unsetTextDirection:()=>zF,updateAttributes:()=>BF,wrapIn:()=>FF,wrapInList:()=>$F});var h6=()=>({editor:t,view:e})=>(requestAnimationFrame(()=>{var n;t.isDestroyed||(e.dom.blur(),(n=window==null?void 0:window.getSelection())==null||n.removeAllRanges())}),!0),p6=(t=!0)=>({commands:e})=>e.setContent("",{emitUpdate:t}),m6=()=>({state:t,tr:e,dispatch:n})=>{const{selection:r}=e,{ranges:i}=r;return n&&i.forEach(({$from:s,$to:o})=>{t.doc.nodesBetween(s.pos,o.pos,(a,c)=>{if(a.type.isText)return;const{doc:f,mapping:d}=e,p=f.resolve(d.map(c)),m=f.resolve(d.map(c+a.nodeSize)),g=p.blockRange(m);if(!g)return;const v=la(g);if(a.type.isTextblock){const{defaultType:S}=p.parent.contentMatchAt(p.index());e.setNodeMarkup(g.start,S)}(v||v===0)&&e.lift(g,v)})}),!0},g6=t=>e=>t(e),y6=()=>({state:t,dispatch:e})=>_2(t,e),v6=(t,e)=>({editor:n,tr:r})=>{const{state:i}=n,s=i.doc.slice(t.from,t.to);r.deleteRange(t.from,t.to);const o=r.mapping.map(e);return r.insert(o,s.content),r.setSelection(new ke(r.doc.resolve(Math.max(o-1,0)))),!0},x6=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,r=n.$anchor.node();if(r.content.size>0)return!1;const i=t.selection.$anchor;for(let s=i.depth;s>0;s-=1)if(i.node(s).type===r.type){if(e){const a=i.before(s),c=i.after(s);t.delete(a,c).scrollIntoView()}return!0}return!1};function Ot(t,e){if(typeof t=="string"){if(!e.nodes[t])throw Error(`There is no node type named '${t}'. Maybe you forgot to add the extension?`);return e.nodes[t]}return t}var w6=t=>({tr:e,state:n,dispatch:r})=>{const i=Ot(t,n.schema),s=e.selection.$anchor;for(let o=s.depth;o>0;o-=1)if(s.node(o).type===i){if(r){const c=s.before(o),f=s.after(o);e.delete(c,f).scrollIntoView()}return!0}return!1},b6=t=>({tr:e,dispatch:n})=>{const{from:r,to:i}=t;return n&&e.delete(r,i),!0},S6=()=>({state:t,dispatch:e})=>Wy(t,e),k6=()=>({commands:t})=>t.keyboardShortcut("Enter"),C6=()=>({state:t,dispatch:e})=>l5(t,e);function ov(t){return Object.prototype.toString.call(t)==="[object RegExp]"}function Td(t,e,n={strict:!0}){const r=Object.keys(e);return r.length?r.every(i=>n.strict?e[i]===t[i]:ov(e[i])?e[i].test(t[i]):e[i]===t[i]):!0}function gT(t,e,n={}){return t.find(r=>r.type===e&&Td(Object.fromEntries(Object.keys(n).map(i=>[i,r.attrs[i]])),n))}function wS(t,e,n={}){return!!gT(t,e,n)}function lv(t,e,n){var r;if(!t||!e)return;let i=t.parent.childAfter(t.parentOffset);if((!i.node||!i.node.marks.some(d=>d.type===e))&&(i=t.parent.childBefore(t.parentOffset)),!i.node||!i.node.marks.some(d=>d.type===e)||(n=n||((r=i.node.marks[0])==null?void 0:r.attrs),!gT([...i.node.marks],e,n)))return;let o=i.index,a=t.start()+i.offset,c=o+1,f=a+i.node.nodeSize;for(;o>0&&wS([...t.parent.child(o-1).marks],e,n);)o-=1,a-=t.parent.child(o).nodeSize;for(;c<t.parent.childCount&&wS([...t.parent.child(c).marks],e,n);)f+=t.parent.child(c).nodeSize,c+=1;return{from:a,to:f}}function ts(t,e){if(typeof t=="string"){if(!e.marks[t])throw Error(`There is no mark type named '${t}'. Maybe you forgot to add the extension?`);return e.marks[t]}return t}var E6=(t,e={})=>({tr:n,state:r,dispatch:i})=>{const s=ts(t,r.schema),{doc:o,selection:a}=n,{$from:c,from:f,to:d}=a;if(i){const p=lv(c,s,e);if(p&&p.from<=f&&p.to>=d){const m=ke.create(o,p.from,p.to);n.setSelection(m)}}return!0},T6=t=>e=>{const n=typeof t=="function"?t(e):t;for(let r=0;r<n.length;r+=1)if(n[r](e))return!0;return!1};function yT(t){return t instanceof ke}function Co(t=0,e=0,n=0){return Math.min(Math.max(t,e),n)}function vT(t,e=null){if(!e)return null;const n=Oe.atStart(t),r=Oe.atEnd(t);if(e==="start"||e===!0)return n;if(e==="end")return r;const i=n.from,s=r.to;return e==="all"?ke.create(t,Co(0,i,s),Co(t.content.size,i,s)):ke.create(t,Co(e,i,s),Co(e,i,s))}function bS(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}function Nd(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}function N6(){return typeof navigator<"u"?/^((?!chrome|android).)*safari/i.test(navigator.userAgent):!1}var M6=(t=null,e={})=>({editor:n,view:r,tr:i,dispatch:s})=>{e={scrollIntoView:!0,...e};const o=()=>{(Nd()||bS())&&r.dom.focus(),N6()&&!Nd()&&!bS()&&r.dom.focus({preventScroll:!0}),requestAnimationFrame(()=>{n.isDestroyed||(r.focus(),e!=null&&e.scrollIntoView&&n.commands.scrollIntoView())})};if(r.hasFocus()&&t===null||t===!1)return!0;if(s&&t===null&&!yT(n.state.selection))return o(),!0;const a=vT(i.doc,t)||n.state.selection,c=n.state.selection.eq(a);return s&&(c||i.setSelection(a),c&&i.storedMarks&&i.setStoredMarks(i.storedMarks),o()),!0},_6=(t,e)=>n=>t.every((r,i)=>e(r,{...n,index:i})),O6=(t,e)=>({tr:n,commands:r})=>r.insertContentAt({from:n.selection.from,to:n.selection.to},t,e),xT=t=>{const e=t.childNodes;for(let n=e.length-1;n>=0;n-=1){const r=e[n];r.nodeType===3&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?t.removeChild(r):r.nodeType===1&&xT(r)}return t};function hf(t){if(typeof window>"u")throw new Error("[tiptap error]: there is no window object available, so this function cannot be used");const e=`<body>${t}</body>`,n=new window.DOMParser().parseFromString(e,"text/html").body;return xT(n)}function zu(t,e,n){if(t instanceof li||t instanceof X)return t;n={slice:!0,parseOptions:{},...n};const r=typeof t=="object"&&t!==null,i=typeof t=="string";if(r)try{if(Array.isArray(t)&&t.length>0)return X.fromArray(t.map(a=>e.nodeFromJSON(a)));const o=e.nodeFromJSON(t);return n.errorOnInvalidContent&&o.check(),o}catch(s){if(n.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:s});return console.warn("[tiptap warn]: Invalid content.","Passed value:",t,"Error:",s),zu("",e,n)}if(i){if(n.errorOnInvalidContent){let o=!1,a="";const c=new n2({topNode:e.spec.topNode,marks:e.spec.marks,nodes:e.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:f=>(o=!0,a=typeof f=="string"?f:f.outerHTML,null)}]}})});if(n.slice?Hs.fromSchema(c).parseSlice(hf(t),n.parseOptions):Hs.fromSchema(c).parse(hf(t),n.parseOptions),n.errorOnInvalidContent&&o)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${a}`)})}const s=Hs.fromSchema(e);return n.slice?s.parseSlice(hf(t),n.parseOptions).content:s.parse(hf(t),n.parseOptions)}return zu("",e,n)}function A6(t,e,n){const r=t.steps.length-1;if(r<e)return;const i=t.steps[r];if(!(i instanceof Ft||i instanceof Ut))return;const s=t.mapping.maps[r];let o=0;s.forEach((a,c,f,d)=>{o===0&&(o=d)}),t.setSelection(Oe.near(t.doc.resolve(o),n))}var P6=t=>!("type"in t),R6=(t,e,n)=>({tr:r,dispatch:i,editor:s})=>{var o;if(i){n={parseOptions:s.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...n};let a;const c=C=>{s.emit("contentError",{editor:s,error:C,disableCollaboration:()=>{"collaboration"in s.storage&&typeof s.storage.collaboration=="object"&&s.storage.collaboration&&(s.storage.collaboration.isDisabled=!0)}})},f={preserveWhitespace:"full",...n.parseOptions};if(!n.errorOnInvalidContent&&!s.options.enableContentCheck&&s.options.emitContentError)try{zu(e,s.schema,{parseOptions:f,errorOnInvalidContent:!0})}catch(C){c(C)}try{a=zu(e,s.schema,{parseOptions:f,errorOnInvalidContent:(o=n.errorOnInvalidContent)!=null?o:s.options.enableContentCheck})}catch(C){return c(C),!1}let{from:d,to:p}=typeof t=="number"?{from:t,to:t}:{from:t.from,to:t.to},m=!0,g=!0;if((P6(a)?a:[a]).forEach(C=>{C.check(),m=m?C.isText&&C.marks.length===0:!1,g=g?C.isBlock:!1}),d===p&&g){const{parent:C}=r.doc.resolve(d);C.isTextblock&&!C.type.spec.code&&!C.childCount&&(d-=1,p+=1)}let S;if(m){if(Array.isArray(e))S=e.map(C=>C.text||"").join("");else if(e instanceof X){let C="";e.forEach(x=>{x.text&&(C+=x.text)}),S=C}else typeof e=="object"&&e&&e.text?S=e.text:S=e;r.insertText(S,d,p)}else{S=a;const C=r.doc.resolve(d),x=C.node(),w=C.parentOffset===0,E=x.isText||x.isTextblock,M=x.content.size>0;w&&E&&M&&(d=Math.max(0,d-1)),r.replaceWith(d,p,S)}n.updateSelection&&A6(r,r.steps.length-1,-1),n.applyInputRules&&r.setMeta("applyInputRules",{from:d,text:S}),n.applyPasteRules&&r.setMeta("applyPasteRules",{from:d,text:S})}return!0},D6=()=>({state:t,dispatch:e})=>i5(t,e),I6=()=>({state:t,dispatch:e})=>s5(t,e),L6=()=>({state:t,dispatch:e})=>S2(t,e),j6=()=>({state:t,dispatch:e})=>T2(t,e),z6=()=>({state:t,dispatch:e,tr:n})=>{try{const r=_h(t.doc,t.selection.$from.pos,-1);return r==null?!1:(n.join(r,2),e&&e(n),!0)}catch{return!1}},B6=()=>({state:t,dispatch:e,tr:n})=>{try{const r=_h(t.doc,t.selection.$from.pos,1);return r==null?!1:(n.join(r,2),e&&e(n),!0)}catch{return!1}},F6=()=>({state:t,dispatch:e})=>n5(t,e),$6=()=>({state:t,dispatch:e})=>r5(t,e);function wT(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function H6(t){const e=t.split(/-(?!$)/);let n=e[e.length-1];n==="Space"&&(n=" ");let r,i,s,o;for(let a=0;a<e.length-1;a+=1){const c=e[a];if(/^(cmd|meta|m)$/i.test(c))o=!0;else if(/^a(lt)?$/i.test(c))r=!0;else if(/^(c|ctrl|control)$/i.test(c))i=!0;else if(/^s(hift)?$/i.test(c))s=!0;else if(/^mod$/i.test(c))Nd()||wT()?o=!0:i=!0;else throw new Error(`Unrecognized modifier name: ${c}`)}return r&&(n=`Alt-${n}`),i&&(n=`Ctrl-${n}`),o&&(n=`Meta-${n}`),s&&(n=`Shift-${n}`),n}var U6=t=>({editor:e,view:n,tr:r,dispatch:i})=>{const s=H6(t).split(/-(?!$)/),o=s.find(f=>!["Alt","Ctrl","Meta","Shift"].includes(f)),a=new KeyboardEvent("keydown",{key:o==="Space"?" ":o,altKey:s.includes("Alt"),ctrlKey:s.includes("Ctrl"),metaKey:s.includes("Meta"),shiftKey:s.includes("Shift"),bubbles:!0,cancelable:!0}),c=e.captureTransaction(()=>{n.someProp("handleKeyDown",f=>f(n,a))});return c==null||c.steps.forEach(f=>{const d=f.map(r.mapping);d&&i&&r.maybeStep(d)}),!0};function Js(t,e,n={}){const{from:r,to:i,empty:s}=t.selection,o=e?Ot(e,t.schema):null,a=[];t.doc.nodesBetween(r,i,(p,m)=>{if(p.isText)return;const g=Math.max(r,m),v=Math.min(i,m+p.nodeSize);a.push({node:p,from:g,to:v})});const c=i-r,f=a.filter(p=>o?o.name===p.node.type.name:!0).filter(p=>Td(p.node.attrs,n,{strict:!1}));return s?!!f.length:f.reduce((p,m)=>p+m.to-m.from,0)>=c}var V6=(t,e={})=>({state:n,dispatch:r})=>{const i=Ot(t,n.schema);return Js(n,i,e)?o5(n,r):!1},W6=()=>({state:t,dispatch:e})=>O2(t,e),K6=t=>({state:e,dispatch:n})=>{const r=Ot(t,e.schema);return v5(r)(e,n)},q6=()=>({state:t,dispatch:e})=>M2(t,e);function jh(t,e){return e.nodes[t]?"node":e.marks[t]?"mark":null}function SS(t,e){const n=typeof e=="string"?[e]:e;return Object.keys(t).reduce((r,i)=>(n.includes(i)||(r[i]=t[i]),r),{})}var G6=(t,e)=>({tr:n,state:r,dispatch:i})=>{let s=null,o=null;const a=jh(typeof t=="string"?t:t.name,r.schema);if(!a)return!1;a==="node"&&(s=Ot(t,r.schema)),a==="mark"&&(o=ts(t,r.schema));let c=!1;return n.selection.ranges.forEach(f=>{r.doc.nodesBetween(f.$from.pos,f.$to.pos,(d,p)=>{s&&s===d.type&&(c=!0,i&&n.setNodeMarkup(p,void 0,SS(d.attrs,e))),o&&d.marks.length&&d.marks.forEach(m=>{o===m.type&&(c=!0,i&&n.addMark(p,p+d.nodeSize,o.create(SS(m.attrs,e))))})})}),c},X6=()=>({tr:t,dispatch:e})=>(e&&t.scrollIntoView(),!0),J6=()=>({tr:t,dispatch:e})=>{if(e){const n=new pr(t.doc);t.setSelection(n)}return!0},Y6=()=>({state:t,dispatch:e})=>C2(t,e),Q6=()=>({state:t,dispatch:e})=>N2(t,e),Z6=()=>({state:t,dispatch:e})=>c5(t,e),eF=()=>({state:t,dispatch:e})=>h5(t,e),tF=()=>({state:t,dispatch:e})=>d5(t,e);function E0(t,e,n={},r={}){return zu(t,e,{slice:!1,parseOptions:n,errorOnInvalidContent:r.errorOnInvalidContent})}var nF=(t,{errorOnInvalidContent:e,emitUpdate:n=!0,parseOptions:r={}}={})=>({editor:i,tr:s,dispatch:o,commands:a})=>{const{doc:c}=s;if(r.preserveWhitespace!=="full"){const f=E0(t,i.schema,r,{errorOnInvalidContent:e??i.options.enableContentCheck});return o&&s.replaceWith(0,c.content.size,f).setMeta("preventUpdate",!n),!0}return o&&s.setMeta("preventUpdate",!n),a.insertContentAt({from:0,to:c.content.size},t,{parseOptions:r,errorOnInvalidContent:e??i.options.enableContentCheck})};function bT(t,e){const n=ts(e,t.schema),{from:r,to:i,empty:s}=t.selection,o=[];s?(t.storedMarks&&o.push(...t.storedMarks),o.push(...t.selection.$head.marks())):t.doc.nodesBetween(r,i,c=>{o.push(...c.marks)});const a=o.find(c=>c.type.name===n.name);return a?{...a.attrs}:{}}function ST(t,e){const n=new v2(t);return e.forEach(r=>{r.steps.forEach(i=>{n.step(i)})}),n}function rF(t){for(let e=0;e<t.edgeCount;e+=1){const{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}function iF(t,e,n){const r=[];return t.nodesBetween(e.from,e.to,(i,s)=>{n(i)&&r.push({node:i,pos:s})}),r}function sF(t,e){for(let n=t.depth;n>0;n-=1){const r=t.node(n);if(e(r))return{pos:n>0?t.before(n):0,start:t.start(n),depth:n,node:r}}}function zh(t){return e=>sF(e.$from,t)}function me(t,e,n){return t.config[e]===void 0&&t.parent?me(t.parent,e,n):typeof t.config[e]=="function"?t.config[e].bind({...n,parent:t.parent?me(t.parent,e,n):null}):t.config[e]}function av(t){return t.map(e=>{const n={name:e.name,options:e.options,storage:e.storage},r=me(e,"addExtensions",n);return r?[e,...av(r())]:e}).flat(10)}function uv(t,e){const n=Ko.fromSchema(e).serializeFragment(t),i=document.implementation.createHTMLDocument().createElement("div");return i.appendChild(n),i.innerHTML}function kT(t){return typeof t=="function"}function We(t,e=void 0,...n){return kT(t)?e?t.bind(e)(...n):t(...n):t}function oF(t={}){return Object.keys(t).length===0&&t.constructor===Object}function ta(t){const e=t.filter(i=>i.type==="extension"),n=t.filter(i=>i.type==="node"),r=t.filter(i=>i.type==="mark");return{baseExtensions:e,nodeExtensions:n,markExtensions:r}}function CT(t){const e=[],{nodeExtensions:n,markExtensions:r}=ta(t),i=[...n,...r],s={default:null,validate:void 0,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return t.forEach(o=>{const a={name:o.name,options:o.options,storage:o.storage,extensions:i},c=me(o,"addGlobalAttributes",a);if(!c)return;c().forEach(d=>{d.types.forEach(p=>{Object.entries(d.attributes).forEach(([m,g])=>{e.push({type:p,name:m,attribute:{...s,...g}})})})})}),i.forEach(o=>{const a={name:o.name,options:o.options,storage:o.storage},c=me(o,"addAttributes",a);if(!c)return;const f=c();Object.entries(f).forEach(([d,p])=>{const m={...s,...p};typeof(m==null?void 0:m.default)=="function"&&(m.default=m.default()),m!=null&&m.isRequired&&(m==null?void 0:m.default)===void 0&&delete m.default,e.push({type:o.name,name:d,attribute:m})})}),e}function At(...t){return t.filter(e=>!!e).reduce((e,n)=>{const r={...e};return Object.entries(n).forEach(([i,s])=>{if(!r[i]){r[i]=s;return}if(i==="class"){const a=s?String(s).split(" "):[],c=r[i]?r[i].split(" "):[],f=a.filter(d=>!c.includes(d));r[i]=[...c,...f].join(" ")}else if(i==="style"){const a=s?s.split(";").map(d=>d.trim()).filter(Boolean):[],c=r[i]?r[i].split(";").map(d=>d.trim()).filter(Boolean):[],f=new Map;c.forEach(d=>{const[p,m]=d.split(":").map(g=>g.trim());f.set(p,m)}),a.forEach(d=>{const[p,m]=d.split(":").map(g=>g.trim());f.set(p,m)}),r[i]=Array.from(f.entries()).map(([d,p])=>`${d}: ${p}`).join("; ")}else r[i]=s}),r},{})}function Bu(t,e){return e.filter(n=>n.type===t.type.name).filter(n=>n.attribute.rendered).map(n=>n.attribute.renderHTML?n.attribute.renderHTML(t.attrs)||{}:{[n.name]:t.attrs[n.name]}).reduce((n,r)=>At(n,r),{})}function lF(t){return typeof t!="string"?t:t.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(t):t==="true"?!0:t==="false"?!1:t}function kS(t,e){return"style"in t?t:{...t,getAttrs:n=>{const r=t.getAttrs?t.getAttrs(n):t.attrs;if(r===!1)return!1;const i=e.reduce((s,o)=>{const a=o.attribute.parseHTML?o.attribute.parseHTML(n):lF(n.getAttribute(o.name));return a==null?s:{...s,[o.name]:a}},{});return{...r,...i}}}}function CS(t){return Object.fromEntries(Object.entries(t).filter(([e,n])=>e==="attrs"&&oF(n)?!1:n!=null))}function ES(t){var e,n;const r={};return!((e=t==null?void 0:t.attribute)!=null&&e.isRequired)&&"default"in((t==null?void 0:t.attribute)||{})&&(r.default=t.attribute.default),((n=t==null?void 0:t.attribute)==null?void 0:n.validate)!==void 0&&(r.validate=t.attribute.validate),[t.name,r]}function aF(t,e){var n;const r=CT(t),{nodeExtensions:i,markExtensions:s}=ta(t),o=(n=i.find(f=>me(f,"topNode")))==null?void 0:n.name,a=Object.fromEntries(i.map(f=>{const d=r.filter(x=>x.type===f.name),p={name:f.name,options:f.options,storage:f.storage,editor:e},m=t.reduce((x,w)=>{const E=me(w,"extendNodeSchema",p);return{...x,...E?E(f):{}}},{}),g=CS({...m,content:We(me(f,"content",p)),marks:We(me(f,"marks",p)),group:We(me(f,"group",p)),inline:We(me(f,"inline",p)),atom:We(me(f,"atom",p)),selectable:We(me(f,"selectable",p)),draggable:We(me(f,"draggable",p)),code:We(me(f,"code",p)),whitespace:We(me(f,"whitespace",p)),linebreakReplacement:We(me(f,"linebreakReplacement",p)),defining:We(me(f,"defining",p)),isolating:We(me(f,"isolating",p)),attrs:Object.fromEntries(d.map(ES))}),v=We(me(f,"parseHTML",p));v&&(g.parseDOM=v.map(x=>kS(x,d)));const S=me(f,"renderHTML",p);S&&(g.toDOM=x=>S({node:x,HTMLAttributes:Bu(x,d)}));const C=me(f,"renderText",p);return C&&(g.toText=C),[f.name,g]})),c=Object.fromEntries(s.map(f=>{const d=r.filter(C=>C.type===f.name),p={name:f.name,options:f.options,storage:f.storage,editor:e},m=t.reduce((C,x)=>{const w=me(x,"extendMarkSchema",p);return{...C,...w?w(f):{}}},{}),g=CS({...m,inclusive:We(me(f,"inclusive",p)),excludes:We(me(f,"excludes",p)),group:We(me(f,"group",p)),spanning:We(me(f,"spanning",p)),code:We(me(f,"code",p)),attrs:Object.fromEntries(d.map(ES))}),v=We(me(f,"parseHTML",p));v&&(g.parseDOM=v.map(C=>kS(C,d)));const S=me(f,"renderHTML",p);return S&&(g.toDOM=C=>S({mark:C,HTMLAttributes:Bu(C,d)})),[f.name,g]}));return new n2({topNode:o,nodes:a,marks:c})}function uF(t){const e=t.filter((n,r)=>t.indexOf(n)!==r);return Array.from(new Set(e))}function Md(t){return t.sort((n,r)=>{const i=me(n,"priority")||100,s=me(r,"priority")||100;return i>s?-1:i<s?1:0})}function ET(t){const e=Md(av(t)),n=uF(e.map(r=>r.name));return n.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${n.map(r=>`'${r}'`).join(", ")}]. This can lead to issues.`),e}function TT(t,e,n){const{from:r,to:i}=e,{blockSeparator:s=`

`,textSerializers:o={}}=n||{};let a="";return t.nodesBetween(r,i,(c,f,d,p)=>{var m;c.isBlock&&f>r&&(a+=s);const g=o==null?void 0:o[c.type.name];if(g)return d&&(a+=g({node:c,pos:f,parent:d,index:p,range:e})),!1;c.isText&&(a+=(m=c==null?void 0:c.text)==null?void 0:m.slice(Math.max(r,f)-f,i-f))}),a}function cF(t,e){const n={from:0,to:t.content.size};return TT(t,n,e)}function NT(t){return Object.fromEntries(Object.entries(t.nodes).filter(([,e])=>e.spec.toText).map(([e,n])=>[e,n.spec.toText]))}function fF(t,e){const n=Ot(e,t.schema),{from:r,to:i}=t.selection,s=[];t.doc.nodesBetween(r,i,a=>{s.push(a)});const o=s.reverse().find(a=>a.type.name===n.name);return o?{...o.attrs}:{}}function MT(t,e){const n=jh(typeof e=="string"?e:e.name,t.schema);return n==="node"?fF(t,e):n==="mark"?bT(t,e):{}}function dF(t,e=JSON.stringify){const n={};return t.filter(r=>{const i=e(r);return Object.prototype.hasOwnProperty.call(n,i)?!1:n[i]=!0})}function hF(t){const e=dF(t);return e.length===1?e:e.filter((n,r)=>!e.filter((s,o)=>o!==r).some(s=>n.oldRange.from>=s.oldRange.from&&n.oldRange.to<=s.oldRange.to&&n.newRange.from>=s.newRange.from&&n.newRange.to<=s.newRange.to))}function _T(t){const{mapping:e,steps:n}=t,r=[];return e.maps.forEach((i,s)=>{const o=[];if(i.ranges.length)i.forEach((a,c)=>{o.push({from:a,to:c})});else{const{from:a,to:c}=n[s];if(a===void 0||c===void 0)return;o.push({from:a,to:c})}o.forEach(({from:a,to:c})=>{const f=e.slice(s).map(a,-1),d=e.slice(s).map(c),p=e.invert().map(f,-1),m=e.invert().map(d);r.push({oldRange:{from:p,to:m},newRange:{from:f,to:d}})})}),hF(r)}function cv(t,e,n){const r=[];return t===e?n.resolve(t).marks().forEach(i=>{const s=n.resolve(t),o=lv(s,i.type);o&&r.push({mark:i,...o})}):n.nodesBetween(t,e,(i,s)=>{!i||(i==null?void 0:i.nodeSize)===void 0||r.push(...i.marks.map(o=>({from:s,to:s+i.nodeSize,mark:o})))}),r}var pF=(t,e,n,r=20)=>{const i=t.doc.resolve(n);let s=r,o=null;for(;s>0&&o===null;){const a=i.node(s);(a==null?void 0:a.type.name)===e?o=a:s-=1}return[o,s]};function pf(t,e){return e.nodes[t]||e.marks[t]||null}function zf(t,e,n){return Object.fromEntries(Object.entries(n).filter(([r])=>{const i=t.find(s=>s.type===e&&s.name===r);return i?i.attribute.keepOnSplit:!1}))}var mF=(t,e=500)=>{let n="";const r=t.parentOffset;return t.parent.nodesBetween(Math.max(0,r-e),r,(i,s,o,a)=>{var c,f;const d=((f=(c=i.type.spec).toText)==null?void 0:f.call(c,{node:i,pos:s,parent:o,index:a}))||i.textContent||"%leaf%";n+=i.isAtom&&!i.isText?d:d.slice(0,Math.max(0,r-s))}),n};function T0(t,e,n={}){const{empty:r,ranges:i}=t.selection,s=e?ts(e,t.schema):null;if(r)return!!(t.storedMarks||t.selection.$from.marks()).filter(p=>s?s.name===p.type.name:!0).find(p=>Td(p.attrs,n,{strict:!1}));let o=0;const a=[];if(i.forEach(({$from:p,$to:m})=>{const g=p.pos,v=m.pos;t.doc.nodesBetween(g,v,(S,C)=>{if(!S.isText&&!S.marks.length)return;const x=Math.max(g,C),w=Math.min(v,C+S.nodeSize),E=w-x;o+=E,a.push(...S.marks.map(M=>({mark:M,from:x,to:w})))})}),o===0)return!1;const c=a.filter(p=>s?s.name===p.mark.type.name:!0).filter(p=>Td(p.mark.attrs,n,{strict:!1})).reduce((p,m)=>p+m.to-m.from,0),f=a.filter(p=>s?p.mark.type!==s&&p.mark.type.excludes(s):!0).reduce((p,m)=>p+m.to-m.from,0);return(c>0?c+f:c)>=o}function gF(t,e,n={}){if(!e)return Js(t,null,n)||T0(t,null,n);const r=jh(e,t.schema);return r==="node"?Js(t,e,n):r==="mark"?T0(t,e,n):!1}var yF=(t,e)=>{const{$from:n,$to:r,$anchor:i}=t.selection;if(e){const s=zh(a=>a.type.name===e)(t.selection);if(!s)return!1;const o=t.doc.resolve(s.pos+1);return i.pos+1===o.end()}return!(r.parentOffset<r.parent.nodeSize-2||n.pos!==r.pos)},vF=t=>{const{$from:e,$to:n}=t.selection;return!(e.parentOffset>0||e.pos!==n.pos)};function TS(t,e){return Array.isArray(e)?e.some(n=>(typeof n=="string"?n:n.name)===t.name):e}function NS(t,e){const{nodeExtensions:n}=ta(e),r=n.find(o=>o.name===t);if(!r)return!1;const i={name:r.name,options:r.options,storage:r.storage},s=We(me(r,"group",i));return typeof s!="string"?!1:s.split(" ").includes("list")}function Bh(t,{checkChildren:e=!0,ignoreWhitespace:n=!1}={}){var r;if(n){if(t.type.name==="hardBreak")return!0;if(t.isText)return/^\s*$/m.test((r=t.text)!=null?r:"")}if(t.isText)return!t.text;if(t.isAtom||t.isLeaf)return!1;if(t.content.childCount===0)return!0;if(e){let i=!0;return t.content.forEach(s=>{i!==!1&&(Bh(s,{ignoreWhitespace:n,checkChildren:e})||(i=!1))}),i}return!1}function OT(t){return t instanceof ye}var AT=class PT{constructor(e){this.position=e}static fromJSON(e){return new PT(e.position)}toJSON(){return{position:this.position}}};function xF(t,e){const n=e.mapping.mapResult(t.position);return{position:new AT(n.pos),mapResult:n}}function wF(t){return new AT(t)}function bF(t,e,n){var r;const{selection:i}=e;let s=null;if(yT(i)&&(s=i.$cursor),s){const a=(r=t.storedMarks)!=null?r:s.marks();return s.parent.type.allowsMarkType(n)&&(!!n.isInSet(a)||!a.some(f=>f.type.excludes(n)))}const{ranges:o}=i;return o.some(({$from:a,$to:c})=>{let f=a.depth===0?t.doc.inlineContent&&t.doc.type.allowsMarkType(n):!1;return t.doc.nodesBetween(a.pos,c.pos,(d,p,m)=>{if(f)return!1;if(d.isInline){const g=!m||m.type.allowsMarkType(n),v=!!n.isInSet(d.marks)||!d.marks.some(S=>S.type.excludes(n));f=g&&v}return!f}),f})}var SF=(t,e={})=>({tr:n,state:r,dispatch:i})=>{const{selection:s}=n,{empty:o,ranges:a}=s,c=ts(t,r.schema);if(i)if(o){const f=bT(r,c);n.addStoredMark(c.create({...f,...e}))}else a.forEach(f=>{const d=f.$from.pos,p=f.$to.pos;r.doc.nodesBetween(d,p,(m,g)=>{const v=Math.max(g,d),S=Math.min(g+m.nodeSize,p);m.marks.find(x=>x.type===c)?m.marks.forEach(x=>{c===x.type&&n.addMark(v,S,c.create({...x.attrs,...e}))}):n.addMark(v,S,c.create(e))})});return bF(r,n,c)},kF=(t,e)=>({tr:n})=>(n.setMeta(t,e),!0),CF=(t,e={})=>({state:n,dispatch:r,chain:i})=>{const s=Ot(t,n.schema);let o;return n.selection.$anchor.sameParent(n.selection.$head)&&(o=n.selection.$anchor.parent.attrs),s.isTextblock?i().command(({commands:a})=>Fb(s,{...o,...e})(n)?!0:a.clearNodes()).command(({state:a})=>Fb(s,{...o,...e})(a,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},EF=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,i=Co(t,0,r.content.size),s=ye.create(r,i);e.setSelection(s)}return!0},TF=(t,e)=>({tr:n,state:r,dispatch:i})=>{const{selection:s}=r;let o,a;return typeof e=="number"?(o=e,a=e):e&&"from"in e&&"to"in e?(o=e.from,a=e.to):(o=s.from,a=s.to),i&&n.doc.nodesBetween(o,a,(c,f)=>{c.isText||n.setNodeMarkup(f,void 0,{...c.attrs,dir:t})}),!0},NF=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,{from:i,to:s}=typeof t=="number"?{from:t,to:t}:t,o=ke.atStart(r).from,a=ke.atEnd(r).to,c=Co(i,o,a),f=Co(s,o,a),d=ke.create(r,c,f);e.setSelection(d)}return!0},MF=t=>({state:e,dispatch:n})=>{const r=Ot(t,e.schema);return b5(r)(e,n)};function MS(t,e){const n=t.storedMarks||t.selection.$to.parentOffset&&t.selection.$from.marks();if(n){const r=n.filter(i=>e==null?void 0:e.includes(i.type.name));t.tr.ensureMarks(r)}}var _F=({keepMarks:t=!0}={})=>({tr:e,state:n,dispatch:r,editor:i})=>{const{selection:s,doc:o}=e,{$from:a,$to:c}=s,f=i.extensionManager.attributes,d=zf(f,a.node().type.name,a.node().attrs);if(s instanceof ye&&s.node.isBlock)return!a.parentOffset||!Gi(o,a.pos)?!1:(r&&(t&&MS(n,i.extensionManager.splittableMarks),e.split(a.pos).scrollIntoView()),!0);if(!a.parent.isBlock)return!1;const p=c.parentOffset===c.parent.content.size,m=a.depth===0?void 0:rF(a.node(-1).contentMatchAt(a.indexAfter(-1)));let g=p&&m?[{type:m,attrs:d}]:void 0,v=Gi(e.doc,e.mapping.map(a.pos),1,g);if(!g&&!v&&Gi(e.doc,e.mapping.map(a.pos),1,m?[{type:m}]:void 0)&&(v=!0,g=m?[{type:m,attrs:d}]:void 0),r){if(v&&(s instanceof ke&&e.deleteSelection(),e.split(e.mapping.map(a.pos),1,g),m&&!p&&!a.parentOffset&&a.parent.type!==m)){const S=e.mapping.map(a.before()),C=e.doc.resolve(S);a.node(-1).canReplaceWith(C.index(),C.index()+1,m)&&e.setNodeMarkup(e.mapping.map(a.before()),m)}t&&MS(n,i.extensionManager.splittableMarks),e.scrollIntoView()}return v},OF=(t,e={})=>({tr:n,state:r,dispatch:i,editor:s})=>{var o;const a=Ot(t,r.schema),{$from:c,$to:f}=r.selection,d=r.selection.node;if(d&&d.isBlock||c.depth<2||!c.sameParent(f))return!1;const p=c.node(-1);if(p.type!==a)return!1;const m=s.extensionManager.attributes;if(c.parent.content.size===0&&c.node(-1).childCount===c.indexAfter(-1)){if(c.depth===2||c.node(-3).type!==a||c.index(-2)!==c.node(-2).childCount-1)return!1;if(i){let x=X.empty;const w=c.index(-1)?1:c.index(-2)?2:3;for(let R=c.depth-w;R>=c.depth-3;R-=1)x=X.from(c.node(R).copy(x));const E=c.indexAfter(-1)<c.node(-2).childCount?1:c.indexAfter(-2)<c.node(-3).childCount?2:3,M={...zf(m,c.node().type.name,c.node().attrs),...e},_=((o=a.contentMatch.defaultType)==null?void 0:o.createAndFill(M))||void 0;x=x.append(X.from(a.createAndFill(null,_)||void 0));const O=c.before(c.depth-(w-1));n.replace(O,c.after(-E),new oe(x,4-w,0));let A=-1;n.doc.nodesBetween(O,n.doc.content.size,(R,z)=>{if(A>-1)return!1;R.isTextblock&&R.content.size===0&&(A=z+1)}),A>-1&&n.setSelection(ke.near(n.doc.resolve(A))),n.scrollIntoView()}return!0}const g=f.pos===c.end()?p.contentMatchAt(0).defaultType:null,v={...zf(m,p.type.name,p.attrs),...e},S={...zf(m,c.node().type.name,c.node().attrs),...e};n.delete(c.pos,f.pos);const C=g?[{type:a,attrs:v},{type:g,attrs:S}]:[{type:a,attrs:v}];if(!Gi(n.doc,c.pos,2))return!1;if(i){const{selection:x,storedMarks:w}=r,{splittableMarks:E}=s.extensionManager,M=w||x.$to.parentOffset&&x.$from.marks();if(n.split(c.pos,2,C).scrollIntoView(),!M||!i)return!0;const _=M.filter(O=>E.includes(O.type.name));n.ensureMarks(_)}return!0},tg=(t,e)=>{const n=zh(o=>o.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(Math.max(0,n.pos-1)).before(n.depth);if(r===void 0)return!0;const i=t.doc.nodeAt(r);return n.node.type===(i==null?void 0:i.type)&&eo(t.doc,n.pos)&&t.join(n.pos),!0},ng=(t,e)=>{const n=zh(o=>o.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(n.start).after(n.depth);if(r===void 0)return!0;const i=t.doc.nodeAt(r);return n.node.type===(i==null?void 0:i.type)&&eo(t.doc,r)&&t.join(r),!0},AF=(t,e,n,r={})=>({editor:i,tr:s,state:o,dispatch:a,chain:c,commands:f,can:d})=>{const{extensions:p,splittableMarks:m}=i.extensionManager,g=Ot(t,o.schema),v=Ot(e,o.schema),{selection:S,storedMarks:C}=o,{$from:x,$to:w}=S,E=x.blockRange(w),M=C||S.$to.parentOffset&&S.$from.marks();if(!E)return!1;const _=zh(O=>NS(O.type.name,p))(S);if(E.depth>=1&&_&&E.depth-_.depth<=1){if(_.node.type===g)return f.liftListItem(v);if(NS(_.node.type.name,p)&&g.validContent(_.node.content)&&a)return c().command(()=>(s.setNodeMarkup(_.pos,g),!0)).command(()=>tg(s,g)).command(()=>ng(s,g)).run()}return!n||!M||!a?c().command(()=>d().wrapInList(g,r)?!0:f.clearNodes()).wrapInList(g,r).command(()=>tg(s,g)).command(()=>ng(s,g)).run():c().command(()=>{const O=d().wrapInList(g,r),A=M.filter(R=>m.includes(R.type.name));return s.ensureMarks(A),O?!0:f.clearNodes()}).wrapInList(g,r).command(()=>tg(s,g)).command(()=>ng(s,g)).run()},PF=(t,e={},n={})=>({state:r,commands:i})=>{const{extendEmptyMarkRange:s=!1}=n,o=ts(t,r.schema);return T0(r,o,e)?i.unsetMark(o,{extendEmptyMarkRange:s}):i.setMark(o,e)},RF=(t,e,n={})=>({state:r,commands:i})=>{const s=Ot(t,r.schema),o=Ot(e,r.schema),a=Js(r,s,n);let c;return r.selection.$anchor.sameParent(r.selection.$head)&&(c=r.selection.$anchor.parent.attrs),a?i.setNode(o,c):i.setNode(s,{...c,...n})},DF=(t,e={})=>({state:n,commands:r})=>{const i=Ot(t,n.schema);return Js(n,i,e)?r.lift(i):r.wrapIn(i,e)},IF=()=>({state:t,dispatch:e})=>{const n=t.plugins;for(let r=0;r<n.length;r+=1){const i=n[r];let s;if(i.spec.isInputRules&&(s=i.getState(t))){if(e){const o=t.tr,a=s.transform;for(let c=a.steps.length-1;c>=0;c-=1)o.step(a.steps[c].invert(a.docs[c]));if(s.text){const c=o.doc.resolve(s.from).marks();o.replaceWith(s.from,s.to,t.schema.text(s.text,c))}else o.delete(s.from,s.to)}return!0}}return!1},LF=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,{empty:r,ranges:i}=n;return r||e&&i.forEach(s=>{t.removeMark(s.$from.pos,s.$to.pos)}),!0},jF=(t,e={})=>({tr:n,state:r,dispatch:i})=>{var s;const{extendEmptyMarkRange:o=!1}=e,{selection:a}=n,c=ts(t,r.schema),{$from:f,empty:d,ranges:p}=a;if(!i)return!0;if(d&&o){let{from:m,to:g}=a;const v=(s=f.marks().find(C=>C.type===c))==null?void 0:s.attrs,S=lv(f,c,v);S&&(m=S.from,g=S.to),n.removeMark(m,g,c)}else p.forEach(m=>{n.removeMark(m.$from.pos,m.$to.pos,c)});return n.removeStoredMark(c),!0},zF=t=>({tr:e,state:n,dispatch:r})=>{const{selection:i}=n;let s,o;return typeof t=="number"?(s=t,o=t):t&&"from"in t&&"to"in t?(s=t.from,o=t.to):(s=i.from,o=i.to),r&&e.doc.nodesBetween(s,o,(a,c)=>{if(a.isText)return;const f={...a.attrs};delete f.dir,e.setNodeMarkup(c,void 0,f)}),!0},BF=(t,e={})=>({tr:n,state:r,dispatch:i})=>{let s=null,o=null;const a=jh(typeof t=="string"?t:t.name,r.schema);if(!a)return!1;a==="node"&&(s=Ot(t,r.schema)),a==="mark"&&(o=ts(t,r.schema));let c=!1;return n.selection.ranges.forEach(f=>{const d=f.$from.pos,p=f.$to.pos;let m,g,v,S;n.selection.empty?r.doc.nodesBetween(d,p,(C,x)=>{s&&s===C.type&&(c=!0,v=Math.max(x,d),S=Math.min(x+C.nodeSize,p),m=x,g=C)}):r.doc.nodesBetween(d,p,(C,x)=>{x<d&&s&&s===C.type&&(c=!0,v=Math.max(x,d),S=Math.min(x+C.nodeSize,p),m=x,g=C),x>=d&&x<=p&&(s&&s===C.type&&(c=!0,i&&n.setNodeMarkup(x,void 0,{...C.attrs,...e})),o&&C.marks.length&&C.marks.forEach(w=>{if(o===w.type&&(c=!0,i)){const E=Math.max(x,d),M=Math.min(x+C.nodeSize,p);n.addMark(E,M,o.create({...w.attrs,...e}))}}))}),g&&(m!==void 0&&i&&n.setNodeMarkup(m,void 0,{...g.attrs,...e}),o&&g.marks.length&&g.marks.forEach(C=>{o===C.type&&i&&n.addMark(v,S,o.create({...C.attrs,...e}))}))}),c},FF=(t,e={})=>({state:n,dispatch:r})=>{const i=Ot(t,n.schema);return p5(i,e)(n,r)},$F=(t,e={})=>({state:n,dispatch:r})=>{const i=Ot(t,n.schema);return m5(i,e)(n,r)},HF=class{constructor(){this.callbacks={}}on(t,e){return this.callbacks[t]||(this.callbacks[t]=[]),this.callbacks[t].push(e),this}emit(t,...e){const n=this.callbacks[t];return n&&n.forEach(r=>r.apply(this,e)),this}off(t,e){const n=this.callbacks[t];return n&&(e?this.callbacks[t]=n.filter(r=>r!==e):delete this.callbacks[t]),this}once(t,e){const n=(...r)=>{this.off(t,n),e.apply(this,r)};return this.on(t,n)}removeAllListeners(){this.callbacks={}}},Fh=class{constructor(t){var e;this.find=t.find,this.handler=t.handler,this.undoable=(e=t.undoable)!=null?e:!0}},UF=(t,e)=>{if(ov(e))return e.exec(t);const n=e(t);if(!n)return null;const r=[n.text];return r.index=n.index,r.input=t,r.data=n.data,n.replaceWith&&(n.text.includes(n.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),r.push(n.replaceWith)),r};function mf(t){var e;const{editor:n,from:r,to:i,text:s,rules:o,plugin:a}=t,{view:c}=n;if(c.composing)return!1;const f=c.state.doc.resolve(r);if(f.parent.type.spec.code||(e=f.nodeBefore||f.nodeAfter)!=null&&e.marks.find(m=>m.type.spec.code))return!1;let d=!1;const p=mF(f)+s;return o.forEach(m=>{if(d)return;const g=UF(p,m.find);if(!g)return;const v=c.state.tr,S=Ih({state:c.state,transaction:v}),C={from:r-(g[0].length-s.length),to:i},{commands:x,chain:w,can:E}=new Lh({editor:n,state:S});m.handler({state:S,range:C,match:g,commands:x,chain:w,can:E})===null||!v.steps.length||(m.undoable&&v.setMeta(a,{transform:v,from:r,to:i,text:s}),c.dispatch(v),d=!0)}),d}function VF(t){const{editor:e,rules:n}=t,r=new dt({state:{init(){return null},apply(i,s,o){const a=i.getMeta(r);if(a)return a;const c=i.getMeta("applyInputRules");return!!c&&setTimeout(()=>{let{text:d}=c;typeof d=="string"?d=d:d=uv(X.from(d),o.schema);const{from:p}=c,m=p+d.length;mf({editor:e,from:p,to:m,text:d,rules:n,plugin:r})}),i.selectionSet||i.docChanged?null:s}},props:{handleTextInput(i,s,o,a){return mf({editor:e,from:s,to:o,text:a,rules:n,plugin:r})},handleDOMEvents:{compositionend:i=>(setTimeout(()=>{const{$cursor:s}=i.state.selection;s&&mf({editor:e,from:s.pos,to:s.pos,text:"",rules:n,plugin:r})}),!1)},handleKeyDown(i,s){if(s.key!=="Enter")return!1;const{$cursor:o}=i.state.selection;return o?mf({editor:e,from:o.pos,to:o.pos,text:`
`,rules:n,plugin:r}):!1}},isInputRules:!0});return r}function WF(t){return Object.prototype.toString.call(t).slice(8,-1)}function gf(t){return WF(t)!=="Object"?!1:t.constructor===Object&&Object.getPrototypeOf(t)===Object.prototype}function RT(t,e){const n={...t};return gf(t)&&gf(e)&&Object.keys(e).forEach(r=>{gf(e[r])&&gf(t[r])?n[r]=RT(t[r],e[r]):n[r]=e[r]}),n}var fv=class{constructor(t={}){this.type="extendable",this.parent=null,this.child=null,this.name="",this.config={name:this.name},this.config={...this.config,...t},this.name=this.config.name}get options(){return{...We(me(this,"addOptions",{name:this.name}))||{}}}get storage(){return{...We(me(this,"addStorage",{name:this.name,options:this.options}))||{}}}configure(t={}){const e=this.extend({...this.config,addOptions:()=>RT(this.options,t)});return e.name=this.name,e.parent=this.parent,e}extend(t={}){const e=new this.constructor({...this.config,...t});return e.parent=this,this.child=e,e.name="name"in t?t.name:e.parent.name,e}},qo=class DT extends fv{constructor(){super(...arguments),this.type="mark"}static create(e={}){const n=typeof e=="function"?e():e;return new DT(n)}static handleExit({editor:e,mark:n}){const{tr:r}=e.state,i=e.state.selection.$from;if(i.pos===i.end()){const o=i.marks();if(!!!o.find(f=>(f==null?void 0:f.type.name)===n.name))return!1;const c=o.find(f=>(f==null?void 0:f.type.name)===n.name);return c&&r.removeStoredMark(c),r.insertText(" ",i.pos),e.view.dispatch(r),!0}return!1}configure(e){return super.configure(e)}extend(e){const n=typeof e=="function"?e():e;return super.extend(n)}};function KF(t){return typeof t=="number"}var qF=class{constructor(t){this.find=t.find,this.handler=t.handler}},GF=(t,e,n)=>{if(ov(e))return[...t.matchAll(e)];const r=e(t,n);return r?r.map(i=>{const s=[i.text];return s.index=i.index,s.input=t,s.data=i.data,i.replaceWith&&(i.text.includes(i.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),s.push(i.replaceWith)),s}):[]};function XF(t){const{editor:e,state:n,from:r,to:i,rule:s,pasteEvent:o,dropEvent:a}=t,{commands:c,chain:f,can:d}=new Lh({editor:e,state:n}),p=[];return n.doc.nodesBetween(r,i,(g,v)=>{var S,C,x,w,E;if((C=(S=g.type)==null?void 0:S.spec)!=null&&C.code||!(g.isText||g.isTextblock||g.isInline))return;const M=(E=(w=(x=g.content)==null?void 0:x.size)!=null?w:g.nodeSize)!=null?E:0,_=Math.max(r,v),O=Math.min(i,v+M);if(_>=O)return;const A=g.isText?g.text||"":g.textBetween(_-v,O-v,void 0,"");GF(A,s.find,o).forEach(z=>{if(z.index===void 0)return;const B=_+z.index+1,te=B+z[0].length,re={from:n.tr.mapping.map(B),to:n.tr.mapping.map(te)},le=s.handler({state:n,range:re,match:z,commands:c,chain:f,can:d,pasteEvent:o,dropEvent:a});p.push(le)})}),p.every(g=>g!==null)}var yf=null,JF=t=>{var e;const n=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(e=n.clipboardData)==null||e.setData("text/html",t),n};function YF(t){const{editor:e,rules:n}=t;let r=null,i=!1,s=!1,o=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,a;try{a=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{a=null}const c=({state:d,from:p,to:m,rule:g,pasteEvt:v})=>{const S=d.tr,C=Ih({state:d,transaction:S});if(!(!XF({editor:e,state:C,from:Math.max(p-1,0),to:m.b-1,rule:g,pasteEvent:v,dropEvent:a})||!S.steps.length)){try{a=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{a=null}return o=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,S}};return n.map(d=>new dt({view(p){const m=v=>{var S;r=(S=p.dom.parentElement)!=null&&S.contains(v.target)?p.dom.parentElement:null,r&&(yf=e)},g=()=>{yf&&(yf=null)};return window.addEventListener("dragstart",m),window.addEventListener("dragend",g),{destroy(){window.removeEventListener("dragstart",m),window.removeEventListener("dragend",g)}}},props:{handleDOMEvents:{drop:(p,m)=>{if(s=r===p.dom.parentElement,a=m,!s){const g=yf;g!=null&&g.isEditable&&setTimeout(()=>{const v=g.state.selection;v&&g.commands.deleteRange({from:v.from,to:v.to})},10)}return!1},paste:(p,m)=>{var g;const v=(g=m.clipboardData)==null?void 0:g.getData("text/html");return o=m,i=!!(v!=null&&v.includes("data-pm-slice")),!1}}},appendTransaction:(p,m,g)=>{const v=p[0],S=v.getMeta("uiEvent")==="paste"&&!i,C=v.getMeta("uiEvent")==="drop"&&!s,x=v.getMeta("applyPasteRules"),w=!!x;if(!S&&!C&&!w)return;if(w){let{text:_}=x;typeof _=="string"?_=_:_=uv(X.from(_),g.schema);const{from:O}=x,A=O+_.length,R=JF(_);return c({rule:d,state:g,from:O,to:{b:A},pasteEvt:R})}const E=m.doc.content.findDiffStart(g.doc.content),M=m.doc.content.findDiffEnd(g.doc.content);if(!(!KF(E)||!M||E===M.b))return c({rule:d,state:g,from:E,to:M,pasteEvt:o})}}))}var $h=class{constructor(t,e){this.splittableMarks=[],this.editor=e,this.baseExtensions=t,this.extensions=ET(t),this.schema=aF(this.extensions,e),this.setupExtensions()}get commands(){return this.extensions.reduce((t,e)=>{const n={name:e.name,options:e.options,storage:this.editor.extensionStorage[e.name],editor:this.editor,type:pf(e.name,this.schema)},r=me(e,"addCommands",n);return r?{...t,...r()}:t},{})}get plugins(){const{editor:t}=this;return Md([...this.extensions].reverse()).flatMap(r=>{const i={name:r.name,options:r.options,storage:this.editor.extensionStorage[r.name],editor:t,type:pf(r.name,this.schema)},s=[],o=me(r,"addKeyboardShortcuts",i);let a={};if(r.type==="mark"&&me(r,"exitable",i)&&(a.ArrowRight=()=>qo.handleExit({editor:t,mark:r})),o){const m=Object.fromEntries(Object.entries(o()).map(([g,v])=>[g,()=>v({editor:t})]));a={...a,...m}}const c=f6(a);s.push(c);const f=me(r,"addInputRules",i);if(TS(r,t.options.enableInputRules)&&f){const m=f();if(m&&m.length){const g=VF({editor:t,rules:m}),v=Array.isArray(g)?g:[g];s.push(...v)}}const d=me(r,"addPasteRules",i);if(TS(r,t.options.enablePasteRules)&&d){const m=d();if(m&&m.length){const g=YF({editor:t,rules:m});s.push(...g)}}const p=me(r,"addProseMirrorPlugins",i);if(p){const m=p();s.push(...m)}return s})}get attributes(){return CT(this.extensions)}get nodeViews(){const{editor:t}=this,{nodeExtensions:e}=ta(this.extensions);return Object.fromEntries(e.filter(n=>!!me(n,"addNodeView")).map(n=>{const r=this.attributes.filter(c=>c.type===n.name),i={name:n.name,options:n.options,storage:this.editor.extensionStorage[n.name],editor:t,type:Ot(n.name,this.schema)},s=me(n,"addNodeView",i);if(!s)return[];const o=s();if(!o)return[];const a=(c,f,d,p,m)=>{const g=Bu(c,r);return o({node:c,view:f,getPos:d,decorations:p,innerDecorations:m,editor:t,extension:n,HTMLAttributes:g})};return[n.name,a]}))}dispatchTransaction(t){const{editor:e}=this;return Md([...this.extensions].reverse()).reduceRight((r,i)=>{const s={name:i.name,options:i.options,storage:this.editor.extensionStorage[i.name],editor:e,type:pf(i.name,this.schema)},o=me(i,"dispatchTransaction",s);return o?a=>{o.call(s,{transaction:a,next:r})}:r},t)}get markViews(){const{editor:t}=this,{markExtensions:e}=ta(this.extensions);return Object.fromEntries(e.filter(n=>!!me(n,"addMarkView")).map(n=>{const r=this.attributes.filter(a=>a.type===n.name),i={name:n.name,options:n.options,storage:this.editor.extensionStorage[n.name],editor:t,type:ts(n.name,this.schema)},s=me(n,"addMarkView",i);if(!s)return[];const o=(a,c,f)=>{const d=Bu(a,r);return s()({mark:a,view:c,inline:f,editor:t,extension:n,HTMLAttributes:d,updateAttributes:p=>{f$(a,t,p)}})};return[n.name,o]}))}setupExtensions(){const t=this.extensions;this.editor.extensionStorage=Object.fromEntries(t.map(e=>[e.name,e.storage])),t.forEach(e=>{var n;const r={name:e.name,options:e.options,storage:this.editor.extensionStorage[e.name],editor:this.editor,type:pf(e.name,this.schema)};e.type==="mark"&&((n=We(me(e,"keepOnSplit",r)))==null||n)&&this.splittableMarks.push(e.name);const i=me(e,"onBeforeCreate",r),s=me(e,"onCreate",r),o=me(e,"onUpdate",r),a=me(e,"onSelectionUpdate",r),c=me(e,"onTransaction",r),f=me(e,"onFocus",r),d=me(e,"onBlur",r),p=me(e,"onDestroy",r);i&&this.editor.on("beforeCreate",i),s&&this.editor.on("create",s),o&&this.editor.on("update",o),a&&this.editor.on("selectionUpdate",a),c&&this.editor.on("transaction",c),f&&this.editor.on("focus",f),d&&this.editor.on("blur",d),p&&this.editor.on("destroy",p)})}};$h.resolve=ET;$h.sort=Md;$h.flatten=av;var QF={};sv(QF,{ClipboardTextSerializer:()=>LT,Commands:()=>jT,Delete:()=>zT,Drop:()=>BT,Editable:()=>FT,FocusEvents:()=>HT,Keymap:()=>UT,Paste:()=>VT,Tabindex:()=>WT,TextDirection:()=>KT,focusEventsPluginKey:()=>$T});var Et=class IT extends fv{constructor(){super(...arguments),this.type="extension"}static create(e={}){const n=typeof e=="function"?e():e;return new IT(n)}configure(e){return super.configure(e)}extend(e){const n=typeof e=="function"?e():e;return super.extend(n)}},LT=Et.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new dt({key:new Lt("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:t}=this,{state:e,schema:n}=t,{doc:r,selection:i}=e,{ranges:s}=i,o=Math.min(...s.map(d=>d.$from.pos)),a=Math.max(...s.map(d=>d.$to.pos)),c=NT(n);return TT(r,{from:o,to:a},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:c})}}})]}}),jT=Et.create({name:"commands",addCommands(){return{...mT}}}),zT=Et.create({name:"delete",onUpdate({transaction:t,appendedTransactions:e}){var n,r,i;const s=()=>{var o,a,c,f;if((f=(c=(a=(o=this.editor.options.coreExtensionOptions)==null?void 0:o.delete)==null?void 0:a.filterTransaction)==null?void 0:c.call(a,t))!=null?f:t.getMeta("y-sync$"))return;const d=ST(t.before,[t,...e]);_T(d).forEach(g=>{d.mapping.mapResult(g.oldRange.from).deletedAfter&&d.mapping.mapResult(g.oldRange.to).deletedBefore&&d.before.nodesBetween(g.oldRange.from,g.oldRange.to,(v,S)=>{const C=S+v.nodeSize-2,x=g.oldRange.from<=S&&C<=g.oldRange.to;this.editor.emit("delete",{type:"node",node:v,from:S,to:C,newFrom:d.mapping.map(S),newTo:d.mapping.map(C),deletedRange:g.oldRange,newRange:g.newRange,partial:!x,editor:this.editor,transaction:t,combinedTransform:d})})});const m=d.mapping;d.steps.forEach((g,v)=>{var S,C;if(g instanceof ii){const x=m.slice(v).map(g.from,-1),w=m.slice(v).map(g.to),E=m.invert().map(x,-1),M=m.invert().map(w),_=(S=d.doc.nodeAt(x-1))==null?void 0:S.marks.some(A=>A.eq(g.mark)),O=(C=d.doc.nodeAt(w))==null?void 0:C.marks.some(A=>A.eq(g.mark));this.editor.emit("delete",{type:"mark",mark:g.mark,from:g.from,to:g.to,deletedRange:{from:E,to:M},newRange:{from:x,to:w},partial:!!(O||_),editor:this.editor,transaction:t,combinedTransform:d})}})};(i=(r=(n=this.editor.options.coreExtensionOptions)==null?void 0:n.delete)==null?void 0:r.async)==null||i?setTimeout(s,0):s()}}),BT=Et.create({name:"drop",addProseMirrorPlugins(){return[new dt({key:new Lt("tiptapDrop"),props:{handleDrop:(t,e,n,r)=>{this.editor.emit("drop",{editor:this.editor,event:e,slice:n,moved:r})}}})]}}),FT=Et.create({name:"editable",addProseMirrorPlugins(){return[new dt({key:new Lt("editable"),props:{editable:()=>this.editor.options.editable}})]}}),$T=new Lt("focusEvents"),HT=Et.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:t}=this;return[new dt({key:$T,props:{handleDOMEvents:{focus:(e,n)=>{t.isFocused=!0;const r=t.state.tr.setMeta("focus",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1},blur:(e,n)=>{t.isFocused=!1;const r=t.state.tr.setMeta("blur",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1}}}})]}}),UT=Et.create({name:"keymap",addKeyboardShortcuts(){const t=()=>this.editor.commands.first(({commands:o})=>[()=>o.undoInputRule(),()=>o.command(({tr:a})=>{const{selection:c,doc:f}=a,{empty:d,$anchor:p}=c,{pos:m,parent:g}=p,v=p.parent.isTextblock&&m>0?a.doc.resolve(m-1):p,S=v.parent.type.spec.isolating,C=p.pos-p.parentOffset,x=S&&v.parent.childCount===1?C===p.pos:Oe.atStart(f).from===m;return!d||!g.type.isTextblock||g.textContent.length||!x||x&&p.parent.type.name==="paragraph"?!1:o.clearNodes()}),()=>o.deleteSelection(),()=>o.joinBackward(),()=>o.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:o})=>[()=>o.deleteSelection(),()=>o.deleteCurrentNode(),()=>o.joinForward(),()=>o.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:o})=>[()=>o.newlineInCode(),()=>o.createParagraphNear(),()=>o.liftEmptyBlock(),()=>o.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:t,"Mod-Backspace":t,"Shift-Backspace":t,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},i={...r},s={...r,"Ctrl-h":t,"Alt-Backspace":t,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return Nd()||wT()?s:i},addProseMirrorPlugins(){return[new dt({key:new Lt("clearDocument"),appendTransaction:(t,e,n)=>{if(t.some(S=>S.getMeta("composition")))return;const r=t.some(S=>S.docChanged)&&!e.doc.eq(n.doc),i=t.some(S=>S.getMeta("preventClearDocument"));if(!r||i)return;const{empty:s,from:o,to:a}=e.selection,c=Oe.atStart(e.doc).from,f=Oe.atEnd(e.doc).to;if(s||!(o===c&&a===f)||!Bh(n.doc))return;const m=n.tr,g=Ih({state:n,transaction:m}),{commands:v}=new Lh({editor:this.editor,state:g});if(v.clearNodes(),!!m.steps.length)return m}})]}}),VT=Et.create({name:"paste",addProseMirrorPlugins(){return[new dt({key:new Lt("tiptapPaste"),props:{handlePaste:(t,e,n)=>{this.editor.emit("paste",{editor:this.editor,event:e,slice:n})}}})]}}),WT=Et.create({name:"tabindex",addProseMirrorPlugins(){return[new dt({key:new Lt("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}}),KT=Et.create({name:"textDirection",addOptions(){return{direction:void 0}},addGlobalAttributes(){if(!this.options.direction)return[];const{nodeExtensions:t}=ta(this.extensions);return[{types:t.filter(e=>e.name!=="text").map(e=>e.name),attributes:{dir:{default:this.options.direction,parseHTML:e=>{const n=e.getAttribute("dir");return n&&(n==="ltr"||n==="rtl"||n==="auto")?n:this.options.direction},renderHTML:e=>e.dir?{dir:e.dir}:{}}}}]},addProseMirrorPlugins(){return[new dt({key:new Lt("textDirection"),props:{attributes:()=>{const t=this.options.direction;return t?{dir:t}:{}}}})]}}),ZF=class xl{constructor(e,n,r=!1,i=null){this.currentNode=null,this.actualDepth=null,this.isBlock=r,this.resolvedPos=e,this.editor=n,this.currentNode=i}get name(){return this.node.type.name}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var e;return(e=this.actualDepth)!=null?e:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(e){let n=this.from,r=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You cant set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}n=this.from+1,r=this.to-1}this.editor.commands.insertContentAt({from:n,to:r},e)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const e=this.resolvedPos.start(this.resolvedPos.depth-1),n=this.resolvedPos.doc.resolve(e);return new xl(n,this.editor)}get before(){let e=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.from-3)),new xl(e,this.editor)}get after(){let e=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.to+3)),new xl(e,this.editor)}get children(){const e=[];return this.node.content.forEach((n,r)=>{const i=n.isBlock&&!n.isTextblock,s=n.isAtom&&!n.isText,o=this.pos+r+(s?0:1);if(o<0||o>this.resolvedPos.doc.nodeSize-2)return;const a=this.resolvedPos.doc.resolve(o);if(!i&&a.depth<=this.depth)return;const c=new xl(a,this.editor,i,i?n:null);i&&(c.actualDepth=this.depth+1),e.push(new xl(a,this.editor,i,i?n:null))}),e}get firstChild(){return this.children[0]||null}get lastChild(){const e=this.children;return e[e.length-1]||null}closest(e,n={}){let r=null,i=this.parent;for(;i&&!r;){if(i.node.type.name===e)if(Object.keys(n).length>0){const s=i.node.attrs,o=Object.keys(n);for(let a=0;a<o.length;a+=1){const c=o[a];if(s[c]!==n[c])break}}else r=i;i=i.parent}return r}querySelector(e,n={}){return this.querySelectorAll(e,n,!0)[0]||null}querySelectorAll(e,n={},r=!1){let i=[];if(!this.children||this.children.length===0)return i;const s=Object.keys(n);return this.children.forEach(o=>{r&&i.length>0||(o.node.type.name===e&&s.every(c=>n[c]===o.node.attrs[c])&&i.push(o),!(r&&i.length>0)&&(i=i.concat(o.querySelectorAll(e,n,r))))}),i}setAttribute(e){const{tr:n}=this.editor.state;n.setNodeMarkup(this.from,void 0,{...this.node.attrs,...e}),this.editor.view.dispatch(n)}},e$=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}`;function t$(t,e,n){const r=document.querySelector("style[data-tiptap-style]");if(r!==null)return r;const i=document.createElement("style");return e&&i.setAttribute("nonce",e),i.setAttribute("data-tiptap-style",""),i.innerHTML=t,document.getElementsByTagName("head")[0].appendChild(i),i}var n$=class extends HF{constructor(t={}){super(),this.css=null,this.className="tiptap",this.editorView=null,this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.instanceId=Math.random().toString(36).slice(2,9),this.options={element:typeof document<"u"?document.createElement("div"):null,content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,textDirection:void 0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,emitContentError:!1,onBeforeCreate:()=>null,onCreate:()=>null,onMount:()=>null,onUnmount:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:r})=>{throw r},onPaste:()=>null,onDrop:()=>null,onDelete:()=>null,enableExtensionDispatchTransaction:!0},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.utils={getUpdatedPosition:xF,createMappablePosition:wF},this.setOptions(t),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("mount",this.options.onMount),this.on("unmount",this.options.onUnmount),this.on("contentError",this.options.onContentError),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:r,slice:i,moved:s})=>this.options.onDrop(r,i,s)),this.on("paste",({event:r,slice:i})=>this.options.onPaste(r,i)),this.on("delete",this.options.onDelete);const e=this.createDoc(),n=vT(e,this.options.autofocus);this.editorState=Dl.create({doc:e,schema:this.schema,selection:n||void 0}),this.options.element&&this.mount(this.options.element)}mount(t){if(typeof document>"u")throw new Error("[tiptap error]: The editor cannot be mounted because there is no 'document' defined in this environment.");this.createView(t),this.emit("mount",{editor:this}),this.css&&!document.head.contains(this.css)&&document.head.appendChild(this.css),window.setTimeout(()=>{this.isDestroyed||(this.options.autofocus!==!1&&this.options.autofocus!==null&&this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}unmount(){if(this.editorView){const t=this.editorView.dom;t!=null&&t.editor&&delete t.editor,this.editorView.destroy()}if(this.editorView=null,this.isInitialized=!1,this.css&&!document.querySelectorAll(`.${this.className}`).length)try{typeof this.css.remove=="function"?this.css.remove():this.css.parentNode&&this.css.parentNode.removeChild(this.css)}catch(t){console.warn("Failed to remove CSS element:",t)}this.css=null,this.emit("unmount",{editor:this})}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&typeof document<"u"&&(this.css=t$(e$,this.options.injectNonce))}setOptions(t={}){this.options={...this.options,...t},!(!this.editorView||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(t,e=!0){this.setOptions({editable:t}),e&&this.emit("update",{editor:this,transaction:this.state.tr,appendedTransactions:[]})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get view(){return this.editorView?this.editorView:new Proxy({state:this.editorState,updateState:t=>{this.editorState=t},dispatch:t=>{this.dispatchTransaction(t)},composing:!1,dragging:null,editable:!0,isDestroyed:!1},{get:(t,e)=>{if(this.editorView)return this.editorView[e];if(e==="state")return this.editorState;if(e in t)return Reflect.get(t,e);throw new Error(`[tiptap error]: The editor view is not available. Cannot access view['${e}']. The editor may not be mounted yet.`)}})}get state(){return this.editorView&&(this.editorState=this.view.state),this.editorState}registerPlugin(t,e){const n=kT(e)?e(t,[...this.state.plugins]):[...this.state.plugins,t],r=this.state.reconfigure({plugins:n});return this.view.updateState(r),r}unregisterPlugin(t){if(this.isDestroyed)return;const e=this.state.plugins;let n=e;if([].concat(t).forEach(i=>{const s=typeof i=="string"?`${i}$`:i.key;n=n.filter(o=>!o.key.startsWith(s))}),e.length===n.length)return;const r=this.state.reconfigure({plugins:n});return this.view.updateState(r),r}createExtensionManager(){var t,e;const r=[...this.options.enableCoreExtensions?[FT,LT.configure({blockSeparator:(e=(t=this.options.coreExtensionOptions)==null?void 0:t.clipboardTextSerializer)==null?void 0:e.blockSeparator}),jT,HT,UT,WT,BT,VT,zT,KT.configure({direction:this.options.textDirection})].filter(i=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[i.name]!==!1:!0):[],...this.options.extensions].filter(i=>["extension","node","mark"].includes(i==null?void 0:i.type));this.extensionManager=new $h(r,this)}createCommandManager(){this.commandManager=new Lh({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createDoc(){let t;try{t=E0(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(e){if(!(e instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(e.message))throw e;this.emit("contentError",{editor:this,error:e,disableCollaboration:()=>{"collaboration"in this.storage&&typeof this.storage.collaboration=="object"&&this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(n=>n.name!=="collaboration"),this.createExtensionManager()}}),t=E0(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}return t}createView(t){const{editorProps:e,enableExtensionDispatchTransaction:n}=this.options,r=e.dispatchTransaction||this.dispatchTransaction.bind(this),i=n?this.extensionManager.dispatchTransaction(r):r;this.editorView=new hT(t,{...e,attributes:{role:"textbox",...e==null?void 0:e.attributes},dispatchTransaction:i,state:this.editorState,markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews});const s=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(s),this.prependClass(),this.injectCSS();const o=this.view.dom;o.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`${this.className} ${this.view.dom.className}`}captureTransaction(t){this.isCapturingTransaction=!0,t(),this.isCapturingTransaction=!1;const e=this.capturedTransaction;return this.capturedTransaction=null,e}dispatchTransaction(t){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=t;return}t.steps.forEach(f=>{var d;return(d=this.capturedTransaction)==null?void 0:d.step(f)});return}const{state:e,transactions:n}=this.state.applyTransaction(t),r=!this.state.selection.eq(e.selection),i=n.includes(t),s=this.state;if(this.emit("beforeTransaction",{editor:this,transaction:t,nextState:e}),!i)return;this.view.updateState(e),this.emit("transaction",{editor:this,transaction:t,appendedTransactions:n.slice(1)}),r&&this.emit("selectionUpdate",{editor:this,transaction:t});const o=n.findLast(f=>f.getMeta("focus")||f.getMeta("blur")),a=o==null?void 0:o.getMeta("focus"),c=o==null?void 0:o.getMeta("blur");a&&this.emit("focus",{editor:this,event:a.event,transaction:o}),c&&this.emit("blur",{editor:this,event:c.event,transaction:o}),!(t.getMeta("preventUpdate")||!n.some(f=>f.docChanged)||s.doc.eq(e.doc))&&this.emit("update",{editor:this,transaction:t,appendedTransactions:n.slice(1)})}getAttributes(t){return MT(this.state,t)}isActive(t,e){const n=typeof t=="string"?t:null,r=typeof t=="string"?e:t;return gF(this.state,n,r)}getJSON(){return this.state.doc.toJSON()}getHTML(){return uv(this.state.doc.content,this.schema)}getText(t){const{blockSeparator:e=`

`,textSerializers:n={}}=t||{};return cF(this.state.doc,{blockSeparator:e,textSerializers:{...NT(this.schema),...n}})}get isEmpty(){return Bh(this.state.doc)}destroy(){this.emit("destroy"),this.unmount(),this.removeAllListeners()}get isDestroyed(){var t,e;return(e=(t=this.editorView)==null?void 0:t.isDestroyed)!=null?e:!0}$node(t,e){var n;return((n=this.$doc)==null?void 0:n.querySelector(t,e))||null}$nodes(t,e){var n;return((n=this.$doc)==null?void 0:n.querySelectorAll(t,e))||null}$pos(t){const e=this.state.doc.resolve(t);return new ZF(e,this)}get $doc(){return this.$pos(0)}};function na(t){return new Fh({find:t.find,handler:({state:e,range:n,match:r})=>{const i=We(t.getAttributes,void 0,r);if(i===!1||i===null)return null;const{tr:s}=e,o=r[r.length-1],a=r[0];if(o){const c=a.search(/\S/),f=n.from+a.indexOf(o),d=f+o.length;if(cv(n.from,n.to,e.doc).filter(g=>g.mark.type.excluded.find(S=>S===t.type&&S!==g.mark.type)).filter(g=>g.to>f).length)return null;d<n.to&&s.delete(d,n.to),f>n.from&&s.delete(n.from+c,f);const m=n.from+c+o.length;s.addMark(n.from+c,m,t.type.create(i||{})),s.removeStoredMark(t.type)}},undoable:t.undoable})}function r$(t){return new Fh({find:t.find,handler:({state:e,range:n,match:r})=>{const i=We(t.getAttributes,void 0,r)||{},{tr:s}=e,o=n.from;let a=n.to;const c=t.type.create(i);if(r[1]){const f=r[0].lastIndexOf(r[1]);let d=o+f;d>a?d=a:a=d+r[1].length;const p=r[0][r[0].length-1];s.insertText(p,o+r[0].length-1),s.replaceWith(d,a,c)}else if(r[0]){const f=t.type.isInline?o:o-1;s.insert(f,t.type.create(i)).delete(s.mapping.map(o),s.mapping.map(a))}s.scrollIntoView()},undoable:t.undoable})}function N0(t){return new Fh({find:t.find,handler:({state:e,range:n,match:r})=>{const i=e.doc.resolve(n.from),s=We(t.getAttributes,void 0,r)||{};if(!i.node(-1).canReplaceWith(i.index(-1),i.indexAfter(-1),t.type))return null;e.tr.delete(n.from,n.to).setBlockType(n.from,n.from,t.type,s)},undoable:t.undoable})}function ra(t){return new Fh({find:t.find,handler:({state:e,range:n,match:r,chain:i})=>{const s=We(t.getAttributes,void 0,r)||{},o=e.tr.delete(n.from,n.to),c=o.doc.resolve(n.from).blockRange(),f=c&&Uy(c,t.type,s);if(!f)return null;if(o.wrap(c,f),t.keepMarks&&t.editor){const{selection:p,storedMarks:m}=e,{splittableMarks:g}=t.editor.extensionManager,v=m||p.$to.parentOffset&&p.$from.marks();if(v){const S=v.filter(C=>g.includes(C.type.name));o.ensureMarks(S)}}if(t.keepAttributes){const p=t.type.name==="bulletList"||t.type.name==="orderedList"?"listItem":"taskList";i().updateAttributes(p,s).run()}const d=o.doc.resolve(n.from-1).nodeBefore;d&&d.type===t.type&&eo(o.doc,n.from-1)&&(!t.joinPredicate||t.joinPredicate(r,d))&&o.join(n.from-1)},undoable:t.undoable})}function i$(t,e){const{selection:n}=t,{$from:r}=n;if(n instanceof ye){const s=r.index();return r.parent.canReplaceWith(s,s+1,e)}let i=r.depth;for(;i>=0;){const s=r.index(i);if(r.node(i).contentMatchAt(s).matchType(e))return!0;i-=1}return!1}var s$={};sv(s$,{createAtomBlockMarkdownSpec:()=>o$,createBlockMarkdownSpec:()=>l$,createInlineMarkdownSpec:()=>c$,parseAttributes:()=>dv,parseIndentedBlocks:()=>M0,renderNestedMarkdownContent:()=>pv,serializeAttributes:()=>hv});function dv(t){if(!(t!=null&&t.trim()))return{};const e={},n=[],r=t.replace(/["']([^"']*)["']/g,f=>(n.push(f),`__QUOTED_${n.length-1}__`)),i=r.match(/(?:^|\s)\.([a-zA-Z][\w-]*)/g);if(i){const f=i.map(d=>d.trim().slice(1));e.class=f.join(" ")}const s=r.match(/(?:^|\s)#([a-zA-Z][\w-]*)/);s&&(e.id=s[1]);const o=/([a-zA-Z][\w-]*)\s*=\s*(__QUOTED_\d+__)/g;Array.from(r.matchAll(o)).forEach(([,f,d])=>{var p;const m=parseInt(((p=d.match(/__QUOTED_(\d+)__/))==null?void 0:p[1])||"0",10),g=n[m];g&&(e[f]=g.slice(1,-1))});const c=r.replace(/(?:^|\s)\.([a-zA-Z][\w-]*)/g,"").replace(/(?:^|\s)#([a-zA-Z][\w-]*)/g,"").replace(/([a-zA-Z][\w-]*)\s*=\s*__QUOTED_\d+__/g,"").trim();return c&&c.split(/\s+/).filter(Boolean).forEach(d=>{d.match(/^[a-zA-Z][\w-]*$/)&&(e[d]=!0)}),e}function hv(t){if(!t||Object.keys(t).length===0)return"";const e=[];return t.class&&String(t.class).split(/\s+/).filter(Boolean).forEach(r=>e.push(`.${r}`)),t.id&&e.push(`#${t.id}`),Object.entries(t).forEach(([n,r])=>{n==="class"||n==="id"||(r===!0?e.push(n):r!==!1&&r!=null&&e.push(`${n}="${String(r)}"`))}),e.join(" ")}function o$(t){const{nodeName:e,name:n,parseAttributes:r=dv,serializeAttributes:i=hv,defaultAttributes:s={},requiredAttributes:o=[],allowedAttributes:a}=t,c=n||e,f=d=>{if(!a)return d;const p={};return a.forEach(m=>{m in d&&(p[m]=d[m])}),p};return{parseMarkdown:(d,p)=>{const m={...s,...d.attributes};return p.createNode(e,m,[])},markdownTokenizer:{name:e,level:"block",start(d){var p;const m=new RegExp(`^:::${c}(?:\\s|$)`,"m"),g=(p=d.match(m))==null?void 0:p.index;return g!==void 0?g:-1},tokenize(d,p,m){const g=new RegExp(`^:::${c}(?:\\s+\\{([^}]*)\\})?\\s*:::(?:\\n|$)`),v=d.match(g);if(!v)return;const S=v[1]||"",C=r(S);if(!o.find(w=>!(w in C)))return{type:e,raw:v[0],attributes:C}}},renderMarkdown:d=>{const p=f(d.attrs||{}),m=i(p),g=m?` {${m}}`:"";return`:::${c}${g} :::`}}}function l$(t){const{nodeName:e,name:n,getContent:r,parseAttributes:i=dv,serializeAttributes:s=hv,defaultAttributes:o={},content:a="block",allowedAttributes:c}=t,f=n||e,d=p=>{if(!c)return p;const m={};return c.forEach(g=>{g in p&&(m[g]=p[g])}),m};return{parseMarkdown:(p,m)=>{let g;if(r){const S=r(p);g=typeof S=="string"?[{type:"text",text:S}]:S}else a==="block"?g=m.parseChildren(p.tokens||[]):g=m.parseInline(p.tokens||[]);const v={...o,...p.attributes};return m.createNode(e,v,g)},markdownTokenizer:{name:e,level:"block",start(p){var m;const g=new RegExp(`^:::${f}`,"m"),v=(m=p.match(g))==null?void 0:m.index;return v!==void 0?v:-1},tokenize(p,m,g){var v;const S=new RegExp(`^:::${f}(?:\\s+\\{([^}]*)\\})?\\s*\\n`),C=p.match(S);if(!C)return;const[x,w=""]=C,E=i(w);let M=1;const _=x.length;let O="";const A=/^:::([\w-]*)(\s.*)?/gm,R=p.slice(_);for(A.lastIndex=0;;){const z=A.exec(R);if(z===null)break;const B=z.index,te=z[1];if(!((v=z[2])!=null&&v.endsWith(":::"))){if(te)M+=1;else if(M-=1,M===0){const re=R.slice(0,B);O=re.trim();const le=p.slice(0,_+B+z[0].length);let de=[];if(O)if(a==="block")for(de=g.blockTokens(re),de.forEach(pe=>{pe.text&&(!pe.tokens||pe.tokens.length===0)&&(pe.tokens=g.inlineTokens(pe.text))});de.length>0;){const pe=de[de.length-1];if(pe.type==="paragraph"&&(!pe.text||pe.text.trim()===""))de.pop();else break}else de=g.inlineTokens(O);return{type:e,raw:le,attributes:E,content:O,tokens:de}}}}}},renderMarkdown:(p,m)=>{const g=d(p.attrs||{}),v=s(g),S=v?` {${v}}`:"",C=m.renderChildren(p.content||[],`

`);return`:::${f}${S}

${C}

:::`}}}function a$(t){if(!t.trim())return{};const e={},n=/(\w+)=(?:"([^"]*)"|'([^']*)')/g;let r=n.exec(t);for(;r!==null;){const[,i,s,o]=r;e[i]=s||o,r=n.exec(t)}return e}function u$(t){return Object.entries(t).filter(([,e])=>e!=null).map(([e,n])=>`${e}="${n}"`).join(" ")}function c$(t){const{nodeName:e,name:n,getContent:r,parseAttributes:i=a$,serializeAttributes:s=u$,defaultAttributes:o={},selfClosing:a=!1,allowedAttributes:c}=t,f=n||e,d=m=>{if(!c)return m;const g={};return c.forEach(v=>{const S=typeof v=="string"?v:v.name,C=typeof v=="string"?void 0:v.skipIfDefault;if(S in m){const x=m[S];if(C!==void 0&&x===C)return;g[S]=x}}),g},p=f.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");return{parseMarkdown:(m,g)=>{const v={...o,...m.attributes};if(a)return g.createNode(e,v);const S=r?r(m):m.content||"";return S?g.createNode(e,v,[g.createTextNode(S)]):g.createNode(e,v,[])},markdownTokenizer:{name:e,level:"inline",start(m){const g=a?new RegExp(`\\[${p}\\s*[^\\]]*\\]`):new RegExp(`\\[${p}\\s*[^\\]]*\\][\\s\\S]*?\\[\\/${p}\\]`),v=m.match(g),S=v==null?void 0:v.index;return S!==void 0?S:-1},tokenize(m,g,v){const S=a?new RegExp(`^\\[${p}\\s*([^\\]]*)\\]`):new RegExp(`^\\[${p}\\s*([^\\]]*)\\]([\\s\\S]*?)\\[\\/${p}\\]`),C=m.match(S);if(!C)return;let x="",w="";if(a){const[,M]=C;w=M}else{const[,M,_]=C;w=M,x=_||""}const E=i(w.trim());return{type:e,raw:C[0],content:x.trim(),attributes:E}}},renderMarkdown:m=>{let g="";r?g=r(m):m.content&&m.content.length>0&&(g=m.content.filter(x=>x.type==="text").map(x=>x.text).join(""));const v=d(m.attrs||{}),S=s(v),C=S?` ${S}`:"";return a?`[${f}${C}]`:`[${f}${C}]${g}[/${f}]`}}}function M0(t,e,n){var r,i,s,o;const a=t.split(`
`),c=[];let f="",d=0;const p=e.baseIndentSize||2;for(;d<a.length;){const m=a[d],g=m.match(e.itemPattern);if(!g){if(c.length>0)break;if(m.trim()===""){d+=1,f=`${f}${m}
`;continue}else return}const v=e.extractItemData(g),{indentLevel:S,mainContent:C}=v;f=`${f}${m}
`;const x=[C];for(d+=1;d<a.length;){const _=a[d];if(_.trim()===""){const A=a.slice(d+1).findIndex(B=>B.trim()!=="");if(A===-1)break;if((((i=(r=a[d+1+A].match(/^(\s*)/))==null?void 0:r[1])==null?void 0:i.length)||0)>S){x.push(_),f=`${f}${_}
`,d+=1;continue}else break}if((((o=(s=_.match(/^(\s*)/))==null?void 0:s[1])==null?void 0:o.length)||0)>S)x.push(_),f=`${f}${_}
`,d+=1;else break}let w;const E=x.slice(1);if(E.length>0){const _=E.map(O=>O.slice(S+p)).join(`
`);_.trim()&&(e.customNestedParser?w=e.customNestedParser(_):w=n.blockTokens(_))}const M=e.createToken(v,w);c.push(M)}if(c.length!==0)return{items:c,raw:f}}function pv(t,e,n,r){if(!t||!Array.isArray(t.content))return"";const i=typeof n=="function"?n(r):n,[s,...o]=t.content,a=e.renderChildren([s]),c=[`${i}${a}`];return o&&o.length>0&&o.forEach(f=>{const d=e.renderChildren([f]);if(d){const p=d.split(`
`).map(m=>m?e.indent(m):"").join(`
`);c.push(p)}}),c.join(`
`)}function f$(t,e,n={}){const{state:r}=e,{doc:i,tr:s}=r,o=t;i.descendants((a,c)=>{const f=s.mapping.map(c),d=s.mapping.map(c)+a.nodeSize;let p=null;if(a.marks.forEach(g=>{if(g!==o)return!1;p=g}),!p)return;let m=!1;if(Object.keys(n).forEach(g=>{n[g]!==p.attrs[g]&&(m=!0)}),m){const g=t.type.create({...t.attrs,...n});s.removeMark(f,d,t.type),s.addMark(f,d,g)}}),s.docChanged&&e.view.dispatch(s)}var vr=class qT extends fv{constructor(){super(...arguments),this.type="node"}static create(e={}){const n=typeof e=="function"?e():e;return new qT(n)}configure(e){return super.configure(e)}extend(e){const n=typeof e=="function"?e():e;return super.extend(n)}};function Ho(t){return new qF({find:t.find,handler:({state:e,range:n,match:r,pasteEvent:i})=>{const s=We(t.getAttributes,void 0,r,i);if(s===!1||s===null)return null;const{tr:o}=e,a=r[r.length-1],c=r[0];let f=n.to;if(a){const d=c.search(/\S/),p=n.from+c.indexOf(a),m=p+a.length;if(cv(n.from,n.to,e.doc).filter(v=>v.mark.type.excluded.find(C=>C===t.type&&C!==v.mark.type)).filter(v=>v.to>p).length)return null;m<n.to&&o.delete(m,n.to),p>n.from&&o.delete(n.from+d,p),f=n.from+d+a.length,o.addMark(n.from+d,f,t.type.create(s||{})),o.removeStoredMark(t.type)}}})}const{getOwnPropertyNames:d$,getOwnPropertySymbols:h$}=Object,{hasOwnProperty:p$}=Object.prototype;function rg(t,e){return function(r,i,s){return t(r,i,s)&&e(r,i,s)}}function vf(t){return function(n,r,i){if(!n||!r||typeof n!="object"||typeof r!="object")return t(n,r,i);const{cache:s}=i,o=s.get(n),a=s.get(r);if(o&&a)return o===r&&a===n;s.set(n,r),s.set(r,n);const c=t(n,r,i);return s.delete(n),s.delete(r),c}}function m$(t){return t!=null?t[Symbol.toStringTag]:void 0}function _S(t){return d$(t).concat(h$(t))}const g$=Object.hasOwn||((t,e)=>p$.call(t,e));function Go(t,e){return t===e||!t&&!e&&t!==t&&e!==e}const y$="__v",v$="__o",x$="_owner",{getOwnPropertyDescriptor:OS,keys:AS}=Object;function w$(t,e){return t.byteLength===e.byteLength&&_d(new Uint8Array(t),new Uint8Array(e))}function b$(t,e,n){let r=t.length;if(e.length!==r)return!1;for(;r-- >0;)if(!n.equals(t[r],e[r],r,r,t,e,n))return!1;return!0}function S$(t,e){return t.byteLength===e.byteLength&&_d(new Uint8Array(t.buffer,t.byteOffset,t.byteLength),new Uint8Array(e.buffer,e.byteOffset,e.byteLength))}function k$(t,e){return Go(t.getTime(),e.getTime())}function C$(t,e){return t.name===e.name&&t.message===e.message&&t.cause===e.cause&&t.stack===e.stack}function E$(t,e){return t===e}function PS(t,e,n){const r=t.size;if(r!==e.size)return!1;if(!r)return!0;const i=new Array(r),s=t.entries();let o,a,c=0;for(;(o=s.next())&&!o.done;){const f=e.entries();let d=!1,p=0;for(;(a=f.next())&&!a.done;){if(i[p]){p++;continue}const m=o.value,g=a.value;if(n.equals(m[0],g[0],c,p,t,e,n)&&n.equals(m[1],g[1],m[0],g[0],t,e,n)){d=i[p]=!0;break}p++}if(!d)return!1;c++}return!0}const T$=Go;function N$(t,e,n){const r=AS(t);let i=r.length;if(AS(e).length!==i)return!1;for(;i-- >0;)if(!GT(t,e,n,r[i]))return!1;return!0}function ja(t,e,n){const r=_S(t);let i=r.length;if(_S(e).length!==i)return!1;let s,o,a;for(;i-- >0;)if(s=r[i],!GT(t,e,n,s)||(o=OS(t,s),a=OS(e,s),(o||a)&&(!o||!a||o.configurable!==a.configurable||o.enumerable!==a.enumerable||o.writable!==a.writable)))return!1;return!0}function M$(t,e){return Go(t.valueOf(),e.valueOf())}function _$(t,e){return t.source===e.source&&t.flags===e.flags}function RS(t,e,n){const r=t.size;if(r!==e.size)return!1;if(!r)return!0;const i=new Array(r),s=t.values();let o,a;for(;(o=s.next())&&!o.done;){const c=e.values();let f=!1,d=0;for(;(a=c.next())&&!a.done;){if(!i[d]&&n.equals(o.value,a.value,o.value,a.value,t,e,n)){f=i[d]=!0;break}d++}if(!f)return!1}return!0}function _d(t,e){let n=t.byteLength;if(e.byteLength!==n||t.byteOffset!==e.byteOffset)return!1;for(;n-- >0;)if(t[n]!==e[n])return!1;return!0}function O$(t,e){return t.hostname===e.hostname&&t.pathname===e.pathname&&t.protocol===e.protocol&&t.port===e.port&&t.hash===e.hash&&t.username===e.username&&t.password===e.password}function GT(t,e,n,r){return(r===x$||r===v$||r===y$)&&(t.$$typeof||e.$$typeof)?!0:g$(e,r)&&n.equals(t[r],e[r],r,r,t,e,n)}const A$="[object ArrayBuffer]",P$="[object Arguments]",R$="[object Boolean]",D$="[object DataView]",I$="[object Date]",L$="[object Error]",j$="[object Map]",z$="[object Number]",B$="[object Object]",F$="[object RegExp]",$$="[object Set]",H$="[object String]",U$={"[object Int8Array]":!0,"[object Uint8Array]":!0,"[object Uint8ClampedArray]":!0,"[object Int16Array]":!0,"[object Uint16Array]":!0,"[object Int32Array]":!0,"[object Uint32Array]":!0,"[object Float16Array]":!0,"[object Float32Array]":!0,"[object Float64Array]":!0,"[object BigInt64Array]":!0,"[object BigUint64Array]":!0},V$="[object URL]",W$=Object.prototype.toString;function K$({areArrayBuffersEqual:t,areArraysEqual:e,areDataViewsEqual:n,areDatesEqual:r,areErrorsEqual:i,areFunctionsEqual:s,areMapsEqual:o,areNumbersEqual:a,areObjectsEqual:c,arePrimitiveWrappersEqual:f,areRegExpsEqual:d,areSetsEqual:p,areTypedArraysEqual:m,areUrlsEqual:g,unknownTagComparators:v}){return function(C,x,w){if(C===x)return!0;if(C==null||x==null)return!1;const E=typeof C;if(E!==typeof x)return!1;if(E!=="object")return E==="number"?a(C,x,w):E==="function"?s(C,x,w):!1;const M=C.constructor;if(M!==x.constructor)return!1;if(M===Object)return c(C,x,w);if(Array.isArray(C))return e(C,x,w);if(M===Date)return r(C,x,w);if(M===RegExp)return d(C,x,w);if(M===Map)return o(C,x,w);if(M===Set)return p(C,x,w);const _=W$.call(C);if(_===I$)return r(C,x,w);if(_===F$)return d(C,x,w);if(_===j$)return o(C,x,w);if(_===$$)return p(C,x,w);if(_===B$)return typeof C.then!="function"&&typeof x.then!="function"&&c(C,x,w);if(_===V$)return g(C,x,w);if(_===L$)return i(C,x,w);if(_===P$)return c(C,x,w);if(U$[_])return m(C,x,w);if(_===A$)return t(C,x,w);if(_===D$)return n(C,x,w);if(_===R$||_===z$||_===H$)return f(C,x,w);if(v){let O=v[_];if(!O){const A=m$(C);A&&(O=v[A])}if(O)return O(C,x,w)}return!1}}function q$({circular:t,createCustomConfig:e,strict:n}){let r={areArrayBuffersEqual:w$,areArraysEqual:n?ja:b$,areDataViewsEqual:S$,areDatesEqual:k$,areErrorsEqual:C$,areFunctionsEqual:E$,areMapsEqual:n?rg(PS,ja):PS,areNumbersEqual:T$,areObjectsEqual:n?ja:N$,arePrimitiveWrappersEqual:M$,areRegExpsEqual:_$,areSetsEqual:n?rg(RS,ja):RS,areTypedArraysEqual:n?rg(_d,ja):_d,areUrlsEqual:O$,unknownTagComparators:void 0};if(e&&(r=Object.assign({},r,e(r))),t){const i=vf(r.areArraysEqual),s=vf(r.areMapsEqual),o=vf(r.areObjectsEqual),a=vf(r.areSetsEqual);r=Object.assign({},r,{areArraysEqual:i,areMapsEqual:s,areObjectsEqual:o,areSetsEqual:a})}return r}function G$(t){return function(e,n,r,i,s,o,a){return t(e,n,a)}}function X$({circular:t,comparator:e,createState:n,equals:r,strict:i}){if(n)return function(a,c){const{cache:f=t?new WeakMap:void 0,meta:d}=n();return e(a,c,{cache:f,equals:r,meta:d,strict:i})};if(t)return function(a,c){return e(a,c,{cache:new WeakMap,equals:r,meta:void 0,strict:i})};const s={cache:void 0,equals:r,meta:void 0,strict:i};return function(a,c){return e(a,c,s)}}const J$=no();no({strict:!0});no({circular:!0});no({circular:!0,strict:!0});no({createInternalComparator:()=>Go});no({strict:!0,createInternalComparator:()=>Go});no({circular:!0,createInternalComparator:()=>Go});no({circular:!0,createInternalComparator:()=>Go,strict:!0});function no(t={}){const{circular:e=!1,createInternalComparator:n,createState:r,strict:i=!1}=t,s=q$(t),o=K$(s),a=n?n(o):G$(o);return X$({circular:e,comparator:o,createState:r,equals:a,strict:i})}var XT={exports:{}},JT={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hh=G,Y$=Fy;function Q$(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Z$=typeof Object.is=="function"?Object.is:Q$,e8=Y$.useSyncExternalStore,t8=Hh.useRef,n8=Hh.useEffect,r8=Hh.useMemo,i8=Hh.useDebugValue;JT.useSyncExternalStoreWithSelector=function(t,e,n,r,i){var s=t8(null);if(s.current===null){var o={hasValue:!1,value:null};s.current=o}else o=s.current;s=r8(function(){function c(g){if(!f){if(f=!0,d=g,g=r(g),i!==void 0&&o.hasValue){var v=o.value;if(i(v,g))return p=v}return p=g}if(v=p,Z$(d,g))return v;var S=r(g);return i!==void 0&&i(v,S)?(d=g,v):(d=g,p=S)}var f=!1,d,p,m=n===void 0?null:n;return[function(){return c(e())},m===null?void 0:function(){return c(m())}]},[e,n,r,i]);var a=e8(t,s[0],s[1]);return n8(function(){o.hasValue=!0,o.value=a},[a]),i8(a),a};XT.exports=JT;var s8=XT.exports,o8=(...t)=>e=>{t.forEach(n=>{typeof n=="function"?n(e):n&&(n.current=e)})},l8=({contentComponent:t})=>{const e=Fy.useSyncExternalStore(t.subscribe,t.getSnapshot,t.getServerSnapshot);return b.jsx(b.Fragment,{children:Object.values(e)})};function a8(){const t=new Set;let e={};return{subscribe(n){return t.add(n),()=>{t.delete(n)}},getSnapshot(){return e},getServerSnapshot(){return e},setRenderer(n,r){e={...e,[n]:QL.createPortal(r.reactElement,r.element,n)},t.forEach(i=>i())},removeRenderer(n){const r={...e};delete r[n],e=r,t.forEach(i=>i())}}}var u8=class extends Ks.Component{constructor(t){var e;super(t),this.editorContentRef=Ks.createRef(),this.initialized=!1,this.state={hasContentComponentInitialized:!!((e=t.editor)!=null&&e.contentComponent)}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){var t;const e=this.props.editor;if(e&&!e.isDestroyed&&((t=e.view.dom)!=null&&t.parentNode)){if(e.contentComponent)return;const n=this.editorContentRef.current;n.append(...e.view.dom.parentNode.childNodes),e.setOptions({element:n}),e.contentComponent=a8(),this.state.hasContentComponentInitialized||(this.unsubscribeToContentComponent=e.contentComponent.subscribe(()=>{this.setState(r=>r.hasContentComponentInitialized?r:{hasContentComponentInitialized:!0}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent()})),e.createNodeViews(),this.initialized=!0}}componentWillUnmount(){var t;const e=this.props.editor;if(e){this.initialized=!1,e.isDestroyed||e.view.setProps({nodeViews:{}}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent(),e.contentComponent=null;try{if(!((t=e.view.dom)!=null&&t.parentNode))return;const n=document.createElement("div");n.append(...e.view.dom.parentNode.childNodes),e.setOptions({element:n})}catch{}}}render(){const{editor:t,innerRef:e,...n}=this.props;return b.jsxs(b.Fragment,{children:[b.jsx("div",{ref:o8(e,this.editorContentRef),...n}),(t==null?void 0:t.contentComponent)&&b.jsx(l8,{contentComponent:t.contentComponent})]})}},c8=G.forwardRef((t,e)=>{const n=Ks.useMemo(()=>Math.floor(Math.random()*4294967295).toString(),[t.editor]);return Ks.createElement(u8,{key:n,innerRef:e,...t})}),f8=Ks.memo(c8),d8=typeof window<"u"?G.useLayoutEffect:G.useEffect,h8=class{constructor(t){this.transactionNumber=0,this.lastTransactionNumber=0,this.subscribers=new Set,this.editor=t,this.lastSnapshot={editor:t,transactionNumber:0},this.getSnapshot=this.getSnapshot.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.watch=this.watch.bind(this),this.subscribe=this.subscribe.bind(this)}getSnapshot(){return this.transactionNumber===this.lastTransactionNumber?this.lastSnapshot:(this.lastTransactionNumber=this.transactionNumber,this.lastSnapshot={editor:this.editor,transactionNumber:this.transactionNumber},this.lastSnapshot)}getServerSnapshot(){return{editor:null,transactionNumber:0}}subscribe(t){return this.subscribers.add(t),()=>{this.subscribers.delete(t)}}watch(t){if(this.editor=t,this.editor){const e=()=>{this.transactionNumber+=1,this.subscribers.forEach(r=>r())},n=this.editor;return n.on("transaction",e),()=>{n.off("transaction",e)}}}};function p8(t){var e;const[n]=G.useState(()=>new h8(t.editor)),r=s8.useSyncExternalStoreWithSelector(n.subscribe,n.getSnapshot,n.getServerSnapshot,t.selector,(e=t.equalityFn)!=null?e:J$);return d8(()=>n.watch(t.editor),[t.editor,n]),G.useDebugValue(r),r}var m8=!1,_0=typeof window>"u",g8=_0||!!(typeof window<"u"&&window.next),y8=class YT{constructor(e){this.editor=null,this.subscriptions=new Set,this.isComponentMounted=!1,this.previousDeps=null,this.instanceId="",this.options=e,this.subscriptions=new Set,this.setEditor(this.getInitialEditor()),this.scheduleDestroy(),this.getEditor=this.getEditor.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.subscribe=this.subscribe.bind(this),this.refreshEditorInstance=this.refreshEditorInstance.bind(this),this.scheduleDestroy=this.scheduleDestroy.bind(this),this.onRender=this.onRender.bind(this),this.createEditor=this.createEditor.bind(this)}setEditor(e){this.editor=e,this.instanceId=Math.random().toString(36).slice(2,9),this.subscriptions.forEach(n=>n())}getInitialEditor(){return this.options.current.immediatelyRender===void 0?_0||g8?null:this.createEditor():(this.options.current.immediatelyRender,this.options.current.immediatelyRender?this.createEditor():null)}createEditor(){const e={...this.options.current,onBeforeCreate:(...r)=>{var i,s;return(s=(i=this.options.current).onBeforeCreate)==null?void 0:s.call(i,...r)},onBlur:(...r)=>{var i,s;return(s=(i=this.options.current).onBlur)==null?void 0:s.call(i,...r)},onCreate:(...r)=>{var i,s;return(s=(i=this.options.current).onCreate)==null?void 0:s.call(i,...r)},onDestroy:(...r)=>{var i,s;return(s=(i=this.options.current).onDestroy)==null?void 0:s.call(i,...r)},onFocus:(...r)=>{var i,s;return(s=(i=this.options.current).onFocus)==null?void 0:s.call(i,...r)},onSelectionUpdate:(...r)=>{var i,s;return(s=(i=this.options.current).onSelectionUpdate)==null?void 0:s.call(i,...r)},onTransaction:(...r)=>{var i,s;return(s=(i=this.options.current).onTransaction)==null?void 0:s.call(i,...r)},onUpdate:(...r)=>{var i,s;return(s=(i=this.options.current).onUpdate)==null?void 0:s.call(i,...r)},onContentError:(...r)=>{var i,s;return(s=(i=this.options.current).onContentError)==null?void 0:s.call(i,...r)},onDrop:(...r)=>{var i,s;return(s=(i=this.options.current).onDrop)==null?void 0:s.call(i,...r)},onPaste:(...r)=>{var i,s;return(s=(i=this.options.current).onPaste)==null?void 0:s.call(i,...r)},onDelete:(...r)=>{var i,s;return(s=(i=this.options.current).onDelete)==null?void 0:s.call(i,...r)}};return new n$(e)}getEditor(){return this.editor}getServerSnapshot(){return null}subscribe(e){return this.subscriptions.add(e),()=>{this.subscriptions.delete(e)}}static compareOptions(e,n){return Object.keys(e).every(r=>["onCreate","onBeforeCreate","onDestroy","onUpdate","onTransaction","onFocus","onBlur","onSelectionUpdate","onContentError","onDrop","onPaste"].includes(r)?!0:r==="extensions"&&e.extensions&&n.extensions?e.extensions.length!==n.extensions.length?!1:e.extensions.every((i,s)=>{var o;return i===((o=n.extensions)==null?void 0:o[s])}):e[r]===n[r])}onRender(e){return()=>(this.isComponentMounted=!0,clearTimeout(this.scheduledDestructionTimeout),this.editor&&!this.editor.isDestroyed&&e.length===0?YT.compareOptions(this.options.current,this.editor.options)||this.editor.setOptions({...this.options.current,editable:this.editor.isEditable}):this.refreshEditorInstance(e),()=>{this.isComponentMounted=!1,this.scheduleDestroy()})}refreshEditorInstance(e){if(this.editor&&!this.editor.isDestroyed){if(this.previousDeps===null){this.previousDeps=e;return}if(this.previousDeps.length===e.length&&this.previousDeps.every((r,i)=>r===e[i]))return}this.editor&&!this.editor.isDestroyed&&this.editor.destroy(),this.setEditor(this.createEditor()),this.previousDeps=e}scheduleDestroy(){const e=this.instanceId,n=this.editor;this.scheduledDestructionTimeout=setTimeout(()=>{if(this.isComponentMounted&&this.instanceId===e){n&&n.setOptions(this.options.current);return}n&&!n.isDestroyed&&(n.destroy(),this.instanceId===e&&this.setEditor(null))},1)}};function v8(t={},e=[]){const n=G.useRef(t);n.current=t;const[r]=G.useState(()=>new y8(n)),i=Fy.useSyncExternalStore(r.subscribe,r.getEditor,r.getServerSnapshot);return G.useDebugValue(i),G.useEffect(r.onRender(e)),p8({editor:i,selector:({transactionNumber:s})=>t.shouldRerenderOnTransaction===!1||t.shouldRerenderOnTransaction===void 0?null:t.immediatelyRender&&s===0?0:s+1}),i}var x8=G.createContext({editor:null});x8.Consumer;var w8=G.createContext({onDragStart:()=>{},nodeViewContentChildren:void 0,nodeViewContentRef:()=>{}}),b8=()=>G.useContext(w8);Ks.forwardRef((t,e)=>{const{onDragStart:n}=b8(),r=t.as||"div";return b.jsx(r,{...t,ref:e,"data-node-view-wrapper":"",onDragStart:n,style:{whiteSpace:"normal",...t.style}})});Ks.createContext({markViewContentRef:()=>{}});var Od=(t,e)=>{if(t==="slot")return 0;if(t instanceof Function)return t(e);const{children:n,...r}=e??{};if(t==="svg")throw new Error("SVG elements are not supported in the JSX syntax, use the array syntax instead");return[t,r,n]},S8=/^\s*>\s$/,k8=vr.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:t}){return Od("blockquote",{...At(this.options.HTMLAttributes,t),children:Od("slot",{})})},parseMarkdown:(t,e)=>e.createNode("blockquote",void 0,e.parseChildren(t.tokens||[])),renderMarkdown:(t,e)=>{if(!t.content)return"";const n=">",r=[];return t.content.forEach(i=>{const a=e.renderChildren([i]).split(`
`).map(c=>c.trim()===""?n:`${n} ${c}`);r.push(a.join(`
`))}),r.join(`
${n}
`)},addCommands(){return{setBlockquote:()=>({commands:t})=>t.wrapIn(this.name),toggleBlockquote:()=>({commands:t})=>t.toggleWrap(this.name),unsetBlockquote:()=>({commands:t})=>t.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[ra({find:S8,type:this.type})]}}),C8=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,E8=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,T8=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,N8=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,M8=qo.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:t=>t.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:t=>t.type.name===this.name},{style:"font-weight",getAttrs:t=>/^(bold(er)?|[5-9]\d{2,})$/.test(t)&&null}]},renderHTML({HTMLAttributes:t}){return Od("strong",{...At(this.options.HTMLAttributes,t),children:Od("slot",{})})},markdownTokenName:"strong",parseMarkdown:(t,e)=>e.applyMark("bold",e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>`**${e.renderChildren(t)}**`,addCommands(){return{setBold:()=>({commands:t})=>t.setMark(this.name),toggleBold:()=>({commands:t})=>t.toggleMark(this.name),unsetBold:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[na({find:C8,type:this.type}),na({find:T8,type:this.type})]},addPasteRules(){return[Ho({find:E8,type:this.type}),Ho({find:N8,type:this.type})]}}),_8=/(^|[^`])`([^`]+)`(?!`)$/,O8=/(^|[^`])`([^`]+)`(?!`)/g,A8=qo.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:t}){return["code",At(this.options.HTMLAttributes,t),0]},markdownTokenName:"codespan",parseMarkdown:(t,e)=>e.applyMark("code",[{type:"text",text:t.text||""}]),renderMarkdown:(t,e)=>t.content?`\`${e.renderChildren(t.content)}\``:"",addCommands(){return{setCode:()=>({commands:t})=>t.setMark(this.name),toggleCode:()=>({commands:t})=>t.toggleMark(this.name),unsetCode:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[na({find:_8,type:this.type})]},addPasteRules(){return[Ho({find:O8,type:this.type})]}}),ig=4,P8=/^```([a-z]+)?[\s\n]$/,R8=/^~~~([a-z]+)?[\s\n]$/,D8=vr.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,enableTabIndentation:!1,tabSize:ig,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:t=>{var e;const{languageClassPrefix:n}=this.options;if(!n)return null;const s=[...((e=t.firstElementChild)==null?void 0:e.classList)||[]].filter(o=>o.startsWith(n)).map(o=>o.replace(n,""))[0];return s||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:t,HTMLAttributes:e}){return["pre",At(this.options.HTMLAttributes,e),["code",{class:t.attrs.language?this.options.languageClassPrefix+t.attrs.language:null},0]]},markdownTokenName:"code",parseMarkdown:(t,e)=>{var n;return((n=t.raw)==null?void 0:n.startsWith("```"))===!1&&t.codeBlockStyle!=="indented"?[]:e.createNode("codeBlock",{language:t.lang||null},t.text?[e.createTextNode(t.text)]:[])},renderMarkdown:(t,e)=>{var n;let r="";const i=((n=t.attrs)==null?void 0:n.language)||"";return t.content?r=[`\`\`\`${i}`,e.renderChildren(t.content),"```"].join(`
`):r=`\`\`\`${i}

\`\`\``,r},addCommands(){return{setCodeBlock:t=>({commands:e})=>e.setNode(this.name,t),toggleCodeBlock:t=>({commands:e})=>e.toggleNode(this.name,"paragraph",t)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:t,$anchor:e}=this.editor.state.selection,n=e.pos===1;return!t||e.parent.type.name!==this.name?!1:n||!e.parent.textContent.length?this.editor.commands.clearNodes():!1},Tab:({editor:t})=>{var e;if(!this.options.enableTabIndentation)return!1;const n=(e=this.options.tabSize)!=null?e:ig,{state:r}=t,{selection:i}=r,{$from:s,empty:o}=i;if(s.parent.type!==this.type)return!1;const a=" ".repeat(n);return o?t.commands.insertContent(a):t.commands.command(({tr:c})=>{const{from:f,to:d}=i,g=r.doc.textBetween(f,d,`
`,`
`).split(`
`).map(v=>a+v).join(`
`);return c.replaceWith(f,d,r.schema.text(g)),!0})},"Shift-Tab":({editor:t})=>{var e;if(!this.options.enableTabIndentation)return!1;const n=(e=this.options.tabSize)!=null?e:ig,{state:r}=t,{selection:i}=r,{$from:s,empty:o}=i;return s.parent.type!==this.type?!1:o?t.commands.command(({tr:a})=>{var c;const{pos:f}=s,d=s.start(),p=s.end(),g=r.doc.textBetween(d,p,`
`,`
`).split(`
`);let v=0,S=0;const C=f-d;for(let O=0;O<g.length;O+=1){if(S+g[O].length>=C){v=O;break}S+=g[O].length+1}const w=((c=g[v].match(/^ */))==null?void 0:c[0])||"",E=Math.min(w.length,n);if(E===0)return!0;let M=d;for(let O=0;O<v;O+=1)M+=g[O].length+1;return a.delete(M,M+E),f-M<=E&&a.setSelection(ke.create(a.doc,M)),!0}):t.commands.command(({tr:a})=>{const{from:c,to:f}=i,m=r.doc.textBetween(c,f,`
`,`
`).split(`
`).map(g=>{var v;const S=((v=g.match(/^ */))==null?void 0:v[0])||"",C=Math.min(S.length,n);return g.slice(C)}).join(`
`);return a.replaceWith(c,f,r.schema.text(m)),!0})},Enter:({editor:t})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:e}=t,{selection:n}=e,{$from:r,empty:i}=n;if(!i||r.parent.type!==this.type)return!1;const s=r.parentOffset===r.parent.nodeSize-2,o=r.parent.textContent.endsWith(`

`);return!s||!o?!1:t.chain().command(({tr:a})=>(a.delete(r.pos-2,r.pos),!0)).exitCode().run()},ArrowDown:({editor:t})=>{if(!this.options.exitOnArrowDown)return!1;const{state:e}=t,{selection:n,doc:r}=e,{$from:i,empty:s}=n;if(!s||i.parent.type!==this.type||!(i.parentOffset===i.parent.nodeSize-2))return!1;const a=i.after();return a===void 0?!1:r.nodeAt(a)?t.commands.command(({tr:f})=>(f.setSelection(Oe.near(r.resolve(a))),!0)):t.commands.exitCode()}}},addInputRules(){return[N0({find:P8,type:this.type,getAttributes:t=>({language:t[1]})}),N0({find:R8,type:this.type,getAttributes:t=>({language:t[1]})})]},addProseMirrorPlugins(){return[new dt({key:new Lt("codeBlockVSCodeHandler"),props:{handlePaste:(t,e)=>{if(!e.clipboardData||this.editor.isActive(this.type.name))return!1;const n=e.clipboardData.getData("text/plain"),r=e.clipboardData.getData("vscode-editor-data"),i=r?JSON.parse(r):void 0,s=i==null?void 0:i.mode;if(!n||!s)return!1;const{tr:o,schema:a}=t.state,c=a.text(n.replace(/\r\n?/g,`
`));return o.replaceSelectionWith(this.type.create({language:s},c)),o.selection.$from.parent.type!==this.type&&o.setSelection(ke.near(o.doc.resolve(Math.max(0,o.selection.from-2)))),o.setMeta("paste",!0),t.dispatch(o),!0}}})]}}),I8=vr.create({name:"doc",topNode:!0,content:"block+",renderMarkdown:(t,e)=>t.content?e.renderChildren(t.content,`

`):""}),L8=vr.create({name:"hardBreak",markdownTokenName:"br",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:t}){return["br",At(this.options.HTMLAttributes,t)]},renderText(){return`
`},renderMarkdown:()=>`  
`,parseMarkdown:()=>({type:"hardBreak"}),addCommands(){return{setHardBreak:()=>({commands:t,chain:e,state:n,editor:r})=>t.first([()=>t.exitCode(),()=>t.command(()=>{const{selection:i,storedMarks:s}=n;if(i.$from.parent.type.spec.isolating)return!1;const{keepMarks:o}=this.options,{splittableMarks:a}=r.extensionManager,c=s||i.$to.parentOffset&&i.$from.marks();return e().insertContent({type:this.name}).command(({tr:f,dispatch:d})=>{if(d&&c&&o){const p=c.filter(m=>a.includes(m.type.name));f.ensureMarks(p)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),j8=vr.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(t=>({tag:`h${t}`,attrs:{level:t}}))},renderHTML({node:t,HTMLAttributes:e}){return[`h${this.options.levels.includes(t.attrs.level)?t.attrs.level:this.options.levels[0]}`,At(this.options.HTMLAttributes,e),0]},parseMarkdown:(t,e)=>e.createNode("heading",{level:t.depth||1},e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>{var n;const r=(n=t.attrs)!=null&&n.level?parseInt(t.attrs.level,10):1,i="#".repeat(r);return t.content?`${i} ${e.renderChildren(t.content)}`:""},addCommands(){return{setHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.setNode(this.name,t):!1,toggleHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.toggleNode(this.name,"paragraph",t):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((t,e)=>({...t,[`Mod-Alt-${e}`]:()=>this.editor.commands.toggleHeading({level:e})}),{})},addInputRules(){return this.options.levels.map(t=>N0({find:new RegExp(`^(#{${Math.min(...this.options.levels)},${t}})\\s$`),type:this.type,getAttributes:{level:t}}))}}),z8=vr.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{},nextNodeType:"paragraph"}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:t}){return["hr",At(this.options.HTMLAttributes,t)]},markdownTokenName:"hr",parseMarkdown:(t,e)=>e.createNode("horizontalRule"),renderMarkdown:()=>"---",addCommands(){return{setHorizontalRule:()=>({chain:t,state:e})=>{if(!i$(e,e.schema.nodes[this.name]))return!1;const{selection:n}=e,{$to:r}=n,i=t();return OT(n)?i.insertContentAt(r.pos,{type:this.name}):i.insertContent({type:this.name}),i.command(({state:s,tr:o,dispatch:a})=>{if(a){const{$to:c}=o.selection,f=c.end();if(c.nodeAfter)c.nodeAfter.isTextblock?o.setSelection(ke.create(o.doc,c.pos+1)):c.nodeAfter.isBlock?o.setSelection(ye.create(o.doc,c.pos)):o.setSelection(ke.create(o.doc,c.pos));else{const d=s.schema.nodes[this.options.nextNodeType]||c.parent.type.contentMatch.defaultType,p=d==null?void 0:d.create();p&&(o.insert(f,p),o.setSelection(ke.create(o.doc,f+1)))}o.scrollIntoView()}return!0}).run()}}},addInputRules(){return[r$({find:/^(?:---|-|___\s|\*\*\*\s)$/,type:this.type})]}}),B8=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,F8=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,$8=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,H8=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,U8=qo.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:t=>t.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:t=>t.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:t}){return["em",At(this.options.HTMLAttributes,t),0]},addCommands(){return{setItalic:()=>({commands:t})=>t.setMark(this.name),toggleItalic:()=>({commands:t})=>t.toggleMark(this.name),unsetItalic:()=>({commands:t})=>t.unsetMark(this.name)}},markdownTokenName:"em",parseMarkdown:(t,e)=>e.applyMark("italic",e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>`*${e.renderChildren(t)}*`,addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[na({find:B8,type:this.type}),na({find:$8,type:this.type})]},addPasteRules(){return[Ho({find:F8,type:this.type}),Ho({find:H8,type:this.type})]}});const V8="aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4w0s2x0a2z0ure5ba0by2idu3namex4d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dad1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3nd0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0axi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp3ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mgensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2",W8="121342632165322333335355455655552435435422463632574574330355524444661154543332344423364211133222221212112052232222232212222223222241112222224322321222",O0="numeric",A0="ascii",P0="alpha",au="asciinumeric",Ga="alphanumeric",R0="domain",QT="emoji",K8="scheme",q8="slashscheme",sg="whitespace";function G8(t,e){return t in e||(e[t]=[]),e[t]}function Eo(t,e,n){e[O0]&&(e[au]=!0,e[Ga]=!0),e[A0]&&(e[au]=!0,e[P0]=!0),e[au]&&(e[Ga]=!0),e[P0]&&(e[Ga]=!0),e[Ga]&&(e[R0]=!0),e[QT]&&(e[R0]=!0);for(const r in e){const i=G8(r,n);i.indexOf(t)<0&&i.push(t)}}function X8(t,e){const n={};for(const r in e)e[r].indexOf(t)>=0&&(n[r]=!0);return n}function Un(t=null){this.j={},this.jr=[],this.jd=null,this.t=t}Un.groups={};Un.prototype={accepts(){return!!this.t},go(t){const e=this,n=e.j[t];if(n)return n;for(let r=0;r<e.jr.length;r++){const i=e.jr[r][0],s=e.jr[r][1];if(s&&i.test(t))return s}return e.jd},has(t,e=!1){return e?t in this.j:!!this.go(t)},ta(t,e,n,r){for(let i=0;i<t.length;i++)this.tt(t[i],e,n,r)},tr(t,e,n,r){r=r||Un.groups;let i;return e&&e.j?i=e:(i=new Un(e),n&&r&&Eo(e,n,r)),this.jr.push([t,i]),i},ts(t,e,n,r){let i=this;const s=t.length;if(!s)return i;for(let o=0;o<s-1;o++)i=i.tt(t[o]);return i.tt(t[s-1],e,n,r)},tt(t,e,n,r){r=r||Un.groups;const i=this;if(e&&e.j)return i.j[t]=e,e;const s=e;let o,a=i.go(t);if(a?(o=new Un,Object.assign(o.j,a.j),o.jr.push.apply(o.jr,a.jr),o.jd=a.jd,o.t=a.t):o=new Un,s){if(r)if(o.t&&typeof o.t=="string"){const c=Object.assign(X8(o.t,r),n);Eo(s,c,r)}else n&&Eo(s,n,r);o.t=s}return i.j[t]=o,o}};const _e=(t,e,n,r,i)=>t.ta(e,n,r,i),gt=(t,e,n,r,i)=>t.tr(e,n,r,i),DS=(t,e,n,r,i)=>t.ts(e,n,r,i),J=(t,e,n,r,i)=>t.tt(e,n,r,i),Fi="WORD",D0="UWORD",ZT="ASCIINUMERICAL",eN="ALPHANUMERICAL",Fu="LOCALHOST",I0="TLD",L0="UTLD",Bf="SCHEME",wl="SLASH_SCHEME",mv="NUM",j0="WS",gv="NL",uu="OPENBRACE",cu="CLOSEBRACE",Ad="OPENBRACKET",Pd="CLOSEBRACKET",Rd="OPENPAREN",Dd="CLOSEPAREN",Id="OPENANGLEBRACKET",Ld="CLOSEANGLEBRACKET",jd="FULLWIDTHLEFTPAREN",zd="FULLWIDTHRIGHTPAREN",Bd="LEFTCORNERBRACKET",Fd="RIGHTCORNERBRACKET",$d="LEFTWHITECORNERBRACKET",Hd="RIGHTWHITECORNERBRACKET",Ud="FULLWIDTHLESSTHAN",Vd="FULLWIDTHGREATERTHAN",Wd="AMPERSAND",Kd="APOSTROPHE",qd="ASTERISK",Ss="AT",Gd="BACKSLASH",Xd="BACKTICK",Jd="CARET",Ns="COLON",yv="COMMA",Yd="DOLLAR",yi="DOT",Qd="EQUALS",vv="EXCLAMATION",Rr="HYPHEN",fu="PERCENT",Zd="PIPE",eh="PLUS",th="POUND",du="QUERY",xv="QUOTE",tN="FULLWIDTHMIDDLEDOT",wv="SEMI",vi="SLASH",hu="TILDE",nh="UNDERSCORE",nN="EMOJI",rh="SYM";var rN=Object.freeze({__proto__:null,ALPHANUMERICAL:eN,AMPERSAND:Wd,APOSTROPHE:Kd,ASCIINUMERICAL:ZT,ASTERISK:qd,AT:Ss,BACKSLASH:Gd,BACKTICK:Xd,CARET:Jd,CLOSEANGLEBRACKET:Ld,CLOSEBRACE:cu,CLOSEBRACKET:Pd,CLOSEPAREN:Dd,COLON:Ns,COMMA:yv,DOLLAR:Yd,DOT:yi,EMOJI:nN,EQUALS:Qd,EXCLAMATION:vv,FULLWIDTHGREATERTHAN:Vd,FULLWIDTHLEFTPAREN:jd,FULLWIDTHLESSTHAN:Ud,FULLWIDTHMIDDLEDOT:tN,FULLWIDTHRIGHTPAREN:zd,HYPHEN:Rr,LEFTCORNERBRACKET:Bd,LEFTWHITECORNERBRACKET:$d,LOCALHOST:Fu,NL:gv,NUM:mv,OPENANGLEBRACKET:Id,OPENBRACE:uu,OPENBRACKET:Ad,OPENPAREN:Rd,PERCENT:fu,PIPE:Zd,PLUS:eh,POUND:th,QUERY:du,QUOTE:xv,RIGHTCORNERBRACKET:Fd,RIGHTWHITECORNERBRACKET:Hd,SCHEME:Bf,SEMI:wv,SLASH:vi,SLASH_SCHEME:wl,SYM:rh,TILDE:hu,TLD:I0,UNDERSCORE:nh,UTLD:L0,UWORD:D0,WORD:Fi,WS:j0});const zi=/[a-z]/,za=new RegExp("\\p{L}","u"),og=new RegExp("\\p{Emoji}","u"),Bi=/\d/,lg=/\s/,IS="\r",ag=`
`,J8="",Y8="",ug="";let xf=null,wf=null;function Q8(t=[]){const e={};Un.groups=e;const n=new Un;xf==null&&(xf=LS(V8)),wf==null&&(wf=LS(W8)),J(n,"'",Kd),J(n,"{",uu),J(n,"}",cu),J(n,"[",Ad),J(n,"]",Pd),J(n,"(",Rd),J(n,")",Dd),J(n,"<",Id),J(n,">",Ld),J(n,"",jd),J(n,"",zd),J(n,"",Bd),J(n,"",Fd),J(n,"",$d),J(n,"",Hd),J(n,"",Ud),J(n,"",Vd),J(n,"&",Wd),J(n,"*",qd),J(n,"@",Ss),J(n,"`",Xd),J(n,"^",Jd),J(n,":",Ns),J(n,",",yv),J(n,"$",Yd),J(n,".",yi),J(n,"=",Qd),J(n,"!",vv),J(n,"-",Rr),J(n,"%",fu),J(n,"|",Zd),J(n,"+",eh),J(n,"#",th),J(n,"?",du),J(n,'"',xv),J(n,"/",vi),J(n,";",wv),J(n,"~",hu),J(n,"_",nh),J(n,"\\",Gd),J(n,"",tN);const r=gt(n,Bi,mv,{[O0]:!0});gt(r,Bi,r);const i=gt(r,zi,ZT,{[au]:!0}),s=gt(r,za,eN,{[Ga]:!0}),o=gt(n,zi,Fi,{[A0]:!0});gt(o,Bi,i),gt(o,zi,o),gt(i,Bi,i),gt(i,zi,i);const a=gt(n,za,D0,{[P0]:!0});gt(a,zi),gt(a,Bi,s),gt(a,za,a),gt(s,Bi,s),gt(s,zi),gt(s,za,s);const c=J(n,ag,gv,{[sg]:!0}),f=J(n,IS,j0,{[sg]:!0}),d=gt(n,lg,j0,{[sg]:!0});J(n,ug,d),J(f,ag,c),J(f,ug,d),gt(f,lg,d),J(d,IS),J(d,ag),gt(d,lg,d),J(d,ug,d);const p=gt(n,og,nN,{[QT]:!0});J(p,"#"),gt(p,og,p),J(p,J8,p);const m=J(p,Y8);J(m,"#"),gt(m,og,p);const g=[[zi,o],[Bi,i]],v=[[zi,null],[za,a],[Bi,s]];for(let S=0;S<xf.length;S++)ys(n,xf[S],I0,Fi,g);for(let S=0;S<wf.length;S++)ys(n,wf[S],L0,D0,v);Eo(I0,{tld:!0,ascii:!0},e),Eo(L0,{utld:!0,alpha:!0},e),ys(n,"file",Bf,Fi,g),ys(n,"mailto",Bf,Fi,g),ys(n,"http",wl,Fi,g),ys(n,"https",wl,Fi,g),ys(n,"ftp",wl,Fi,g),ys(n,"ftps",wl,Fi,g),Eo(Bf,{scheme:!0,ascii:!0},e),Eo(wl,{slashscheme:!0,ascii:!0},e),t=t.sort((S,C)=>S[0]>C[0]?1:-1);for(let S=0;S<t.length;S++){const C=t[S][0],w=t[S][1]?{[K8]:!0}:{[q8]:!0};C.indexOf("-")>=0?w[R0]=!0:zi.test(C)?Bi.test(C)?w[au]=!0:w[A0]=!0:w[O0]=!0,DS(n,C,C,w)}return DS(n,"localhost",Fu,{ascii:!0}),n.jd=new Un(rh),{start:n,tokens:Object.assign({groups:e},rN)}}function iN(t,e){const n=Z8(e.replace(/[A-Z]/g,a=>a.toLowerCase())),r=n.length,i=[];let s=0,o=0;for(;o<r;){let a=t,c=null,f=0,d=null,p=-1,m=-1;for(;o<r&&(c=a.go(n[o]));)a=c,a.accepts()?(p=0,m=0,d=a):p>=0&&(p+=n[o].length,m++),f+=n[o].length,s+=n[o].length,o++;s-=p,o-=m,f-=p,i.push({t:d.t,v:e.slice(s-f,s),s:s-f,e:s})}return i}function Z8(t){const e=[],n=t.length;let r=0;for(;r<n;){let i=t.charCodeAt(r),s,o=i<55296||i>56319||r+1===n||(s=t.charCodeAt(r+1))<56320||s>57343?t[r]:t.slice(r,r+2);e.push(o),r+=o.length}return e}function ys(t,e,n,r,i){let s;const o=e.length;for(let a=0;a<o-1;a++){const c=e[a];t.j[c]?s=t.j[c]:(s=new Un(r),s.jr=i.slice(),t.j[c]=s),t=s}return s=new Un(n),s.jr=i.slice(),t.j[e[o-1]]=s,s}function LS(t){const e=[],n=[];let r=0,i="0123456789";for(;r<t.length;){let s=0;for(;i.indexOf(t[r+s])>=0;)s++;if(s>0){e.push(n.join(""));for(let o=parseInt(t.substring(r,r+s),10);o>0;o--)n.pop();r+=s}else n.push(t[r]),r++}return e}const $u={defaultProtocol:"http",events:null,format:jS,formatHref:jS,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function bv(t,e=null){let n=Object.assign({},$u);t&&(n=Object.assign(n,t instanceof bv?t.o:t));const r=n.ignoreTags,i=[];for(let s=0;s<r.length;s++)i.push(r[s].toUpperCase());this.o=n,e&&(this.defaultRender=e),this.ignoreTags=i}bv.prototype={o:$u,ignoreTags:[],defaultRender(t){return t},check(t){return this.get("validate",t.toString(),t)},get(t,e,n){const r=e!=null;let i=this.o[t];return i&&(typeof i=="object"?(i=n.t in i?i[n.t]:$u[t],typeof i=="function"&&r&&(i=i(e,n))):typeof i=="function"&&r&&(i=i(e,n.t,n)),i)},getObj(t,e,n){let r=this.o[t];return typeof r=="function"&&e!=null&&(r=r(e,n.t,n)),r},render(t){const e=t.render(this);return(this.get("render",null,t)||this.defaultRender)(e,t.t,t)}};function jS(t){return t}function sN(t,e){this.t="token",this.v=t,this.tk=e}sN.prototype={isLink:!1,toString(){return this.v},toHref(t){return this.toString()},toFormattedString(t){const e=this.toString(),n=t.get("truncate",e,this),r=t.get("format",e,this);return n&&r.length>n?r.substring(0,n)+"":r},toFormattedHref(t){return t.get("formatHref",this.toHref(t.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(t=$u.defaultProtocol){return{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(t),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(t){return{type:this.t,value:this.toFormattedString(t),isLink:this.isLink,href:this.toFormattedHref(t),start:this.startIndex(),end:this.endIndex()}},validate(t){return t.get("validate",this.toString(),this)},render(t){const e=this,n=this.toHref(t.get("defaultProtocol")),r=t.get("formatHref",n,this),i=t.get("tagName",n,e),s=this.toFormattedString(t),o={},a=t.get("className",n,e),c=t.get("target",n,e),f=t.get("rel",n,e),d=t.getObj("attributes",n,e),p=t.getObj("events",n,e);return o.href=r,a&&(o.class=a),c&&(o.target=c),f&&(o.rel=f),d&&Object.assign(o,d),{tagName:i,attributes:o,content:s,eventListeners:p}}};function Uh(t,e){class n extends sN{constructor(i,s){super(i,s),this.t=t}}for(const r in e)n.prototype[r]=e[r];return n.t=t,n}const zS=Uh("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),BS=Uh("text"),eH=Uh("nl"),bf=Uh("url",{isLink:!0,toHref(t=$u.defaultProtocol){return this.hasProtocol()?this.v:`${t}://${this.v}`},hasProtocol(){const t=this.tk;return t.length>=2&&t[0].t!==Fu&&t[1].t===Ns}}),Pr=t=>new Un(t);function tH({groups:t}){const e=t.domain.concat([Wd,qd,Ss,Gd,Xd,Jd,Yd,Qd,Rr,mv,fu,Zd,eh,th,vi,rh,hu,nh]),n=[Kd,Ns,yv,yi,vv,fu,du,xv,wv,Id,Ld,uu,cu,Pd,Ad,Rd,Dd,jd,zd,Bd,Fd,$d,Hd,Ud,Vd],r=[Wd,Kd,qd,Gd,Xd,Jd,Yd,Qd,Rr,uu,cu,fu,Zd,eh,th,du,vi,rh,hu,nh],i=Pr(),s=J(i,hu);_e(s,r,s),_e(s,t.domain,s);const o=Pr(),a=Pr(),c=Pr();_e(i,t.domain,o),_e(i,t.scheme,a),_e(i,t.slashscheme,c),_e(o,r,s),_e(o,t.domain,o);const f=J(o,Ss);J(s,Ss,f),J(a,Ss,f),J(c,Ss,f);const d=J(s,yi);_e(d,r,s),_e(d,t.domain,s);const p=Pr();_e(f,t.domain,p),_e(p,t.domain,p);const m=J(p,yi);_e(m,t.domain,p);const g=Pr(zS);_e(m,t.tld,g),_e(m,t.utld,g),J(f,Fu,g);const v=J(p,Rr);J(v,Rr,v),_e(v,t.domain,p),_e(g,t.domain,p),J(g,yi,m),J(g,Rr,v);const S=J(g,Ns);_e(S,t.numeric,zS);const C=J(o,Rr),x=J(o,yi);J(C,Rr,C),_e(C,t.domain,o),_e(x,r,s),_e(x,t.domain,o);const w=Pr(bf);_e(x,t.tld,w),_e(x,t.utld,w),_e(w,t.domain,o),_e(w,r,s),J(w,yi,x),J(w,Rr,C),J(w,Ss,f);const E=J(w,Ns),M=Pr(bf);_e(E,t.numeric,M);const _=Pr(bf),O=Pr();_e(_,e,_),_e(_,n,O),_e(O,e,_),_e(O,n,O),J(w,vi,_),J(M,vi,_);const A=J(a,Ns),R=J(c,Ns),z=J(R,vi),B=J(z,vi);_e(a,t.domain,o),J(a,yi,x),J(a,Rr,C),_e(c,t.domain,o),J(c,yi,x),J(c,Rr,C),_e(A,t.domain,_),J(A,vi,_),J(A,du,_),_e(B,t.domain,_),_e(B,e,_),J(B,vi,_);const te=[[uu,cu],[Ad,Pd],[Rd,Dd],[Id,Ld],[jd,zd],[Bd,Fd],[$d,Hd],[Ud,Vd]];for(let re=0;re<te.length;re++){const[le,de]=te[re],pe=J(_,le);J(O,le,pe),J(pe,de,_);const ee=Pr(bf);_e(pe,e,ee);const ie=Pr();_e(pe,n),_e(ee,e,ee),_e(ee,n,ie),_e(ie,e,ee),_e(ie,n,ie),J(ee,de,_),J(ie,de,_)}return J(i,Fu,w),J(i,gv,eH),{start:i,tokens:rN}}function nH(t,e,n){let r=n.length,i=0,s=[],o=[];for(;i<r;){let a=t,c=null,f=null,d=0,p=null,m=-1;for(;i<r&&!(c=a.go(n[i].t));)o.push(n[i++]);for(;i<r&&(f=c||a.go(n[i].t));)c=null,a=f,a.accepts()?(m=0,p=a):m>=0&&m++,i++,d++;if(m<0)i-=d,i<r&&(o.push(n[i]),i++);else{o.length>0&&(s.push(cg(BS,e,o)),o=[]),i-=m,d-=m;const g=p.t,v=n.slice(i-d,i);s.push(cg(g,e,v))}}return o.length>0&&s.push(cg(BS,e,o)),s}function cg(t,e,n){const r=n[0].s,i=n[n.length-1].e,s=e.slice(r,i);return new t(s,n)}const rH=typeof console<"u"&&console&&console.warn||(()=>{}),iH="until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.",nt={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function sH(){return Un.groups={},nt.scanner=null,nt.parser=null,nt.tokenQueue=[],nt.pluginQueue=[],nt.customSchemes=[],nt.initialized=!1,nt}function FS(t,e=!1){if(nt.initialized&&rH(`linkifyjs: already initialized - will not register custom scheme "${t}" ${iH}`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(t))throw new Error(`linkifyjs: incorrect scheme format.
1. Must only contain digits, lowercase ASCII letters or "-"
2. Cannot start or end with "-"
3. "-" cannot repeat`);nt.customSchemes.push([t,e])}function oH(){nt.scanner=Q8(nt.customSchemes);for(let t=0;t<nt.tokenQueue.length;t++)nt.tokenQueue[t][1]({scanner:nt.scanner});nt.parser=tH(nt.scanner.tokens);for(let t=0;t<nt.pluginQueue.length;t++)nt.pluginQueue[t][1]({scanner:nt.scanner,parser:nt.parser});return nt.initialized=!0,nt}function Sv(t){return nt.initialized||oH(),nH(nt.parser.start,t,iN(nt.scanner.start,t))}Sv.scan=iN;function oN(t,e=null,n=null){if(e&&typeof e=="object"){if(n)throw Error(`linkifyjs: Invalid link type ${e}; must be a string`);n=e,e=null}const r=new bv(n),i=Sv(t),s=[];for(let o=0;o<i.length;o++){const a=i[o];a.isLink&&(!e||a.t===e)&&r.check(a)&&s.push(a.toFormattedObject(r))}return s}var kv="[\0- -\u2029]",lH=new RegExp(kv),aH=new RegExp(`${kv}$`),uH=new RegExp(kv,"g");function cH(t){return t.length===1?t[0].isLink:t.length===3&&t[1].isLink?["()","[]"].includes(t[0].value+t[2].value):!1}function fH(t){return new dt({key:new Lt("autolink"),appendTransaction:(e,n,r)=>{const i=e.some(f=>f.docChanged)&&!n.doc.eq(r.doc),s=e.some(f=>f.getMeta("preventAutolink"));if(!i||s)return;const{tr:o}=r,a=ST(n.doc,[...e]);if(_T(a).forEach(({newRange:f})=>{const d=iF(r.doc,f,g=>g.isTextblock);let p,m;if(d.length>1)p=d[0],m=r.doc.textBetween(p.pos,p.pos+p.node.nodeSize,void 0," ");else if(d.length){const g=r.doc.textBetween(f.from,f.to," "," ");if(!aH.test(g))return;p=d[0],m=r.doc.textBetween(p.pos,f.to,void 0," ")}if(p&&m){const g=m.split(lH).filter(Boolean);if(g.length<=0)return!1;const v=g[g.length-1],S=p.pos+m.lastIndexOf(v);if(!v)return!1;const C=Sv(v).map(x=>x.toObject(t.defaultProtocol));if(!cH(C))return!1;C.filter(x=>x.isLink).map(x=>({...x,from:S+x.start+1,to:S+x.end+1})).filter(x=>r.schema.marks.code?!r.doc.rangeHasMark(x.from,x.to,r.schema.marks.code):!0).filter(x=>t.validate(x.value)).filter(x=>t.shouldAutoLink(x.value)).forEach(x=>{cv(x.from,x.to,r.doc).some(w=>w.mark.type===t.type)||o.addMark(x.from,x.to,t.type.create({href:x.href}))})}}),!!o.steps.length)return o}})}function dH(t){return new dt({key:new Lt("handleClickLink"),props:{handleClick:(e,n,r)=>{var i,s;if(r.button!==0||!e.editable)return!1;let o=!1;if(t.enableClickSelection&&(o=t.editor.commands.extendMarkRange(t.type.name)),t.openOnClick){let a=null;if(r.target instanceof HTMLAnchorElement)a=r.target;else{let p=r.target;const m=[];for(;p.nodeName!=="DIV";)m.push(p),p=p.parentNode;a=m.find(g=>g.nodeName==="A")}if(!a)return o;const c=MT(e.state,t.type.name),f=(i=a==null?void 0:a.href)!=null?i:c.href,d=(s=a==null?void 0:a.target)!=null?s:c.target;a&&f&&(window.open(f,d),o=!0)}return o}}})}function hH(t){return new dt({key:new Lt("handlePasteLink"),props:{handlePaste:(e,n,r)=>{const{shouldAutoLink:i}=t,{state:s}=e,{selection:o}=s,{empty:a}=o;if(a)return!1;let c="";r.content.forEach(d=>{c+=d.textContent});const f=oN(c,{defaultProtocol:t.defaultProtocol}).find(d=>d.isLink&&d.value===c);return!c||!f||i!==void 0&&!i(f.value)?!1:t.editor.commands.setMark(t.type,{href:f.href})}}})}function mo(t,e){const n=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"];return e&&e.forEach(r=>{const i=typeof r=="string"?r:r.scheme;i&&n.push(i)}),!t||t.replace(uH,"").match(new RegExp(`^(?:(?:${n.join("|")}):|[^a-z]|[a-z0-9+.-]+(?:[^a-z+.-:]|$))`,"i"))}var pH=qo.create({name:"link",priority:1e3,keepOnSplit:!1,exitable:!0,onCreate(){this.options.validate&&!this.options.shouldAutoLink&&(this.options.shouldAutoLink=this.options.validate,console.warn("The `validate` option is deprecated. Rename to the `shouldAutoLink` option instead.")),this.options.protocols.forEach(t=>{if(typeof t=="string"){FS(t);return}FS(t.scheme,t.optionalSlashes)})},onDestroy(){sH()},inclusive(){return this.options.autolink},addOptions(){return{openOnClick:!0,enableClickSelection:!1,linkOnPaste:!0,autolink:!0,protocols:[],defaultProtocol:"http",HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},isAllowedUri:(t,e)=>!!mo(t,e.protocols),validate:t=>!!t,shouldAutoLink:t=>{const e=/^[a-z][a-z0-9+.-]*:\/\//i.test(t),n=/^[a-z][a-z0-9+.-]*:/i.test(t);if(e||n&&!t.includes("@"))return!0;const i=(t.includes("@")?t.split("@").pop():t).split(/[/?#:]/)[0];return!(/^\d{1,3}(\.\d{1,3}){3}$/.test(i)||!/\./.test(i))}}},addAttributes(){return{href:{default:null,parseHTML(t){return t.getAttribute("href")}},target:{default:this.options.HTMLAttributes.target},rel:{default:this.options.HTMLAttributes.rel},class:{default:this.options.HTMLAttributes.class}}},parseHTML(){return[{tag:"a[href]",getAttrs:t=>{const e=t.getAttribute("href");return!e||!this.options.isAllowedUri(e,{defaultValidate:n=>!!mo(n,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:null}}]},renderHTML({HTMLAttributes:t}){return this.options.isAllowedUri(t.href,{defaultValidate:e=>!!mo(e,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?["a",At(this.options.HTMLAttributes,t),0]:["a",At(this.options.HTMLAttributes,{...t,href:""}),0]},markdownTokenName:"link",parseMarkdown:(t,e)=>e.applyMark("link",e.parseInline(t.tokens||[]),{href:t.href,title:t.title||null}),renderMarkdown:(t,e)=>{var n;const r=((n=t.attrs)==null?void 0:n.href)||"";return`[${e.renderChildren(t)}](${r})`},addCommands(){return{setLink:t=>({chain:e})=>{const{href:n}=t;return this.options.isAllowedUri(n,{defaultValidate:r=>!!mo(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?e().setMark(this.name,t).setMeta("preventAutolink",!0).run():!1},toggleLink:t=>({chain:e})=>{const{href:n}=t||{};return n&&!this.options.isAllowedUri(n,{defaultValidate:r=>!!mo(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:e().toggleMark(this.name,t,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()},unsetLink:()=>({chain:t})=>t().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[Ho({find:t=>{const e=[];if(t){const{protocols:n,defaultProtocol:r}=this.options,i=oN(t).filter(s=>s.isLink&&this.options.isAllowedUri(s.value,{defaultValidate:o=>!!mo(o,n),protocols:n,defaultProtocol:r}));i.length&&i.forEach(s=>{this.options.shouldAutoLink(s.value)&&e.push({text:s.value,data:{href:s.href},index:s.start})})}return e},type:this.type,getAttributes:t=>{var e;return{href:(e=t.data)==null?void 0:e.href}}})]},addProseMirrorPlugins(){const t=[],{protocols:e,defaultProtocol:n}=this.options;return this.options.autolink&&t.push(fH({type:this.type,defaultProtocol:this.options.defaultProtocol,validate:r=>this.options.isAllowedUri(r,{defaultValidate:i=>!!mo(i,e),protocols:e,defaultProtocol:n}),shouldAutoLink:this.options.shouldAutoLink})),t.push(dH({type:this.type,editor:this.editor,openOnClick:this.options.openOnClick==="whenNotEditable"?!0:this.options.openOnClick,enableClickSelection:this.options.enableClickSelection})),this.options.linkOnPaste&&t.push(hH({editor:this.editor,defaultProtocol:this.options.defaultProtocol,type:this.type,shouldAutoLink:this.options.shouldAutoLink})),t}}),mH=Object.defineProperty,gH=(t,e)=>{for(var n in e)mH(t,n,{get:e[n],enumerable:!0})},yH="listItem",$S="textStyle",HS=/^\s*([-+*])\s$/,lN=vr.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:t}){return["ul",At(this.options.HTMLAttributes,t),0]},markdownTokenName:"list",parseMarkdown:(t,e)=>t.type!=="list"||t.ordered?[]:{type:"bulletList",content:t.items?e.parseChildren(t.items):[]},renderMarkdown:(t,e)=>t.content?e.renderChildren(t.content,`
`):"",markdownOptions:{indentsContent:!0},addCommands(){return{toggleBulletList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(yH,this.editor.getAttributes($S)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let t=ra({find:HS,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(t=ra({find:HS,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes($S),editor:this.editor})),[t]}}),aN=vr.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:t}){return["li",At(this.options.HTMLAttributes,t),0]},markdownTokenName:"list_item",parseMarkdown:(t,e)=>{if(t.type!=="list_item")return[];let n=[];if(t.tokens&&t.tokens.length>0)if(t.tokens.some(i=>i.type==="paragraph"))n=e.parseChildren(t.tokens);else{const i=t.tokens[0];if(i&&i.type==="text"&&i.tokens&&i.tokens.length>0){if(n=[{type:"paragraph",content:e.parseInline(i.tokens)}],t.tokens.length>1){const o=t.tokens.slice(1),a=e.parseChildren(o);n.push(...a)}}else n=e.parseChildren(t.tokens)}return n.length===0&&(n=[{type:"paragraph",content:[]}]),{type:"listItem",content:n}},renderMarkdown:(t,e,n)=>pv(t,e,r=>r.parentType==="bulletList"?"- ":r.parentType==="orderedList"?`${r.index+1}. `:"- ",n),addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),vH={};gH(vH,{findListItemPos:()=>Ju,getNextListDepth:()=>Cv,handleBackspace:()=>z0,handleDelete:()=>B0,hasListBefore:()=>uN,hasListItemAfter:()=>xH,hasListItemBefore:()=>cN,listItemHasSubList:()=>fN,nextListIsDeeper:()=>dN,nextListIsHigher:()=>hN});var Ju=(t,e)=>{const{$from:n}=e.selection,r=Ot(t,e.schema);let i=null,s=n.depth,o=n.pos,a=null;for(;s>0&&a===null;)i=n.node(s),i.type===r?a=s:(s-=1,o-=1);return a===null?null:{$pos:e.doc.resolve(o),depth:a}},Cv=(t,e)=>{const n=Ju(t,e);if(!n)return!1;const[,r]=pF(e,t,n.$pos.pos+4);return r},uN=(t,e,n)=>{const{$anchor:r}=t.selection,i=Math.max(0,r.pos-2),s=t.doc.resolve(i).node();return!(!s||!n.includes(s.type.name))},cN=(t,e)=>{var n;const{$anchor:r}=e.selection,i=e.doc.resolve(r.pos-2);return!(i.index()===0||((n=i.nodeBefore)==null?void 0:n.type.name)!==t)},fN=(t,e,n)=>{if(!n)return!1;const r=Ot(t,e.schema);let i=!1;return n.descendants(s=>{s.type===r&&(i=!0)}),i},z0=(t,e,n)=>{if(t.commands.undoInputRule())return!0;if(t.state.selection.from!==t.state.selection.to)return!1;if(!Js(t.state,e)&&uN(t.state,e,n)){const{$anchor:a}=t.state.selection,c=t.state.doc.resolve(a.before()-1),f=[];c.node().descendants((m,g)=>{m.type.name===e&&f.push({node:m,pos:g})});const d=f.at(-1);if(!d)return!1;const p=t.state.doc.resolve(c.start()+d.pos+1);return t.chain().cut({from:a.start()-1,to:a.end()+1},p.end()).joinForward().run()}if(!Js(t.state,e)||!vF(t.state))return!1;const r=Ju(e,t.state);if(!r)return!1;const s=t.state.doc.resolve(r.$pos.pos-2).node(r.depth),o=fN(e,t.state,s);return cN(e,t.state)&&!o?t.commands.joinItemBackward():t.chain().liftListItem(e).run()},dN=(t,e)=>{const n=Cv(t,e),r=Ju(t,e);return!r||!n?!1:n>r.depth},hN=(t,e)=>{const n=Cv(t,e),r=Ju(t,e);return!r||!n?!1:n<r.depth},B0=(t,e)=>{if(!Js(t.state,e)||!yF(t.state,e))return!1;const{selection:n}=t.state,{$from:r,$to:i}=n;return!n.empty&&r.sameParent(i)?!1:dN(e,t.state)?t.chain().focus(t.state.selection.from+4).lift(e).joinBackward().run():hN(e,t.state)?t.chain().joinForward().joinBackward().run():t.commands.joinItemForward()},xH=(t,e)=>{var n;const{$anchor:r}=e.selection,i=e.doc.resolve(r.pos-r.parentOffset-2);return!(i.index()===i.parent.childCount-1||((n=i.nodeAfter)==null?void 0:n.type.name)!==t)},pN=Et.create({name:"listKeymap",addOptions(){return{listTypes:[{itemName:"listItem",wrapperNames:["bulletList","orderedList"]},{itemName:"taskItem",wrapperNames:["taskList"]}]}},addKeyboardShortcuts(){return{Delete:({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:n})=>{t.state.schema.nodes[n]!==void 0&&B0(t,n)&&(e=!0)}),e},"Mod-Delete":({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:n})=>{t.state.schema.nodes[n]!==void 0&&B0(t,n)&&(e=!0)}),e},Backspace:({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:n,wrapperNames:r})=>{t.state.schema.nodes[n]!==void 0&&z0(t,n,r)&&(e=!0)}),e},"Mod-Backspace":({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:n,wrapperNames:r})=>{t.state.schema.nodes[n]!==void 0&&z0(t,n,r)&&(e=!0)}),e}}}}),US=/^(\s*)(\d+)\.\s+(.*)$/,wH=/^\s/;function bH(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n],s=i.match(US);if(!s)break;const[,o,a,c]=s,f=o.length;let d=c,p=n+1;const m=[i];for(;p<t.length;){const g=t[p];if(g.match(US))break;if(g.trim()==="")m.push(g),d+=`
`,p+=1;else if(g.match(wH))m.push(g),d+=`
${g.slice(f+2)}`,p+=1;else break}e.push({indent:f,number:parseInt(a,10),content:d.trim(),raw:m.join(`
`)}),r=p,n=p}return[e,r]}function mN(t,e,n){var r;const i=[];let s=0;for(;s<t.length;){const o=t[s];if(o.indent===e){const a=o.content.split(`
`),c=((r=a[0])==null?void 0:r.trim())||"",f=[];c&&f.push({type:"paragraph",raw:c,tokens:n.inlineTokens(c)});const d=a.slice(1).join(`
`).trim();if(d){const g=n.blockTokens(d);f.push(...g)}let p=s+1;const m=[];for(;p<t.length&&t[p].indent>e;)m.push(t[p]),p+=1;if(m.length>0){const g=Math.min(...m.map(S=>S.indent)),v=mN(m,g,n);f.push({type:"list",ordered:!0,start:m[0].number,items:v,raw:m.map(S=>S.raw).join(`
`)})}i.push({type:"list_item",raw:o.raw,tokens:f}),s=p}else s+=1}return i}function SH(t,e){return t.map(n=>{if(n.type!=="list_item")return e.parseChildren([n])[0];const r=[];return n.tokens&&n.tokens.length>0&&n.tokens.forEach(i=>{if(i.type==="paragraph"||i.type==="list"||i.type==="blockquote"||i.type==="code")r.push(...e.parseChildren([i]));else if(i.type==="text"&&i.tokens){const s=e.parseChildren([i]);r.push({type:"paragraph",content:s})}else{const s=e.parseChildren([i]);s.length>0&&r.push(...s)}}),{type:"listItem",content:r}})}var kH="listItem",VS="textStyle",WS=/^(\d+)\.\s$/,gN=vr.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:t=>t.hasAttribute("start")?parseInt(t.getAttribute("start")||"",10):1},type:{default:null,parseHTML:t=>t.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:t}){const{start:e,...n}=t;return e===1?["ol",At(this.options.HTMLAttributes,n),0]:["ol",At(this.options.HTMLAttributes,t),0]},markdownTokenName:"list",parseMarkdown:(t,e)=>{if(t.type!=="list"||!t.ordered)return[];const n=t.start||1,r=t.items?SH(t.items,e):[];return n!==1?{type:"orderedList",attrs:{start:n},content:r}:{type:"orderedList",content:r}},renderMarkdown:(t,e)=>t.content?e.renderChildren(t.content,`
`):"",markdownTokenizer:{name:"orderedList",level:"block",start:t=>{const e=t.match(/^(\s*)(\d+)\.\s+/),n=e==null?void 0:e.index;return n!==void 0?n:-1},tokenize:(t,e,n)=>{var r;const i=t.split(`
`),[s,o]=bH(i);if(s.length===0)return;const a=mN(s,0,n);return a.length===0?void 0:{type:"list",ordered:!0,start:((r=s[0])==null?void 0:r.number)||1,items:a,raw:i.slice(0,o).join(`
`)}}},markdownOptions:{indentsContent:!0},addCommands(){return{toggleOrderedList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(kH,this.editor.getAttributes(VS)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let t=ra({find:WS,type:this.type,getAttributes:e=>({start:+e[1]}),joinPredicate:(e,n)=>n.childCount+n.attrs.start===+e[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(t=ra({find:WS,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:e=>({start:+e[1],...this.editor.getAttributes(VS)}),joinPredicate:(e,n)=>n.childCount+n.attrs.start===+e[1],editor:this.editor})),[t]}}),CH=/^\s*(\[([( |x])?\])\s$/,EH=vr.create({name:"taskItem",addOptions(){return{nested:!1,HTMLAttributes:{},taskListTypeName:"taskList",a11y:void 0}},content(){return this.options.nested?"paragraph block*":"paragraph+"},defining:!0,addAttributes(){return{checked:{default:!1,keepOnSplit:!1,parseHTML:t=>{const e=t.getAttribute("data-checked");return e===""||e==="true"},renderHTML:t=>({"data-checked":t.checked})}}},parseHTML(){return[{tag:`li[data-type="${this.name}"]`,priority:51}]},renderHTML({node:t,HTMLAttributes:e}){return["li",At(this.options.HTMLAttributes,e,{"data-type":this.name}),["label",["input",{type:"checkbox",checked:t.attrs.checked?"checked":null}],["span"]],["div",0]]},parseMarkdown:(t,e)=>{const n=[];if(t.tokens&&t.tokens.length>0?n.push(e.createNode("paragraph",{},e.parseInline(t.tokens))):t.text?n.push(e.createNode("paragraph",{},[e.createNode("text",{text:t.text})])):n.push(e.createNode("paragraph",{},[])),t.nestedTokens&&t.nestedTokens.length>0){const r=e.parseChildren(t.nestedTokens);n.push(...r)}return e.createNode("taskItem",{checked:t.checked||!1},n)},renderMarkdown:(t,e)=>{var n;const i=`- [${(n=t.attrs)!=null&&n.checked?"x":" "}] `;return pv(t,e,i)},addKeyboardShortcuts(){const t={Enter:()=>this.editor.commands.splitListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)};return this.options.nested?{...t,Tab:()=>this.editor.commands.sinkListItem(this.name)}:t},addNodeView(){return({node:t,HTMLAttributes:e,getPos:n,editor:r})=>{const i=document.createElement("li"),s=document.createElement("label"),o=document.createElement("span"),a=document.createElement("input"),c=document.createElement("div"),f=p=>{var m,g;a.ariaLabel=((g=(m=this.options.a11y)==null?void 0:m.checkboxLabel)==null?void 0:g.call(m,p,a.checked))||`Task item checkbox for ${p.textContent||"empty task item"}`};f(t),s.contentEditable="false",a.type="checkbox",a.addEventListener("mousedown",p=>p.preventDefault()),a.addEventListener("change",p=>{if(!r.isEditable&&!this.options.onReadOnlyChecked){a.checked=!a.checked;return}const{checked:m}=p.target;r.isEditable&&typeof n=="function"&&r.chain().focus(void 0,{scrollIntoView:!1}).command(({tr:g})=>{const v=n();if(typeof v!="number")return!1;const S=g.doc.nodeAt(v);return g.setNodeMarkup(v,void 0,{...S==null?void 0:S.attrs,checked:m}),!0}).run(),!r.isEditable&&this.options.onReadOnlyChecked&&(this.options.onReadOnlyChecked(t,m)||(a.checked=!a.checked))}),Object.entries(this.options.HTMLAttributes).forEach(([p,m])=>{i.setAttribute(p,m)}),i.dataset.checked=t.attrs.checked,a.checked=t.attrs.checked,s.append(a,o),i.append(s,c),Object.entries(e).forEach(([p,m])=>{i.setAttribute(p,m)});let d=new Set(Object.keys(e));return{dom:i,contentDOM:c,update:p=>{if(p.type!==this.type)return!1;i.dataset.checked=p.attrs.checked,a.checked=p.attrs.checked,f(p);const m=r.extensionManager.attributes,g=Bu(p,m),v=new Set(Object.keys(g)),S=this.options.HTMLAttributes;return d.forEach(C=>{v.has(C)||(C in S?i.setAttribute(C,S[C]):i.removeAttribute(C))}),Object.entries(g).forEach(([C,x])=>{x==null?C in S?i.setAttribute(C,S[C]):i.removeAttribute(C):i.setAttribute(C,x)}),d=v,!0}}}},addInputRules(){return[ra({find:CH,type:this.type,getAttributes:t=>({checked:t[t.length-1]==="x"})})]}}),TH=vr.create({name:"taskList",addOptions(){return{itemTypeName:"taskItem",HTMLAttributes:{}}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:`ul[data-type="${this.name}"]`,priority:51}]},renderHTML({HTMLAttributes:t}){return["ul",At(this.options.HTMLAttributes,t,{"data-type":this.name}),0]},parseMarkdown:(t,e)=>e.createNode("taskList",{},e.parseChildren(t.items||[])),renderMarkdown:(t,e)=>t.content?e.renderChildren(t.content,`
`):"",markdownTokenizer:{name:"taskList",level:"block",start(t){var e;const n=(e=t.match(/^\s*[-+*]\s+\[([ xX])\]\s+/))==null?void 0:e.index;return n!==void 0?n:-1},tokenize(t,e,n){const r=s=>{const o=M0(s,{itemPattern:/^(\s*)([-+*])\s+\[([ xX])\]\s+(.*)$/,extractItemData:a=>({indentLevel:a[1].length,mainContent:a[4],checked:a[3].toLowerCase()==="x"}),createToken:(a,c)=>({type:"taskItem",raw:"",mainContent:a.mainContent,indentLevel:a.indentLevel,checked:a.checked,text:a.mainContent,tokens:n.inlineTokens(a.mainContent),nestedTokens:c}),customNestedParser:r},n);return o?[{type:"taskList",raw:o.raw,items:o.items}]:n.blockTokens(s)},i=M0(t,{itemPattern:/^(\s*)([-+*])\s+\[([ xX])\]\s+(.*)$/,extractItemData:s=>({indentLevel:s[1].length,mainContent:s[4],checked:s[3].toLowerCase()==="x"}),createToken:(s,o)=>({type:"taskItem",raw:"",mainContent:s.mainContent,indentLevel:s.indentLevel,checked:s.checked,text:s.mainContent,tokens:n.inlineTokens(s.mainContent),nestedTokens:o}),customNestedParser:r},n);if(i)return{type:"taskList",raw:i.raw,items:i.items}}},markdownOptions:{indentsContent:!0},addCommands(){return{toggleTaskList:()=>({commands:t})=>t.toggleList(this.name,this.options.itemTypeName)}},addKeyboardShortcuts(){return{"Mod-Shift-9":()=>this.editor.commands.toggleTaskList()}}});Et.create({name:"listKit",addExtensions(){const t=[];return this.options.bulletList!==!1&&t.push(lN.configure(this.options.bulletList)),this.options.listItem!==!1&&t.push(aN.configure(this.options.listItem)),this.options.listKeymap!==!1&&t.push(pN.configure(this.options.listKeymap)),this.options.orderedList!==!1&&t.push(gN.configure(this.options.orderedList)),this.options.taskItem!==!1&&t.push(EH.configure(this.options.taskItem)),this.options.taskList!==!1&&t.push(TH.configure(this.options.taskList)),t}});var NH=vr.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:t}){return["p",At(this.options.HTMLAttributes,t),0]},parseMarkdown:(t,e)=>{const n=t.tokens||[];return n.length===1&&n[0].type==="image"?e.parseChildren([n[0]]):e.createNode("paragraph",void 0,e.parseInline(n))},renderMarkdown:(t,e)=>!t||!Array.isArray(t.content)?"":e.renderChildren(t.content),addCommands(){return{setParagraph:()=>({commands:t})=>t.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),MH=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,_H=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,OH=qo.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["s",At(this.options.HTMLAttributes,t),0]},markdownTokenName:"del",parseMarkdown:(t,e)=>e.applyMark("strike",e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>`~~${e.renderChildren(t)}~~`,addCommands(){return{setStrike:()=>({commands:t})=>t.setMark(this.name),toggleStrike:()=>({commands:t})=>t.toggleMark(this.name),unsetStrike:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[na({find:MH,type:this.type})]},addPasteRules(){return[Ho({find:_H,type:this.type})]}}),AH=vr.create({name:"text",group:"inline",parseMarkdown:t=>({type:"text",text:t.text||""}),renderMarkdown:t=>t.text||""}),PH=qo.create({name:"underline",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("underline")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["u",At(this.options.HTMLAttributes,t),0]},parseMarkdown(t,e){return e.applyMark(this.name||"underline",e.parseInline(t.tokens||[]))},renderMarkdown(t,e){return`++${e.renderChildren(t)}++`},markdownTokenizer:{name:"underline",level:"inline",start(t){return t.indexOf("++")},tokenize(t,e,n){const i=/^(\+\+)([\s\S]+?)(\+\+)/.exec(t);if(!i)return;const s=i[2].trim();return{type:"underline",raw:i[0],text:s,tokens:n.inlineTokens(s)}}},addCommands(){return{setUnderline:()=>({commands:t})=>t.setMark(this.name),toggleUnderline:()=>({commands:t})=>t.toggleMark(this.name),unsetUnderline:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-u":()=>this.editor.commands.toggleUnderline(),"Mod-U":()=>this.editor.commands.toggleUnderline()}}});function RH(t={}){return new dt({view(e){return new DH(e,t)}})}class DH{constructor(e,n){var r;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(r=n.width)!==null&&r!==void 0?r:1,this.color=n.color===!1?void 0:n.color||"black",this.class=n.class,this.handlers=["dragover","dragend","drop","dragleave"].map(i=>{let s=o=>{this[i](o)};return e.dom.addEventListener(i,s),{name:i,handler:s}})}destroy(){this.handlers.forEach(({name:e,handler:n})=>this.editorView.dom.removeEventListener(e,n))}update(e,n){this.cursorPos!=null&&n.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),n=!e.parent.inlineContent,r,i=this.editorView.dom,s=i.getBoundingClientRect(),o=s.width/i.offsetWidth,a=s.height/i.offsetHeight;if(n){let p=e.nodeBefore,m=e.nodeAfter;if(p||m){let g=this.editorView.nodeDOM(this.cursorPos-(p?p.nodeSize:0));if(g){let v=g.getBoundingClientRect(),S=p?v.bottom:v.top;p&&m&&(S=(S+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2);let C=this.width/2*a;r={left:v.left,right:v.right,top:S-C,bottom:S+C}}}}if(!r){let p=this.editorView.coordsAtPos(this.cursorPos),m=this.width/2*o;r={left:p.left-m,right:p.left+m,top:p.top,bottom:p.bottom}}let c=this.editorView.dom.offsetParent;this.element||(this.element=c.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",n),this.element.classList.toggle("prosemirror-dropcursor-inline",!n);let f,d;if(!c||c==document.body&&getComputedStyle(c).position=="static")f=-pageXOffset,d=-pageYOffset;else{let p=c.getBoundingClientRect(),m=p.width/c.offsetWidth,g=p.height/c.offsetHeight;f=p.left-c.scrollLeft*m,d=p.top-c.scrollTop*g}this.element.style.left=(r.left-f)/o+"px",this.element.style.top=(r.top-d)/a+"px",this.element.style.width=(r.right-r.left)/o+"px",this.element.style.height=(r.bottom-r.top)/a+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let n=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),r=n&&n.inside>=0&&this.editorView.state.doc.nodeAt(n.inside),i=r&&r.type.spec.disableDropCursor,s=typeof i=="function"?i(this.editorView,n,e):i;if(n&&!s){let o=n.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let a=h2(this.editorView.state.doc,o,this.editorView.dragging.slice);a!=null&&(o=a)}this.setCursor(o),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){this.editorView.dom.contains(e.relatedTarget)||this.setCursor(null)}}class vt extends Oe{constructor(e){super(e,e)}map(e,n){let r=e.resolve(n.map(this.head));return vt.valid(r)?new vt(r):Oe.near(r)}content(){return oe.empty}eq(e){return e instanceof vt&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new vt(e.resolve(n.pos))}getBookmark(){return new Ev(this.anchor)}static valid(e){let n=e.parent;if(n.isTextblock||!IH(e)||!LH(e))return!1;let r=n.type.spec.allowGapCursor;if(r!=null)return r;let i=n.contentMatchAt(e.index()).defaultType;return i&&i.isTextblock}static findGapCursorFrom(e,n,r=!1){e:for(;;){if(!r&&vt.valid(e))return e;let i=e.pos,s=null;for(let o=e.depth;;o--){let a=e.node(o);if(n>0?e.indexAfter(o)<a.childCount:e.index(o)>0){s=a.child(n>0?e.indexAfter(o):e.index(o)-1);break}else if(o==0)return null;i+=n;let c=e.doc.resolve(i);if(vt.valid(c))return c}for(;;){let o=n>0?s.firstChild:s.lastChild;if(!o){if(s.isAtom&&!s.isText&&!ye.isSelectable(s)){e=e.doc.resolve(i+s.nodeSize*n),r=!1;continue e}break}s=o,i+=n;let a=e.doc.resolve(i);if(vt.valid(a))return a}return null}}}vt.prototype.visible=!1;vt.findFrom=vt.findGapCursorFrom;Oe.jsonID("gapcursor",vt);class Ev{constructor(e){this.pos=e}map(e){return new Ev(e.map(this.pos))}resolve(e){let n=e.resolve(this.pos);return vt.valid(n)?new vt(n):Oe.near(n)}}function yN(t){return t.isAtom||t.spec.isolating||t.spec.createGapCursor}function IH(t){for(let e=t.depth;e>=0;e--){let n=t.index(e),r=t.node(e);if(n==0){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(n-1);;i=i.lastChild){if(i.childCount==0&&!i.inlineContent||yN(i.type))return!0;if(i.inlineContent)return!1}}return!0}function LH(t){for(let e=t.depth;e>=0;e--){let n=t.indexAfter(e),r=t.node(e);if(n==r.childCount){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(n);;i=i.firstChild){if(i.childCount==0&&!i.inlineContent||yN(i.type))return!0;if(i.inlineContent)return!1}}return!0}function jH(){return new dt({props:{decorations:$H,createSelectionBetween(t,e,n){return e.pos==n.pos&&vt.valid(n)?new vt(n):null},handleClick:BH,handleKeyDown:zH,handleDOMEvents:{beforeinput:FH}}})}const zH=pT({ArrowLeft:Sf("horiz",-1),ArrowRight:Sf("horiz",1),ArrowUp:Sf("vert",-1),ArrowDown:Sf("vert",1)});function Sf(t,e){const n=t=="vert"?e>0?"down":"up":e>0?"right":"left";return function(r,i,s){let o=r.selection,a=e>0?o.$to:o.$from,c=o.empty;if(o instanceof ke){if(!s.endOfTextblock(n)||a.depth==0)return!1;c=!1,a=r.doc.resolve(e>0?a.after():a.before())}let f=vt.findGapCursorFrom(a,e,c);return f?(i&&i(r.tr.setSelection(new vt(f))),!0):!1}}function BH(t,e,n){if(!t||!t.editable)return!1;let r=t.state.doc.resolve(e);if(!vt.valid(r))return!1;let i=t.posAtCoords({left:n.clientX,top:n.clientY});return i&&i.inside>-1&&ye.isSelectable(t.state.doc.nodeAt(i.inside))?!1:(t.dispatch(t.state.tr.setSelection(new vt(r))),!0)}function FH(t,e){if(e.inputType!="insertCompositionText"||!(t.state.selection instanceof vt))return!1;let{$from:n}=t.state.selection,r=n.parent.contentMatchAt(n.index()).findWrapping(t.state.schema.nodes.text);if(!r)return!1;let i=X.empty;for(let o=r.length-1;o>=0;o--)i=X.from(r[o].createAndFill(null,i));let s=t.state.tr.replace(n.pos,n.pos,new oe(i,0,0));return s.setSelection(ke.near(s.doc.resolve(n.pos+1))),t.dispatch(s),!1}function $H(t){if(!(t.selection instanceof vt))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",ut.create(t.doc,[En.widget(t.selection.head,e,{key:"gapcursor"})])}var ih=200,Vt=function(){};Vt.prototype.append=function(e){return e.length?(e=Vt.from(e),!this.length&&e||e.length<ih&&this.leafAppend(e)||this.length<ih&&e.leafPrepend(this)||this.appendInner(e)):this};Vt.prototype.prepend=function(e){return e.length?Vt.from(e).append(this):this};Vt.prototype.appendInner=function(e){return new HH(this,e)};Vt.prototype.slice=function(e,n){return e===void 0&&(e=0),n===void 0&&(n=this.length),e>=n?Vt.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,n))};Vt.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};Vt.prototype.forEach=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length),n<=r?this.forEachInner(e,n,r,0):this.forEachInvertedInner(e,n,r,0)};Vt.prototype.map=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length);var i=[];return this.forEach(function(s,o){return i.push(e(s,o))},n,r),i};Vt.from=function(e){return e instanceof Vt?e:e&&e.length?new vN(e):Vt.empty};var vN=function(t){function e(r){t.call(this),this.values=r}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(i,s){return i==0&&s==this.length?this:new e(this.values.slice(i,s))},e.prototype.getInner=function(i){return this.values[i]},e.prototype.forEachInner=function(i,s,o,a){for(var c=s;c<o;c++)if(i(this.values[c],a+c)===!1)return!1},e.prototype.forEachInvertedInner=function(i,s,o,a){for(var c=s-1;c>=o;c--)if(i(this.values[c],a+c)===!1)return!1},e.prototype.leafAppend=function(i){if(this.length+i.length<=ih)return new e(this.values.concat(i.flatten()))},e.prototype.leafPrepend=function(i){if(this.length+i.length<=ih)return new e(i.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(e.prototype,n),e}(Vt);Vt.empty=new vN([]);var HH=function(t){function e(n,r){t.call(this),this.left=n,this.right=r,this.length=n.length+r.length,this.depth=Math.max(n.depth,r.depth)+1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(r){return r<this.left.length?this.left.get(r):this.right.get(r-this.left.length)},e.prototype.forEachInner=function(r,i,s,o){var a=this.left.length;if(i<a&&this.left.forEachInner(r,i,Math.min(s,a),o)===!1||s>a&&this.right.forEachInner(r,Math.max(i-a,0),Math.min(this.length,s)-a,o+a)===!1)return!1},e.prototype.forEachInvertedInner=function(r,i,s,o){var a=this.left.length;if(i>a&&this.right.forEachInvertedInner(r,i-a,Math.max(s,a)-a,o+a)===!1||s<a&&this.left.forEachInvertedInner(r,Math.min(i,a),s,o)===!1)return!1},e.prototype.sliceInner=function(r,i){if(r==0&&i==this.length)return this;var s=this.left.length;return i<=s?this.left.slice(r,i):r>=s?this.right.slice(r-s,i-s):this.left.slice(r,s).append(this.right.slice(0,i-s))},e.prototype.leafAppend=function(r){var i=this.right.leafAppend(r);if(i)return new e(this.left,i)},e.prototype.leafPrepend=function(r){var i=this.left.leafPrepend(r);if(i)return new e(i,this.right)},e.prototype.appendInner=function(r){return this.left.depth>=Math.max(this.right.depth,r.depth)+1?new e(this.left,new e(this.right,r)):new e(this,r)},e}(Vt);const UH=500;class ri{constructor(e,n){this.items=e,this.eventCount=n}popEvent(e,n){if(this.eventCount==0)return null;let r=this.items.length;for(;;r--)if(this.items.get(r-1).selection){--r;break}let i,s;n&&(i=this.remapping(r,this.items.length),s=i.maps.length);let o=e.tr,a,c,f=[],d=[];return this.items.forEach((p,m)=>{if(!p.step){i||(i=this.remapping(r,m+1),s=i.maps.length),s--,d.push(p);return}if(i){d.push(new xi(p.map));let g=p.step.map(i.slice(s)),v;g&&o.maybeStep(g).doc&&(v=o.mapping.maps[o.mapping.maps.length-1],f.push(new xi(v,void 0,void 0,f.length+d.length))),s--,v&&i.appendMap(v,s)}else o.maybeStep(p.step);if(p.selection)return a=i?p.selection.map(i.slice(s)):p.selection,c=new ri(this.items.slice(0,r).append(d.reverse().concat(f)),this.eventCount-1),!1},this.items.length,0),{remaining:c,transform:o,selection:a}}addTransform(e,n,r,i){let s=[],o=this.eventCount,a=this.items,c=!i&&a.length?a.get(a.length-1):null;for(let d=0;d<e.steps.length;d++){let p=e.steps[d].invert(e.docs[d]),m=new xi(e.mapping.maps[d],p,n),g;(g=c&&c.merge(m))&&(m=g,d?s.pop():a=a.slice(0,a.length-1)),s.push(m),n&&(o++,n=void 0),i||(c=m)}let f=o-r.depth;return f>WH&&(a=VH(a,f),o-=f),new ri(a.append(s),o)}remapping(e,n){let r=new Ru;return this.items.forEach((i,s)=>{let o=i.mirrorOffset!=null&&s-i.mirrorOffset>=e?r.maps.length-i.mirrorOffset:void 0;r.appendMap(i.map,o)},e,n),r}addMaps(e){return this.eventCount==0?this:new ri(this.items.append(e.map(n=>new xi(n))),this.eventCount)}rebased(e,n){if(!this.eventCount)return this;let r=[],i=Math.max(0,this.items.length-n),s=e.mapping,o=e.steps.length,a=this.eventCount;this.items.forEach(m=>{m.selection&&a--},i);let c=n;this.items.forEach(m=>{let g=s.getMirror(--c);if(g==null)return;o=Math.min(o,g);let v=s.maps[g];if(m.step){let S=e.steps[g].invert(e.docs[g]),C=m.selection&&m.selection.map(s.slice(c+1,g));C&&a++,r.push(new xi(v,S,C))}else r.push(new xi(v))},i);let f=[];for(let m=n;m<o;m++)f.push(new xi(s.maps[m]));let d=this.items.slice(0,i).append(f).append(r),p=new ri(d,a);return p.emptyItemCount()>UH&&(p=p.compress(this.items.length-r.length)),p}emptyItemCount(){let e=0;return this.items.forEach(n=>{n.step||e++}),e}compress(e=this.items.length){let n=this.remapping(0,e),r=n.maps.length,i=[],s=0;return this.items.forEach((o,a)=>{if(a>=e)i.push(o),o.selection&&s++;else if(o.step){let c=o.step.map(n.slice(r)),f=c&&c.getMap();if(r--,f&&n.appendMap(f,r),c){let d=o.selection&&o.selection.map(n.slice(r));d&&s++;let p=new xi(f.invert(),c,d),m,g=i.length-1;(m=i.length&&i[g].merge(p))?i[g]=m:i.push(p)}}else o.map&&r--},this.items.length,0),new ri(Vt.from(i.reverse()),s)}}ri.empty=new ri(Vt.empty,0);function VH(t,e){let n;return t.forEach((r,i)=>{if(r.selection&&e--==0)return n=i,!1}),t.slice(n)}class xi{constructor(e,n,r,i){this.map=e,this.step=n,this.selection=r,this.mirrorOffset=i}merge(e){if(this.step&&e.step&&!e.selection){let n=e.step.merge(this.step);if(n)return new xi(n.getMap().invert(),n,this.selection)}}}class ks{constructor(e,n,r,i,s){this.done=e,this.undone=n,this.prevRanges=r,this.prevTime=i,this.prevComposition=s}}const WH=20;function KH(t,e,n,r){let i=n.getMeta(Po),s;if(i)return i.historyState;n.getMeta(XH)&&(t=new ks(t.done,t.undone,null,0,-1));let o=n.getMeta("appendedTransaction");if(n.steps.length==0)return t;if(o&&o.getMeta(Po))return o.getMeta(Po).redo?new ks(t.done.addTransform(n,void 0,r,Ff(e)),t.undone,KS(n.mapping.maps),t.prevTime,t.prevComposition):new ks(t.done,t.undone.addTransform(n,void 0,r,Ff(e)),null,t.prevTime,t.prevComposition);if(n.getMeta("addToHistory")!==!1&&!(o&&o.getMeta("addToHistory")===!1)){let a=n.getMeta("composition"),c=t.prevTime==0||!o&&t.prevComposition!=a&&(t.prevTime<(n.time||0)-r.newGroupDelay||!qH(n,t.prevRanges)),f=o?fg(t.prevRanges,n.mapping):KS(n.mapping.maps);return new ks(t.done.addTransform(n,c?e.selection.getBookmark():void 0,r,Ff(e)),ri.empty,f,n.time,a??t.prevComposition)}else return(s=n.getMeta("rebased"))?new ks(t.done.rebased(n,s),t.undone.rebased(n,s),fg(t.prevRanges,n.mapping),t.prevTime,t.prevComposition):new ks(t.done.addMaps(n.mapping.maps),t.undone.addMaps(n.mapping.maps),fg(t.prevRanges,n.mapping),t.prevTime,t.prevComposition)}function qH(t,e){if(!e)return!1;if(!t.docChanged)return!0;let n=!1;return t.mapping.maps[0].forEach((r,i)=>{for(let s=0;s<e.length;s+=2)r<=e[s+1]&&i>=e[s]&&(n=!0)}),n}function KS(t){let e=[];for(let n=t.length-1;n>=0&&e.length==0;n--)t[n].forEach((r,i,s,o)=>e.push(s,o));return e}function fg(t,e){if(!t)return null;let n=[];for(let r=0;r<t.length;r+=2){let i=e.map(t[r],1),s=e.map(t[r+1],-1);i<=s&&n.push(i,s)}return n}function GH(t,e,n){let r=Ff(e),i=Po.get(e).spec.config,s=(n?t.undone:t.done).popEvent(e,r);if(!s)return null;let o=s.selection.resolve(s.transform.doc),a=(n?t.done:t.undone).addTransform(s.transform,e.selection.getBookmark(),i,r),c=new ks(n?a:s.remaining,n?s.remaining:a,null,0,-1);return s.transform.setSelection(o).setMeta(Po,{redo:n,historyState:c})}let dg=!1,qS=null;function Ff(t){let e=t.plugins;if(qS!=e){dg=!1,qS=e;for(let n=0;n<e.length;n++)if(e[n].spec.historyPreserveItems){dg=!0;break}}return dg}const Po=new Lt("history"),XH=new Lt("closeHistory");function JH(t={}){return t={depth:t.depth||100,newGroupDelay:t.newGroupDelay||500},new dt({key:Po,state:{init(){return new ks(ri.empty,ri.empty,null,0,-1)},apply(e,n,r){return KH(n,r,e,t)}},config:t,props:{handleDOMEvents:{beforeinput(e,n){let r=n.inputType,i=r=="historyUndo"?wN:r=="historyRedo"?bN:null;return!i||!e.editable?!1:(n.preventDefault(),i(e.state,e.dispatch))}}}})}function xN(t,e){return(n,r)=>{let i=Po.getState(n);if(!i||(t?i.undone:i.done).eventCount==0)return!1;if(r){let s=GH(i,n,t);s&&r(e?s.scrollIntoView():s)}return!0}}const wN=xN(!1,!0),bN=xN(!0,!0);Et.create({name:"characterCount",addOptions(){return{limit:null,mode:"textSize",textCounter:t=>t.length,wordCounter:t=>t.split(" ").filter(e=>e!=="").length}},addStorage(){return{characters:()=>0,words:()=>0}},onBeforeCreate(){this.storage.characters=t=>{const e=(t==null?void 0:t.node)||this.editor.state.doc;if(((t==null?void 0:t.mode)||this.options.mode)==="textSize"){const r=e.textBetween(0,e.content.size,void 0," ");return this.options.textCounter(r)}return e.nodeSize},this.storage.words=t=>{const e=(t==null?void 0:t.node)||this.editor.state.doc,n=e.textBetween(0,e.content.size," "," ");return this.options.wordCounter(n)}},addProseMirrorPlugins(){let t=!1;return[new dt({key:new Lt("characterCount"),appendTransaction:(e,n,r)=>{if(t)return;const i=this.options.limit;if(i==null||i===0){t=!0;return}const s=this.storage.characters({node:r.doc});if(s>i){const o=s-i,a=0,c=o;console.warn(`[CharacterCount] Initial content exceeded limit of ${i} characters. Content was automatically trimmed.`);const f=r.tr.deleteRange(a,c);return t=!0,f}t=!0},filterTransaction:(e,n)=>{const r=this.options.limit;if(!e.docChanged||r===0||r===null||r===void 0)return!0;const i=this.storage.characters({node:n.doc}),s=this.storage.characters({node:e.doc});if(s<=r||i>r&&s>r&&s<=i)return!0;if(i>r&&s>r&&s>i||!e.getMeta("paste"))return!1;const a=e.selection.$head.pos,c=s-r,f=a-c,d=a;return e.deleteRange(f,d),!(this.storage.characters({node:e.doc})>r)}})]}});var YH=Et.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[RH(this.options)]}});Et.create({name:"focus",addOptions(){return{className:"has-focus",mode:"all"}},addProseMirrorPlugins(){return[new dt({key:new Lt("focus"),props:{decorations:({doc:t,selection:e})=>{const{isEditable:n,isFocused:r}=this.editor,{anchor:i}=e,s=[];if(!n||!r)return ut.create(t,[]);let o=0;this.options.mode==="deepest"&&t.descendants((c,f)=>{if(c.isText)return;if(!(i>=f&&i<=f+c.nodeSize-1))return!1;o+=1});let a=0;return t.descendants((c,f)=>{if(c.isText||!(i>=f&&i<=f+c.nodeSize-1))return!1;if(a+=1,this.options.mode==="deepest"&&o-a>0||this.options.mode==="shallowest"&&a>1)return this.options.mode==="deepest";s.push(En.node(f,f+c.nodeSize,{class:this.options.className}))}),ut.create(t,s)}}})]}});var QH=Et.create({name:"gapCursor",addProseMirrorPlugins(){return[jH()]},extendNodeSchema(t){var e;const n={name:t.name,options:t.options,storage:t.storage};return{allowGapCursor:(e=We(me(t,"allowGapCursor",n)))!=null?e:null}}}),ZH=Et.create({name:"placeholder",addOptions(){return{emptyEditorClass:"is-editor-empty",emptyNodeClass:"is-empty",placeholder:"Write something ",showOnlyWhenEditable:!0,showOnlyCurrent:!0,includeChildren:!1}},addProseMirrorPlugins(){return[new dt({key:new Lt("placeholder"),props:{decorations:({doc:t,selection:e})=>{const n=this.editor.isEditable||!this.options.showOnlyWhenEditable,{anchor:r}=e,i=[];if(!n)return null;const s=this.editor.isEmpty;return t.descendants((o,a)=>{const c=r>=a&&r<=a+o.nodeSize,f=!o.isLeaf&&Bh(o);if((c||!this.options.showOnlyCurrent)&&f){const d=[this.options.emptyNodeClass];s&&d.push(this.options.emptyEditorClass);const p=En.node(a,a+o.nodeSize,{class:d.join(" "),"data-placeholder":typeof this.options.placeholder=="function"?this.options.placeholder({editor:this.editor,node:o,pos:a,hasAnchor:c}):this.options.placeholder});i.push(p)}return this.options.includeChildren}),ut.create(t,i)}}})]}});Et.create({name:"selection",addOptions(){return{className:"selection"}},addProseMirrorPlugins(){const{editor:t,options:e}=this;return[new dt({key:new Lt("selection"),props:{decorations(n){return n.selection.empty||t.isFocused||!t.isEditable||OT(n.selection)||t.view.dragging?null:ut.create(n.doc,[En.inline(n.selection.from,n.selection.to,{class:e.className})])}}})]}});function GS({types:t,node:e}){return e&&Array.isArray(t)&&t.includes(e.type)||(e==null?void 0:e.type)===t}var eU=Et.create({name:"trailingNode",addOptions(){return{node:void 0,notAfter:[]}},addProseMirrorPlugins(){var t;const e=new Lt(this.name),n=this.options.node||((t=this.editor.schema.topNodeType.contentMatch.defaultType)==null?void 0:t.name)||"paragraph",r=Object.entries(this.editor.schema.nodes).map(([,i])=>i).filter(i=>(this.options.notAfter||[]).concat(n).includes(i.name));return[new dt({key:e,appendTransaction:(i,s,o)=>{const{doc:a,tr:c,schema:f}=o,d=e.getState(o),p=a.content.size,m=f.nodes[n];if(d)return c.insert(p,m.create())},state:{init:(i,s)=>{const o=s.tr.doc.lastChild;return!GS({node:o,types:r})},apply:(i,s)=>{if(!i.docChanged||i.getMeta("__uniqueIDTransaction"))return s;const o=i.doc.lastChild;return!GS({node:o,types:r})}}})]}}),tU=Et.create({name:"undoRedo",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:t,dispatch:e})=>wN(t,e),redo:()=>({state:t,dispatch:e})=>bN(t,e)}},addProseMirrorPlugins(){return[JH(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-":()=>this.editor.commands.undo(),"Shift-Mod-":()=>this.editor.commands.redo()}}}),nU=Et.create({name:"starterKit",addExtensions(){var t,e,n,r;const i=[];return this.options.bold!==!1&&i.push(M8.configure(this.options.bold)),this.options.blockquote!==!1&&i.push(k8.configure(this.options.blockquote)),this.options.bulletList!==!1&&i.push(lN.configure(this.options.bulletList)),this.options.code!==!1&&i.push(A8.configure(this.options.code)),this.options.codeBlock!==!1&&i.push(D8.configure(this.options.codeBlock)),this.options.document!==!1&&i.push(I8.configure(this.options.document)),this.options.dropcursor!==!1&&i.push(YH.configure(this.options.dropcursor)),this.options.gapcursor!==!1&&i.push(QH.configure(this.options.gapcursor)),this.options.hardBreak!==!1&&i.push(L8.configure(this.options.hardBreak)),this.options.heading!==!1&&i.push(j8.configure(this.options.heading)),this.options.undoRedo!==!1&&i.push(tU.configure(this.options.undoRedo)),this.options.horizontalRule!==!1&&i.push(z8.configure(this.options.horizontalRule)),this.options.italic!==!1&&i.push(U8.configure(this.options.italic)),this.options.listItem!==!1&&i.push(aN.configure(this.options.listItem)),this.options.listKeymap!==!1&&i.push(pN.configure((t=this.options)==null?void 0:t.listKeymap)),this.options.link!==!1&&i.push(pH.configure((e=this.options)==null?void 0:e.link)),this.options.orderedList!==!1&&i.push(gN.configure(this.options.orderedList)),this.options.paragraph!==!1&&i.push(NH.configure(this.options.paragraph)),this.options.strike!==!1&&i.push(OH.configure(this.options.strike)),this.options.text!==!1&&i.push(AH.configure(this.options.text)),this.options.underline!==!1&&i.push(PH.configure((n=this.options)==null?void 0:n.underline)),this.options.trailingNode!==!1&&i.push(eU.configure((r=this.options)==null?void 0:r.trailingNode)),i}}),rU=nU,iU=ZH;const hg=[{id:"blank",name:"",content:""},{id:"gdd",name:"GDD ",content:`
      <h1> (Project Name)</h1>
      <h2>1. </h2>
      <p><strong></strong></p>
      <p><strong></strong>RPG / FPS / RTS...</p>
      <p><strong></strong>...</p>
      <h2>2. </h2>
      <h3></h3>
      <p></p>
      <h3></h3>
      <p>/</p>
      <h2>3. </h2>
      <p></p>
      <h2>4. </h2>
      <p></p>
    `},{id:"level",name:"",content:`
      <h1>: [Level 1]</h1>
      <h2>1. </h2>
      <p></p>
      <h2>2. </h2>
      <p></p>
      <h2>3. </h2>
      <ul>
        <li>: 3</li>
        <li>: 1</li>
      </ul>
      <h2>4. </h2>
      <p></p>
    `},{id:"char",name:"",content:`
      <h1>: [Name]</h1>
      <h2>1. </h2>
      <ul>
        <li><strong>:</strong> 18</li>
        <li><strong>:</strong> </li>
        <li><strong>:</strong> </li>
      </ul>
      <h2>2. </h2>
      <p>...</p>
      <h2>3. </h2>
      <ul>
        <li><strong>Q:</strong> ...</li>
        <li><strong>E:</strong> ...</li>
        <li><strong>R:</strong> ...</li>
      </ul>
    `}];function sU({initialDocs:t,onUpdate:e}){const[n,r]=G.useState(t),[i,s]=G.useState(null),[o,a]=G.useState([]),c=G.useRef(null),[f,d]=G.useState(!1),[p,m]=G.useState(null);G.useEffect(()=>{t.length===0?C("gdd",null):!i&&t.length>0&&s(t[0].id)},[]);const g=(A,R)=>{const z=n.map(B=>B.id===A?{...B,content:R}:B);r(z),e(z)},v=(A,R)=>{const z=n.map(B=>B.id===A?{...B,title:R}:B);r(z),e(z)},S=A=>{m(A),d(!0)},C=(A,R)=>{const z=hg.find(re=>re.id===A)||hg[0],B={id:Br(),title:z.id==="blank"?"":z.name,content:z.content,parentId:R,expanded:!0};let te=[...n,B];R&&(te=te.map(re=>re.id===R?{...re,expanded:!0}:re)),r(te),e(te),s(B.id),d(!1)},x=(A,R)=>{if(A.stopPropagation(),!confirm(""))return;const z=new Set,B=re=>{z.add(re),n.filter(le=>le.parentId===re).forEach(le=>B(le.id))};B(R);const te=n.filter(re=>!z.has(re.id));r(te),e(te),i&&z.has(i)&&s(null)},w=(A,R)=>{A.stopPropagation(),r(n.map(z=>z.id===R?{...z,expanded:!z.expanded}:z))},E=A=>{if(!c.current)return;const R=c.current;R.commands.setTextSelection(A);const z=R.view.nodeDOM(A);if(z&&z instanceof HTMLElement)z.scrollIntoView({behavior:"smooth",block:"start"});else{const B=R.view.domAtPos(A+1);B.node&&B.node instanceof HTMLElement?B.node.scrollIntoView({behavior:"smooth",block:"start"}):B.node.parentElement&&B.node.parentElement.scrollIntoView({behavior:"smooth",block:"start"})}},M=()=>{const A=n.find(re=>re.id===i);if(!A)return;const R=`
      <!DOCTYPE html>
      <html>
      <head>
        <meta charset="utf-8">
        <title>${A.title}</title>
        <style>
          body { font-family: system-ui, -apple-system, sans-serif; line-height: 1.6; max-width: 800px; margin: 0 auto; padding: 40px; color: #333; }
          h1 { border-bottom: 2px solid #eee; padding-bottom: 10px; }
          h2 { margin-top: 30px; border-left: 4px solid #10b981; padding-left: 10px; }
          blockquote { border-left: 4px solid #ccc; margin: 0; padding-left: 16px; color: #666; }
          pre { background: #f4f4f5; padding: 16px; border-radius: 8px; overflow-x: auto; }
          img { max-width: 100%; border-radius: 8px; }
        </style>
      </head>
      <body>
        <h1>${A.title}</h1>
        ${A.content}
      </body>
      </html>
    `,z=new Blob([R],{type:"text/html"}),B=URL.createObjectURL(z),te=document.createElement("a");te.href=B,te.download=`${A.title}.html`,document.body.appendChild(te),te.click(),document.body.removeChild(te),URL.revokeObjectURL(B)},_=(A,R=0)=>{const z=n.filter(B=>B.parentId===A);return z.length===0?null:z.map(B=>{const te=n.some(le=>le.parentId===B.id),re=i===B.id;return b.jsxs("div",{children:[b.jsxs("div",{className:`flex items-center gap-2 py-1 px-2 rounded cursor-pointer group select-none ${re?"bg-emerald-600/20 text-emerald-400":"text-slate-400 hover:bg-slate-800 hover:text-slate-200"}`,style:{paddingLeft:`${R*12+8}px`},onClick:()=>s(B.id),children:[b.jsx("span",{className:`p-0.5 rounded hover:bg-slate-700/50 ${te?"opacity-100":"opacity-0"}`,onClick:le=>te&&w(le,B.id),children:B.expanded?b.jsx(Xj,{size:14}):b.jsx(Yj,{size:14})}),te?b.jsx(d4,{size:16,className:"text-yellow-500/80"}):b.jsx(c4,{size:16,className:"text-blue-400/80"}),b.jsx("span",{className:"flex-1 truncate text-sm",children:B.title}),b.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100",children:[b.jsx("button",{onClick:le=>{le.stopPropagation(),S(B.id)},className:"p-1 hover:bg-slate-700 rounded text-slate-400 hover:text-white",title:"",children:b.jsx(pd,{size:12})}),b.jsx("button",{onClick:le=>x(le,B.id),className:"p-1 hover:bg-red-900/50 rounded text-slate-400 hover:text-red-400",title:"",children:b.jsx(LE,{size:12})})]})]}),re&&o.length>0&&b.jsx("div",{className:"flex flex-col mb-1 animate-in slide-in-from-left-2 duration-200 border-l border-slate-700/50 ml-4 my-1",children:o.map((le,de)=>b.jsxs("div",{onClick:pe=>{pe.stopPropagation(),E(le.pos)},className:"flex items-center gap-2 py-1 pr-2 rounded cursor-pointer hover:bg-slate-800 text-slate-500 hover:text-emerald-300 text-xs transition-colors",style:{paddingLeft:`${R*12+24+(le.level-1)*8}px`},children:[b.jsx(p4,{size:10,className:"opacity-50 shrink-0"}),b.jsx("span",{className:"truncate",children:le.text})]},de))}),te&&B.expanded&&_(B.id,R+1)]},B.id)})},O=n.find(A=>A.id===i);return b.jsxs("div",{className:"flex h-full w-full bg-slate-900 overflow-hidden relative",children:[b.jsxs("div",{className:"w-64 bg-slate-800/50 border-r border-slate-700 flex flex-col shrink-0",children:[b.jsxs("div",{className:"p-4 border-b border-slate-700 flex justify-between items-center",children:[b.jsx("span",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider",children:"Documents"}),b.jsx("button",{onClick:()=>S(null),className:"p-1 hover:bg-emerald-600/20 rounded text-slate-400 hover:text-emerald-400",children:b.jsx(pd,{size:16})})]}),b.jsx("div",{className:"flex-1 overflow-y-auto p-2 scrollbar-thin",children:_(null)})]}),b.jsx("div",{className:"flex-1 flex flex-col bg-slate-900 min-w-0",children:O?b.jsxs("div",{className:"flex-1 flex flex-col max-w-4xl mx-auto w-full h-full relative",children:[b.jsxs("div",{className:"flex items-center justify-between px-8 pt-8 pb-4 mx-8 border-b border-slate-800",children:[b.jsx("input",{value:O.title,onChange:A=>v(O.id,A.target.value),className:"bg-transparent text-4xl font-bold text-white outline-none flex-1 mr-4 placeholder-slate-700",placeholder:""}),b.jsxs("button",{onClick:M,className:"flex items-center gap-2 px-3 py-1.5 bg-slate-800 hover:bg-emerald-600 hover:text-white text-slate-400 rounded transition-colors text-sm font-medium",children:[b.jsx(r4,{size:16}),b.jsx("span",{children:""})]})]}),b.jsx("div",{className:"flex-1 overflow-y-auto px-16 py-8",children:b.jsx(oU,{initialContent:O.content,onChange:A=>g(O.id,A),onHeadingsUpdate:a,setEditorRef:A=>c.current=A},O.id)})]}):b.jsx("div",{className:"flex-1 flex items-center justify-center text-slate-600",children:b.jsxs("div",{className:"text-center",children:[b.jsx(a4,{size:48,className:"mx-auto mb-4 opacity-20"}),b.jsx("p",{children:" + "})]})})}),f&&b.jsx("div",{className:"fixed inset-0 bg-black/70 z-[9999] flex items-center justify-center backdrop-blur-sm",onClick:()=>d(!1),children:b.jsxs("div",{className:"bg-slate-800 border border-slate-700 p-6 rounded-xl w-[500px] shadow-2xl animate-in zoom-in-95 duration-200",onClick:A=>A.stopPropagation(),children:[b.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:""}),b.jsx("div",{className:"grid grid-cols-2 gap-4",children:hg.map(A=>b.jsxs("div",{onClick:()=>C(A.id,p),className:"bg-slate-700/50 hover:bg-emerald-600/20 border border-slate-600 hover:border-emerald-500/50 p-4 rounded-lg cursor-pointer transition-all group",children:[b.jsx("div",{className:"font-bold text-slate-200 group-hover:text-emerald-400 mb-1",children:A.name}),b.jsx("div",{className:"text-xs text-slate-500 group-hover:text-slate-400",children:""})]},A.id))}),b.jsx("button",{onClick:()=>d(!1),className:"mt-6 w-full py-2 text-slate-500 hover:text-slate-300 text-sm",children:""})]})})]})}function oU({initialContent:t,onChange:e,onHeadingsUpdate:n,setEditorRef:r}){const i=v8({extensions:[rU,iU.configure({placeholder:" # ..."})],content:t,onUpdate:({editor:o})=>{e(o.getHTML()),s(o)},onCreate:({editor:o})=>{r(o),setTimeout(()=>s(o),100)},editorProps:{attributes:{class:"prose prose-invert prose-lg max-w-none focus:outline-none min-h-[500px]"}}}),s=o=>{const a=[];o.state.doc.descendants((c,f)=>{c.type.name==="heading"&&a.push({level:c.attrs.level,text:c.textContent,id:`heading-${f}`,pos:f})}),n(a)};return b.jsx(f8,{editor:i})}const SN=[{id:"btn_blue_normal",x:0,y:16,w:16,h:16,label:""},{id:"btn_red_normal",x:50,y:0,w:48,h:16,label:""},{id:"panel_bg",x:0,y:32,w:96,h:96,label:""},{id:"bar_empty",x:100,y:0,w:64,h:10,label:""},{id:"bar_full",x:100,y:12,w:64,h:10,label:""},{id:"Play",x:160,y:16,w:115,h:33,label:""},{id:"setting",x:128,y:16,w:16,h:16,label:""}],kN=({config:t,scale:e=1,className:n="",onClick:r,overrideW:i,overrideH:s})=>{const o=G.useRef(null);return G.useEffect(()=>{const a=o.current;if(!a)return;const c=a.getContext("2d");if(!c)return;const f=new Image;f.src=t.imageUrl||"./assets/ui-sprites.png",f.onload=()=>{const d=(i||t.w)*e,p=(s||t.h)*e;a.width=d,a.height=p,c.imageSmoothingEnabled=!1,c.drawImage(f,t.x,t.y,t.w,t.h,0,0,d,p)}},[t,e,i,s]),b.jsx("canvas",{ref:o,onClick:r,className:`inline-block ${n}`,style:{display:"block",pointerEvents:"none"},title:t.label})};function lU({component:t,assetConfig:e,isSelected:n,isMoving:r,scale:i=1,globalVars:s={},onUpdate:o,onSelect:a,onContextMenu:c,onInteraction:f}){var O,A,R,z,B,te,re;const d=G.useRef(null),p=t.customScale||1,[m,g]=G.useState(!1),v=t.width*p,S=t.height*p,C=le=>{if(!le)return!0;try{const de=le.trim().split(/\s+/);if(de.length<3)return!1;const pe=de[0],ee=de[1],ie=parseFloat(de[2]),L=s[pe]||0;switch(ee){case"==":return L===ie;case"!=":return L!==ie;case">":return L>ie;case"<":return L<ie;case">=":return L>=ie;case"<=":return L<=ie;default:return!1}}catch{return!1}},x=le=>{if(r)return;const{type:de,targetId:pe,param:ee}=t.interaction||{type:"none"};if(de!=="none"){if(de==="toggle"&&g(!m),de==="increment"&&f("increment",void 0,ee||"VAR"),de==="trigger_cond"){C(ee||"")&&pe&&f("navigate",pe);return}["navigate","open_modal","close_modal","back"].includes(de)&&f(de,pe,ee)}},w=((O=t.interaction)==null?void 0:O.type)==="toggle"&&!m?"brightness-50":"";let E="";r?E="ring-2 ring-emerald-400 ring-dashed cursor-move z-[999]":n?E="ring-2 ring-purple-500 cursor-pointer":E=((A=t.interaction)==null?void 0:A.type)!=="none"?"hover:ring-1 hover:ring-white/50 cursor-pointer":"";const M=(R=t.state)!=null&&R.isDisabled?.5:1,_=((z=t.state)==null?void 0:z.isVisible)===!1?"none":"block";return b.jsx(OE,{nodeRef:d,position:{x:t.x,y:t.y},scale:i,disabled:!r,onStop:(le,de)=>o(t.id,{x:de.x,y:de.y}),onMouseDown:le=>{le.stopPropagation(),a(le)},children:b.jsxs("div",{ref:d,onClick:x,onContextMenu:le=>{le.preventDefault(),le.stopPropagation(),c(le)},className:`absolute group transition-all active:scale-95 ${E} ${w}`,style:{width:v,height:S,zIndex:r?9999:t.zIndex||1,opacity:M,display:_},children:[r&&b.jsx("div",{className:"absolute inset-0 flex items-center justify-center z-50 pointer-events-none",children:b.jsx(DE,{size:24,className:"text-emerald-400 drop-shadow-md animate-pulse"})}),e?b.jsx(kN,{config:e,scale:p,overrideW:t.width,overrideH:t.height,className:"w-full h-full block"}):b.jsx("div",{className:"w-full h-full bg-red-500/50 border border-red-500 flex items-center justify-center text-xs text-white overflow-hidden",children:t.name}),((B=t.interaction)==null?void 0:B.type)==="increment"&&b.jsx("div",{className:"absolute inset-0 flex items-center justify-center font-mono font-bold text-white drop-shadow-[0_2px_2px_rgba(0,0,0,0.8)] text-xl pointer-events-none select-none",children:(s==null?void 0:s[t.interaction.param||""])||0}),!r&&((te=t.interaction)==null?void 0:te.type)!=="none"&&b.jsx("div",{className:"absolute -top-2 -right-2 bg-slate-700 text-white text-[9px] px-1.5 py-0.5 rounded shadow-sm z-[200] pointer-events-none border border-slate-500",children:(re=t.interaction)==null?void 0:re.type})]})})}function aU({component:t,allPages:e,onSave:n,onClose:r}){var ie,L,$,K,Z,ge;const[i,s]=G.useState("prop"),[o,a]=G.useState(t.name),[c,f]=G.useState(t.x),[d,p]=G.useState(t.y),[m,g]=G.useState(t.width),[v,S]=G.useState(t.height),[C,x]=G.useState(t.customScale||1),[w,E]=G.useState(t.zIndex||1),[M,_]=G.useState(((ie=t.state)==null?void 0:ie.isDisabled)||!1),[O,A]=G.useState(((L=t.state)==null?void 0:L.isActive)||!1),[R,z]=G.useState((($=t.state)==null?void 0:$.isVisible)??!0),[B,te]=G.useState(((K=t.interaction)==null?void 0:K.type)||"none"),[re,le]=G.useState(((Z=t.interaction)==null?void 0:Z.targetId)||""),[de,pe]=G.useState(((ge=t.interaction)==null?void 0:ge.param)||""),ee=()=>{n({name:o,x:Number(c),y:Number(d),width:Number(m),height:Number(v),zIndex:Number(w),customScale:Number(C),state:{isDisabled:M,isActive:O,isVisible:R},interaction:{type:B,targetId:["navigate","open_modal"].includes(B)?re:void 0,param:de}}),r()};return b.jsx("div",{className:"fixed inset-0 z-[1200] bg-black/60 backdrop-blur-sm flex items-center justify-center",onClick:r,children:b.jsxs("div",{className:"bg-slate-800 border border-slate-700 w-[600px] h-[500px] rounded-xl shadow-2xl flex flex-col overflow-hidden animate-in zoom-in-95",onClick:Q=>Q.stopPropagation(),children:[b.jsxs("div",{className:"flex justify-between items-center border-b border-slate-700 p-4 bg-slate-900/50",children:[b.jsxs("div",{className:"flex items-center gap-3",children:[b.jsx("div",{className:"w-8 h-8 bg-purple-600 rounded flex items-center justify-center text-white font-bold text-xs",children:"CFG"}),b.jsxs("div",{children:[b.jsx("h3",{className:"text-white font-bold text-base",children:o}),b.jsxs("p",{className:"text-slate-500 text-[10px] uppercase",children:["ID: ",t.id.slice(0,6)]})]})]}),b.jsx("button",{onClick:r,className:"text-slate-400 hover:text-white",children:b.jsx(zE,{size:20})})]}),b.jsx("div",{className:"flex bg-slate-900/30 border-b border-slate-700 px-4 gap-6",children:[{id:"prop",label:"Transform",icon:IE},{id:"inter",label:"Interaction",icon:k4},{id:"style",label:"State & Style",icon:xb}].map(Q=>b.jsxs("button",{onClick:()=>s(Q.id),className:`flex items-center gap-2 py-3 text-sm border-b-2 transition-colors ${i===Q.id?"border-purple-500 text-purple-400 font-bold":"border-transparent text-slate-500 hover:text-slate-300"}`,children:[b.jsx(Q.icon,{size:14})," ",Q.label]},Q.id))}),b.jsxs("div",{className:"flex-1 overflow-y-auto p-6 custom-scrollbar",children:[i==="prop"&&b.jsxs("div",{className:"space-y-5",children:[b.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[b.jsxs("div",{className:"space-y-1",children:[b.jsx("label",{className:"text-xs text-slate-500 font-bold",children:"Name"}),b.jsx("input",{value:o,onChange:Q=>a(Q.target.value),className:"w-full bg-slate-900 border border-slate-600 rounded px-2 py-1.5 text-white text-sm"})]}),b.jsxs("div",{className:"space-y-1",children:[b.jsx("label",{className:"text-xs text-emerald-500 font-bold",children:"Scale"}),b.jsx("input",{type:"number",step:"0.1",value:C,onChange:Q=>x(Number(Q.target.value)),className:"w-full bg-slate-900 border border-slate-600 rounded px-2 py-1.5 text-white text-sm"})]})]}),b.jsxs("div",{className:"grid grid-cols-4 gap-3",children:[b.jsxs("div",{children:[b.jsx("label",{className:"text-[10px] text-slate-500 font-bold block mb-1",children:"X"}),b.jsx("input",{type:"number",value:c,onChange:Q=>f(Number(Q.target.value)),className:"w-full bg-slate-900 border border-slate-600 rounded px-2 py-1 text-white text-xs"})]}),b.jsxs("div",{children:[b.jsx("label",{className:"text-[10px] text-slate-500 font-bold block mb-1",children:"Y"}),b.jsx("input",{type:"number",value:d,onChange:Q=>p(Number(Q.target.value)),className:"w-full bg-slate-900 border border-slate-600 rounded px-2 py-1 text-white text-xs"})]}),b.jsxs("div",{children:[b.jsx("label",{className:"text-[10px] text-slate-500 font-bold block mb-1",children:"W"}),b.jsx("input",{type:"number",value:m,onChange:Q=>g(Number(Q.target.value)),className:"w-full bg-slate-900 border border-slate-600 rounded px-2 py-1 text-white text-xs"})]}),b.jsxs("div",{children:[b.jsx("label",{className:"text-[10px] text-slate-500 font-bold block mb-1",children:"H"}),b.jsx("input",{type:"number",value:v,onChange:Q=>S(Number(Q.target.value)),className:"w-full bg-slate-900 border border-slate-600 rounded px-2 py-1 text-white text-xs"})]})]})]}),i==="inter"&&b.jsxs("div",{className:"space-y-6",children:[b.jsxs("div",{className:"bg-slate-700/30 p-4 rounded-lg border border-slate-600",children:[b.jsxs("label",{className:"flex items-center gap-2 text-sm text-white font-bold mb-3",children:[b.jsx(wb,{size:16,className:"text-yellow-500"}),"  (On Click)"]}),b.jsxs("select",{value:B,onChange:Q=>te(Q.target.value),className:"w-full bg-slate-900 border border-slate-600 rounded px-3 py-2 text-white text-sm focus:border-purple-500 outline-none",children:[b.jsx("option",{value:"none",children:" (None)"}),b.jsx("option",{value:"navigate",children:" (Navigate)"}),b.jsx("option",{value:"open_modal",children:" (Open Modal)"}),b.jsx("option",{value:"close_modal",children:" (Close Self)"}),b.jsx("option",{value:"back",children:" (Go Back)"}),b.jsx("option",{value:"toggle",children:" (Toggle State)"}),b.jsx("option",{value:"increment",children:"+1 (Increment)"}),b.jsx("option",{value:"trigger_cond",children:" (Condition)"})]})]}),B==="navigate"&&b.jsxs("div",{className:"animate-in fade-in slide-in-from-top-2",children:[b.jsx("label",{className:"text-xs text-blue-400 font-bold block mb-1",children:" (Target Screen)"}),b.jsxs("select",{value:re,onChange:Q=>le(Q.target.value),className:"w-full bg-slate-900 border border-slate-600 rounded px-3 py-2 text-white text-sm",children:[b.jsx("option",{value:"",children:"--  --"}),e.filter(Q=>!Q.type.includes("modal")).map(Q=>b.jsx("option",{value:Q.id,children:Q.name},Q.id))]})]}),B==="open_modal"&&b.jsxs("div",{className:"animate-in fade-in slide-in-from-top-2",children:[b.jsx("label",{className:"text-xs text-yellow-500 font-bold block mb-1",children:" (Target Modal)"}),b.jsxs("select",{value:re,onChange:Q=>le(Q.target.value),className:"w-full bg-slate-900 border border-slate-600 rounded px-3 py-2 text-white text-sm",children:[b.jsx("option",{value:"",children:"--  --"}),e.filter(Q=>Q.type.includes("modal")||Q.type.includes("toast")).map(Q=>b.jsxs("option",{value:Q.id,children:[Q.name," (",Q.type,")"]},Q.id))]})]}),["trigger_cond","increment"].includes(B)&&b.jsxs("div",{className:"animate-in fade-in slide-in-from-top-2",children:[b.jsx("label",{className:"text-xs text-slate-400 font-bold block mb-1",children:" / "}),b.jsx("input",{value:de,onChange:Q=>pe(Q.target.value),className:"w-full bg-slate-900 border border-slate-600 rounded px-3 py-2 text-white text-sm",placeholder:": HP, 100, isUnloked..."})]})]}),i==="style"&&b.jsxs("div",{className:"space-y-6",children:[b.jsxs("div",{className:"flex items-center justify-between bg-slate-700/30 p-3 rounded border border-slate-600",children:[b.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-300",children:[b.jsx(xb,{size:16}),"  (Z-Index)"]}),b.jsxs("div",{className:"flex items-center gap-2",children:[b.jsx("button",{onClick:()=>E(Q=>Math.max(0,Q-1)),className:"w-6 h-6 bg-slate-800 rounded text-white",children:"-"}),b.jsx("input",{type:"number",value:w,onChange:Q=>E(Number(Q.target.value)),className:"w-12 bg-slate-900 text-center text-white text-sm rounded border border-slate-600 py-0.5"}),b.jsx("button",{onClick:()=>E(Q=>Q+1),className:"w-6 h-6 bg-slate-800 rounded text-white",children:"+"})]})]}),b.jsxs("div",{className:"space-y-3",children:[b.jsx("label",{className:"text-xs text-slate-500 font-bold uppercase",children:" (Initial State)"}),b.jsxs("div",{className:"flex items-center justify-between p-2 hover:bg-slate-700/50 rounded cursor-pointer",onClick:()=>_(!M),children:[b.jsxs("span",{className:"text-sm text-white flex items-center gap-2",children:[b.jsx(o4,{size:14,className:M?"text-red-500":"text-slate-600"}),"  (Disabled)"]}),b.jsx("div",{className:`w-8 h-4 rounded-full relative transition-colors ${M?"bg-red-600":"bg-slate-600"}`,children:b.jsx("div",{className:`absolute top-0.5 w-3 h-3 bg-white rounded-full transition-all ${M?"left-4.5":"left-0.5"}`})})]}),b.jsxs("div",{className:"flex items-center justify-between p-2 hover:bg-slate-700/50 rounded cursor-pointer",onClick:()=>A(!O),children:[b.jsxs("span",{className:"text-sm text-white flex items-center gap-2",children:[b.jsx(wb,{size:14,className:O?"text-yellow-500":"text-slate-600"})," / (Active)"]}),b.jsx("div",{className:`w-8 h-4 rounded-full relative transition-colors ${O?"bg-yellow-600":"bg-slate-600"}`,children:b.jsx("div",{className:`absolute top-0.5 w-3 h-3 bg-white rounded-full transition-all ${O?"left-4.5":"left-0.5"}`})})]}),b.jsxs("div",{className:"flex items-center justify-between p-2 hover:bg-slate-700/50 rounded cursor-pointer",onClick:()=>z(!R),children:[b.jsx("span",{className:"text-sm text-white flex items-center gap-2",children:"  (Visible)"}),b.jsx("div",{className:`w-8 h-4 rounded-full relative transition-colors ${R?"bg-emerald-600":"bg-slate-600"}`,children:b.jsx("div",{className:`absolute top-0.5 w-3 h-3 bg-white rounded-full transition-all ${R?"left-4.5":"left-0.5"}`})})]})]})]})]}),b.jsxs("div",{className:"p-4 border-t border-slate-700 flex justify-end gap-3 bg-slate-900/50",children:[b.jsx("button",{onClick:r,className:"px-4 py-2 text-slate-400 hover:text-white text-sm",children:"Cancel"}),b.jsx("button",{onClick:ee,className:"px-6 py-2 bg-purple-600 hover:bg-purple-500 text-white rounded font-bold text-sm shadow-lg shadow-purple-900/20",children:"Save Changes"})]})]})})}function uU({page:t,allPages:e,allAssets:n=SN,activeModalId:r,globalVars:i,onBack:s,onUpdate:o,onInteraction:a}){const[c,f]=G.useState(t),[d,p]=G.useState(null),[m,g]=G.useState(null),[v,S]=G.useState(null),[C,x]=G.useState(null),w=G.useRef(null),E=G.useRef(null);G.useEffect(()=>{f(t),p(null),g(null),S(null)},[t]);const M=r?e.find(ee=>ee.id===r):null,_=ee=>{const ie={...c,...ee};f(ie),o(ie)},O=ee=>{ee.preventDefault();const ie=ee.dataTransfer.getData("uicomponent");if(!ie)return;const L=w.current;if(L)try{const $=JSON.parse(ie),K=L.getBoundingClientRect(),Z=ee.clientX-K.left,ge=ee.clientY-K.top,Q=2,Qe={id:Br(),name:$.label||"",type:"sprite",src:$.id,x:Z-$.w*Q/2,y:ge-$.h*Q/2,width:$.w*Q,height:$.h*Q,zIndex:c.components.length+10,customScale:1,state:{isVisible:!0,isActive:!1,isDisabled:!1},interaction:{type:"none"}};_({components:[...c.components,Qe]}),p(Qe.id)}catch($){console.error($)}},A=ee=>{ee.preventDefault()},R=(ee,ie="")=>{const L=c.width/2-100,$=c.height/2-50,K=["image","video","audio","sprite"].includes(ee),Z={id:Br(),name:`${ee}`,type:ee,src:K?ie:void 0,text:K?void 0:ie,x:L,y:$,width:ee==="status"?128:200,height:ee==="status"?40:150,zIndex:20,customScale:1,state:{isVisible:!0},interaction:{type:"none"}};_({components:[...c.components,Z]})},z=(ee,ie)=>{const L=c.components.map($=>$.id===ee?{...$,...ie}:$);_({components:L})},B=(ee,ie)=>{const L=ee;S({x:L.clientX,y:L.clientY,componentId:ie})},te=ee=>{const ie=c.components.filter(L=>L.id!==ee);_({components:ie}),S(null)},re=()=>{p(null),S(null),g(null)},le=async()=>{if(w.current)try{const ee=await xE(w.current,{pixelRatio:2}),ie=document.createElement("a");ie.download=`${c.name}.png`,ie.href=ee,ie.click()}catch{}},de=ee=>{var L;const ie=(L=ee.target.files)==null?void 0:L[0];if(ie){const $=new FileReader;$.onload=K=>{var ge;let Z="image";ie.type.startsWith("video/")&&(Z="video"),ie.type.startsWith("audio/")&&(Z="audio"),R(Z,(ge=K.target)==null?void 0:ge.result)},$.readAsDataURL(ie)}ee.target.value=""},pe=(ee,ie=!1)=>ee.map(L=>b.jsx(lU,{component:L,assetConfig:n.find($=>$.id===L.src),isSelected:d===L.id,isMoving:m===L.id,scale:1,globalVars:i,onUpdate:ie?()=>{}:z,onSelect:$=>{ie||(p(L.id),S(null))},onContextMenu:$=>{ie||B($,L.id)},onInteraction:a},L.id));return b.jsxs("div",{className:"flex h-full w-full bg-[#121212] overflow-hidden flex-col",onClick:re,children:[b.jsx("input",{type:"file",ref:E,onChange:de,className:"hidden"}),b.jsxs("div",{className:"h-14 bg-slate-800 border-b border-slate-700 flex items-center justify-between px-4 shrink-0 z-20",children:[b.jsxs("div",{className:"flex items-center gap-4",children:[b.jsx("button",{onClick:s,className:"p-2 hover:bg-slate-700 rounded-lg text-slate-300",children:b.jsx(qj,{size:20})}),b.jsx("input",{value:c.name,onChange:ee=>_({name:ee.target.value}),className:"bg-transparent text-white font-bold outline-none border-b border-transparent focus:border-purple-500 px-1"})]}),b.jsxs("div",{className:"flex gap-2",children:[b.jsx("button",{onClick:()=>R("text"),className:"p-2 hover:bg-slate-700 rounded text-slate-300",title:"",children:b.jsx(jE,{size:18})}),b.jsx("button",{onClick:()=>{var ee;return(ee=E.current)==null?void 0:ee.click()},className:"p-2 hover:bg-slate-700 rounded text-slate-300",title:"",children:b.jsx(PE,{size:18})}),b.jsx("button",{onClick:le,className:"p-2 hover:bg-blue-600 bg-blue-700 rounded text-white",title:"",children:b.jsx(hd,{size:18})})]})]}),b.jsx("div",{className:"flex-1 flex overflow-hidden",children:b.jsx("div",{className:"flex-1 bg-[#0f0f0f] relative overflow-auto flex p-10 custom-scrollbar",children:b.jsx("div",{className:"min-w-full min-h-full flex items-center justify-center pointer-events-none",children:b.jsxs("div",{ref:w,className:"shadow-2xl relative border border-slate-800 transition-all shrink-0 pointer-events-auto",style:{width:c.width,height:c.height,backgroundColor:c.backgroundColor||"#1e1e1e"},onDrop:O,onDragOver:A,onClick:ee=>{ee.stopPropagation(),re()},children:[pe(c.components),M&&b.jsx("div",{className:"absolute inset-0 bg-black/60 z-[2000] flex items-center justify-center animate-in fade-in",children:b.jsx("div",{className:"relative shadow-2xl overflow-hidden animate-in zoom-in-95",style:{width:M.width,height:M.height,backgroundColor:M.backgroundColor||"#2a2a2a",border:"1px solid #444"},children:pe(M.components,!0)})})]})})})}),v&&b.jsxs("div",{className:"fixed bg-slate-800 border border-slate-600 rounded shadow-xl py-1 w-36 z-[3000]",style:{top:v.y,left:v.x},onClick:ee=>ee.stopPropagation(),children:[b.jsxs("button",{onClick:()=>{g(m===v.componentId?null:v.componentId),S(null)},className:"w-full text-left px-4 py-2 text-sm text-white hover:bg-emerald-600 transition-colors flex items-center gap-2",children:[m===v.componentId?b.jsx(w4,{size:14}):b.jsx(DE,{size:14}),m===v.componentId?"":""]}),b.jsx("div",{className:"h-px bg-slate-700 my-1"}),b.jsx("button",{onClick:()=>{x(v.componentId),S(null)},className:"w-full text-left px-4 py-2 text-sm text-white hover:bg-purple-600 transition-colors",children:" "}),b.jsx("div",{className:"h-px bg-slate-700 my-1"}),b.jsx("button",{onClick:()=>te(v.componentId),className:"w-full text-left px-4 py-2 text-sm text-red-400 hover:bg-slate-700 transition-colors",children:" "})]}),C&&b.jsx(aU,{component:c.components.find(ee=>ee.id===C),allPages:e,onClose:()=>x(null),onSave:ee=>z(C,ee)})]})}function cU({onSave:t,onClose:e}){const[n,r]=G.useState(""),[i,s]=G.useState(""),[o,a]=G.useState(0),[c,f]=G.useState(0),[d,p]=G.useState(64),[m,g]=G.useState(64),v=C=>{var w;const x=(w=C.target.files)==null?void 0:w[0];if(x){const E=new FileReader;E.onload=M=>{var A;const _=(A=M.target)==null?void 0:A.result;r(_);const O=new Image;O.onload=()=>{p(O.width>200?100:O.width),g(O.height>200?100:O.height)},O.src=_},E.readAsDataURL(x)}},S=()=>{if(!n)return;const C={id:`custom_${Br().slice(0,8)}`,label:i,imageUrl:n,x:Number(o),y:Number(c),w:Number(d),h:Number(m)};t(C)};return b.jsx("div",{className:"fixed inset-0 z-[2000] bg-black/80 backdrop-blur-sm flex items-center justify-center",onClick:e,children:b.jsxs("div",{className:"bg-slate-800 w-[900px] h-[600px] rounded-xl border border-slate-700 flex flex-col shadow-2xl overflow-hidden animate-in zoom-in-95",onClick:C=>C.stopPropagation(),children:[b.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-slate-700 bg-slate-900",children:[b.jsxs("h3",{className:"text-white font-bold flex items-center gap-2",children:[b.jsx(hd,{className:"text-purple-500",size:20})," (Asset Slicer)"]}),b.jsx("button",{onClick:e,className:"text-slate-400 hover:text-white",children:b.jsx(zE,{size:20})})]}),b.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[b.jsx("div",{className:"flex-1 bg-[#1a1a1a] p-8 overflow-auto flex items-center justify-center relative pattern-grid",children:n?b.jsxs("div",{className:"relative inline-block shadow-2xl border border-slate-600 bg-slate-800",children:[b.jsx("img",{src:n,className:"max-w-none block",style:{imageRendering:"pixelated"},alt:"Source",draggable:!1}),b.jsx("div",{className:"absolute border-2 border-red-500 bg-red-500/20 pointer-events-none transition-all duration-75",style:{left:o,top:c,width:d,height:m},children:b.jsxs("div",{className:"absolute -top-6 left-0 bg-red-500 text-white text-[10px] px-1 rounded font-mono whitespace-nowrap",children:["x:",o,", y:",c,", ",d,"x",m]})})]}):b.jsxs("div",{className:"text-slate-500 flex flex-col items-center gap-2",children:[b.jsx(hd,{size:48,className:"opacity-20"}),b.jsx("p",{children:""})]})}),b.jsxs("div",{className:"w-80 bg-slate-900 border-l border-slate-700 p-6 flex flex-col gap-6 overflow-y-auto",children:[b.jsxs("div",{className:"space-y-3",children:[b.jsxs("label",{className:"text-xs font-bold text-slate-400 uppercase flex items-center gap-2",children:[b.jsx("span",{className:"w-4 h-4 rounded-full bg-slate-700 text-white flex items-center justify-center text-[10px]",children:"1"}),""]}),b.jsxs("label",{className:"flex flex-col items-center justify-center w-full h-24 border-2 border-dashed border-slate-700 hover:border-emerald-500 hover:bg-slate-800 rounded-lg cursor-pointer transition-all group",children:[b.jsx(V4,{size:24,className:"text-slate-500 group-hover:text-emerald-400 mb-2"}),b.jsx("span",{className:"text-xs text-slate-400 group-hover:text-white",children:""}),b.jsx("input",{type:"file",onChange:v,className:"hidden",accept:"image/*"})]})]}),b.jsxs("div",{className:"space-y-4",children:[b.jsxs("label",{className:"text-xs font-bold text-emerald-500 uppercase flex items-center gap-2",children:[b.jsx("span",{className:"w-4 h-4 rounded-full bg-emerald-900 text-emerald-400 flex items-center justify-center text-[10px]",children:"2"})," (Source Rect)"]}),b.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[b.jsxs("div",{className:"space-y-1",children:[b.jsx("span",{className:"text-[10px] text-slate-500 font-mono",children:"X ()"}),b.jsx("input",{type:"number",value:o,onChange:C=>a(Number(C.target.value)),className:"w-full bg-slate-800 border border-slate-600 rounded px-2 py-1.5 text-white text-sm font-mono focus:border-emerald-500 outline-none"})]}),b.jsxs("div",{className:"space-y-1",children:[b.jsx("span",{className:"text-[10px] text-slate-500 font-mono",children:"Y ()"}),b.jsx("input",{type:"number",value:c,onChange:C=>f(Number(C.target.value)),className:"w-full bg-slate-800 border border-slate-600 rounded px-2 py-1.5 text-white text-sm font-mono focus:border-emerald-500 outline-none"})]}),b.jsxs("div",{className:"space-y-1",children:[b.jsx("span",{className:"text-[10px] text-slate-500 font-mono",children:"Width ()"}),b.jsx("input",{type:"number",value:d,onChange:C=>p(Number(C.target.value)),className:"w-full bg-slate-800 border border-slate-600 rounded px-2 py-1.5 text-white text-sm font-mono focus:border-emerald-500 outline-none"})]}),b.jsxs("div",{className:"space-y-1",children:[b.jsx("span",{className:"text-[10px] text-slate-500 font-mono",children:"Height ()"}),b.jsx("input",{type:"number",value:m,onChange:C=>g(Number(C.target.value)),className:"w-full bg-slate-800 border border-slate-600 rounded px-2 py-1.5 text-white text-sm font-mono focus:border-emerald-500 outline-none"})]})]}),b.jsx("div",{className:"text-[10px] text-slate-500 leading-tight",children:""})]}),b.jsxs("div",{className:"space-y-3 pt-4 border-t border-slate-800 mt-auto",children:[b.jsx("label",{className:"text-xs font-bold text-slate-400 uppercase",children:""}),b.jsx("input",{value:i,onChange:C=>s(C.target.value),className:"w-full bg-slate-800 border border-slate-600 rounded px-3 py-2 text-white text-sm focus:border-purple-500 outline-none",placeholder:""}),b.jsxs("button",{onClick:S,disabled:!n,className:"w-full bg-purple-600 hover:bg-purple-500 disabled:opacity-50 disabled:cursor-not-allowed text-white py-3 rounded-lg font-bold flex items-center justify-center gap-2 shadow-lg shadow-purple-900/20 transition-all active:scale-95",children:[b.jsx(D4,{size:16})," "]})]})]})]})]})})}const fU=[{label:"PC ",type:"screen",w:1280,h:720,icon:RE,desc:""},{label:"iPhone",type:"screen",w:390,h:844,icon:L4,desc:""},{label:"Tablet",type:"screen",w:1024,h:768,icon:F4,desc:"/"},{label:"",type:"modal_center",w:500,h:400,icon:t4,desc:"/"},{label:"",type:"modal_bottom",w:390,h:300,icon:IE,desc:""},{label:"",type:"sidebar_left",w:300,h:720,icon:M4,desc:""},{label:"",type:"toast",w:200,h:60,icon:z4,desc:""}];function dU({data:t,onUpdate:e}){const[n,r]=G.useState(null),[i,s]=G.useState(!1),[o,a]=G.useState(null),[c,f]=G.useState(!1),[d,p]=G.useState({HP:100,GOLD:0,KEY:0}),m=t.assets||[],g=[...SN,...m],v=(E,M,_)=>{E==="navigate"&&M&&(r(M),a(null)),E==="open_modal"&&M&&a(M),E==="close_modal"&&a(null),E==="back"&&o&&a(null),E==="increment"&&_&&p(O=>({...O,[_]:(O[_]||0)+1}))},S=E=>{const M={id:Br(),name:`${E.label} ${t.pages.length+1}`,type:E.type,width:E.w,height:E.h,backgroundColor:E.type.includes("modal")?"#2a2a2a":"#1e1e1e",components:[]};e({...t,pages:[...t.pages,M]}),s(!1)},C=E=>{const M=[...m,E];e({...t,assets:M}),f(!1)},x=(E,M)=>{E.stopPropagation(),confirm("")&&e({...t,pages:t.pages.filter(_=>_.id!==M)})},w=(E,M)=>{E.stopPropagation(),e({...t,startPageId:M})};if(n){const E=t.pages.find(M=>M.id===n);return E?b.jsxs("div",{className:"flex h-full w-full bg-[#121212] overflow-hidden",children:[b.jsxs("div",{className:"w-64 bg-slate-900 border-r border-slate-700 p-4 flex flex-col gap-4 select-none shrink-0 z-10 h-full",children:[b.jsxs("div",{className:"flex justify-between items-center mb-1",children:[b.jsx("h3",{className:"text-slate-400 text-xs font-bold uppercase",children:"UI "}),b.jsx("button",{onClick:()=>f(!0),className:"p-1.5 hover:bg-slate-700 rounded text-emerald-500 hover:text-emerald-400 transition-colors",title:"",children:b.jsx(pd,{size:16})})]}),b.jsx("div",{className:"flex-1 min-h-0 overflow-y-auto custom-scrollbar",children:b.jsx("div",{className:"grid grid-cols-2 gap-3 pb-4",children:g.map(M=>b.jsxs("div",{className:"flex flex-col items-center gap-2 p-2 bg-slate-800 rounded border border-slate-700 hover:border-emerald-500 cursor-grab active:cursor-grabbing transition-all group",draggable:!0,onDragStart:_=>{_.dataTransfer.setData("uicomponent",JSON.stringify({type:"sprite",...M}))},children:[b.jsx("div",{className:"w-full h-16 flex items-center justify-center overflow-hidden bg-slate-900/50 rounded",children:b.jsx(kN,{config:M,scale:1,className:"max-w-full max-h-full object-contain"})}),b.jsx("span",{className:"text-[10px] text-slate-500 group-hover:text-slate-300 text-center break-all leading-tight w-full truncate",children:M.label})]},M.id))})})]}),b.jsx("div",{className:"flex-1 overflow-hidden",children:b.jsx(uU,{page:E,allPages:t.pages,allAssets:g,activeModalId:o,globalVars:d,onBack:()=>{r(null),a(null)},onUpdate:M=>{const _=t.pages.map(O=>O.id===M.id?M:O);e({...t,pages:_})},onInteraction:v},n)}),c&&b.jsx(cU,{onSave:C,onClose:()=>f(!1)})]}):(r(null),null)}return b.jsxs("div",{className:"flex-1 bg-slate-900 p-8 overflow-y-auto h-full relative",children:[b.jsx("div",{className:"flex justify-between items-center mb-8",children:b.jsxs("h2",{className:"text-3xl font-bold text-white flex items-center gap-3",children:[b.jsx(RE,{size:32,className:"text-purple-500"})," UI  Pro"]})}),b.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-6",children:[b.jsxs("button",{onClick:()=>s(!0),className:"aspect-video bg-slate-800/50 border-2 border-dashed border-slate-700 hover:border-emerald-500 rounded-xl flex flex-col items-center justify-center group",children:[b.jsx(pd,{size:32,className:"text-slate-500 group-hover:text-white"}),b.jsx("span",{className:"text-slate-500 mt-2",children:""})]}),t.pages.map(E=>b.jsxs("div",{onClick:()=>r(E.id),className:`aspect-video bg-slate-800 border-2 rounded-xl relative group cursor-pointer hover:-translate-y-1 transition-all ${t.startPageId===E.id?"border-purple-500":"border-slate-700"}`,children:[b.jsxs("div",{className:"w-full h-full flex flex-col items-center justify-center text-white font-bold bg-slate-900/50",children:[E.name,b.jsx("span",{className:"text-[10px] text-slate-500 font-normal uppercase mt-1",children:E.type})]}),b.jsxs("div",{className:"absolute top-2 right-2 flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[b.jsx("button",{onClick:M=>w(M,E.id),className:"p-1.5 bg-slate-600 rounded text-white hover:bg-purple-600",children:b.jsx(A4,{size:14})}),b.jsx("button",{onClick:M=>x(M,E.id),className:"p-1.5 bg-slate-600 rounded text-white hover:bg-red-600",children:b.jsx(LE,{size:14})})]}),t.startPageId===E.id&&b.jsx("div",{className:"absolute top-2 left-2 bg-purple-600 text-[10px] px-2 rounded font-bold",children:"HOME"})]},E.id))]}),i&&b.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-[1000] backdrop-blur-sm",onClick:()=>s(!1),children:b.jsxs("div",{className:"bg-slate-800 p-6 rounded-xl w-[800px] border border-slate-700 shadow-2xl",onClick:E=>E.stopPropagation(),children:[b.jsx("h3",{className:"text-white font-bold mb-4 text-xl",children:""}),b.jsx("div",{className:"grid grid-cols-4 gap-4",children:fU.map((E,M)=>b.jsxs("div",{onClick:()=>S(E),className:"bg-slate-700/50 p-4 rounded-lg cursor-pointer hover:bg-emerald-600/20 hover:border-emerald-500 border border-slate-600 text-center flex flex-col items-center justify-center h-32 group transition-all",children:[b.jsx("p",{className:"text-slate-300 group-hover:text-white font-bold mb-1",children:E.label}),b.jsxs("span",{className:"text-[10px] text-slate-500",children:[E.w,"x",E.h]})]},M))})]})})]})}function hU(){const[t,e]=G.useState(null),[n,r]=G.useState(null),[i,s]=G.useState("saved"),o=c=>{e(c),r(i3(c.id))},a=()=>{t&&n&&Om(t.id,n),e(null),r(null)};return G.useEffect(()=>{if(!t||!n)return;s("unsaved");const c=setTimeout(()=>{s("saving"),Om(t.id,n),setTimeout(()=>s("saved"),500)},2e3);return()=>clearTimeout(c)},[n]),G.useEffect(()=>{const c=f=>{(f.ctrlKey||f.metaKey)&&f.key==="s"&&(f.preventDefault(),t&&n&&(s("saving"),Om(t.id,n),setTimeout(()=>s("saved"),500)))};return window.addEventListener("keydown",c),()=>window.removeEventListener("keydown",c)},[t,n]),t?n?b.jsx("div",{className:"flex h-screen w-screen bg-slate-900 text-slate-200 overflow-hidden",children:b.jsx(pU,{project:t,content:n,setContent:r,onBack:a,saveStatus:i})}):b.jsx("div",{className:"h-screen w-screen bg-slate-900 text-white flex items-center justify-center",children:"..."}):b.jsx(s3,{onOpenProject:o})}function pU({project:t,content:e,setContent:n,onBack:r,saveStatus:i}){const[s,o]=G.useState("brainstorm"),a=(m,g)=>{n(v=>v?{...v,brainstorm:{items:m,connections:g}}:null)},c=m=>{n(g=>g?{...g,members:m}:null)},f=m=>{n(g=>g?{...g,todos:m}:null)},d=m=>{n(g=>g?{...g,docs:m}:null)},p=m=>{n(g=>g?{...g,ui:m}:null)};return b.jsxs(b.Fragment,{children:[b.jsxs("aside",{className:"w-64 shrink-0 flex flex-col bg-slate-800 border-r border-slate-700 z-50",children:[b.jsxs("div",{className:"h-14 flex items-center px-4 border-b border-slate-700 gap-3",children:[b.jsx("button",{onClick:r,className:"p-2 hover:bg-slate-700 rounded text-slate-400 hover:text-white transition-colors",children:""}),b.jsx("div",{className:"font-bold text-white truncate flex-1",children:t.name})]}),b.jsxs("nav",{className:"flex-1 p-4 space-y-2",children:[b.jsx(kf,{label:" ",isActive:s==="brainstorm",onClick:()=>o("brainstorm")}),b.jsx(kf,{label:" ",isActive:s==="team",onClick:()=>o("team")}),b.jsx(kf,{label:" ",isActive:s==="docs",onClick:()=>o("docs")}),b.jsx(kf,{label:" UI ",isActive:s==="ui",onClick:()=>o("ui")})]}),b.jsx("div",{className:"p-4 text-xs border-t border-slate-700 text-center",children:i==="saving"?" ...":" "})]}),b.jsxs("main",{className:"flex-1 relative overflow-hidden bg-slate-900",children:[s==="brainstorm"&&b.jsx(X4,{initialItems:e.brainstorm.items||[],initialConnections:e.brainstorm.connections||[],onDataChange:a},t.id+"-brainstorm"),s==="team"&&b.jsx(Y4,{members:e.members||[],todos:e.todos||[],onUpdateMembers:c,onUpdateTodos:f}),s==="docs"&&b.jsx(sU,{initialDocs:e.docs||[],onUpdate:d}),s==="ui"&&b.jsx(dU,{data:e.ui||{pages:[]},onUpdate:p})]})]})}function kf({label:t,isActive:e,onClick:n}){return b.jsx("button",{onClick:n,className:`w-full text-left px-4 py-3 rounded-md transition-all ${e?"bg-emerald-600 text-white shadow-md":"hover:bg-slate-700 text-slate-400 hover:text-slate-200"}`,children:t})}pg.createRoot(document.getElementById("root")).render(b.jsx(Ks.StrictMode,{children:b.jsx(hU,{})}));window.ipcRenderer.on("main-process-message",(t,e)=>{console.log(e)});
